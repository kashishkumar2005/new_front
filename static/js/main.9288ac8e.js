/*! For license information please see main.9288ac8e.js.LICENSE.txt */
(()=>{var e={356(e,t,n){e.exports=n(9645).last},418(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"===typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const n=String(t);return"0"===n&&Object.is(Number(t),-0)?"-0":n}},551(){},579(e,t,n){"use strict";e.exports=n(2799)},870(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},1203(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&r.isLength(e.length)}},1234(){},1293(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof n&&(n={});const{leading:a=!1,trailing:i=!0,maxWait:o}=n,s=Array(2);let l;a&&(s[0]="leading"),i&&(s[1]="trailing");let c=null;const u=r.debounce(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l=e.apply(this,n),c=null},t,{edges:s}),h=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null!=o&&(null===c&&(c=Date.now()),Date.now()-c>=o)?(l=e.apply(this,n),c=Date.now(),u.cancel(),u.schedule(),l):(u.apply(this,n),l)};return h.cancel=u.cancel,h.flush=()=>(u.flush(),l),h}},1444(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(418),a=n(3272);t.toPath=function(e){if(Array.isArray(e))return e.map(a.toKey);if("symbol"===typeof e)return[e];const t=[],n=(e=r.toString(e)).length;if(0===n)return t;let i=0,o="",s="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),i++);i<n;){const r=e[i];s?"\\"===r&&i+1<n?(i++,o+=e[i]):r===s?s="":o+=r:l?'"'===r||"'"===r?s=r:"]"===r?(l=!1,t.push(o),o=""):o+=r:"["===r?(l=!0,o&&(t.push(o),o="")):"."===r?o&&(t.push(o),o=""):o+=r,i++}return o&&t.push(o),t}},2086(e,t,n){"use strict";n(5082)},2104(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1203),a=n(9921);t.isArrayLikeObject=function(e){return a.isObjectLike(e)&&r.isArrayLike(e)}},2132(e,t,n){"use strict";var r=n(2897).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(870),i=n(4803),o=n(9972);function s(e,t,n,u){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,n,r){if(null==t)return!0;if(Array.isArray(t))return l(e,t,n,r);if(t instanceof Map)return function(e,t,n,r){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,i]of t.entries()){if(!1===n(e.get(a),i,a,e,t,r))return!1}return!0}(e,t,n,r);if(t instanceof Set)return c(e,t,n,r);const a=Object.keys(t);if(null==e||i.isPrimitive(e))return 0===a.length;if(0===a.length)return!0;if(null!==r&&void 0!==r&&r.has(t))return r.get(t)===e;null===r||void 0===r||r.set(t,e);try{for(let o=0;o<a.length;o++){const s=a[o];if(!i.isPrimitive(e)&&!(s in e))return!1;if(void 0===t[s]&&void 0!==e[s])return!1;if(null===t[s]&&null!==e[s])return!1;if(!n(e[s],t[s],s,e,t,r))return!1}return!0}finally{null===r||void 0===r||r.delete(t)}}(e,t,n,u);case"function":return Object.keys(t).length>0?s(e,r({},t),n,u):o.eq(e,t);default:return a.isObject(e)?"string"!==typeof t||""===t:o.eq(e,t)}}function l(e,t,n,r){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let i=0;i<t.length;i++){const o=t[i];let s=!1;for(let l=0;l<e.length;l++){if(a.has(l))continue;let c=!1;if(n(e[l],o,i,e,t,r)&&(c=!0),c){a.add(l),s=!0;break}}if(!s)return!1}return!0}function c(e,t,n,r){return 0===t.size||e instanceof Set&&l([...e],[...t],n,r)}t.isMatchWith=function e(t,n,r){return"function"!==typeof r?e(t,n,()=>{}):s(t,n,function e(t,n,a,i,o,l){const c=r(t,n,a,i,o,l);return void 0!==c?Boolean(c):s(t,n,e,l)},new Map)},t.isSetMatch=c},2204(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5316),a=n(7312),i=n(3799);t.sortBy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const s=n.length;return s>1&&i.isIterateeCall(e,n[0],n[1])?n=[]:s>2&&i.isIterateeCall(n[0],n[1],n[2])&&(n=[n[0]]),r.orderBy(e,a.flatten(n),["asc"])}},2330(e,t,n){"use strict";var r=n(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),a=r[0].inst,u=r[1];return s(function(){a.value=n,a.getSnapshot=t,c(a)&&u({inst:a})},[e,n,t]),o(function(){return c(a)&&u({inst:a}),e(function(){c(a)&&u({inst:a})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},2430(e,t,n){var r;!function(a,i,o){var s,l=256,c=o.pow(l,6),u=o.pow(2,52),h=2*u,d=255;function p(e,t,n){var r=[],d=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(a.crypto||a.msCrypto).getRandomValues(e)),v(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,v(i)]}}():e,3),r),p=new f(r),b=function(){for(var e=p.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,y(v(p.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(o.random=e,t):e})(b,d,"global"in t?t.global:this==o,t.state)}function f(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<l;)o[a]=a++;for(a=0;a<l;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*l+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function y(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(y(o.random(),i),e.exports){e.exports=p;try{s=n(1234)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},2489(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2715(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9599),a=n(7330),i=n(3808),o=n(8845);t.iteratee=function(e){if(null==e)return r.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?o.matchesProperty(e[0],e[1]):i.matches(e);case"string":case"symbol":case"number":return a.property(e)}}},2777(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2799(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},2897(e,t,n){var r=n(3693);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3272(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},3693(e,t,n){var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3757(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4704),a=n(1203),i=n(870),o=n(9972);t.isIterateeCall=function(e,t,n){return!!i.isObject(n)&&(!!("number"===typeof t&&a.isArrayLike(n)&&r.isIndex(t)&&t<n.length||"string"===typeof t&&t in n)&&o.eq(n[t],e))}},3808(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),a=n(5261);t.matches=function(e){return e=a.cloneDeep(e),t=>r.isMatch(t,e)}},3821(e,t,n){e.exports=n(2204).sortBy},3879(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var a=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var n=a;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))break e;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function l(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}i("Symbol",function(e){function t(e,t){this.g=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+a++,r)}}),i("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),i=0;i<n.length;i++){var s=a[n[i]];"function"===typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e});var c,u="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var h;e:{var d={};try{d.__proto__={a:!0},h=d.a;break e}catch(Je){}h=!1}c=h?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var p=c;function f(e,t){if(e.prototype=u(t.prototype),e.prototype.constructor=e,p)p(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ea=t.prototype}function m(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function g(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function y(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function v(e,t,n){return e.g=n,{value:t}}function b(e){this.g=new m,this.h=e}function x(e,t,n,r){try{var a=t.call(e.g.i,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.l=!1,a;var i=a.value}catch(o){return e.g.i=null,y(e.g,o),w(e)}return e.g.i=null,r.call(e.g,i),w(e)}function w(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,y(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function k(e){this.next=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=w(e)),t},this.throw=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.throw,t,e.g.o):(y(e.g,t),t=w(e)),t},this.return=function(t){return function(e,t){g(e.g);var n=e.g.i;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),w(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function S(e,t){return t=new k(new b(t)),p&&e.prototype&&p(t,e.prototype),t}m.prototype.o=function(e){this.h=e},m.prototype.return=function(e){this.j={return:e},this.g=this.s};var N="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};i("Object.assign",function(e){return e||N}),i("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=a.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.m(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;i(function(){if(e.B()){var t=a.console;"undefined"!==typeof t&&t.error(e.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var e=a.CustomEvent,t=a.Event,n=a.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(n){i(n)}}:t}var a,i,o=new t(function(e,t){a=e,i=t});return this.J(r(e,a),r(n,i)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var a=s(e),i=a.next();!i.done;i=a.next())r(i.value).J(t,n)})},t.all=function(e){var n=s(e),a=n.next();return a.done?r([]):new t(function(e,t){function i(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,r(a.value).J(i(o.length-1),t),a=n.next()}while(!a.done)})},t}),i("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}}),i("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var a=n[t];if(a===e||Object.is(a,e))return!0}return!1}}),i("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}),i("Array.prototype.keys",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,function(e){return e})}});var T=this||self;function I(e,t){e=e.split(".");var n,r=T;e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function E(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var C,A,O="undefined"!==typeof TextDecoder,_="undefined"!==typeof TextEncoder;function M(e){if(_)e=(A||(A=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,r=new Uint8Array(3*e.length),a=0;a<e.length;a++){var i=e.charCodeAt(a);if(128>i)r[n++]=i;else{if(2048>i)r[n++]=i>>6|192;else{if(55296<=i&&57343>=i){if(56319>=i&&a<e.length){var o=e.charCodeAt(++a);if(56320<=o&&57343>=o){i=1024*(i-55296)+o-56320+65536,r[n++]=i>>18|240,r[n++]=i>>12&63|128,r[n++]=i>>6&63|128,r[n++]=63&i|128;continue}a--}if(t)throw Error("Found an unpaired surrogate");i=65533}r[n++]=i>>12|224,r[n++]=i>>6&63|128}r[n++]=63&i|128}}e=r.subarray(0,n)}return e}var R={},D=null;function F(e,t){void 0===t&&(t=0),L(),t=R[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",a=0,i=0;a<e.length-2;a+=3){var o=e[a],s=e[a+1],l=e[a+2],c=t[o>>2];o=t[(3&o)<<4|s>>4],s=t[(15&s)<<2|l>>6],l=t[63&l],n[i++]=c+o+s+l}switch(c=0,l=r,e.length-a){case 2:l=t[(15&(c=e[a+1]))<<2]||r;case 1:e=e[a],n[i]=t[e>>2]+t[(3&e)<<4|c>>4]+l+r}return n.join("")}function P(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),a=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),a=D[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}L();for(var r=0;;){var a=n(-1),i=n(0),o=n(64),s=n(64);if(64===s&&-1===a)break;t(a<<2|i>>4),64!=o&&(t(i<<4&240|o>>2),64!=s&&t(o<<6&192|s))}}(e,function(e){r[a++]=e}),r.subarray(0,a)}function L(){if(!D){D={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));R[n]=r;for(var a=0;a<r.length;a++){var i=r[a];void 0===D[i]&&(D[i]=a)}}}}var z,j="function"===typeof Uint8Array.prototype.slice;function B(e,t,n){return t===n?z||(z=new Uint8Array(0)):j?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var U=0;function W(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=t,e&&V(this,e)}function V(e,t){t=t.constructor===Uint8Array?t:t.constructor===ArrayBuffer||t.constructor===Array?new Uint8Array(t):t.constructor===String?P(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e.h=t,e.j=0,e.i=e.h.length,e.g=e.j}function G(e){var t=e.h,n=t[e.g],r=127&n;return 128>n?(e.g+=1,r):(r|=(127&(n=t[e.g+1]))<<7,128>n?(e.g+=2,r):(r|=(127&(n=t[e.g+2]))<<14,128>n?(e.g+=3,r):(r|=(127&(n=t[e.g+3]))<<21,128>n?(e.g+=4,r):(r|=(15&(n=t[e.g+4]))<<28,128>n?(e.g+=5,r>>>0):(e.g+=5,128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&e.g++,r)))))}function H(e){var t=e.h[e.g],n=e.h[e.g+1],r=e.h[e.g+2],a=e.h[e.g+3];return e.g+=4,e=2*((n=(t|n<<8|r<<16|a<<24)>>>0)>>31)+1,t=n>>>23&255,n&=8388607,255==t?n?NaN:1/0*e:0==t?e*Math.pow(2,-149)*n:e*Math.pow(2,t-150)*(n+Math.pow(2,23))}W.prototype.reset=function(){this.g=this.j};var K=[];function q(){this.g=new Uint8Array(64),this.h=0}function X(e,t){for(;127<t;)e.push(127&t|128),t>>>=7;e.push(t)}function Y(e){var t={},n=void 0!==t.N&&t.N;this.o={v:void 0!==t.v&&t.v},this.N=n,t=this.o,K.length?(n=K.pop(),t&&(n.v=t.v),e&&V(n,e),e=n):e=new W(e,t),this.g=e,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function Z(e){var t=e.g;if((t=t.g==t.i)||(t=e.j)||(t=(t=e.g).l||0>t.g||t.g>t.i),t)return!1;e.m=e.g.g;var n=7&(t=G(e.g));return 0!=n&&5!=n&&1!=n&&2!=n&&3!=n&&4!=n?(e.j=!0,!1):(e.i=t,e.l=t>>>3,e.h=n,!0)}function Q(e){switch(e.h){case 0:if(0!=e.h)Q(e);else{for(e=e.g;128&e.h[e.g];)e.g++;e.g++}break;case 1:1!=e.h?Q(e):(e=e.g).g+=8;break;case 2:if(2!=e.h)Q(e);else{var t=G(e.g);(e=e.g).g+=t}break;case 5:5!=e.h?Q(e):(e=e.g).g+=4;break;case 3:for(t=e.l;;){if(!Z(e)){e.j=!0;break}if(4==e.h){e.l!=t&&(e.j=!0);break}Q(e)}break;default:e.j=!0}}function J(e,t,n){var r=e.g.i,a=G(e.g),i=e.g.g+a;if(e.g.i=i,n(t,e),0!==(n=i-e.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+a+" bytes, instead read "+(a-n)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=i,e.g.i=r,t}function $(e){var t,n=G(e.g),r=(e=e.g).g;if(e.g+=n,e=e.h,O)(t=C)||(t=C=new TextDecoder("utf-8",{fatal:!1})),t=t.decode(e.subarray(r,r+n));else{n=r+n;for(var a,i,o,s=[],l=null;r<n;)128>(a=e[r++])?s.push(a):224>a?r>=n?s.push(65533):(i=e[r++],194>a||128!==(192&i)?(r--,s.push(65533)):s.push((31&a)<<6|63&i)):240>a?r>=n-1?s.push(65533):128!==(192&(i=e[r++]))||224===a&&160>i||237===a&&160<=i||128!==(192&(t=e[r++]))?(r--,s.push(65533)):s.push((15&a)<<12|(63&i)<<6|63&t):244>=a?r>=n-2?s.push(65533):128!==(192&(i=e[r++]))||0!==i-144+(a<<28)>>30||128!==(192&(t=e[r++]))||128!==(192&(o=e[r++]))?(r--,s.push(65533)):(a=(7&a)<<18|(63&i)<<12|(63&t)<<6|63&o,a-=65536,s.push(55296+(a>>10&1023),56320+(1023&a))):s.push(65533),8192<=s.length&&(l=E(l,s),s.length=0);t=E(l,s)}return t}function ee(){this.h=[],this.i=0,this.g=new q}function te(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function ne(e){var t=e.i+e.g.length();if(0===t)return new Uint8Array(0);t=new Uint8Array(t);for(var n=e.h,r=n.length,a=0,i=0;i<r;i++){var o=n[i];0!==o.length&&(t.set(o,a),a+=o.length)}return 0!==(r=(n=e.g).h)&&(t.set(n.g.subarray(0,r),a),n.h=0),e.h=[t],t}function re(e,t,n){if(null!=n){X(e.g,8*t+5),e=e.g;var r=n;0===(r=(n=0>r?1:0)?-r:r)?0<1/r?U=0:U=2147483648:isNaN(r)?U=2147483647:34028234663852886e22<r?U=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),U=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,U=(n<<31|t+127<<23|8388607&r)>>>0),n=U,e.push(n>>>0&255),e.push(n>>>8&255),e.push(n>>>16&255),e.push(n>>>24&255)}}q.prototype.push=function(e){if(!(this.h+1<this.g.length)){var t=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(t)}this.g[this.h++]=e},q.prototype.length=function(){return this.h},q.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,B(e,0,t)},Y.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var ae="function"===typeof Uint8Array;function ie(e,t,n){if(null!=e)return"object"===typeof e?ae&&e instanceof Uint8Array?n(e):oe(e,t,n):t(e)}function oe(e,t,n){if(Array.isArray(e)){for(var r=Array(e.length),a=0;a<e.length;a++)r[a]=ie(e[a],t,n);return Array.isArray(e)&&e.W&&ue(r),r}for(a in r={},e)r[a]=ie(e[a],t,n);return r}function se(e){return"number"===typeof e?isFinite(e)?e:String(e):e}var le,ce={W:{value:!0,configurable:!0}};function ue(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,ce),e}function he(e,t,n){var r=le;if(le=null,e||(e=r),r=this.constructor.ca,e||(e=r?[r]:[]),this.j=r?0:-1,this.i=null,this.g=e,e=(r=this.g.length)-1,!r||(null===(r=this.g[e])||"object"!=typeof r||Array.isArray(r)||ae&&r instanceof Uint8Array)?void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.h=null):this.l=Number.MAX_VALUE:(this.l=e-this.j,this.h=r),n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(e+=this.j,(r=this.g[e])?ue(r):this.g[e]=de):(pe(this),(r=this.h[e])?ue(r):this.h[e]=de)}var de=Object.freeze(ue([]));function pe(e){var t=e.l+e.j;e.g[t]||(e.h=e.g[t]={})}function fe(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.h?e.h[t]:void 0:e.g[t+e.j]}function me(e){var t=void 0!==t&&t,n=fe(e,1,t);return null==n&&(n=de),n===de&&ye(e,1,n=ue([]),t),n}function ge(e,t,n){return null==(e=null==(e=fe(e,t))?e:+e)?void 0===n?0:n:e}function ye(e,t,n,r){void 0!==r&&r||t>=e.l?(pe(e),e.h[t]=n):e.g[t+e.j]=n}function ve(e,t){e.i||(e.i={});var n=e.i[1];if(!n){var r=me(e);n=[];for(var a=0;a<r.length;a++)n[a]=new t(r[a]);e.i[1]=n}return n}function be(e,t,n,r){var a=ve(e,n);t=t||new n,e=me(e),void 0!=r?(a.splice(r,0,t),e.splice(r,0,xe(t,!1))):(a.push(t),e.push(xe(t,!1)))}function xe(e,t){if(e.i)for(var n in e.i){var r=e.i[n];if(Array.isArray(r))for(var a=0;a<r.length;a++)r[a]&&xe(r[a],t);else r&&xe(r,t)}return e.g}function we(e,t){return null==(e=fe(e,t))?0:e}function ke(e,t){return null==(e=fe(e,t))?"":e}function Se(e,t){if(e=e.m){te(t,t.g.end());for(var n=0;n<e.length;n++)te(t,e[n])}}function Ne(e,t){if(4==t.h)return!1;var n=t.m;return Q(t),t.N||(t=B(t.g.h,n,t.g.g),(n=e.m)?n.push(t):e.m=[t]),!0}function Te(e,t){var n=void 0;return new(n||(n=Promise))(function(r,a){function i(e){try{s(t.next(e))}catch(n){a(n)}}function o(e){try{s(t.throw(e))}catch(n){a(n)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,o)}s((t=t.apply(e,void 0)).next())})}function Ie(e){he.call(this,e)}function Ee(e,t){for(;Z(t);)switch(t.i){case 8:var n=G(t.g);ye(e,1,n);break;case 21:ye(e,2,n=H(t.g));break;case 26:ye(e,3,n=$(t));break;case 34:ye(e,4,n=$(t));break;default:if(!Ne(e,t))return e}return e}function Ce(e){he.call(this,e,-1,Ae)}he.prototype.toJSON=function(){return oe(xe(this,!1),se,F)},he.prototype.toString=function(){return xe(this,!1).toString()},f(Ie,he),f(Ce,he),Ce.prototype.addClassification=function(e,t){return be(this,e,Ie,t),this};var Ae=[1];function Oe(e){he.call(this,e)}function _e(e,t){for(;Z(t);)switch(t.i){case 13:var n=H(t.g);ye(e,1,n);break;case 21:ye(e,2,n=H(t.g));break;case 29:ye(e,3,n=H(t.g));break;case 37:ye(e,4,n=H(t.g));break;case 45:ye(e,5,n=H(t.g));break;default:if(!Ne(e,t))return e}return e}function Me(e){he.call(this,e,-1,Re)}f(Oe,he),f(Me,he);var Re=[1];function De(e){he.call(this,e)}function Fe(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function Pe(e){return ve(e,Ie).map(function(e){return{index:we(e,1),Y:ge(e,2),label:null!=fe(e,3)?ke(e,3):void 0,displayName:null!=fe(e,4)?ke(e,4):void 0}})}function Le(e){return{x:ge(e,1),y:ge(e,2),z:ge(e,3),visibility:null!=fe(e,4)?ge(e,4):void 0}}function ze(e){e:{var t=new Me;for(e=new Y(e);Z(e);)if(10===e.i){be(t,J(e,new Oe,_e),Oe,void 0)}else if(!Ne(t,e))break e}return ve(t,Oe).map(Le)}function je(e,t){this.h=e,this.g=t,this.l=0}function Be(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var r=Fe(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),a=Fe(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),i=n.createProgram();if(n.attachShader(i,r),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(i));r=e.m=i,n.useProgram(r),a=n.getUniformLocation(r,"sampler0"),e.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:a},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(a,0)}r=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"===typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"===typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise(function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)}))}function Ue(e){this.g=e}f(De,he);var We=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ve(e,t){return t+e}function Ge(e,t){window[e]=t}function He(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||Ve,"object"===typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"===typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=s(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var r=e.options[n].default;void 0!==r&&(this.j[n]="function"===typeof r?r():r)}}function Ke(e){return Te(e,function e(){var t,n,r,a,i,o,s,c,u,h,d,p=this;return S(e,function(e){switch(e.g){case 1:return t=p,p.R?(n=function(e,t){return void 0===e.g.files?[]:"function"===typeof e.g.files?e.g.files(t):e.g.files}(p,p.j),v(e,function(){return Te(this,function e(){return S(e,function(e){switch(e.g){case 1:return e.m=2,v(e,WebAssembly.instantiate(We),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})})}(),2)):e.return();case 2:if(r=e.h,"object"===typeof window)return Ge("createMediapipeSolutionsWasm",{locateFile:p.locateFile}),Ge("createMediapipeSolutionsPackedAssets",{locateFile:p.locateFile}),o=n.filter(function(e){return void 0!==e.data}),s=n.filter(function(e){return void 0===e.data}),c=Promise.all(o.map(function(e){var n=qe(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then(function(e){return t.overrideFile(r,e),Promise.resolve(e)})}return n})),u=Promise.all(s.map(function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise(function(e){t.addEventListener("load",function(){e()},!1),t.addEventListener("error",function(){e()},!1),document.body.appendChild(t)})}(t.locateFile(e.url,t.S)):Promise.resolve()})).then(function(){return Te(t,function e(){var t,n,r=this;return S(e,function(e){if(1==e.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,v(e,t(n),2);r.h=e.h,e.g=0})})}),h=Te(t,function e(){var t=this;return S(e,function(e){return t.g.graph&&t.g.graph.url?e=v(e,qe(t,t.g.graph.url),0):(e.g=0,e=void 0),e})}),v(e,Promise.all([u,c,h]),7);if("function"!==typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return a=n.filter(function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r}).map(function(e){return t.locateFile(e.url,t.S)}),importScripts.apply(null,l(a)),v(e,createMediapipeSolutionsWasm(Module),6);case 6:p.h=e.h,p.l=new OffscreenCanvas(1,1),p.h.canvas=p.l,i=p.h.GL.createContext(p.l,{antialias:!1,alpha:!1,ba:"undefined"!==typeof WebGL2RenderingContext?2:1}),p.h.GL.makeContextCurrent(i),e.g=4;break;case 7:if(p.l=document.createElement("canvas"),!(d=p.l.getContext("webgl2",{}))&&!(d=p.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),e.return();p.D=d,p.h.canvas=p.l,p.h.createContext(p.l,!0,!0,{});case 4:p.i=new p.h.SolutionWasm,p.R=!1,e.g=0}})})}function qe(e,t){return Te(e,function e(){var n,r,a=this;return S(e,function(e){return t in a.F?e.return(a.F[t]):(n=a.locateFile(t,""),r=fetch(n).then(function(e){return e.arrayBuffer()}),a.F[t]=r,e.return(r))})})}function Xe(e,t,n){return Te(e,function e(){var r,a,i,o,l,c,u,h,d,p,f,m,g,y,b=this;return S(e,function(e){switch(e.g){case 1:if(!n)return e.return(t);for(r={},a=0,i=s(Object.keys(n)),o=i.next();!o.done;o=i.next())l=o.value,"string"!==typeof(c=n[l])&&"texture"===c.type&&void 0!==t[c.stream]&&++a;1<a&&(b.G=!1),u=s(Object.keys(n)),o=u.next();case 2:if(o.done){e.g=4;break}if(h=o.value,"string"===typeof(d=n[h]))return g=r,y=h,v(e,function(e,t,n){return Te(e,function e(){var r,a=this;return S(e,function(e){return"number"===typeof n||n instanceof Uint8Array||n instanceof a.h.Uint8BlobList?e.return(n):n instanceof a.h.Texture2dDataOut?((r=a.s[t])||(r=new je(a.h,a.D),a.s[t]=r),e.return(Be(r,n,a.G))):e.return(void 0)})})}(b,h,t[d]),14);if(p=t[d.stream],"detection_list"===d.type){if(p){for(var x=p.getRectList(),w=p.getLandmarksList(),k=p.getClassificationsList(),N=[],T=0;T<x.size();++T){var I=x.get(T);e:{var E=new De;for(I=new Y(I);Z(I);)switch(I.i){case 13:var C=H(I.g);ye(E,1,C);break;case 21:ye(E,2,C=H(I.g));break;case 29:ye(E,3,C=H(I.g));break;case 37:ye(E,4,C=H(I.g));break;case 45:ye(E,5,C=H(I.g));break;case 48:for(var A=I.g,O=128,_=0,M=C=0;4>M&&128<=O;M++)_|=(127&(O=A.h[A.g++]))<<7*M;if(128<=O&&(_|=(127&(O=A.h[A.g++]))<<28,C|=(127&O)>>4),128<=O)for(M=0;5>M&&128<=O;M++)C|=(127&(O=A.h[A.g++]))<<7*M+3;128>O?(A=_>>>0,(C=2147483648&(O=C>>>0))&&(O=~O>>>0,0==(A=1+~A>>>0)&&(O=O+1>>>0)),A=4294967296*O+(A>>>0),C=C?-A:A):(A.l=!0,C=void 0),ye(E,6,C);break;default:if(!Ne(E,I))break e}}E={Z:ge(E,1),$:ge(E,2),height:ge(E,3),width:ge(E,4),rotation:ge(E,5,0),X:we(E,6)},I=ze(w.get(T)),A=k.get(T);e:for(C=new Ce,A=new Y(A);Z(A);)if(10===A.i)C.addClassification(J(A,new Ie,Ee));else if(!Ne(C,A))break e;E={T:E,O:I,M:Pe(C)},N.push(E)}x=N}else x=[];r[h]=x,e.g=7;break}if("proto_list"===d.type){if(p){for(x=Array(p.size()),w=0;w<p.size();w++)x[w]=p.get(w);p.delete()}else x=[];r[h]=x,e.g=7;break}if(void 0===p){e.g=3;break}if("float_list"===d.type){r[h]=p,e.g=7;break}if("proto"===d.type){r[h]=p,e.g=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(f=b.s[h])||(f=new je(b.h,b.D),b.s[h]=f),v(e,Be(f,p,b.G),13);case 13:m=e.h,r[h]=m;case 7:d.transform&&r[h]&&(r[h]=d.transform(r[h])),e.g=3;break;case 14:g[y]=e.h;case 3:o=u.next(),e.g=2;break;case 4:return e.return(r)}})})}function Ye(e,t){for(var n=t.name||"$",r=[].concat(l(t.wants)),a=new e.h.StringList,i=s(t.wants),o=i.next();!o.done;o=i.next())a.push_back(o.value);i=e.h.PacketListener.implement({onResults:function(a){for(var i={},o=0;o<t.wants.length;++o)i[r[o]]=a.get(o);var s=e.listeners[n];s&&(e.C=Xe(e,i,t.outs).then(function(n){n=s(n);for(var a=0;a<t.wants.length;++a){var o=i[r[a]];"object"===typeof o&&o.hasOwnProperty&&o.hasOwnProperty("delete")&&o.delete()}n&&(e.C=n)}))}}),e.i.attachMultiListener(a,i),a.delete()}function Ze(e){switch(void 0===e&&(e=0),e){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function Qe(e){var t=this;e=e||{},this.g=new He({locateFile:e.locateFile,files:function(e){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:Ze(e.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:ze},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:ze},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(e){return Te(t,function t(){var n,r,a,i=this;return S(t,function(t){return 1==t.g?(n=Ze(e),r="third_party/mediapipe/modules/pose_landmark/"+n,v(t,qe(i.g,n),2)):(a=t.h,i.g.overrideFile(r,a),t.return(!0))})})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}(e=He.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){return Te(this,function e(){var t=this;return S(e,function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0})})},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],a=[],i={},o=s(Object.keys(e)),l=o.next();!l.done;i={K:i.K,L:i.L},l=o.next()){var c=l.value;c in this.j&&this.j[c]===e[c]||(this.j[c]=e[c],void 0!==(l=t[c])&&(l.onChange&&(i.K=l.onChange,i.L=e[c],r.push(function(e){return function(){return Te(n,function t(){var n=this;return S(t,function(t){if(1==t.g)return v(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0})})}}(i))),l.graphOptionXref&&(c={valueNumber:1===l.type?e[c]:0,valueBoolean:0===l.type&&e[c],valueString:2===l.type?e[c]:""},l=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),l.graphOptionXref),c),a.push(l))))}0===r.length&&0===a.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(a),this.u=(void 0===this.u?[]:this.u).concat(r))}},e.initialize=function(){return Te(this,function e(){var t=this;return S(e,function(e){return 1==e.g?v(e,Ke(t),2):3!=e.g?v(e,Te(t,function e(){var t,n,r,a,i,o,l,c,u=this;return S(e,function(e){if(1==e.g)return u.g.graph&&u.g.graph.url&&u.P===u.g.graph.url?e.return():(u.o=!0,u.g.graph&&u.g.graph.url?(u.P=u.g.graph.url,v(e,qe(u,u.g.graph.url),3)):void(e.g=2));for(2!=e.g&&(t=e.h,u.i.loadGraph(t)),n=s(Object.keys(u.B)),r=n.next();!r.done;r=n.next())a=r.value,u.i.overrideFile(a,u.B[a]);if(u.B={},u.g.listeners)for(i=s(u.g.listeners),o=i.next();!o.done;o=i.next())l=o.value,Ye(u,l);c=u.j,u.j={},u.setOptions(c),e.g=0})}),3):v(e,function(e){return Te(e,function e(){var t,n,r,a,i,o,l=this;return S(e,function(e){switch(e.g){case 1:if(!l.o)return e.return();if(!l.u){e.g=2;break}t=s(l.u),n=t.next();case 3:if(n.done){e.g=5;break}return v(e,(0,n.value)(),4);case 4:n=t.next(),e.g=3;break;case 5:l.u=void 0;case 2:if(l.A){for(r=new l.h.GraphOptionChangeRequestList,a=s(l.A),i=a.next();!i.done;i=a.next())o=i.value,r.push_back(o);l.i.changeOptions(r),r.delete(),l.A=void 0}l.o=!1,e.g=0}})})}(t),0)})})},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){return Te(this,function n(){var r,a,i,o,l,c,u,h,d,p=this;return S(n,function(n){switch(n.g){case 1:return p.g.inputs?(r=1e3*(void 0===t||null===t?performance.now():t),v(n,p.C,2)):n.return();case 2:return v(n,p.initialize(),3);case 3:for(a=new p.h.PacketDataList,i=s(Object.keys(e)),o=i.next();!o.done;o=i.next())if(l=o.value,c=p.g.inputs[l]){e:{var f=p,m=e[l];switch(c.type){case"video":var g=f.m[c.stream];if(g||(g=new je(f.h,f.D),f.m[c.stream]=g),0===(f=g).l&&(f.l=f.h.createTexture()),"undefined"!==typeof HTMLVideoElement&&m instanceof HTMLVideoElement){var y=m.videoWidth;g=m.videoHeight}else"undefined"!==typeof HTMLImageElement&&m instanceof HTMLImageElement?(y=m.naturalWidth,g=m.naturalHeight):(y=m.width,g=m.height);g={glName:f.l,width:y,height:g},(y=f.g).canvas.width=g.width,y.canvas.height=g.height,y.activeTexture(y.TEXTURE0),f.h.bindTexture2d(f.l),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,m),f.h.bindTexture2d(0),f=g;break e;case"detections":for((g=f.m[c.stream])||(g=new Ue(f.h),f.m[c.stream]=g),(f=g).data||(f.data=new f.g.DetectionListData),f.data.reset(m.length),g=0;g<m.length;++g){y=m[g];var b=f.data,x=b.setBoundingBox,w=g,k=y.T,S=new De;ye(S,1,k.Z),ye(S,2,k.$),ye(S,3,k.height),ye(S,4,k.width),ye(S,5,k.rotation),ye(S,6,k.X);var N=k=new ee;re(N,1,fe(S,1)),re(N,2,fe(S,2)),re(N,3,fe(S,3)),re(N,4,fe(S,4)),re(N,5,fe(S,5));var T=fe(S,6);if(null!=T&&null!=T){X(N.g,48);var I=N.g,E=T;T=0>E;var C=(E=Math.abs(E))>>>0;for(E=Math.floor((E-C)/4294967296),E>>>=0,T&&(E=~E>>>0,4294967295<(C=(~C>>>0)+1)&&(C=0,4294967295<++E&&(E=0))),T=U=C,C=E;0<C||127<T;)I.push(127&T|128),T=(T>>>7|C<<25)>>>0,C>>>=7;I.push(T)}if(Se(S,N),k=ne(k),x.call(b,w,k),y.O)for(b=0;b<y.O.length;++b)N=!!(S=y.O[b]).visibility,w=(x=f.data).addNormalizedLandmark,k=g,S=Object.assign(Object.assign({},S),{visibility:N?S.visibility:0}),ye(N=new Oe,1,S.x),ye(N,2,S.y),ye(N,3,S.z),S.visibility&&ye(N,4,S.visibility),re(I=S=new ee,1,fe(N,1)),re(I,2,fe(N,2)),re(I,3,fe(N,3)),re(I,4,fe(N,4)),re(I,5,fe(N,5)),Se(N,I),S=ne(S),w.call(x,k,S);if(y.M)for(b=0;b<y.M.length;++b){if(w=(x=f.data).addClassification,k=g,S=y.M[b],ye(N=new Ie,2,S.Y),S.index&&ye(N,1,S.index),S.label&&ye(N,3,S.label),S.displayName&&ye(N,4,S.displayName),I=S=new ee,null!=(C=fe(N,1))&&null!=C)if(X(I.g,8),T=I.g,0<=C)X(T,C);else{for(E=0;9>E;E++)T.push(127&C|128),C>>=7;T.push(1)}re(I,2,fe(N,2)),null!=(T=fe(N,3))&&(T=M(T),X(I.g,26),X(I.g,T.length),te(I,I.g.end()),te(I,T)),null!=(T=fe(N,4))&&(T=M(T),X(I.g,34),X(I.g,T.length),te(I,I.g.end()),te(I,T)),Se(N,I),S=ne(S),w.call(x,k,S)}}f=f.data;break e;default:f={}}}switch(u=f,h=c.stream,c.type){case"video":a.pushTexture2d(Object.assign(Object.assign({},u),{stream:h,timestamp:r}));break;case"detections":(d=u).stream=h,d.timestamp=r,a.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+c.type+"'")}}return p.i.send(a),v(n,p.C,4);case 4:a.delete(),n.g=0}})})},e.onResults=function(e,t){this.listeners[t||"$"]=e},I("Solution",He),I("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=Qe.prototype).reset=function(){this.g.reset()},e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){return Te(this,function e(){var t=this;return S(e,function(e){return v(e,t.g.initialize(),0)})})},e.send=function(e,t){return Te(this,function n(){var r=this;return S(n,function(n){return v(n,r.g.send(e,t),0)})})},e.setOptions=function(e){this.g.setOptions(e)},I("Pose",Qe),I("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),I("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),I("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),I("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),I("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),I("VERSION","0.4.1633558788")}).call(this)},4208(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const n=new Map;for(let r=0;r<e.length;r++){const a=e[r],i=t(a);n.has(i)||n.set(i,a)}return Array.from(n.values())}},4288(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=x.prototype=new b;w.constructor=x,g(w,v.prototype),w.isPureReactComponent=!0;var k=Array.isArray;function S(){}var N={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function I(e,t,r){var a=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:r}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function O(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return O((u=e._init)(e._payload),t,a,i,o)}}if(u)return o=o(e),u=""===i?"."+A(e,0):i,k(o)?(a="",null!=u&&(a=u.replace(C,"$&/")+"/"),O(o,t,a,"",function(e){return e})):null!=o&&(E(o)&&(l=o,c=a+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+u,o=I(l.type,c,l.props)),t.push(o)),1;u=0;var h,p=""===i?".":i+":";if(k(e))for(var m=0;m<e.length;m++)u+=O(i=e[m],t,a,s=p+A(i,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=O(i=i.value,t,a,s=p+A(i,m++),o);else if("object"===s){if("function"===typeof e.then)return O(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function _(e,t,n){if(null==e)return e;var r=[],a=0;return O(e,r,"","",function(e){return t.call(n,e,a++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},D={map:_,forEach:function(e,t,n){_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=D,t.Component=v,t.Fragment=a,t.Profiler=o,t.PureComponent=x,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return N.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),a=e.key;if(null!=t)for(i in void 0!==t.key&&(a=""+t.key),t)!T.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var o=Array(i),s=0;s<i;s++)o[s]=arguments[s+2];r.children=o}return I(e.type,a,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,a={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)T.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];a.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===a[r]&&(a[r]=o[r]);return I(e,i,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.T,n={};N.T=n;try{var r=e(),a=N.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(S,R)}catch(i){R(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),N.T=t}},t.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},t.use=function(e){return N.H.use(e)},t.useActionState=function(e,t,n){return N.H.useActionState(e,t,n)},t.useCallback=function(e,t){return N.H.useCallback(e,t)},t.useContext=function(e){return N.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return N.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return N.H.useEffect(e,t)},t.useEffectEvent=function(e){return N.H.useEffectEvent(e)},t.useId=function(){return N.H.useId()},t.useImperativeHandle=function(e,t,n){return N.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.H.useMemo(e,t)},t.useOptimistic=function(e,t){return N.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return N.H.useReducer(e,t,n)},t.useRef=function(e){return N.H.useRef(e)},t.useState=function(e){return N.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.H.useTransition()},t.version="19.2.3"},4332(e,t,n){e.exports=n(5053).uniqBy},4334(e,t,n){var r=n(7359),a=n(7066),i=n(9016),o=n(9538),s=n(6288),l=n(5262),c=n(2430);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=l,e.exports=c},4391(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4530(){},4704(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return n.test(e)}}},4803(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let n,{signal:r,edges:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null;const o=null!=a&&a.includes("leading"),s=null==a||a.includes("trailing"),l=()=>{null!==i&&(e.apply(n,i),n=void 0,i=null)};let c=null;const u=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,s&&l(),h()},t)},h=()=>{null!==c&&(clearTimeout(c),c=null),n=void 0,i=null},d=function(){if(null!==r&&void 0!==r&&r.aborted)return;n=this;for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];i=t;const s=null==c;u(),o&&s&&l()};return d.schedule=u,d.cancel=h,d.flush=()=>{l()},null===r||void 0===r||r.addEventListener("abort",h,{once:!0}),d}},4879(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=r.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},5043(e,t,n){"use strict";e.exports=n(4288)},5053(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4208),a=n(9599),i=n(2104),o=n(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.identity;return i.isArrayLikeObject(e)?r.uniqBy(Array.from(e),o.iteratee(t)):[]}},5082(e,t){"use strict";var n=60103,r=60106,a=60107,i=60108,o=60114,s=60109,l=60110,c=60112,u=60113,h=60120,d=60115,p=60116,f=60121,m=60122,g=60117,y=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),a=b("react.fragment"),i=b("react.strict_mode"),o=b("react.profiler"),s=b("react.provider"),l=b("react.context"),c=b("react.forward_ref"),u=b("react.suspense"),h=b("react.suspense_list"),d=b("react.memo"),p=b("react.lazy"),f=b("react.block"),m=b("react.server.block"),g=b("react.fundamental"),y=b("react.debug_trace_mode"),v=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case o:case i:case u:case h:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case d:case s:return e;default:return t}}case r:return t}}}},5261(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433);t.cloneDeep=function(e){return r.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5262(e,t,n){var r;!function(e,a){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&o(r,n),a.state=function(){return o(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},5303(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2489),a=n(4704),i=n(6321),o=n(1444);t.has=function(e,t){let n;if(n=Array.isArray(t)?t:"string"===typeof t&&r.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?o.toPath(t):[t],0===n.length)return!1;let s=e;for(let r=0;r<n.length;r++){const e=n[r];if(null==s||!Object.hasOwn(s,e)){if(!((Array.isArray(s)||i.isArguments(s))&&a.isIndex(e)&&e<s.length))return!1}s=s[e]}return!0}},5316(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9709),a=n(7043),i=n(1444);t.orderBy=function(e,t,n,o){if(null==e)return[];n=o?void 0:n,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(n)||(n=null==n?[]:[n]),n=n.map(e=>String(e));const s=(e,t)=>{let n=e;for(let r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||a.isKey(e)?e:{key:e,path:i.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:s(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?s(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let a=0;a<l.length;a++){const i=r.compareValues(e.criteria[a],t.criteria[a],n[a]);if(0!==i)return i}return 0}).map(e=>e.original)}},5414(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:a=!0,trailing:i=!0}=n;return r.debounce(e,t,{leading:a,maxWait:t,trailing:i})}},5508(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433),a=n(7599);t.cloneDeepWith=function(e,t){return r.cloneDeepWith(e,(n,i,o,s)=>{const l=null===t||void 0===t?void 0:t(n,i,o,s);if(void 0!==l)return l;if("object"===typeof e)switch(Object.prototype.toString.call(e)){case a.numberTag:case a.stringTag:case a.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return r.copyProperties(t,e),t}case a.argumentsTag:{const t={};return r.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},5817(){},5896(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,N||(N=!0,S());else{var t=r(u);null!==t&&M(k,t.startTime-e)}}var S,N=!1,T=-1,I=5,E=-1;function C(){return!!y||!(t.unstable_now()-E<I)}function A(){if(y=!1,N){var e=t.unstable_now();E=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(T),T=-1),f=!0;var i=p;try{t:{for(w(e),d=r(c);null!==d&&!(d.expirationTime>e&&C());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){d.callback=s,w(e),n=!0;break t}d===r(c)&&a(c),w(e)}else a(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&M(k,l.startTime-e),n=!1}}break e}finally{d=null,p=i,f=!1}n=void 0}}finally{n?S():N=!1}}}if("function"===typeof x)S=function(){x(A)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,_=O.port2;O.port1.onmessage=A,S=function(){_.postMessage(null)}}else S=function(){v(A,0)};function M(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(T),T=-1):g=!0,M(k,i-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,N||(N=!0,S()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5990(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6288(e,t,n){var r;!function(e,a){function i(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&o(r,n),a.state=function(){return o(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},6321(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===r.getTag(e)}},6392(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6443),a=n(5990),i=n(7599),o=n(4803),s=n(3757);function l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const h=null===u||void 0===u?void 0:u(e,t,n,r);if(void 0!==h)return h;if(o.isPrimitive(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const t=new Array(e.length);r.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,n,r,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;r.set(e,t);for(const[a,i]of e)t.set(a,l(i,a,n,r,u));return t}if(e instanceof Set){const t=new Set;r.set(e,t);for(const a of e)t.add(l(a,void 0,n,r,u));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(s.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);r.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,n,r,u);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,t),c(t,e,n,r,u),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return r.set(e,t),c(t,e,n,r,u),t}if("undefined"!==typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return r.set(e,t),c(t,e,n,r,u),t}if(e instanceof Error){const t=new e.constructor;return r.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,n,r,u),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return r.set(e,t),c(t,e,n,r,u),t}if(e instanceof Number){const t=new Number(e.valueOf());return r.set(e,t),c(t,e,n,r,u),t}if(e instanceof String){const t=new String(e.valueOf());return r.set(e,t),c(t,e,n,r,u),t}if("object"===typeof e&&function(e){switch(a.getTag(e)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return r.set(e,t),c(t,e,n,r,u),t}return e}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const o=[...Object.keys(t),...r.getSymbols(t)];for(let r=0;r<o.length;r++){const s=o[r],c=Object.getOwnPropertyDescriptor(e,s);(null==c||c.writable)&&(e[s]=l(t[s],s,n,a,i))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},6443(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6672(e,t,n){"use strict";var r=n(5043);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:i}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},6770(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777);t.toNumber=function(e){return r.isSymbol(e)?NaN:Number(e)}},7004(e,t,n){"use strict";var r=n(8853),a=n(5043),i=n(7950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var p=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case N:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}var R=Array.isArray,D=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},L=[],z=-1;function j(e){return{current:e}}function B(e){0>z||(e.current=L[z],L[z]=null,z--)}function U(e,t){z++,L[z]=e.current,e.current=t}var W,V,G=j(null),H=j(null),K=j(null),q=j(null);function X(e,t){switch(U(K,t),U(H,e),U(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vh(t=yh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(G),U(G,e)}function Y(){B(G),B(H),B(K)}function Z(e){null!==e.memoizedState&&U(q,e);var t=G.current,n=vh(t,e.type);t!==n&&(U(H,e),U(G,n))}function Q(e){H.current===e&&(B(G),B(H)),q.current===e&&(B(q),ud._currentValue=P)}function J(e){if(void 0===W)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);W=t&&t[1]||"",V=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+W+e+V}var $=!1;function ee(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),o=i[0],s=i[1];if(o&&s){var l=o.split("\n"),c=s.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{$=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ae=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,oe=r.unstable_shouldYield,se=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,pe=r.unstable_LowPriority,fe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/ke|0)|0},we=Math.log,ke=Math.LN2;var Se=256,Ne=262144,Te=4194304;function Ie(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ee(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~i)?a=Ie(r):0!==(o&=s)?a=Ie(o):n||0!==(n=s&~e)&&(a=Ie(n)):0!==(s=r&~i)?a=Ie(s):0!==o?a=Ie(o):n||0!==(n=r&~e)&&(a=Ie(n)),0===a?0:0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:a}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ae(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Oe(){var e=Te;return 0===(62914560&(Te<<=1))&&(Te=4194304),e}function _e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Me(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-xe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xe(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Fe(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Pe(n))&(e.suspendedLanes|t))?0:n}function Pe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function ze(){var e=F.p;return 0!==e?e:void 0===(e=window.event)?32:Id(e.type)}function je(e,t){var n=F.p;try{return F.p=e,t()}finally{F.p=n}}var Be=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Be,We="__reactProps$"+Be,Ve="__reactContainer$"+Be,Ge="__reactEvents$"+Be,He="__reactListeners$"+Be,Ke="__reactHandles$"+Be,qe="__reactResources$"+Be,Xe="__reactMarker$"+Be;function Ye(e){delete e[Ue],delete e[We],delete e[Ge],delete e[He],delete e[Ke]}function Ze(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ph(e);null!==e;){if(n=e[Ue])return n;e=Ph(e)}return t}n=(e=n).parentNode}return null}function Qe(e){if(e=e[Ue]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function $e(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Xe]=!0}var tt=new Set,nt={};function rt(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},st={};function lt(e,t,n){if(a=t,re.call(st,a)||!re.call(ot,a)&&(it.test(a)?st[a]=!0:(ot[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,a,i,o,s){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?xt(e,o,ht(t)):null!=n?xt(e,o,ht(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ht(s):e.removeAttribute("name")}function bt(e,t,n,r,a,i,o,s){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),pt(e)}function xt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(R(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),pt(e)}function Nt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Tt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function It(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Tt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&It(e,a,r)}else for(var i in t)t.hasOwnProperty(i)&&It(e,i,t[i])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ot=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _t(e){return Ot.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mt(){}var Rt=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ft=null,Pt=null;function Lt(e){var t=Qe(e);if(t&&(e=t.stateNode)){var n=e[We]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[We]||null;if(!a)throw Error(o(90));vt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ft(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var zt=!1;function jt(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Ft||null!==Pt)&&($c(),Ft&&(t=Ft,e=Pt,Pt=Ft=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[We]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Wt=!1;if(Ut)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Qd){Wt=!1}var Gt=null,Ht=null,Kt=null;function qt(){if(Kt)return Kt;var e,t,n=Ht,r=n.length,a="value"in Gt?Gt.value:Gt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Kt=a.slice(e,1<t?1-t:void 0)}function Xt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Zt(){return!1}function Qt(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Yt:Zt,this.isPropagationStopped=Zt,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Jt,$t,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Qt(tn),rn=p({},tn,{view:0,detail:0}),an=Qt(rn),on=p({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Jt=e.screenX-en.screenX,$t=e.screenY-en.screenY):$t=Jt=0,en=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),sn=Qt(on),ln=Qt(p({},on,{dataTransfer:0})),cn=Qt(p({},rn,{relatedTarget:0})),un=Qt(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Qt(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Qt(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=Qt(p({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Xt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Qt(p({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=Qt(p({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),wn=Qt(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=Qt(p({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Qt(p({},tn,{newState:0,oldState:0})),Nn=[9,13,27,32],Tn=Ut&&"CompositionEvent"in window,In=null;Ut&&"documentMode"in document&&(In=document.documentMode);var En=Ut&&"TextEvent"in window&&!In,Cn=Ut&&(!Tn||In&&8<In&&11>=In),An=String.fromCharCode(32),On=!1;function _n(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Pn(e,t,n,r){Ft?Pt?Pt.push(r):Pt=[r]:Ft=r,0<(t=rh(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,zn=null;function jn(e){Yu(e,0)}function Bn(e){if(ft(Je(e)))return e}function Un(e,t){if("change"===e)return t}var Wn=!1;if(Ut){var Vn;if(Ut){var Gn="oninput"in document;if(!Gn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Gn="function"===typeof Hn.oninput}Vn=Gn}else Vn=!1;Wn=Vn&&(!document.documentMode||9<document.documentMode)}function Kn(){Ln&&(Ln.detachEvent("onpropertychange",qn),zn=Ln=null)}function qn(e){if("value"===e.propertyName&&Bn(zn)){var t=[];Pn(t,zn,e,Dt(e)),jt(jn,t)}}function Xn(e,t,n){"focusin"===e?(Kn(),zn=n,(Ln=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Kn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(zn)}function Zn(e,t){if("click"===e)return Bn(t)}function Qn(e,t){if("input"===e||"change"===e)return Bn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!re.call(t,a)||!Jn(e[a],t[a]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Ut&&"documentMode"in document&&11>=document.documentMode,or=null,sr=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==or||or!==mt(r)||("selectionStart"in(r=or)&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&$n(lr,r)||(lr=r,0<(r=rh(sr,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},pr={},fr={};function mr(e){if(pr[e])return pr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return pr[e]=n[t];return e}Ut&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),br=mr("transitionrun"),xr=mr("transitionstart"),wr=mr("transitioncancel"),kr=mr("transitionend"),Sr=new Map,Nr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Sr.set(e,t),rt(t,[e])}Nr.push("scrollEnd");var Ir="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Er=[],Cr=0,Ar=0;function Or(){for(var e=Cr,t=Ar=Cr=0;t<e;){var n=Er[t];Er[t++]=null;var r=Er[t];Er[t++]=null;var a=Er[t];Er[t++]=null;var i=Er[t];if(Er[t++]=null,null!==r&&null!==a){var o=r.pending;null===o?a.next=a:(a.next=o.next,o.next=a),r.pending=a}0!==i&&Dr(n,a,i)}}function _r(e,t,n,r){Er[Cr++]=e,Er[Cr++]=t,Er[Cr++]=n,Er[Cr++]=r,Ar|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Mr(e,t,n,r){return _r(e,t,n,r),Fr(e)}function Rr(e,t){return _r(e,null,null,t),Fr(e)}function Dr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-xe(n),null===(r=(e=i.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),i):null}function Fr(e){if(50<Gc)throw Gc=0,Hc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(e,t,n,r){return new Lr(e,t,n,r)}function jr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=zr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wr(e,t,n,r,a,i){var s=0;if(r=e,"function"===typeof e)jr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=zr(31,n,t,a)).elementType=E,e.lanes=i,e;case y:return Vr(n.children,a,i,t);case v:s=8,a|=24;break;case b:return(e=zr(12,n,t,2|a)).elementType=b,e.lanes=i,e;case S:return(e=zr(13,n,t,a)).elementType=S,e.lanes=i,e;case N:return(e=zr(19,n,t,a)).elementType=N,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:s=10;break e;case x:s=9;break e;case k:s=11;break e;case T:s=14;break e;case I:s=16,r=null;break e}s=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=zr(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Vr(e,t,n,r){return(e=zr(7,e,r,t)).lanes=n,e}function Gr(e,t,n){return(e=zr(6,e,null,t)).lanes=n,e}function Hr(e){var t=zr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=zr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=new WeakMap;function Xr(e,t){if("object"===typeof e&&null!==e){var n=qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},qr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],Zr=0,Qr=null,Jr=0,$r=[],ea=0,ta=null,na=1,ra="";function aa(e,t){Yr[Zr++]=Jr,Yr[Zr++]=Qr,Qr=e,Jr=t}function ia(e,t,n){$r[ea++]=na,$r[ea++]=ra,$r[ea++]=ta,ta=e;var r=na;e=ra;var a=32-xe(r)-1;r&=~(1<<a),n+=1;var i=32-xe(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,na=1<<32-xe(t)+a|n<<a|r,ra=i+e}else na=1<<i|n<<a|r,ra=e}function oa(e){null!==e.return&&(aa(e,1),ia(e,1,0))}function sa(e){for(;e===Qr;)Qr=Yr[--Zr],Yr[Zr]=null,Jr=Yr[--Zr],Yr[Zr]=null;for(;e===ta;)ta=$r[--ea],$r[ea]=null,ra=$r[--ea],$r[ea]=null,na=$r[--ea],$r[ea]=null}function la(e,t){$r[ea++]=na,$r[ea++]=ra,$r[ea++]=ta,na=t.id,ra=t.overflow,ta=e}var ca=null,ua=null,ha=!1,da=null,pa=!1,fa=Error(o(519));function ma(e){throw wa(Xr(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),fa}function ga(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[We]=r,n){case"dialog":Zu("cancel",t),Zu("close",t);break;case"iframe":case"object":case"embed":Zu("load",t);break;case"video":case"audio":for(n=0;n<qu.length;n++)Zu(qu[n],t);break;case"source":Zu("error",t);break;case"img":case"image":case"link":Zu("error",t),Zu("load",t);break;case"details":Zu("toggle",t);break;case"input":Zu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Zu("invalid",t);break;case"textarea":Zu("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ch(t.textContent,n)?(null!=r.popover&&(Zu("beforetoggle",t),Zu("toggle",t)),null!=r.onScroll&&Zu("scroll",t),null!=r.onScrollEnd&&Zu("scrollend",t),null!=r.onClick&&(t.onclick=Mt),t=!0):t=!1,t||ma(e,!0)}function ya(e){for(ca=e.return;ca;)switch(ca.tag){case 5:case 31:case 13:return void(pa=!1);case 27:case 3:return void(pa=!0);default:ca=ca.return}}function va(e){if(e!==ca)return!1;if(!ha)return ya(e),ha=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bh(e.type,e.memoizedProps)),t=!t),t&&ua&&ma(e),ya(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ua=Fh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ua=Fh(e)}else 27===n?(n=ua,Ih(e.type)?(e=Dh,Dh=null,ua=e):ua=n):ua=ca?Rh(e.stateNode.nextSibling):null;return!0}function ba(){ua=ca=null,ha=!1}function xa(){var e=da;return null!==e&&(null===Oc?Oc=e:Oc.push.apply(Oc,e),da=null),e}function wa(e){null===da?da=[e]:da.push(e)}var ka=j(null),Sa=null,Na=null;function Ta(e,t,n){U(ka,t._currentValue),t._currentValue=n}function Ia(e){e._currentValue=ka.current,B(ka)}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ca(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var s=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ea(i.return,n,e),r||(s=null);break e}i=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(i=s.alternate)&&(i.lanes|=n),Ea(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function Aa(e,t,n,r){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(0!==(524288&a.flags))i=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var l=a.type;Jn(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===q.current){if(null===(s=a.alternate))throw Error(o(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(ud):e=[ud])}a=a.return}null!==e&&Ca(t,e,n,r),t.flags|=262144}function Oa(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _a(e){Sa=e,Na=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ma(e){return Da(Sa,e)}function Ra(e,t){return null===Sa&&_a(e),Da(e,t)}function Da(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Na){if(null===e)throw Error(o(308));Na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Na=Na.next=t;return n}var Fa="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Pa=r.unstable_scheduleCallback,La=r.unstable_NormalPriority,za={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ja(){return{controller:new Fa,data:new Map,refCount:0}}function Ba(e){e.refCount--,0===e.refCount&&Pa(La,function(){e.controller.abort()})}var Ua=null,Wa=0,Va=0,Ga=null;function Ha(){if(0===--Wa&&null!==Ua){null!==Ga&&(Ga.status="fulfilled");var e=Ua;Ua=null,Va=0,Ga=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ka=D.S;D.S=function(e,t){Rc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ua){var n=Ua=[];Wa=0,Va=Wu(),Ga={status:"pending",value:void 0,then:function(e){n.push(e)}}}Wa++,t.then(Ha,Ha)}(0,t),null!==Ka&&Ka(e,t)};var qa=j(null);function Xa(){var e=qa.current;return null!==e?e:fc.pooledCache}function Ya(e,t){U(qa,null===t?qa.current:t.pool)}function Za(){var e=Xa();return null===e?null:{parent:za._currentValue,pool:e}}var Qa=Error(o(460)),Ja=Error(o(474)),$a=Error(o(542)),ei={then:function(){}};function ti(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ni(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Mt,Mt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e;default:if("string"===typeof t.status)t.then(Mt,Mt);else{if(null!==(e=fc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e}throw ai=t,Qa}}function ri(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ai=t,Qa;throw t}}var ai=null;function ii(){if(null===ai)throw Error(o(459));var e=ai;return ai=null,e}function oi(e){if(e===Qa||e===$a)throw Error(o(483))}var si=null,li=0;function ci(e){var t=li;return li+=1,null===si&&(si=[]),ni(si,e,t)}function ui(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hi(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function di(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Gr(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===y?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===I&&ri(i)===t.type)?(ui(t=a(t,n.props),n),t.return=e,t):(ui(t=Wr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return ui(n=Wr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case I:return d(e,t=ri(t),n)}if(R(t)||O(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,ci(t),n);if(t.$$typeof===w)return d(e,Ra(e,t),n);hi(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===a?c(e,t,n,r):null;case g:return n.key===a?u(e,t,n,r):null;case I:return p(e,t,n=ri(n),r)}if(R(n)||O(n))return null!==a?null:h(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,ci(n),r);if(n.$$typeof===w)return p(e,t,Ra(e,n),r);hi(e,n)}return null}function f(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case I:return f(e,t,n,r=ri(r),a)}if(R(r)||O(r))return h(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return f(e,t,n,ci(r),a);if(r.$$typeof===w)return f(e,t,n,Ra(t,r),a);hi(t,r)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===y){if(7===c.tag){n(l,c.sibling),(h=a(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===I&&ri(b)===c.type){n(l,c.sibling),ui(h=a(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((h=Vr(u.props.children,l.mode,h,u.key)).return=l,l=h):(ui(h=Wr(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return s(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=a(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Kr(u,l.mode,h)).return=l,l=h}return s(l);case I:return v(l,c,u=ri(u),h)}if(R(u))return function(a,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(a,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(a,h),o=i(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return n(a,h),ha&&aa(a,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(a,s[m],l))&&(o=i(h,o,m),null===u?c=h:u.sibling=h,u=h);return ha&&aa(a,m),c}for(h=r(h);m<s.length;m++)null!==(g=f(h,a,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=i(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(a,e)}),ha&&aa(a,m),c}(l,c,u,h);if(O(u)){if("function"!==typeof(b=O(u)))throw Error(o(150));return function(a,s,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(a,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(a,m),s=i(b,s,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(a,m),ha&&aa(a,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(a,v.value,c))&&(s=i(v,s,g),null===h?u=v:h.sibling=v,h=v);return ha&&aa(a,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=f(m,a,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=i(v,s,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(a,e)}),ha&&aa(a,g),u}(l,c,u=b.call(u),h)}if("function"===typeof u.then)return v(l,c,ci(u),h);if(u.$$typeof===w)return v(l,c,Ra(l,u),h);hi(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=a(c,u)).return=l,l=h):(n(l,c),(h=Gr(u,l.mode,h)).return=l,l=h),s(l)):n(l,c)}return function(e,t,n,r){try{li=0;var a=v(e,t,n,r);return si=null,a}catch(o){if(o===Qa||o===$a)throw o;var i=zr(29,o,null,e.mode);return i.lanes=r,i.return=e,i}}}var pi=di(!0),fi=di(!1),mi=!1;function gi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Fr(e),Dr(e,null,n),t}return _r(e,r,t,n),Fr(e)}function xi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}function wi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ki=!1;function Si(){if(ki){if(null!==Ga)throw Ga}}function Ni(e,t,n,r){ki=!1;var a=e.updateQueue;mi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=a.baseState;for(o=0,u=c=l=null,s=i;;){var d=-536870913&s.lane,f=d!==s.lane;if(f?(gc&d)===d:(r&d)===d){0!==d&&d===Va&&(ki=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;d=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(y,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(y,h,d):m)||void 0===d)break e;h=p({},h,d);break e;case 2:mi=!0}}null!==(d=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=a.callbacks)?a.callbacks=[d]:f.push(d))}else f={lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}null===u&&(l=h),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===i&&(a.shared.lanes=0),Nc|=o,e.lanes=o,e.memoizedState=h}}function Ti(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Ii(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ti(n[e],t)}var Ei=j(null),Ci=j(0);function Ai(e,t){U(Ci,e=kc),U(Ei,t),kc=e|t.baseLanes}function Oi(){U(Ci,kc),U(Ei,Ei.current)}function _i(){kc=Ci.current,B(Ei),B(Ci)}var Mi=j(null),Ri=null;function Di(e){var t=e.alternate;U(ji,1&ji.current),U(Mi,e),null===Ri&&(null===t||null!==Ei.current||null!==t.memoizedState)&&(Ri=e)}function Fi(e){U(ji,ji.current),U(Mi,e),null===Ri&&(Ri=e)}function Pi(e){22===e.tag?(U(ji,ji.current),U(Mi,e),null===Ri&&(Ri=e)):Li()}function Li(){U(ji,ji.current),U(Mi,Mi.current)}function zi(e){B(Mi),Ri===e&&(Ri=null),B(ji)}var ji=j(0);function Bi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||_h(n)||Mh(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ui=0,Wi=null,Vi=null,Gi=null,Hi=!1,Ki=!1,qi=!1,Xi=0,Yi=0,Zi=null,Qi=0;function Ji(){throw Error(o(321))}function $i(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function eo(e,t,n,r,a,i){return Ui=i,Wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?gs:ys,qi=!1,i=n(r,a),qi=!1,Ki&&(i=no(t,n,r,a)),to(e),i}function to(e){D.H=ms;var t=null!==Vi&&null!==Vi.next;if(Ui=0,Gi=Vi=Wi=null,Hi=!1,Yi=0,Zi=null,t)throw Error(o(300));null===e||Rs||null!==(e=e.dependencies)&&Oa(e)&&(Rs=!0)}function no(e,t,n,r){Wi=e;var a=0;do{if(Ki&&(Zi=null),Yi=0,Ki=!1,25<=a)throw Error(o(301));if(a+=1,Gi=Vi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}D.H=vs,i=t(n,r)}while(Ki);return i}function ro(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?co(t):t,e=e.useState()[0],(null!==Vi?Vi.memoizedState:null)!==e&&(Wi.flags|=1024),t}function ao(){var e=0!==Xi;return Xi=0,e}function io(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oo(e){if(Hi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Hi=!1}Ui=0,Gi=Vi=Wi=null,Ki=!1,Yi=Xi=0,Zi=null}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Gi?Wi.memoizedState=Gi=e:Gi=Gi.next=e,Gi}function lo(){if(null===Vi){var e=Wi.alternate;e=null!==e?e.memoizedState:null}else e=Vi.next;var t=null===Gi?Wi.memoizedState:Gi.next;if(null!==t)Gi=t,Vi=e;else{if(null===e){if(null===Wi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Vi=e).memoizedState,baseState:Vi.baseState,baseQueue:Vi.baseQueue,queue:Vi.queue,next:null},null===Gi?Wi.memoizedState=Gi=e:Gi=Gi.next=e}return Gi}function co(e){var t=Yi;return Yi+=1,null===Zi&&(Zi=[]),e=ni(Zi,e,t),t=Wi,null===(null===Gi?t.memoizedState:Gi.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?gs:ys),e}function uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return co(e);if(e.$$typeof===w)return Ma(e)}throw Error(o(438,String(e)))}function ho(e){var t=null,n=Wi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Wi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Wi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function po(e,t){return"function"===typeof t?t(e):t}function fo(e){return mo(lo(),Vi,e)}function mo(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var a=e.baseQueue,i=r.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}t.baseQueue=a=i,r.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=s=null,c=null,u=t=a.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(gc&d)===d:(Ui&d)===d){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Va&&(h=!0);else{if((Ui&p)===p){u=u.next,p===Va&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,s=i):c=c.next=d,Wi.lanes|=p,Nc|=p}d=u.action,qi&&n(i,d),i=u.hasEagerState?u.eagerState:n(i,d)}else p={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=i):c=c.next=p,Wi.lanes|=d,Nc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?s=i:c.next=l,!Jn(i,e.memoizedState)&&(Rs=!0,h&&null!==(n=Ga)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=c,r.lastRenderedState=i}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function go(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);Jn(i,t.memoizedState)||(Rs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function yo(e,t,n){var r=Wi,a=lo(),i=ha;if(i){if(void 0===n)throw Error(o(407));n=n()}else n=t();var s=!Jn((Vi||a).memoizedState,n);if(s&&(a.memoizedState=n,Rs=!0),a=a.queue,Wo(xo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==Gi&&1&Gi.memoizedState.tag){if(r.flags|=2048,Lo(9,{destroy:void 0},bo.bind(null,r,a,n,t),null),null===fc)throw Error(o(349));i||0!==(127&Ui)||vo(r,t,n)}return n}function vo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Wi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Wi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bo(e,t,n,r){t.value=n,t.getSnapshot=r,wo(t)&&ko(e)}function xo(e,t,n){return n(function(){wo(t)&&ko(e)})}function wo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function ko(e){var t=Rr(e,2);null!==t&&Xc(t,e,2)}function So(e){var t=so();if("function"===typeof e){var n=e;if(e=n(),qi){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},t}function No(e,t,n,r){return e.baseState=n,mo(e,Vi,"function"===typeof r?r:po)}function To(e,t,n,r,a){if(ds(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==D.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,Io(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Io(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var i=D.T,o={};D.T=o;try{var s=n(a,r),l=D.S;null!==l&&l(o,s),Eo(e,t,s)}catch(c){Ao(e,t,c)}finally{null!==i&&null!==o.types&&(i.types=o.types),D.T=i}}else try{Eo(e,t,i=n(a,r))}catch(u){Ao(e,t,u)}}function Eo(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Co(e,t,n)},function(n){return Ao(e,t,n)}):Co(e,t,n)}function Co(e,t,n){t.status="fulfilled",t.value=n,Oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Io(e,n)))}function Ao(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Oo(t),t=t.next}while(t!==r)}e.action=null}function Oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function _o(e,t){return t}function Mo(e,t){if(ha){var n=fc.formState;if(null!==n){e:{var r=Wi;if(ha){if(ua){t:{for(var a=ua,i=pa;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=Rh(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){ua=Rh(a.nextSibling),r="F!"===a.data;break e}}ma(r)}r=!1}r&&(t=n[0])}}return(n=so()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:t},n.queue=r,n=cs.bind(null,Wi,r),r.dispatch=n,r=So(!1),i=hs.bind(null,Wi,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=so()).queue=a,n=To.bind(null,Wi,a,i,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ro(e){return Do(lo(),Vi,e)}function Do(e,t,n){if(t=mo(e,t,_o)[0],e=fo(po)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=co(t)}catch(o){if(o===Qa)throw $a;throw o}else r=t;var a=(t=lo()).queue,i=a.dispatch;return n!==t.memoizedState&&(Wi.flags|=2048,Lo(9,{destroy:void 0},Fo.bind(null,a,n),null)),[r,i,e]}function Fo(e,t){e.action=t}function Po(e){var t=lo(),n=Vi;if(null!==n)return Do(t,n,e);lo(),t=t.memoizedState;var r=(n=lo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Lo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Wi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Wi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return lo().memoizedState}function jo(e,t,n,r){var a=so();Wi.flags|=e,a.memoizedState=Lo(1|t,{destroy:void 0},n,void 0===r?null:r)}function Bo(e,t,n,r){var a=lo();r=void 0===r?null:r;var i=a.memoizedState.inst;null!==Vi&&null!==r&&$i(r,Vi.memoizedState.deps)?a.memoizedState=Lo(t,i,n,r):(Wi.flags|=e,a.memoizedState=Lo(1|t,i,n,r))}function Uo(e,t){jo(8390656,8,e,t)}function Wo(e,t){Bo(2048,8,e,t)}function Vo(e){var t=lo().memoizedState;return function(e){Wi.flags|=4;var t=Wi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Wi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Go(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Ko(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function qo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ko.bind(null,t,e),n)}function Xo(){}function Yo(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&$i(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&$i(t,r[1]))return r[0];if(r=e(),qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Qo(e,t,n){return void 0===n||0!==(1073741824&Ui)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=qc(),Wi.lanes|=e,Nc|=e,n)}function Jo(e,t,n,r){return Jn(n,t)?n:null!==Ei.current?(e=Qo(e,n,r),Jn(e,t)||(Rs=!0),e):0===(42&Ui)||0!==(1073741824&Ui)&&0===(261930&gc)?(Rs=!0,e.memoizedState=n):(e=qc(),Wi.lanes|=e,Nc|=e,t)}function $o(e,t,n,r,a){var i=F.p;F.p=0!==i&&8>i?i:8;var o=D.T,s={};D.T=s,hs(e,!1,t,n);try{var l=a(),c=D.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)us(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Kc());else us(e,t,r,Kc())}catch(u){us(e,t,{then:function(){},status:"rejected",reason:u},Kc())}finally{F.p=i,null!==o&&null!==s.types&&(o.types=s.types),D.T=o}}function es(){}function ts(e,t,n,r){if(5!==e.tag)throw Error(o(476));var a=ns(e).queue;$o(e,a,t,P,null===n?es:function(){return rs(e),n(r)})}function ns(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:P},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function rs(e){var t=ns(e);null===t.next&&(t=e.alternate.memoizedState),us(e,t.next.queue,{},Kc())}function as(){return Ma(ud)}function is(){return lo().memoizedState}function os(){return lo().memoizedState}function ss(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Kc(),r=bi(t,e=vi(n),n);return null!==r&&(Xc(r,t,n),xi(r,t,n)),t={cache:ja()},void(e.payload=t)}t=t.return}}function ls(e,t,n){var r=Kc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ds(e)?ps(t,n):null!==(n=Mr(e,t,n,r))&&(Xc(n,e,r),fs(n,t,r))}function cs(e,t,n){us(e,t,n,Kc())}function us(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ds(e))ps(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,Jn(s,o))return _r(e,t,a,0),null===fc&&Or(),!1}catch(l){}if(null!==(n=Mr(e,t,a,r)))return Xc(n,e,r),fs(n,t,r),!0}return!1}function hs(e,t,n,r){if(r={lane:2,revertLane:Wu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ds(e)){if(t)throw Error(o(479))}else null!==(t=Mr(e,n,r,2))&&Xc(t,e,2)}function ds(e){var t=e.alternate;return e===Wi||null!==t&&t===Wi}function ps(e,t){Ki=Hi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fs(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}var ms={readContext:Ma,use:uo,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useLayoutEffect:Ji,useInsertionEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useDeferredValue:Ji,useTransition:Ji,useSyncExternalStore:Ji,useId:Ji,useHostTransitionStatus:Ji,useFormState:Ji,useActionState:Ji,useOptimistic:Ji,useMemoCache:Ji,useCacheRefresh:Ji};ms.useEffectEvent=Ji;var gs={readContext:Ma,use:uo,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Uo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){jo(4,2,e,t)},useMemo:function(e,t){var n=so();t=void 0===t?null:t;var r=e();if(qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=so();if(void 0!==n){var a=n(t);if(qi){be(!0);try{n(t)}finally{be(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=ls.bind(null,Wi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},so().memoizedState=e},useState:function(e){var t=(e=So(e)).queue,n=cs.bind(null,Wi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Xo,useDeferredValue:function(e,t){return Qo(so(),e,t)},useTransition:function(){var e=So(!1);return e=$o.bind(null,Wi,e.queue,!0,!1),so().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Wi,a=so();if(ha){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===fc)throw Error(o(349));0!==(127&gc)||vo(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Uo(xo.bind(null,r,i,e),[e]),r.flags|=2048,Lo(9,{destroy:void 0},bo.bind(null,r,i,n,t),null),n},useId:function(){var e=so(),t=fc.identifierPrefix;if(ha){var n=ra;t="_"+t+"R_"+(n=(na&~(1<<32-xe(na)-1)).toString(32)+n),0<(n=Xi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Qi++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:as,useFormState:Mo,useActionState:Mo,useOptimistic:function(e){var t=so();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=hs.bind(null,Wi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ho,useCacheRefresh:function(){return so().memoizedState=ss.bind(null,Wi)},useEffectEvent:function(e){var t=so(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},ys={readContext:Ma,use:uo,useCallback:Yo,useContext:Ma,useEffect:Wo,useImperativeHandle:qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Zo,useReducer:fo,useRef:zo,useState:function(){return fo(po)},useDebugValue:Xo,useDeferredValue:function(e,t){return Jo(lo(),Vi.memoizedState,e,t)},useTransition:function(){var e=fo(po)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:is,useHostTransitionStatus:as,useFormState:Ro,useActionState:Ro,useOptimistic:function(e,t){return No(lo(),0,e,t)},useMemoCache:ho,useCacheRefresh:os};ys.useEffectEvent=Vo;var vs={readContext:Ma,use:uo,useCallback:Yo,useContext:Ma,useEffect:Wo,useImperativeHandle:qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Zo,useReducer:go,useRef:zo,useState:function(){return go(po)},useDebugValue:Xo,useDeferredValue:function(e,t){var n=lo();return null===Vi?Qo(n,e,t):Jo(n,Vi.memoizedState,e,t)},useTransition:function(){var e=go(po)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:is,useHostTransitionStatus:as,useFormState:Po,useActionState:Po,useOptimistic:function(e,t){var n=lo();return null!==Vi?No(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ho,useCacheRefresh:os};function bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vs.useEffectEvent=Vo;var xs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kc(),a=vi(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=bi(e,a,r))&&(Xc(t,e,r),xi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kc(),a=vi(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=bi(e,a,r))&&(Xc(t,e,r),xi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kc(),r=vi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=bi(e,r,n))&&(Xc(t,e,n),xi(t,e,n))}};function ws(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(a,i))}function ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xs.enqueueReplaceState(t,t.state,null)}function Ss(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=p({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function Ns(e){Ir(e)}function Ts(e){console.error(e)}function Is(e){Ir(e)}function Es(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Cs(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function As(e,t,n){return(n=vi(n)).tag=3,n.payload={element:null},n.callback=function(){Es(e,t)},n}function Os(e){return(e=vi(e)).tag=3,e}function _s(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var i=r.value;e.payload=function(){return a(i)},e.callback=function(){Cs(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Cs(t,n,r),"function"!==typeof a&&(null===Pc?Pc=new Set([this]):Pc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ms=Error(o(461)),Rs=!1;function Ds(e,t,n,r){t.child=null===e?fi(t,null,n,r):pi(t,e.child,n,r)}function Fs(e,t,n,r,a){n=n.render;var i=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return _a(t),r=eo(e,t,n,o,i,a),s=ao(),null===e||Rs?(ha&&s&&oa(t),t.flags|=1,Ds(e,t,r,a),t.child):(io(e,t,a),al(e,t,a))}function Ps(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||jr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Wr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ls(e,t,i,r,a))}if(i=e.child,!il(e,a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(o,r)&&e.ref===t.ref)return al(e,t,a)}return t.flags|=1,(e=Br(i,r)).ref=t.ref,e.return=t,t.child=e}function Ls(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if($n(i,r)&&e.ref===t.ref){if(Rs=!1,t.pendingProps=r=i,!il(e,a))return t.lanes=e.lanes,al(e,t,a);0!==(131072&e.flags)&&(Rs=!0)}}return Gs(e,t,n,r,a)}function zs(e,t,n,r){var a=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~i}else r=0,t.child=null;return Bs(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Bs(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ya(0,null!==i?i.cachePool:null),null!==i?Ai(t,i):Oi(),Pi(t)}else null!==i?(Ya(0,i.cachePool),Ai(t,i),Li(),t.memoizedState=null):(null!==e&&Ya(0,null),Oi(),Li());return Ds(e,t,a,n),t.child}function js(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bs(e,t,n,r,a){var i=Xa();return i=null===i?null:{parent:za._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Ya(0,null),Oi(),Pi(t),null!==e&&Aa(e,t,r,!0),t.childLanes=a,null}function Us(e,t){return(t=$s({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ws(e,t,n){return pi(t,e.child,null,n),(e=Us(t,t.pendingProps)).flags|=2,zi(t),t.memoizedState=null,e}function Vs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Gs(e,t,n,r,a){return _a(t),n=eo(e,t,n,r,void 0,a),r=ao(),null===e||Rs?(ha&&r&&oa(t),t.flags|=1,Ds(e,t,n,a),t.child):(io(e,t,a),al(e,t,a))}function Hs(e,t,n,r,a,i){return _a(t),t.updateQueue=null,n=no(t,r,n,a),to(e),r=ao(),null===e||Rs?(ha&&r&&oa(t),t.flags|=1,Ds(e,t,n,i),t.child):(io(e,t,i),al(e,t,i))}function Ks(e,t,n,r,a){if(_a(t),null===t.stateNode){var i=Pr,o=n.contextType;"object"===typeof o&&null!==o&&(i=Ma(o)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=xs,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},gi(t),o=n.contextType,i.context="object"===typeof o&&null!==o?Ma(o):Pr,i.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(bs(t,n,o,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&xs.enqueueReplaceState(i,i.state,null),Ni(t,r,i,a),Si(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,l=Ss(n,s);i.props=l;var c=i.context,u=n.contextType;o=Pr,"object"===typeof u&&null!==u&&(o=Ma(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s||c!==o)&&ks(t,i,r,o),mi=!1;var d=t.memoizedState;i.state=d,Ni(t,r,i,a),Si(),c=t.memoizedState,s||d!==c||mi?("function"===typeof h&&(bs(t,n,h,r),c=t.memoizedState),(l=mi||ws(t,n,l,r,d,c,o))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=o,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,yi(e,t),u=Ss(n,o=t.memoizedProps),i.props=u,h=t.pendingProps,d=i.context,c=n.contextType,l=Pr,"object"===typeof c&&null!==c&&(l=Ma(c)),(c="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==h||d!==l)&&ks(t,i,r,l),mi=!1,d=t.memoizedState,i.state=d,Ni(t,r,i,a),Si();var p=t.memoizedState;o!==h||d!==p||mi||null!==e&&null!==e.dependencies&&Oa(e.dependencies)?("function"===typeof s&&(bs(t,n,s,r),p=t.memoizedState),(u=mi||ws(t,n,u,r,d,p,l)||null!==e&&null!==e.dependencies&&Oa(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Vs(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=pi(t,e.child,null,a),t.child=pi(t,null,n,a)):Ds(e,t,n,a),t.memoizedState=i.state,e=t.child):e=al(e,t,a),e}function qs(e,t,n,r){return ba(),t.flags|=256,Ds(e,t,n,r),t.child}var Xs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ys(e){return{baseLanes:e,cachePool:Za()}}function Zs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Ec),e}function Qs(e,t,n){var r,a=t.pendingProps,i=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ji.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ha){if(i?Di(t):Li(),(e=ua)?null!==(e=null!==(e=Oh(e,pa))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Hr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ma(t);return Mh(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,i?(Li(),l=$s({mode:"hidden",children:l},i=t.mode),a=Vr(a,i,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(a=t.child).memoizedState=Ys(n),a.childLanes=Zs(e,r,n),t.memoizedState=Xs,js(null,a)):(Di(t),Js(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(s)256&t.flags?(Di(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Li(),t.child=e.child,t.flags|=128,t=null):(Li(),l=a.fallback,i=t.mode,a=$s({mode:"visible",children:a.children},i),(l=Vr(l,i,n,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,pi(t,e.child,null,n),(a=t.child).memoizedState=Ys(n),a.childLanes=Zs(e,r,n),t.memoizedState=Xs,t=js(null,a));else if(Di(t),Mh(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(a=Error(o(419))).stack="",a.digest=r,wa({value:a,source:null,stack:null}),t=el(e,t,n)}else if(Rs||Aa(e,t,n,!1),r=0!==(n&e.childLanes),Rs||r){if(null!==(r=fc)&&(0!==(a=Fe(r,n))&&a!==c.retryLane))throw c.retryLane=a,Rr(e,a),Xc(r,e,a),Ms;_h(l)||ou(),t=el(e,t,n)}else _h(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ua=Rh(l.nextSibling),ca=t,ha=!0,da=null,pa=!1,null!==e&&la(t,e),(t=Js(t,a.children)).flags|=4096);return t}return i?(Li(),l=a.fallback,i=t.mode,u=(c=e.child).sibling,(a=Br(c,{mode:"hidden",children:a.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Br(u,l):(l=Vr(l,i,n,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,js(null,a),a=t.child,null===(l=e.child.memoizedState)?l=Ys(n):(null!==(i=l.cachePool)?(c=za._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Za(),l={baseLanes:l.baseLanes|n,cachePool:i}),a.memoizedState=l,a.childLanes=Zs(e,r,n),t.memoizedState=Xs,js(e.child,a)):(Di(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Js(e,t){return(t=$s({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $s(e,t){return(e=zr(22,e,null,t)).lanes=0,e}function el(e,t,n){return pi(t,e.child,null,n),(e=Js(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function nl(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.treeForkCount=i)}function rl(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;r=r.children;var o=ji.current,s=0!==(2&o);if(s?(o=1&o|2,t.flags|=128):o&=1,U(ji,o),Ds(e,t,r,n),r=ha?Jr:0,!s&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Bi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),nl(t,!1,a,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Bi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}nl(t,!0,n,null,i,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Aa(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function il(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Oa(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Rs=!0;else{if(!il(e,n)&&0===(128&t.flags))return Rs=!1,function(e,t,n){switch(t.tag){case 3:X(t,t.stateNode.containerInfo),Ta(0,za,e.memoizedState.cache),ba();break;case 27:case 5:Z(t);break;case 4:X(t,t.stateNode.containerInfo);break;case 10:Ta(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Fi(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Di(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Qs(e,t,n):(Di(t),null!==(e=al(e,t,n))?e.sibling:null);Di(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Aa(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return rl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),U(ji,ji.current),r)break;return null;case 22:return t.lanes=0,zs(e,t,n,t.pendingProps);case 24:Ta(0,za,e.memoizedState.cache)}return al(e,t,n)}(e,t,n);Rs=0!==(131072&e.flags)}else Rs=!1,ha&&0!==(1048576&t.flags)&&ia(t,Jr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ri(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var a=e.$$typeof;if(a===k){t.tag=11,t=Fs(null,t,e,r,n);break e}if(a===T){t.tag=14,t=Ps(null,t,e,r,n);break e}}throw t=M(e)||e,Error(o(306,t,""))}jr(e)?(r=Ss(e,r),t.tag=1,t=Ks(null,t,e,r,n)):(t.tag=0,t=Gs(null,t,e,r,n))}return t;case 0:return Gs(e,t,t.type,t.pendingProps,n);case 1:return Ks(e,t,r=t.type,a=Ss(r,t.pendingProps),n);case 3:e:{if(X(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var i=t.memoizedState;a=i.element,yi(e,t),Ni(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Ta(0,za,r),r!==i.cache&&Ca(t,[za],n,!0),Si(),r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=qs(e,t,r,n);break e}if(r!==a){wa(a=Xr(Error(o(424)),t)),t=qs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ua=Rh(e.firstChild),ca=t,ha=!0,da=null,pa=!0,n=fi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ba(),r===a){t=al(e,t,n);break e}Ds(e,t,r,n)}t=t.child}return t;case 26:return Vs(e,t),null===e?(n=Hh(t.type,null,t.pendingProps,null))?t.memoizedState=n:ha||(n=t.type,e=t.pendingProps,(r=gh(K.current).createElement(n))[Ue]=t,r[We]=e,dh(r,n,e),et(r),t.stateNode=r):t.memoizedState=Hh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Z(t),null===e&&ha&&(r=t.stateNode=Lh(t.type,t.pendingProps,K.current),ca=t,pa=!0,a=ua,Ih(t.type)?(Dh=a,ua=Rh(r.firstChild)):ua=a),Ds(e,t,t.pendingProps.children,n),Vs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ha&&((a=r=ua)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Xe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=Rh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,pa))?(t.stateNode=r,ca=t,ua=Rh(r.firstChild),pa=!1,a=!0):a=!1),a||ma(t)),Z(t),a=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,r=i.children,bh(a,i)?r=null:null!==s&&bh(a,s)&&(t.flags|=32),null!==t.memoizedState&&(a=eo(e,t,ro,null,null,n),ud._currentValue=a),Vs(e,t),Ds(e,t,r,n),t.child;case 6:return null===e&&ha&&((e=n=ua)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Rh(e.nextSibling)))return null}return e}(n,t.pendingProps,pa))?(t.stateNode=n,ca=t,ua=null,e=!0):e=!1),e||ma(t)),null;case 13:return Qs(e,t,n);case 4:return X(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pi(t,null,r,n):Ds(e,t,r,n),t.child;case 11:return Fs(e,t,t.type,t.pendingProps,n);case 7:return Ds(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ds(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ta(0,t.type,r.value),Ds(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,_a(t),r=r(a=Ma(a)),t.flags|=1,Ds(e,t,r,n),t.child;case 14:return Ps(e,t,t.type,t.pendingProps,n);case 15:return Ls(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,a=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ha){if("hidden"===r.mode)return e=Us(t,r),t.lanes=536870912,js(null,e);if(Fi(t),(e=ua)?null!==(e=null!==(e=Oh(e,pa))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Hr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ma(t);return t.lanes=536870912,null}return Us(t,r)}var i=e.memoizedState;if(null!==i){var s=i.dehydrated;if(Fi(t),a)if(256&t.flags)t.flags&=-257,t=Ws(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Rs||Aa(e,t,n,!1),a=0!==(n&e.childLanes),Rs||a){if(null!==(r=fc)&&0!==(s=Fe(r,n))&&s!==i.retryLane)throw i.retryLane=s,Rr(e,s),Xc(r,e,s),Ms;ou(),t=Ws(e,t,n)}else e=i.treeContext,ua=Rh(s.nextSibling),ca=t,ha=!0,da=null,pa=!1,null!==e&&la(t,e),(t=Us(t,r)).flags|=4096;return t}return(e=Br(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return zs(e,t,n,t.pendingProps);case 24:return _a(t),r=Ma(za),null===e?(null===(a=Xa())&&(a=fc,i=ja(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:r,cache:a},gi(t),Ta(0,za,a)):(0!==(e.lanes&n)&&(yi(e,t),Ni(t,null,null,n),Si()),a=e.memoizedState,i=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),Ta(0,za,r)):(r=i.cache,Ta(0,za,r),r!==a.cache&&Ca(t,[za],n,!0))),Ds(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function sl(e){e.flags|=4}function ll(e,t,n,r,a){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw ai=ei,Ja;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ad(t)){if(!ru())throw ai=ei,Ja;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Oe():536870912,e.lanes|=t,Cc|=t)}function hl(e,t){if(!ha)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(sa(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return dl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ia(za),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(va(t)?sl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,xa())),dl(t),null;case 26:var a=t.type,i=t.memoizedState;return null===e?(sl(t),null!==i?(dl(t),cl(t,i)):(dl(t),ll(t,a,0,0,n))):i?i!==e.memoizedState?(sl(t),dl(t),cl(t,i)):(dl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&sl(t),dl(t),ll(t,a,0,0,n)),null;case 27:if(Q(t),n=K.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return dl(t),null}e=G.current,va(t)?ga(t):(e=Lh(a,r,n),t.stateNode=e,sl(t))}return dl(t),null;case 5:if(Q(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return dl(t),null}if(i=G.current,va(t))ga(t);else{var s=gh(K.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(i=s.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?s.createElement(a,{is:r.is}):s.createElement(a)}}i[Ue]=t,i[We]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)i.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=i;e:switch(dh(i,a,r),a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&sl(t)}}return dl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=K.current,va(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ca))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ch(e.nodeValue,n)))||ma(t,!0)}else(e=gh(e).createTextNode(r))[Ue]=t,t.stateNode=e}return dl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=va(t),null!==n){if(null===e){if(!r)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[Ue]=t}else ba(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),e=!1}else n=xa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(zi(t),t):(zi(t),null);if(0!==(128&t.flags))throw Error(o(558))}return dl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=va(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[Ue]=t}else ba(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),a=!1}else a=xa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(zi(t),t):(zi(t),null)}return zi(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),dl(t),null);case 4:return Y(),null===e&&$u(t.stateNode.containerInfo),dl(t),null;case 10:return Ia(t.type),dl(t),null;case 19:if(B(ji),null===(r=t.memoizedState))return dl(t),null;if(a=0!==(128&t.flags),null===(i=r.rendering))if(a)hl(r,!1);else{if(0!==Sc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Bi(e))){for(t.flags|=128,hl(r,!1),e=i.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return U(ji,1&ji.current|2),ha&&aa(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Dc&&(t.flags|=128,a=!0,hl(r,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=Bi(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!ha)return dl(t),null}else 2*le()-r.renderingStartTime>Dc&&536870912!==n&&(t.flags|=128,a=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=ji.current,U(ji,a?1&n|2:1&n),ha&&aa(t,r.treeForkCount),e):(dl(t),null);case 22:case 23:return zi(t),_i(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(dl(t),6&t.subtreeFlags&&(t.flags|=8192)):dl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(qa),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ia(za),dl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function fl(e,t){switch(sa(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ia(za),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 31:if(null!==t.memoizedState){if(zi(t),null===t.alternate)throw Error(o(340));ba()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(zi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ba()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(ji),null;case 4:return Y(),null;case 10:return Ia(t.type),null;case 22:case 23:return zi(t),_i(),null!==e&&B(qa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ia(za),null;default:return null}}function ml(e,t){switch(sa(t),t.tag){case 3:Ia(za),Y();break;case 26:case 27:case 5:Q(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&zi(t);break;case 13:zi(t);break;case 19:B(ji);break;case 10:Ia(t.type);break;case 22:case 23:zi(t),_i(),null!==e&&B(qa);break;case 24:Ia(za)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var i=n.create,o=n.inst;r=i(),o.destroy=r}n=n.next}while(n!==a)}}catch(s){Su(t,t.return,s)}}function yl(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var i=a.next;r=i;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,a=t;var l=n,c=s;try{c()}catch(u){Su(a,l,u)}}}r=r.next}while(r!==i)}}catch(u){Su(t,t.return,u)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ii(t,n)}catch(r){Su(e,e.return,r)}}}function bl(e,t,n){n.props=Ss(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Su(e,t,r)}}function xl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){Su(e,t,a)}}function wl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){Su(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){Su(e,t,i)}else n.current=null}function kl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){Su(e,e.return,a)}}function Sl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,s=null,l=null,c=null,u=null,h=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(f)||uh(e,t,f,null,r,d)}}for(var p in r){var f=r[p];if(d=n[p],r.hasOwnProperty(p)&&(null!=f||null!=d))switch(p){case"type":i=f;break;case"name":a=f;break;case"checked":u=f;break;case"defaultChecked":h=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:f!==d&&uh(e,t,p,f,r,d)}}return void vt(e,s,l,c,u,h,i,a);case"select":for(i in f=s=l=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(i)||uh(e,t,i,null,r,c)}for(a in r)if(i=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":s=i;default:i!==c&&uh(e,t,a,i,r,c)}return t=l,n=s,r=f,void(null!=p?wt(e,!!n,p,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:uh(e,t,l,null,r,a)}for(s in r)if(a=r[s],i=n[s],r.hasOwnProperty(s)&&(null!=a||null!=i))switch(s){case"value":p=a;break;case"defaultValue":f=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(o(91));break;default:a!==i&&uh(e,t,s,a,r,i)}return void kt(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else uh(e,t,m,null,r,p);for(c in r)if(p=r[c],f=n[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else uh(e,t,c,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&uh(e,t,g,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:uh(e,t,u,p,r,f)}return;default:if(Ct(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&hh(e,t,y,void 0,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||void 0===p&&void 0===f||hh(e,t,h,p,r,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&uh(e,t,v,null,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||null==p&&null==f||uh(e,t,d,p,r,f)}(r,e.type,n,t),r[We]=t}catch(a){Su(e,e.return,a)}}function Nl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ih(e.type)||4===e.tag}function Tl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ih(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Il(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Mt));else if(4!==r&&(27===r&&Ih(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Il(e,t,n),e=e.sibling;null!==e;)Il(e,t,n),e=e.sibling}function El(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ih(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(El(e,t,n),e=e.sibling;null!==e;)El(e,t,n),e=e.sibling}function Cl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);dh(t,r,n),t[Ue]=e,t[We]=n}catch(i){Su(e,e.return,i)}}var Al=!1,Ol=!1,_l=!1,Ml="function"===typeof WeakSet?WeakSet:Set,Rl=null;function Dl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Xl(e,n),4&r&&gl(5,n);break;case 1:if(Xl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){Su(n,n.return,o)}else{var a=Ss(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){Su(n,n.return,s)}}64&r&&vl(n),512&r&&xl(n,n.return);break;case 3:if(Xl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ii(e,t)}catch(o){Su(n,n.return,o)}}break;case 27:null===t&&4&r&&Cl(n);case 26:case 5:Xl(e,n),null===t&&4&r&&kl(n),512&r&&xl(n,n.return);break;case 12:Xl(e,n);break;case 31:Xl(e,n),4&r&&Bl(e,n);break;case 13:Xl(e,n),4&r&&Ul(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Eu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Al)){t=null!==t&&null!==t.memoizedState||Ol,a=Al;var i=Ol;Al=r,(Ol=t)&&!i?Zl(e,n,0!==(8772&n.subtreeFlags)):Xl(e,n),Al=a,Ol=i}break;case 30:break;default:Xl(e,n)}}function Fl(e){var t=e.alternate;null!==t&&(e.alternate=null,Fl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pl=null,Ll=!1;function zl(e,t,n){for(n=n.child;null!==n;)jl(e,t,n),n=n.sibling}function jl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(i){}switch(n.tag){case 26:Ol||wl(n,t),zl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ol||wl(n,t);var r=Pl,a=Ll;Ih(n.type)&&(Pl=n.stateNode,Ll=!1),zl(e,t,n),zh(n.stateNode),Pl=r,Ll=a;break;case 5:Ol||wl(n,t);case 6:if(r=Pl,a=Ll,Pl=null,zl(e,t,n),Ll=a,null!==(Pl=r))if(Ll)try{(9===Pl.nodeType?Pl.body:"HTML"===Pl.nodeName?Pl.ownerDocument.body:Pl).removeChild(n.stateNode)}catch(o){Su(n,t,o)}else try{Pl.removeChild(n.stateNode)}catch(o){Su(n,t,o)}break;case 18:null!==Pl&&(Ll?(Eh(9===(e=Pl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gd(e)):Eh(Pl,n.stateNode));break;case 4:r=Pl,a=Ll,Pl=n.stateNode.containerInfo,Ll=!0,zl(e,t,n),Pl=r,Ll=a;break;case 0:case 11:case 14:case 15:yl(2,n,t),Ol||yl(4,n,t),zl(e,t,n);break;case 1:Ol||(wl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),zl(e,t,n);break;case 21:zl(e,t,n);break;case 22:Ol=(r=Ol)||null!==n.memoizedState,zl(e,t,n),Ol=r;break;default:zl(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gd(e)}catch(n){Su(t,t.return,n)}}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gd(e)}catch(n){Su(t,t.return,n)}}function Wl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ml),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ml),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Cu.bind(null,e,t);t.then(r,r)}})}function Vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(Ih(l.type)){Pl=l.stateNode,Ll=!1;break e}break;case 5:Pl=l.stateNode,Ll=!1;break e;case 3:case 4:Pl=l.stateNode.containerInfo,Ll=!0;break e}l=l.return}if(null===Pl)throw Error(o(160));jl(i,s,a),Pl=null,Ll=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Hl(t,e),t=t.sibling}var Gl=null;function Hl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),Kl(e),4&r&&(yl(3,e,e.return),gl(3,e),yl(5,e,e.return));break;case 1:Vl(t,e),Kl(e),512&r&&(Ol||null===n||wl(n,n.return)),64&r&&Al&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Gl;if(Vl(t,e),Kl(e),512&r&&(Ol||null===n||wl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Xe]||i[Ue]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),dh(i,r,n),i[Ue]=e,et(i),r=i;break e;case"link":var s=nd("link","href",a).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((i=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}dh(i=a.createElement(r),r,n),a.head.appendChild(i);break;case"meta":if(s=nd("meta","content",a).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((i=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}dh(i=a.createElement(r),r,n),a.head.appendChild(i);break;default:throw Error(o(468,r))}i[Ue]=e,et(i),r=i}e.stateNode=r}else rd(a,e.type,e.stateNode);else e.stateNode=Qh(a,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?rd(a,e.type,e.stateNode):Qh(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vl(t,e),Kl(e),512&r&&(Ol||null===n||wl(n,n.return)),null!==n&&4&r&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vl(t,e),Kl(e),512&r&&(Ol||null===n||wl(n,n.return)),32&e.flags){a=e.stateNode;try{Nt(a,"")}catch(m){Su(e,e.return,m)}}4&r&&null!=e.stateNode&&Sl(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(_l=!0);break;case 6:if(Vl(t,e),Kl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Su(e,e.return,m)}}break;case 3:if(td=null,a=Gl,Gl=Uh(t.containerInfo),Vl(t,e),Gl=a,Kl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gd(t.containerInfo)}catch(m){Su(e,e.return,m)}_l&&(_l=!1,ql(e));break;case 4:r=Gl,Gl=Uh(e.stateNode.containerInfo),Vl(t,e),Kl(e),Gl=r;break;case 12:default:Vl(t,e),Kl(e);break;case 31:case 19:Vl(t,e),Kl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Wl(e,r)));break;case 13:Vl(t,e),Kl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Mc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Wl(e,r)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Al,h=Ol;if(Al=u||a,Ol=h||c,Vl(t,e),Ol=h,Al=u,Kl(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||Al||Ol||Yl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,a)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,p=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){Su(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(m){Su(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var f=c.stateNode;a?Ch(f,!0):Ch(c.stateNode,!1)}catch(m){Su(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Wl(e,n))));case 30:case 21:}}function Kl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Nl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var a=n.stateNode;El(e,Tl(e),a);break;case 5:var i=n.stateNode;32&n.flags&&(Nt(i,""),n.flags&=-33),El(e,Tl(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;Il(e,Tl(e),s);break;default:throw Error(o(161))}}catch(l){Su(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Xl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Dl(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Yl(t);break;case 1:wl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bl(t,t.return,n),Yl(t);break;case 27:zh(t.stateNode);case 26:case 5:wl(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function Zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Zl(a,i,n),gl(4,i);break;case 1:if(Zl(a,i,n),"function"===typeof(a=(r=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){Su(r,r.return,c)}if(null!==(a=(r=i).updateQueue)){var s=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)Ti(l[a],s)}catch(c){Su(r,r.return,c)}}n&&64&o&&vl(i),xl(i,i.return);break;case 27:Cl(i);case 26:case 5:Zl(a,i,n),n&&null===r&&4&o&&kl(i),xl(i,i.return);break;case 12:Zl(a,i,n);break;case 31:Zl(a,i,n),n&&4&o&&Bl(a,i);break;case 13:Zl(a,i,n),n&&4&o&&Ul(a,i);break;case 22:null===i.memoizedState&&Zl(a,i,n),xl(i,i.return);break;case 30:break;default:Zl(a,i,n)}t=t.sibling}}function Ql(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ba(n))}function Jl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ba(e))}function $l(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,r),2048&a&&gl(9,t);break;case 1:case 31:case 13:default:$l(e,t,n,r);break;case 3:$l(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ba(e)));break;case 12:if(2048&a){$l(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,s=i.onPostCommit;"function"===typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Su(t,t.return,l)}}else $l(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?$l(e,t,n,r):nc(e,t):2&i._visibility?$l(e,t,n,r):(i._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&a&&Ql(o,t);break;case 24:$l(e,t,n,r),2048&a&&Jl(t.alternate,t)}}function tc(e,t,n,r,a){for(a=a&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,o=t,s=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:tc(i,o,s,l,a),gl(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?tc(i,o,s,l,a):nc(i,o):(u._visibility|=2,tc(i,o,s,l,a)),a&&2048&c&&Ql(o.alternate,o);break;case 24:tc(i,o,s,l,a),a&&2048&c&&Jl(o.alternate,o);break;default:tc(i,o,s,l,a)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:nc(n,r),2048&a&&Ql(r.alternate,r);break;case 24:nc(n,r),2048&a&&Jl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ac(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var a=Kh(r.href),i=t.querySelector(qh(a));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=od.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=Xh(r),(a=jh.get(a))&&$h(r,a),et(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),dh(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=od.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gl,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Gl;Gl=Uh(e.stateNode.containerInfo),ac(e,t,n),Gl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ac(e,t,n),rc=r):ac(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function sc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Rl=r,uc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:sc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:sc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):sc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Rl=r,uc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Rl;){var n=Rl;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ba(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Rl=r;else e:for(n=e;null!==Rl;){var a=(r=Rl).sibling,i=r.return;if(Fl(r),r===n){Rl=null;break e}if(null!==a){a.return=i,Rl=a;break e}Rl=i}}}var hc={getCacheForType:function(e){var t=Ma(za),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ma(za).controller.signal}},dc="function"===typeof WeakMap?WeakMap:Map,pc=0,fc=null,mc=null,gc=0,yc=0,vc=null,bc=!1,xc=!1,wc=!1,kc=0,Sc=0,Nc=0,Tc=0,Ic=0,Ec=0,Cc=0,Ac=null,Oc=null,_c=!1,Mc=0,Rc=0,Dc=1/0,Fc=null,Pc=null,Lc=0,zc=null,jc=null,Bc=0,Uc=0,Wc=null,Vc=null,Gc=0,Hc=null;function Kc(){return 0!==(2&pc)&&0!==gc?gc&-gc:null!==D.T?Wu():ze()}function qc(){if(0===Ec)if(0===(536870912&gc)||ha){var e=Ne;0===(3932160&(Ne<<=1))&&(Ne=262144),Ec=e}else Ec=536870912;return null!==(e=Mi.current)&&(e.flags|=32),Ec}function Xc(e,t,n){(e!==fc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(tu(e,0),Jc(e,gc,Ec,!1)),Me(e,n),0!==(2&pc)&&e===fc||(e===fc&&(0===(2&pc)&&(Tc|=n),4===Sc&&Jc(e,gc,Ec,!1)),Fu(e))}function Yc(e,t,n){if(0!==(6&pc))throw Error(o(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ce(e,t),a=r?function(e,t){var n=pc;pc|=2;var r=au(),a=iu();fc!==e||gc!==t?(Fc=null,Dc=le()+500,tu(e,t)):xc=Ce(e,t);e:for(;;)try{if(0!==yc&&null!==mc){t=mc;var i=vc;t:switch(yc){case 1:yc=0,vc=null,du(e,t,i,1);break;case 2:case 9:if(ti(i)){yc=0,vc=null,hu(t);break}t=function(){2!==yc&&9!==yc||fc!==e||(yc=7),Fu(e)},i.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ti(i)?(yc=0,vc=null,hu(t)):(yc=0,vc=null,du(e,t,i,7));break;case 5:var s=null;switch(mc.tag){case 26:s=mc.memoizedState;case 5:case 27:var l=mc;if(s?ad(s):l.stateNode.complete){yc=0,vc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,pu(u)):mc=null}break t}}yc=0,vc=null,du(e,t,i,5);break;case 6:yc=0,vc=null,du(e,t,i,6);break;case 8:eu(),Sc=6;break e;default:throw Error(o(462))}}cu();break}catch(h){nu(e,h)}return Na=Sa=null,D.H=r,D.A=a,pc=n,null!==mc?0:(fc=null,gc=0,Or(),Sc)}(e,t):su(e,t,!0),i=r;;){if(0===a){xc&&!r&&Jc(e,t,0,!1);break}if(n=e.current.alternate,!i||Qc(n)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;a=Ac;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,s).flags|=256),2!==(s=su(l,s,!1))){if(wc&&!c){l.errorRecoveryDisabledLanes|=i,Tc|=i,a=4;break e}i=Oc,Oc=a,null!==i&&(null===Oc?Oc=i:Oc.push.apply(Oc,i))}a=s}if(i=!1,2!==a)continue}}if(1===a){tu(e,0),Jc(e,t,0,!0);break}e:{switch(r=e,i=a){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Jc(r,t,Ec,!bc);break e;case 2:Oc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(a=Mc+300-le())){if(Jc(r,t,Ec,!bc),0!==Ee(r,0,!0))break e;Bc=t,r.timeoutHandle=wh(Zc.bind(null,r,n,Oc,Fc,_c,t,Ec,Tc,Cc,bc,i,"Throttled",-0,0),a)}else Zc(r,n,Oc,Fc,_c,t,Ec,Tc,Cc,bc,i,null,-0,0)}break}a=su(e,t,!1),i=!1}Fu(e)}function Zc(e,t,n,r,a,i,o,s,l,c,u,h,d,p){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){ic(t,i,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mt});var f=(62914560&i)===i?Mc-le():(4194048&i)===i?Rc-le():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&ld(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===id&&(id=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],i=a.transferSize,o=a.initiatorType,s=a.duration;if(i&&s&&ph(o)){for(o=0,s=a.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>s)break;var u=l.transferSize,h=l.initiatorType;u&&ph(h)&&(o+=u*((l=l.responseEnd)<s?1:(s-c)/(l-c)))}if(--r,t+=8*(i+o)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>id?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}(h,f)))return Bc=i,e.cancelPendingCommit=f(mu.bind(null,e,t,i,n,r,a,o,s,l,u,h,null,d,p)),void Jc(e,i,o,!c)}mu(e,t,i,n,r,a,o,s,l)}function Qc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Jn(i(),a))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t,n,r){t&=~Ic,t&=~Tc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var i=31-xe(a),o=1<<i;r[i]=-1,a&=~o}0!==n&&Re(e,n,t)}function $c(){return 0!==(6&pc)||(Pu(0,!1),!1)}function eu(){if(null!==mc){if(0===yc)var e=mc.return;else Na=Sa=null,oo(e=mc),si=null,li=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,kh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc=0,eu(),fc=e,mc=n=Br(e.current,null),gc=t,yc=0,vc=null,bc=!1,xc=Ce(e,t),wc=!1,Cc=Ec=Ic=Tc=Nc=Sc=0,Oc=Ac=null,_c=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-xe(r),i=1<<a;t|=e[a],r&=~i}return kc=t,Or(),n}function nu(e,t){Wi=null,D.H=ms,t===Qa||t===$a?(t=ii(),yc=3):t===Ja?(t=ii(),yc=4):yc=t===Ms?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===mc&&(Sc=1,Es(e,Xr(t,e.current)))}function ru(){var e=Mi.current;return null===e||((4194048&gc)===gc?null===Ri:((62914560&gc)===gc||0!==(536870912&gc))&&e===Ri)}function au(){var e=D.H;return D.H=ms,null===e?ms:e}function iu(){var e=D.A;return D.A=hc,e}function ou(){Sc=4,bc||(4194048&gc)!==gc&&null!==Mi.current||(xc=!0),0===(134217727&Nc)&&0===(134217727&Tc)||null===fc||Jc(fc,gc,Ec,!1)}function su(e,t,n){var r=pc;pc|=2;var a=au(),i=iu();fc===e&&gc===t||(Fc=null,tu(e,t)),t=!1;var o=Sc;e:for(;;)try{if(0!==yc&&null!==mc){var s=mc,l=vc;switch(yc){case 8:eu(),o=6;break e;case 3:case 2:case 9:case 6:null===Mi.current&&(t=!0);var c=yc;if(yc=0,vc=null,du(e,s,l,c),n&&xc){o=0;break e}break;default:c=yc,yc=0,vc=null,du(e,s,l,c)}}lu(),o=Sc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Na=Sa=null,pc=r,D.H=a,D.A=i,null===mc&&(fc=null,gc=0,Or()),o}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!oe();)uu(mc)}function uu(e){var t=ol(e.alternate,e,kc);e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Hs(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Hs(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:oo(t);default:ml(n,t),t=ol(n,t=mc=Ur(t,kc),kc)}e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function du(e,t,n,r){Na=Sa=null,oo(t),si=null,li=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Aa(t,n,a,!0),null!==(n=Mi.current)){switch(n.tag){case 31:case 13:return null===Ri?ou():null===n.alternate&&0===Sc&&(Sc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Nu(e,r,a)),!1;case 22:return n.flags|=65536,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Nu(e,r,a)),!1}throw Error(o(435,n.tag))}return Nu(e,r,a),ou(),!1}if(ha)return null!==(t=Mi.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==fa&&wa(Xr(e=Error(o(422),{cause:r}),n))):(r!==fa&&wa(Xr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Xr(r,n),wi(e,a=As(e.stateNode,r,a)),4!==Sc&&(Sc=2)),!1;var i=Error(o(520),{cause:r});if(i=Xr(i,n),null===Ac?Ac=[i]:Ac.push(i),4!==Sc&&(Sc=2),null===t)return!0;r=Xr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,wi(n,e=As(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Pc||!Pc.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,_s(a=Os(a),e,n,r),wi(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,gc))return Sc=1,Es(e,Xr(n,e.current)),void(mc=null)}catch(i){if(null!==a)throw mc=a,i;return Sc=1,Es(e,Xr(n,e.current)),void(mc=null)}32768&t.flags?(ha||1===r?e=!0:xc||0!==(536870912&gc)?e=!1:(bc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Mi.current)&&13===r.tag&&(r.flags|=16384))),fu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void fu(t,bc);e=t.return;var n=pl(t.alternate,t,kc);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===Sc&&(Sc=5)}function fu(e,t){do{var n=fl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);Sc=6,mc=null}function mu(e,t,n,r,a,i,s,l,c){e.cancelPendingCommit=null;do{xu()}while(0!==Lc);if(0!==(6&pc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,a,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-xe(n),h=1<<u;s[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var p=d[u];null!==p&&(p.lane&=-536870913)}n&=~h}0!==r&&Re(e,r,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,n,i|=Ar,s,l,c),e===fc&&(mc=fc=null,gc=0),jc=t,zc=e,Bc=n,Uc=i,Wc=a,Vc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ae(de,function(){return wu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null,a=F.p,F.p=2,s=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,fh=bd,ar(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==a&&3!==d.nodeType||(l=s+a),d!==i||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===a&&(l=s),p===i&&++h===r&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:e,selectionRange:n},bd=!1,Rl=t;null!==Rl;)if(e=(t=Rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Rl=e;else for(;null!==Rl;){switch(i=(t=Rl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(a=e[n]).ref.impl=a.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=Ss(n.type,a);e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){Su(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ah(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ah(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Rl=e;break}Rl=t.return}}(e,t)}finally{pc=s,F.p=a,D.T=r}}Lc=1,gu(),yu(),vu()}}function gu(){if(1===Lc){Lc=0;var e=zc,t=jc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var r=F.p;F.p=2;var a=pc;pc|=4;try{Hl(t,e);var i=mh,o=rr(e.containerInfo),s=i.focusedElem,l=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&nr(s.ownerDocument.documentElement,s)){if(null!==l&&ar(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var h=s.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var p=d.getSelection(),f=s.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(o=g,g=m,m=o);var y=tr(s,m),v=tr(s,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=h.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(h=[],p=s;p=p.parentNode;)1===p.nodeType&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<h.length;s++){var x=h[s];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}bd=!!fh,mh=fh=null}finally{pc=a,F.p=r,D.T=n}}e.current=t,Lc=2}}function yu(){if(2===Lc){Lc=0;var e=zc,t=jc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var r=F.p;F.p=2;var a=pc;pc|=4;try{Dl(e,t.alternate,t)}finally{pc=a,F.p=r,D.T=n}}Lc=3}}function vu(){if(4===Lc||3===Lc){Lc=0,se();var e=zc,t=jc,n=Bc,r=Vc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Lc=5:(Lc=0,jc=zc=null,bu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Pc=null),Le(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=D.T,a=F.p,F.p=2,D.T=null;try{for(var i=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];i(s.value,{componentStack:s.stack})}}finally{D.T=t,F.p=a}}0!==(3&Bc)&&xu(),Fu(e),a=e.pendingLanes,0!==(261930&n)&&0!==(42&a)?e===Hc?Gc++:(Gc=0,Hc=e):Gc=0,Pu(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ba(t)))}function xu(){return gu(),yu(),vu(),wu()}function wu(){if(5!==Lc)return!1;var e=zc,t=Uc;Uc=0;var n=Le(Bc),r=D.T,a=F.p;try{F.p=32>n?32:n,D.T=null,n=Wc,Wc=null;var i=zc,s=Bc;if(Lc=0,jc=zc=null,Bc=0,0!==(6&pc))throw Error(o(331));var l=pc;if(pc|=4,lc(i.current),ec(i,i.current,s,n),pc=l,Pu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,i)}catch(c){}return!0}finally{F.p=a,D.T=r,bu(e,t)}}function ku(e,t,n){t=Xr(n,t),null!==(e=bi(e,t=As(e.stateNode,t,2),2))&&(Me(e,2),Fu(e))}function Su(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Pc||!Pc.has(r))){e=Xr(n,e),null!==(r=bi(t,n=Os(2),2))&&(_s(n,r,t,e),Me(r,2),Fu(r));break}}t=t.return}}function Nu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new dc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(wc=!0,a.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fc===e&&(gc&n)===n&&(4===Sc||3===Sc&&(62914560&gc)===gc&&300>le()-Mc?0===(2&pc)&&tu(e,0):Ic|=n,Cc===gc&&(Cc=0)),Fu(e)}function Iu(e,t){0===t&&(t=Oe()),null!==(e=Rr(e,t))&&(Me(e,t),Fu(e))}function Eu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Iu(e,n)}function Cu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),Iu(e,n)}var Au=null,Ou=null,_u=!1,Mu=!1,Ru=!1,Du=0;function Fu(e){e!==Ou&&null===e.next&&(null===Ou?Au=Ou=e:Ou=Ou.next=e),Mu=!0,_u||(_u=!0,Nh(function(){0!==(6&pc)?ae(ue,Lu):zu()}))}function Pu(e,t){if(!Ru&&Mu){Ru=!0;do{for(var n=!1,r=Au;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var i=0;else{var o=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-xe(42|e)+1)-1,i=201326741&(i&=a&~(o&~s))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Uu(r,i))}else i=gc,0===(3&(i=Ee(r,r===fc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ce(r,i)||(n=!0,Uu(r,i));r=r.next}}while(n);Ru=!1}}function Lu(){zu()}function zu(){Mu=_u=!1;var e=0;0!==Du&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==xh&&(xh=e,!0);return xh=null,!1}()&&(e=Du);for(var t=le(),n=null,r=Au;null!==r;){var a=r.next,i=ju(r,t);0===i?(r.next=null,null===n?Au=a:n.next=a,null===a&&(Ou=n)):(n=r,(0!==e||0!==(3&i))&&(Mu=!0)),r=a}0!==Lc&&5!==Lc||Pu(e,!1),0!==Du&&(Du=0)}function ju(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-xe(i),s=1<<o,l=a[o];-1===l?0!==(s&n)&&0===(s&r)||(a[o]=Ae(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}if(n=gc,n=Ee(e,e===(t=fc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Le(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=fe}return r=Bu.bind(null,e),n=ae(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Lc&&5!==Lc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=Ee(e,e===fc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,r,t),ju(e,le()),null!=e.callbackNode&&e.callbackNode===n?Bu.bind(null,e):null)}function Uu(e,t){if(xu())return null;Yc(e,t,!0)}function Wu(){if(0===Du){var e=Va;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Du=e}return Du}function Vu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:_t(""+e)}function Gu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Hu=0;Hu<Nr.length;Hu++){var Ku=Nr[Hu];Tr(Ku.toLowerCase(),"on"+(Ku[0].toUpperCase()+Ku.slice(1)))}Tr(gr,"onAnimationEnd"),Tr(yr,"onAnimationIteration"),Tr(vr,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(br,"onTransitionRun"),Tr(xr,"onTransitionStart"),Tr(wr,"onTransitionCancel"),Tr(kr,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qu));function Yu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(u){Ir(u)}a.currentTarget=null,i=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(u){Ir(u)}a.currentTarget=null,i=l}}}}function Zu(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var r=e+"__bubble";n.has(r)||(eh(t,e,2,!1),n.add(r))}function Qu(e,t,n){var r=0;t&&(r|=4),eh(n,e,r,t)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[Ju]){e[Ju]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Xu.has(t)||Qu(t,!1,e),Qu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ju]||(t[Ju]=!0,Qu("selectionchange",!1,t))}}function eh(e,t,n,r){switch(Id(t)){case 2:var a=xd;break;case 8:a=wd;break;default:a=kd}n=a.bind(null,t,n,e),a=void 0,!Wt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function th(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==s;){if(null===(o=Ze(s)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=i=o;continue e}s=s.parentNode}}r=r.return}jt(function(){var r=i,a=Dt(n),o=[];e:{var s=Sr.get(e);if(void 0!==s){var c=nn,u=e;switch(e){case"keypress":if(0===Xt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xn;break;case gr:case yr:case vr:c=un;break;case kr:c=wn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Sn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),p=h?null!==s?s+"Capture":null:s;h=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Bt(m,p))&&h.push(nh(m,g,f)),d)break;m=m.return}0<h.length&&(s=new c(s,u,null,n,a),o.push({event:s,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!Ze(u)&&!u[Ve])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ze(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=sn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=bn,g="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==c?s:Je(c),f=null==u?s:Je(u),(s=new h(g,m+"leave",c,n,a)).target=d,s.relatedTarget=f,g=null,Ze(a)===r&&((h=new h(p,m+"enter",u,n,a)).target=f,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(h=ah,m=u,f=0,g=p=c;g;g=h(g))f++;g=0;for(var y=m;y;y=h(y))g++;for(;0<f-g;)p=h(p),f--;for(;0<g-f;)m=h(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){h=p;break e}p=h(p),m=h(m)}h=null}else h=null;null!==c&&ih(o,s,c,h,!1),null!==u&&null!==d&&ih(o,d,u,h,!0)}if("select"===(c=(s=r?Je(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var v=Un;else if(Fn(s))if(Wn)v=Qn;else{v=Yn;var b=Xn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Ct(r.elementType)&&(v=Un):v=Zn;switch(v&&(v=v(e,r))?Pn(o,v,n,a):(b&&b(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&xt(s,"number",s.value)),b=r?Je(r):window,e){case"focusin":(Fn(b)||"true"===b.contentEditable)&&(or=b,sr=r,lr=null);break;case"focusout":lr=sr=or=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(o,n,a);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":ur(o,n,a)}var x;if(Tn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?_n(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(x=qt()):(Ht="value"in(Gt=a)?Gt.value:Gt.textContent,Rn=!0)),0<(b=rh(r,w)).length&&(w=new dn(w,e,null,n,a),o.push({event:w,listeners:b}),x?w.data=x:null!==(x=Mn(n))&&(w.data=x))),(x=En?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(On=!0,An);case"textInput":return(e=t.data)===An&&On?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!Tn&&_n(e,t)?(e=qt(),Kt=Ht=Gt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=rh(r,"onBeforeInput")).length&&(b=new dn("onBeforeInput","beforeinput",null,n,a),o.push({event:b,listeners:w}),b.data=x)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var i=Vu((a[We]||null).action),o=r.submitter;o&&null!==(t=(t=o[We]||null)?Vu(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var s=new nn("action","action",null,r,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Du){var e=o?Gu(a,o):new FormData(a);ts(n,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"===typeof i&&(s.preventDefault(),e=o?Gu(a,o):new FormData(a),ts(n,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(o,e,r,n,a)}Yu(o,t)})}function nh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rh(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=Bt(e,n))&&r.unshift(nh(e,a,i)),null!=(a=Bt(e,t))&&r.push(nh(e,a,i))),3===e.tag)return r;e=e.return}return[]}function ah(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ih(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,a?null!=(c=Bt(n,i))&&o.unshift(nh(n,c,l)):a||null!=(c=Bt(n,i))&&o.push(nh(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var oh=/\r\n?/g,sh=/\u0000|\uFFFD/g;function lh(e){return("string"===typeof e?e:""+e).replace(oh,"\n").replace(sh,"")}function ch(e,t){return t=lh(t),lh(e)===t}function uh(e,t,n,r,a,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Nt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Et(e,r,i);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=_t(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&uh(e,t,"name",a.name,a,null),uh(e,t,"formEncType",a.formEncType,a,null),uh(e,t,"formMethod",a.formMethod,a,null),uh(e,t,"formTarget",a.formTarget,a,null)):(uh(e,t,"encType",a.encType,a,null),uh(e,t,"method",a.method,a,null),uh(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=_t(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Mt);break;case"onScroll":null!=r&&Zu("scroll",e);break;case"onScrollEnd":null!=r&&Zu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=_t(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Zu("beforetoggle",e),Zu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=At.get(n)||n,r)}}function hh(e,t,n,r,a,i){switch(n){case"style":Et(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&Nt(e,""+r);break;case"onScroll":null!=r&&Zu("scroll",e);break;case"onScrollEnd":null!=r&&Zu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Mt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(i=null!=(i=e[We]||null)?i[n]:null)&&e.removeEventListener(t,i,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function dh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zu("error",e),Zu("load",e);var r,a=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:uh(e,t,r,s,n,null)}}return i&&uh(e,t,"srcSet",n.srcSet,n,null),void(a&&uh(e,t,"src",n.src,n,null));case"input":Zu("invalid",e);var l=r=s=i=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var h=n[a];if(null!=h)switch(a){case"name":i=h;break;case"type":s=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:uh(e,t,a,h,n,null)}}return void bt(e,r,l,c,u,s,i,!1);case"select":for(i in Zu("invalid",e),a=s=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:uh(e,t,i,l,n,null)}return t=r,n=s,e.multiple=!!a,void(null!=t?wt(e,!!a,t,!1):null!=n&&wt(e,!!a,n,!0));case"textarea":for(s in Zu("invalid",e),r=i=a=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":a=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:uh(e,t,s,l,n,null)}return void St(e,a,i,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else uh(e,t,c,a,n,null);return;case"dialog":Zu("beforetoggle",e),Zu("toggle",e),Zu("cancel",e),Zu("close",e);break;case"iframe":case"object":Zu("load",e);break;case"video":case"audio":for(a=0;a<qu.length;a++)Zu(qu[a],e);break;case"image":Zu("error",e),Zu("load",e);break;case"details":Zu("toggle",e);break;case"embed":case"source":case"link":Zu("error",e),Zu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:uh(e,t,u,a,n,null)}return;default:if(Ct(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(a=n[h])&&hh(e,t,h,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&uh(e,t,l,a,n,null))}function ph(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fh=null,mh=null;function gh(e){return 9===e.nodeType?e:e.ownerDocument}function yh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xh=null;var wh="function"===typeof setTimeout?setTimeout:void 0,kh="function"===typeof clearTimeout?clearTimeout:void 0,Sh="function"===typeof Promise?Promise:void 0,Nh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Sh?function(e){return Sh.resolve(null).then(e).catch(Th)}:wh;function Th(e){setTimeout(function(){throw e})}function Ih(e){return"head"===e}function Eh(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===r)return e.removeChild(a),void Gd(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)zh(e.ownerDocument.documentElement);else if("head"===n){zh(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var o=i.nextSibling,s=i.nodeName;i[Xe]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=o}}else"body"===n&&zh(e.ownerDocument.body);n=a}while(n);Gd(t)}function Ch(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Ah(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ah(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Oh(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Rh(e.nextSibling)))return null}return e}function _h(e){return"$?"===e.data||"$~"===e.data}function Mh(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Rh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Dh=null;function Fh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Rh(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Ph(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Lh(e,t,n){switch(t=gh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function zh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var jh=new Map,Bh=new Set;function Uh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Wh=F.d;F.d={f:function(){var e=Wh.f(),t=$c();return e||t},r:function(e){var t=Qe(e);null!==t&&5===t.tag&&"form"===t.type?rs(t):Wh.r(e)},D:function(e){Wh.D(e),Gh("dns-prefetch",e,null)},C:function(e,t){Wh.C(e,t),Gh("preconnect",e,t)},L:function(e,t,n){Wh.L(e,t,n);var r=Vh;if(r&&e&&t){var a='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+yt(n.imageSizes)+'"]')):a+='[href="'+yt(e)+'"]';var i=a;switch(t){case"style":i=Kh(e);break;case"script":i=Yh(e)}jh.has(i)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),jh.set(i,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(qh(i))||"script"===t&&r.querySelector(Zh(i))||(dh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Wh.m(e,t);var n=Vh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Yh(e)}if(!jh.has(i)&&(e=p({rel:"modulepreload",href:e},t),jh.set(i,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zh(i)))return}dh(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Wh.X(e,t);var n=Vh;if(n&&e){var r=$e(n).hoistableScripts,a=Yh(e),i=r.get(a);i||((i=n.querySelector(Zh(a)))||(e=p({src:e,async:!0},t),(t=jh.get(a))&&ed(e,t),et(i=n.createElement("script")),dh(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}},S:function(e,t,n){Wh.S(e,t,n);var r=Vh;if(r&&e){var a=$e(r).hoistableStyles,i=Kh(e);t=t||"default";var o=a.get(i);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(qh(i)))s.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=jh.get(i))&&$h(e,n);var l=o=r.createElement("link");et(l),dh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Jh(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:s},a.set(i,o)}}},M:function(e,t){Wh.M(e,t);var n=Vh;if(n&&e){var r=$e(n).hoistableScripts,a=Yh(e),i=r.get(a);i||((i=n.querySelector(Zh(a)))||(e=p({src:e,async:!0,type:"module"},t),(t=jh.get(a))&&ed(e,t),et(i=n.createElement("script")),dh(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}};var Vh="undefined"===typeof document?null:document;function Gh(e,t,n){var r=Vh;if(r&&"string"===typeof t&&t){var a=yt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),Bh.has(a)||(Bh.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(dh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Hh(e,t,n,r){var a,i,s,l,c=(c=K.current)?Uh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Kh(n.href),(r=(n=$e(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Kh(n.href);var u=$e(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(qh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),jh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},jh.set(e,n),u||(a=c,i=e,s=n,l=h.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),dh(i,"link",s),et(i),a.head.appendChild(i))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Yh(n),(r=(n=$e(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Kh(e){return'href="'+yt(e)+'"'}function qh(e){return'link[rel="stylesheet"]['+e+"]"}function Xh(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Yh(e){return'[src="'+yt(e)+'"]'}function Zh(e){return"script[async]"+e}function Qh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var a=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),dh(r,"style",a),Jh(r,n.precedence,e),t.instance=r;case"stylesheet":a=Kh(n.href);var i=e.querySelector(qh(a));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=Xh(n),(a=jh.get(a))&&$h(r,a),et(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),dh(i,"link",r),t.state.loading|=4,Jh(i,n.precedence,e),t.instance=i;case"script":return i=Yh(n.src),(a=e.querySelector(Zh(i)))?(t.instance=a,et(a),a):(r=n,(a=jh.get(i))&&ed(r=p({},n),a),et(a=(e=e.ownerDocument||e).createElement("script")),dh(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Jh(r,n.precedence,e));return t.instance}function Jh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)i=s;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function $h(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var td=null;function nd(e,t,n){if(null===td){var r=new Map,a=td=new Map;a.set(n,r)}else(r=(a=td).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[Xe]||i[Ue]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var s=r.get(o);s?s.push(i):r.set(o,[i])}}return r}function rd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ad(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var id=0;function od(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var sd=null;function ld(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,sd=new Map,t.forEach(cd,e),sd=null,od.call(e))}function cd(e,t){if(!(4&t.state.loading)){var n=sd.get(e);if(n)var r=n.get(null);else{n=new Map,sd.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(a=t.instance).getAttribute("data-precedence"),(i=n.get(o)||r)===r&&n.set(null,a),n.set(o,a),this.count++,r=od.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var ud={$$typeof:w,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function hd(e,t,n,r,a,i,o,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function dd(e,t,n,r,a,i,o,s,l,c,u,h){return e=new hd(e,t,n,o,l,c,u,h,s),t=1,!0===i&&(t|=24),i=zr(3,null,null,t),e.current=i,i.stateNode=e,(t=ja()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},gi(i),e}function pd(e){return e?e=Pr:Pr}function fd(e,t,n,r,a,i){a=pd(a),null===r.context?r.context=a:r.pendingContext=a,(r=vi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=bi(e,r,t))&&(Xc(n,0,t),xi(n,e,t))}function md(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gd(e,t){md(e,t),(e=e.alternate)&&md(e,t)}function yd(e){if(13===e.tag||31===e.tag){var t=Rr(e,67108864);null!==t&&Xc(t,0,67108864),gd(e,67108864)}}function vd(e){if(13===e.tag||31===e.tag){var t=Kc(),n=Rr(e,t=Pe(t));null!==n&&Xc(n,0,t),gd(e,t)}}var bd=!0;function xd(e,t,n,r){var a=D.T;D.T=null;var i=F.p;try{F.p=2,kd(e,t,n,r)}finally{F.p=i,D.T=a}}function wd(e,t,n,r){var a=D.T;D.T=null;var i=F.p;try{F.p=8,kd(e,t,n,r)}finally{F.p=i,D.T=a}}function kd(e,t,n,r){if(bd){var a=Sd(r);if(null===a)th(e,t,r,Nd,n),Fd(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Cd=Pd(Cd,e,t,n,r,a),!0;case"dragenter":return Ad=Pd(Ad,e,t,n,r,a),!0;case"mouseover":return Od=Pd(Od,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return _d.set(i,Pd(_d.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Md.set(i,Pd(Md.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Fd(e,r),4&t&&-1<Dd.indexOf(e)){for(;null!==a;){var i=Qe(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=Ie(i.pendingLanes);if(0!==o){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-xe(o);s.entanglements[1]|=l,o&=~l}Fu(i),0===(6&pc)&&(Dc=le()+500,Pu(0,!1))}}break;case 31:case 13:null!==(s=Rr(i,2))&&Xc(s,0,2),$c(),gd(i,2)}if(null===(i=Sd(r))&&th(e,t,r,Nd,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else th(e,t,r,null,n)}}function Sd(e){return Td(e=Dt(e))}var Nd=null;function Td(e){if(Nd=null,null!==(e=Ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nd=e,null}function Id(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case he:return 8;case de:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Ed=!1,Cd=null,Ad=null,Od=null,_d=new Map,Md=new Map,Rd=[],Dd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fd(e,t){switch(e){case"focusin":case"focusout":Cd=null;break;case"dragenter":case"dragleave":Ad=null;break;case"mouseover":case"mouseout":Od=null;break;case"pointerover":case"pointerout":_d.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Md.delete(t.pointerId)}}function Pd(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=Qe(t))&&yd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ld(e){var t=Ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void je(e.priority,function(){vd(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void je(e.priority,function(){vd(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sd(e.nativeEvent);if(null!==n)return null!==(t=Qe(n))&&yd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function jd(e,t,n){zd(e)&&n.delete(t)}function Bd(){Ed=!1,null!==Cd&&zd(Cd)&&(Cd=null),null!==Ad&&zd(Ad)&&(Ad=null),null!==Od&&zd(Od)&&(Od=null),_d.forEach(jd),Md.forEach(jd)}function Ud(e,t){e.blockedOn===t&&(e.blockedOn=null,Ed||(Ed=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bd)))}var Wd=null;function Vd(e){Wd!==e&&(Wd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Wd===e&&(Wd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===Td(r||n))continue;break}var i=Qe(n);null!==i&&(e.splice(t,3),t-=3,ts(i,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Gd(e){function t(t){return Ud(t,e)}null!==Cd&&Ud(Cd,e),null!==Ad&&Ud(Ad,e),null!==Od&&Ud(Od,e),_d.forEach(t),Md.forEach(t);for(var n=0;n<Rd.length;n++){var r=Rd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Rd.length&&null===(n=Rd[0]).blockedOn;)Ld(n),null===n.blockedOn&&Rd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],o=a[We]||null;if("function"===typeof i)o||Vd(n);else if(o){var s=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[We]||null)s=o.formAction;else if(null!==Td(a))continue}else s=o.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Vd(n)}}}function Hd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Kd(e){this._internalRoot=e}function qd(e){this._internalRoot=e}qd.prototype.render=Kd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));fd(t.current,Kc(),e,t,null,null)},qd.prototype.unmount=Kd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fd(e.current,2,null,e,null,null),$c(),t[Ve]=null}},qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=ze();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rd.length&&0!==t&&t<Rd[n].priority;n++);Rd.splice(n,0,e),0===n&&Ld(e)}};var Xd=a.version;if("19.2.3"!==Xd)throw Error(o(527,Xd,"19.2.3"));F.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return h(a),e;if(i===r)return h(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,r=i;break}if(c===r){s=!0,r=a,n=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===n){s=!0,n=i,r=a;break}if(c===r){s=!0,r=i,n=a;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Yd={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{ye=Zd.inject(Yd),ve=Zd}catch(Jd){}}t.createRoot=function(e,t){if(!s(e))throw Error(o(299));var n=!1,r="",a=Ns,i=Ts,l=Is;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=dd(e,1,!1,null,0,n,r,null,a,i,l,Hd),e[Ve]=t.current,$u(e),new Kd(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(o(299));var r=!1,a="",i=Ns,l=Ts,c=Is,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=dd(e,1,!0,t,0,r,a,u,i,l,c,Hd)).context=pd(null),n=t.current,(a=vi(r=Pe(r=Kc()))).callback=null,bi(n,a,r),n=r,t.current.lanes=n,Me(t,n),Fu(t),e[Ve]=t.current,$u(e),new qd(t)},t.version="19.2.3"},7043(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!r.isSymbol(e))||("string"===typeof e&&(i.test(e)||!a.test(e))||null!=t&&Object.hasOwn(t,e)))}},7066(e,t,n){var r;!function(e,a){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&o(r,n),a.state=function(){return o(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},7087(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var a=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var n=a;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))break e;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function l(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}i("Symbol",function(e){function t(e,t){this.g=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+a++,r)}}),i("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),i=0;i<n.length;i++){var s=a[n[i]];"function"===typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e});var c,u="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var h;e:{var d={};try{d.__proto__={a:!0},h=d.a;break e}catch(yt){}h=!1}c=h?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var p=c;function f(e,t){if(e.prototype=u(t.prototype),e.prototype.constructor=e,p)p(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ea=t.prototype}function m(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function g(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function y(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function v(e,t,n){return e.g=n,{value:t}}function b(e){this.g=new m,this.h=e}function x(e,t,n,r){try{var a=t.call(e.g.i,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.l=!1,a;var i=a.value}catch(o){return e.g.i=null,y(e.g,o),w(e)}return e.g.i=null,r.call(e.g,i),w(e)}function w(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,y(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function k(e){this.next=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=w(e)),t},this.throw=function(t){return g(e.g),e.g.i?t=x(e,e.g.i.throw,t,e.g.o):(y(e.g,t),t=w(e)),t},this.return=function(t){return function(e,t){g(e.g);var n=e.g.i;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),w(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function S(e,t){return t=new k(new b(t)),p&&e.prototype&&p(t,e.prototype),t}m.prototype.o=function(e){this.h=e},m.prototype.return=function(e){this.j={return:e},this.g=this.s};var N="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};i("Object.assign",function(e){return e||N}),i("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=a.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.m(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;i(function(){if(e.B()){var t=a.console;"undefined"!==typeof t&&t.error(e.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var e=a.CustomEvent,t=a.Event,n=a.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(n){i(n)}}:t}var a,i,o=new t(function(e,t){a=e,i=t});return this.J(r(e,a),r(n,i)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var a=s(e),i=a.next();!i.done;i=a.next())r(i.value).J(t,n)})},t.all=function(e){var n=s(e),a=n.next();return a.done?r([]):new t(function(e,t){function i(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,r(a.value).J(i(o.length-1),t),a=n.next()}while(!a.done)})},t}),i("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}}),i("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var a=n[t];if(a===e||Object.is(a,e))return!0}return!1}}),i("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}),i("Array.prototype.keys",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,function(e){return e})}});var T=this||self;function I(e,t){e=e.split(".");var n,r=T;e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function E(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var C,A,O="undefined"!==typeof TextDecoder,_="undefined"!==typeof TextEncoder;function M(e){if(_)e=(A||(A=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,r=new Uint8Array(3*e.length),a=0;a<e.length;a++){var i=e.charCodeAt(a);if(128>i)r[n++]=i;else{if(2048>i)r[n++]=i>>6|192;else{if(55296<=i&&57343>=i){if(56319>=i&&a<e.length){var o=e.charCodeAt(++a);if(56320<=o&&57343>=o){i=1024*(i-55296)+o-56320+65536,r[n++]=i>>18|240,r[n++]=i>>12&63|128,r[n++]=i>>6&63|128,r[n++]=63&i|128;continue}a--}if(t)throw Error("Found an unpaired surrogate");i=65533}r[n++]=i>>12|224,r[n++]=i>>6&63|128}r[n++]=63&i|128}}e=r.subarray(0,n)}return e}var R={},D=null;function F(e,t){void 0===t&&(t=0),L(),t=R[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",a=0,i=0;a<e.length-2;a+=3){var o=e[a],s=e[a+1],l=e[a+2],c=t[o>>2];o=t[(3&o)<<4|s>>4],s=t[(15&s)<<2|l>>6],l=t[63&l],n[i++]=c+o+s+l}switch(c=0,l=r,e.length-a){case 2:l=t[(15&(c=e[a+1]))<<2]||r;case 1:e=e[a],n[i]=t[e>>2]+t[(3&e)<<4|c>>4]+l+r}return n.join("")}function P(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),a=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),a=D[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}L();for(var r=0;;){var a=n(-1),i=n(0),o=n(64),s=n(64);if(64===s&&-1===a)break;t(a<<2|i>>4),64!=o&&(t(i<<4&240|o>>2),64!=s&&t(o<<6&192|s))}}(e,function(e){r[a++]=e}),r.subarray(0,a)}function L(){if(!D){D={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));R[n]=r;for(var a=0;a<r.length;a++){var i=r[a];void 0===D[i]&&(D[i]=a)}}}}var z,j="function"===typeof Uint8Array.prototype.slice;function B(e,t,n){return t===n?z||(z=new Uint8Array(0)):j?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var U=0;function W(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=t,e&&V(this,e)}function V(e,t){t=t.constructor===Uint8Array?t:t.constructor===ArrayBuffer||t.constructor===Array?new Uint8Array(t):t.constructor===String?P(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e.h=t,e.l=0,e.j=e.h.length,e.g=e.l}function G(e){for(var t=128,n=0,r=0,a=0;4>a&&128<=t;a++)n|=(127&(t=e.h[e.g++]))<<7*a;if(128<=t&&(n|=(127&(t=e.h[e.g++]))<<28,r|=(127&t)>>4),128<=t)for(a=0;5>a&&128<=t;a++)r|=(127&(t=e.h[e.g++]))<<7*a+3;if(128>t)return e=n>>>0,(r=2147483648&(t=r>>>0))&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=4294967296*t+(e>>>0),r?-e:e;e.m=!0}W.prototype.reset=function(){this.g=this.l},W.prototype.i=function(){var e=this.h,t=e[this.g],n=127&t;return 128>t?(this.g+=1,n):(n|=(127&(t=e[this.g+1]))<<7,128>t?(this.g+=2,n):(n|=(127&(t=e[this.g+2]))<<14,128>t?(this.g+=3,n):(n|=(127&(t=e[this.g+3]))<<21,128>t?(this.g+=4,n):(n|=(15&(t=e[this.g+4]))<<28,128>t?(this.g+=5,n>>>0):(this.g+=5,128<=e[this.g++]&&128<=e[this.g++]&&128<=e[this.g++]&&128<=e[this.g++]&&this.g++,n)))))},W.prototype.o=function(){var e=this.h[this.g],t=this.h[this.g+1],n=this.h[this.g+2],r=this.h[this.g+3];return this.g+=4,e=2*((n=(e|t<<8|n<<16|r<<24)>>>0)>>31)+1,t=n>>>23&255,n&=8388607,255==t?n?NaN:1/0*e:0==t?e*Math.pow(2,-149)*n:e*Math.pow(2,t-150)*(n+Math.pow(2,23))};var H=[];function K(){this.g=new Uint8Array(64),this.h=0}function q(e,t){for(;127<t;)e.push(127&t|128),t>>>=7;e.push(t)}function X(e){var t={},n=void 0!==t.N&&t.N;this.o={v:void 0!==t.v&&t.v},this.N=n,t=this.o,H.length?(n=H.pop(),t&&(n.v=t.v),e&&V(n,e),e=n):e=new W(e,t),this.g=e,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function Y(e){var t=e.g;if((t=t.g==t.j)||(t=e.j)||(t=(t=e.g).m||0>t.g||t.g>t.j),t)return!1;e.m=e.g.g;var n=7&(t=e.g.i());return 0!=n&&5!=n&&1!=n&&2!=n&&3!=n&&4!=n?(e.j=!0,!1):(e.i=t,e.l=t>>>3,e.h=n,!0)}function Z(e){switch(e.h){case 0:if(0!=e.h)Z(e);else{for(e=e.g;128&e.h[e.g];)e.g++;e.g++}break;case 1:1!=e.h?Z(e):(e=e.g).g+=8;break;case 2:if(2!=e.h)Z(e);else{var t=e.g.i();(e=e.g).g+=t}break;case 5:5!=e.h?Z(e):(e=e.g).g+=4;break;case 3:for(t=e.l;;){if(!Y(e)){e.j=!0;break}if(4==e.h){e.l!=t&&(e.j=!0);break}Z(e)}break;default:e.j=!0}}function Q(e,t,n){var r=e.g.j,a=e.g.i(),i=e.g.g+a;if(e.g.j=i,n(t,e),0!==(n=i-e.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+a+" bytes, instead read "+(a-n)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=i,e.g.j=r,t}function J(e){return e.g.o()}function $(e){var t,n=e.g.i(),r=(e=e.g).g;if(e.g+=n,e=e.h,O)(t=C)||(t=C=new TextDecoder("utf-8",{fatal:!1})),t=t.decode(e.subarray(r,r+n));else{n=r+n;for(var a,i,o,s=[],l=null;r<n;)128>(a=e[r++])?s.push(a):224>a?r>=n?s.push(65533):(i=e[r++],194>a||128!==(192&i)?(r--,s.push(65533)):s.push((31&a)<<6|63&i)):240>a?r>=n-1?s.push(65533):128!==(192&(i=e[r++]))||224===a&&160>i||237===a&&160<=i||128!==(192&(t=e[r++]))?(r--,s.push(65533)):s.push((15&a)<<12|(63&i)<<6|63&t):244>=a?r>=n-2?s.push(65533):128!==(192&(i=e[r++]))||0!==i-144+(a<<28)>>30||128!==(192&(t=e[r++]))||128!==(192&(o=e[r++]))?(r--,s.push(65533)):(a=(7&a)<<18|(63&i)<<12|(63&t)<<6|63&o,a-=65536,s.push(55296+(a>>10&1023),56320+(1023&a))):s.push(65533),8192<=s.length&&(l=E(l,s),s.length=0);t=E(l,s)}return t}function ee(e,t,n){var r=e.g.i();for(r=e.g.g+r;e.g.g<r;)n.push(t.call(e.g))}function te(e,t){2==e.h?ee(e,W.prototype.o,t):t.push(J(e))}function ne(){this.h=[],this.i=0,this.g=new K}function re(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function ae(e){var t=e.i+e.g.length();if(0===t)return new Uint8Array(0);t=new Uint8Array(t);for(var n=e.h,r=n.length,a=0,i=0;i<r;i++){var o=n[i];0!==o.length&&(t.set(o,a),a+=o.length)}return 0!==(r=(n=e.g).h)&&(t.set(n.g.subarray(0,r),a),n.h=0),e.h=[t],t}function ie(e,t,n){if(null!=n){q(e.g,8*t+5),e=e.g;var r=n;0===(r=(n=0>r?1:0)?-r:r)?0<1/r?U=0:U=2147483648:isNaN(r)?U=2147483647:34028234663852886e22<r?U=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),U=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,U=(n<<31|t+127<<23|8388607&r)>>>0),n=U,e.push(n>>>0&255),e.push(n>>>8&255),e.push(n>>>16&255),e.push(n>>>24&255)}}K.prototype.push=function(e){if(!(this.h+1<this.g.length)){var t=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(t)}this.g[this.h++]=e},K.prototype.length=function(){return this.h},K.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,B(e,0,t)},X.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var oe="function"===typeof Uint8Array;function se(e,t,n){if(null!=e)return"object"===typeof e?oe&&e instanceof Uint8Array?n(e):le(e,t,n):t(e)}function le(e,t,n){if(Array.isArray(e)){for(var r=Array(e.length),a=0;a<e.length;a++)r[a]=se(e[a],t,n);return Array.isArray(e)&&e.W&&de(r),r}for(a in r={},e)r[a]=se(e[a],t,n);return r}function ce(e){return"number"===typeof e?isFinite(e)?e:String(e):e}var ue,he={W:{value:!0,configurable:!0}};function de(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,he),e}function pe(e,t,n){var r=ue;if(ue=null,e||(e=r),r=this.constructor.ca,e||(e=r?[r]:[]),this.j=r?0:-1,this.m=this.g=null,this.h=e,e=(r=this.h.length)-1,!r||(null===(r=this.h[e])||"object"!=typeof r||Array.isArray(r)||oe&&r instanceof Uint8Array)?void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.i=null):this.l=Number.MAX_VALUE:(this.l=e-this.j,this.i=r),n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(e+=this.j,(r=this.h[e])?de(r):this.h[e]=fe):(me(this),(r=this.i[e])?de(r):this.i[e]=fe)}var fe=Object.freeze(de([]));function me(e){var t=e.l+e.j;e.h[t]||(e.i=e.h[t]={})}function ge(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.i?e.i[t]:void 0:e.h[t+e.j]}function ye(e,t){var n=void 0!==n&&n,r=ge(e,t,n);return null==r&&(r=fe),r===fe&&we(e,t,r=de([]),n),r}function ve(e){var t=ye(e,3);if(e.m||(e.m={}),!e.m[3]){for(var n=0;n<t.length;n++)t[n]=+t[n];e.m[3]=!0}return t}function be(e,t,n){return null==(e=ge(e,t))?n:e}function xe(e,t,n){return null==(e=null==(e=ge(e,t))?e:+e)?void 0===n?0:n:e}function we(e,t,n,r){void 0!==r&&r||t>=e.l?(me(e),e.i[t]=n):e.h[t+e.j]=n}function ke(e,t,n){if(-1===n)return null;if(e.g||(e.g={}),!e.g[n]){var r=ge(e,n,!1);r&&(e.g[n]=new t(r))}return e.g[n]}function Se(e,t){e.g||(e.g={});var n=e.g[1];if(!n){var r=ye(e,1);n=[];for(var a=0;a<r.length;a++)n[a]=new t(r[a]);e.g[1]=n}return n}function Ne(e,t,n){var r=void 0!==r&&r;e.g||(e.g={});var a=n?Ie(n,!1):n;e.g[t]=n,we(e,t,a,r)}function Te(e,t,n,r){var a=Se(e,n);t=t||new n,e=ye(e,1),void 0!=r?(a.splice(r,0,t),e.splice(r,0,Ie(t,!1))):(a.push(t),e.push(Ie(t,!1)))}function Ie(e,t){if(e.g)for(var n in e.g){var r=e.g[n];if(Array.isArray(r))for(var a=0;a<r.length;a++)r[a]&&Ie(r[a],t);else r&&Ie(r,t)}return e.h}function Ee(e,t){if(e=e.o){re(t,t.g.end());for(var n=0;n<e.length;n++)re(t,e[n])}}function Ce(e,t){if(4==t.h)return!1;var n=t.m;return Z(t),t.N||(t=B(t.g.h,n,t.g.g),(n=e.o)?n.push(t):e.o=[t]),!0}function Ae(e){pe.call(this,e,-1,_e)}function Oe(e,t){for(;Y(t);)switch(t.i){case 8:var n=t.g.i();we(e,1,n);break;case 16:we(e,2,n=t.g.i());break;case 29:case 26:te(t,e.getPackedDataList());break;case 32:we(e,4,n=G(t.g));break;default:if(!Ce(e,t))return e}return e}pe.prototype.toJSON=function(){return le(Ie(this,!1),ce,F)},pe.prototype.toString=function(){return Ie(this,!1).toString()},f(Ae,pe),Ae.prototype.getRows=function(){return ge(this,1)},Ae.prototype.getCols=function(){return ge(this,2)},Ae.prototype.getPackedDataList=function(){return ve(this)},Ae.prototype.getLayout=function(){return be(this,4,0)};var _e=[3];function Me(e,t){var n=void 0;return new(n||(n=Promise))(function(r,a){function i(e){try{s(t.next(e))}catch(n){a(n)}}function o(e){try{s(t.throw(e))}catch(n){a(n)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,o)}s((t=t.apply(e,void 0)).next())})}function Re(e){pe.call(this,e)}function De(e,t){for(;Y(t);)switch(t.i){case 8:var n=t.g.i();we(e,1,n);break;case 21:we(e,2,n=J(t));break;case 26:we(e,3,n=$(t));break;case 34:we(e,4,n=$(t));break;default:if(!Ce(e,t))return e}return e}function Fe(e){pe.call(this,e,-1,Pe)}f(Re,pe),f(Fe,pe),Fe.prototype.addClassification=function(e,t){return Te(this,e,Re,t),this};var Pe=[1];function Le(e){pe.call(this,e)}function ze(e,t){for(;Y(t);)switch(t.i){case 13:var n=J(t);we(e,1,n);break;case 21:we(e,2,n=J(t));break;case 29:we(e,3,n=J(t));break;case 37:we(e,4,n=J(t));break;case 45:we(e,5,n=J(t));break;default:if(!Ce(e,t))return e}return e}function je(e){pe.call(this,e,-1,Ue)}function Be(e){e:{var t=new je;for(e=new X(e);Y(e);)if(10===e.i){Te(t,Q(e,new Le,ze),Le,void 0)}else if(!Ce(t,e))break e}return t}f(Le,pe),f(je,pe);var Ue=[1];function We(e){pe.call(this,e)}function Ve(e){pe.call(this,e,-1,He)}function Ge(e,t){for(;Y(t);)switch(t.i){case 8:var n=G(t.g);we(e,1,n);break;case 16:we(e,2,n=G(t.g));break;case 29:case 26:te(t,e.getVertexBufferList());break;case 32:case 34:n=t;var r=e.getIndexBufferList();2==n.h?ee(n,W.prototype.i,r):r.push(n.g.i());break;default:if(!Ce(e,t))return e}return e}f(We,pe),f(Ve,pe),Ve.prototype.getVertexType=function(){return be(this,1,0)},Ve.prototype.getPrimitiveType=function(){return be(this,2,0)},Ve.prototype.getVertexBufferList=function(){return ve(this)},Ve.prototype.getIndexBufferList=function(){return ye(this,4)};var He=[3,4];function Ke(e){pe.call(this,e)}function qe(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function Xe(e){return Se(e,Re).map(function(e){return{index:be(e,1,0),Y:xe(e,2),label:null!=ge(e,3)?be(e,3,""):void 0,displayName:null!=ge(e,4)?be(e,4,""):void 0}})}function Ye(e){return{x:xe(e,1),y:xe(e,2),z:xe(e,3),visibility:null!=ge(e,4)?xe(e,4):void 0}}function Ze(e,t){this.h=e,this.g=t,this.l=0}function Qe(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var r=qe(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),a=qe(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),i=n.createProgram();if(n.attachShader(i,r),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(i));r=e.m=i,n.useProgram(r),a=n.getUniformLocation(r,"sampler0"),e.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:a},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(a,0)}r=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"===typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"===typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise(function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)}))}function Je(e){this.g=e}f(Ke,pe),Ke.prototype.getMesh=function(){return ke(this,Ve,1)},Ke.prototype.getPoseTransformMatrix=function(){return ke(this,Ae,2)};var $e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function et(e,t){return t+e}function tt(e,t){window[e]=t}function nt(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||et,"object"===typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"===typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=s(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var r=e.options[n].default;void 0!==r&&(this.j[n]="function"===typeof r?r():r)}}function rt(e){return Me(e,function e(){var t,n,r,a,i,o,s,c,u,h,d,p=this;return S(e,function(e){switch(e.g){case 1:return t=p,p.R?(n=function(e,t){return void 0===e.g.files?[]:"function"===typeof e.g.files?e.g.files(t):e.g.files}(p,p.j),v(e,function(){return Me(this,function e(){return S(e,function(e){switch(e.g){case 1:return e.m=2,v(e,WebAssembly.instantiate($e),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})})}(),2)):e.return();case 2:if(r=e.h,"object"===typeof window)return tt("createMediapipeSolutionsWasm",{locateFile:p.locateFile}),tt("createMediapipeSolutionsPackedAssets",{locateFile:p.locateFile}),o=n.filter(function(e){return void 0!==e.data}),s=n.filter(function(e){return void 0===e.data}),c=Promise.all(o.map(function(e){var n=at(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then(function(e){return t.overrideFile(r,e),Promise.resolve(e)})}return n})),u=Promise.all(s.map(function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise(function(e){t.addEventListener("load",function(){e()},!1),t.addEventListener("error",function(){e()},!1),document.body.appendChild(t)})}(t.locateFile(e.url,t.S)):Promise.resolve()})).then(function(){return Me(t,function e(){var t,n,r=this;return S(e,function(e){if(1==e.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,v(e,t(n),2);r.h=e.h,e.g=0})})}),h=Me(t,function e(){var t=this;return S(e,function(e){return t.g.graph&&t.g.graph.url?e=v(e,at(t,t.g.graph.url),0):(e.g=0,e=void 0),e})}),v(e,Promise.all([u,c,h]),7);if("function"!==typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return a=n.filter(function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r}).map(function(e){return t.locateFile(e.url,t.S)}),importScripts.apply(null,l(a)),v(e,createMediapipeSolutionsWasm(Module),6);case 6:p.h=e.h,p.l=new OffscreenCanvas(1,1),p.h.canvas=p.l,i=p.h.GL.createContext(p.l,{antialias:!1,alpha:!1,ba:"undefined"!==typeof WebGL2RenderingContext?2:1}),p.h.GL.makeContextCurrent(i),e.g=4;break;case 7:if(p.l=document.createElement("canvas"),!(d=p.l.getContext("webgl2",{}))&&!(d=p.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),e.return();p.D=d,p.h.canvas=p.l,p.h.createContext(p.l,!0,!0,{});case 4:p.i=new p.h.SolutionWasm,p.R=!1,e.g=0}})})}function at(e,t){return Me(e,function e(){var n,r,a=this;return S(e,function(e){return t in a.F?e.return(a.F[t]):(n=a.locateFile(t,""),r=fetch(n).then(function(e){return e.arrayBuffer()}),a.F[t]=r,e.return(r))})})}function it(e,t,n){return Me(e,function e(){var r,a,i,o,l,c,u,h,d,p,f,m,g,y,b=this;return S(e,function(e){switch(e.g){case 1:if(!n)return e.return(t);for(r={},a=0,i=s(Object.keys(n)),o=i.next();!o.done;o=i.next())l=o.value,"string"!==typeof(c=n[l])&&"texture"===c.type&&void 0!==t[c.stream]&&++a;1<a&&(b.G=!1),u=s(Object.keys(n)),o=u.next();case 2:if(o.done){e.g=4;break}if(h=o.value,"string"===typeof(d=n[h]))return g=r,y=h,v(e,function(e,t,n){return Me(e,function e(){var r,a=this;return S(e,function(e){return"number"===typeof n||n instanceof Uint8Array||n instanceof a.h.Uint8BlobList?e.return(n):n instanceof a.h.Texture2dDataOut?((r=a.s[t])||(r=new Ze(a.h,a.D),a.s[t]=r),e.return(Qe(r,n,a.G))):e.return(void 0)})})}(b,h,t[d]),14);if(p=t[d.stream],"detection_list"===d.type){if(p){for(var x=p.getRectList(),w=p.getLandmarksList(),k=p.getClassificationsList(),N=[],T=0;T<x.size();++T){var I=x.get(T);e:{var E=new We;for(I=new X(I);Y(I);)switch(I.i){case 13:var C=J(I);we(E,1,C);break;case 21:we(E,2,C=J(I));break;case 29:we(E,3,C=J(I));break;case 37:we(E,4,C=J(I));break;case 45:we(E,5,C=J(I));break;case 48:we(E,6,C=G(I.g));break;default:if(!Ce(E,I))break e}}E={Z:xe(E,1),$:xe(E,2),height:xe(E,3),width:xe(E,4),rotation:xe(E,5,0),X:be(E,6,0)},I=Se(Be(w.get(T)),Le).map(Ye);var A=k.get(T);e:for(C=new Fe,A=new X(A);Y(A);)if(10===A.i)C.addClassification(Q(A,new Re,De));else if(!Ce(C,A))break e;E={T:E,O:I,M:Xe(C)},N.push(E)}x=N}else x=[];r[h]=x,e.g=7;break}if("proto_list"===d.type){if(p){for(x=Array(p.size()),w=0;w<p.size();w++)x[w]=p.get(w);p.delete()}else x=[];r[h]=x,e.g=7;break}if(void 0===p){e.g=3;break}if("float_list"===d.type){r[h]=p,e.g=7;break}if("proto"===d.type){r[h]=p,e.g=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(f=b.s[h])||(f=new Ze(b.h,b.D),b.s[h]=f),v(e,Qe(f,p,b.G),13);case 13:m=e.h,r[h]=m;case 7:d.transform&&r[h]&&(r[h]=d.transform(r[h])),e.g=3;break;case 14:g[y]=e.h;case 3:o=u.next(),e.g=2;break;case 4:return e.return(r)}})})}function ot(e,t){for(var n=t.name||"$",r=[].concat(l(t.wants)),a=new e.h.StringList,i=s(t.wants),o=i.next();!o.done;o=i.next())a.push_back(o.value);i=e.h.PacketListener.implement({onResults:function(a){for(var i={},o=0;o<t.wants.length;++o)i[r[o]]=a.get(o);var s=e.listeners[n];s&&(e.C=it(e,i,t.outs).then(function(n){n=s(n);for(var a=0;a<t.wants.length;++a){var o=i[r[a]];"object"===typeof o&&o.hasOwnProperty&&o.hasOwnProperty("delete")&&o.delete()}n&&(e.C=n)}))}}),e.i.attachMultiListener(a,i),a.delete()}function st(e){e=function(e){e:{var t=new Ke;for(e=new X(e);Y(e);)switch(e.i){case 10:var n=Q(e,new Ve,Ge);Ne(t,1,n);break;case 18:Ne(t,2,n=Q(e,new Ae,Oe));break;default:if(!Ce(t,e))break e}}return t}(e);var t=e.getMesh();if(!t)return e;var n=new Float32Array(t.getVertexBufferList());t.getVertexBufferList=function(){return n};var r=new Uint32Array(t.getIndexBufferList());return t.getIndexBufferList=function(){return r},e}(e=nt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){return Me(this,function e(){var t=this;return S(e,function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0})})},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],a=[],i={},o=s(Object.keys(e)),l=o.next();!l.done;i={K:i.K,L:i.L},l=o.next()){var c=l.value;c in this.j&&this.j[c]===e[c]||(this.j[c]=e[c],void 0!==(l=t[c])&&(l.onChange&&(i.K=l.onChange,i.L=e[c],r.push(function(e){return function(){return Me(n,function t(){var n=this;return S(t,function(t){if(1==t.g)return v(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0})})}}(i))),l.graphOptionXref&&(c={valueNumber:1===l.type?e[c]:0,valueBoolean:0===l.type&&e[c],valueString:2===l.type?e[c]:""},l=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),l.graphOptionXref),c),a.push(l))))}0===r.length&&0===a.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(a),this.u=(void 0===this.u?[]:this.u).concat(r))}},e.initialize=function(){return Me(this,function e(){var t=this;return S(e,function(e){return 1==e.g?v(e,rt(t),2):3!=e.g?v(e,Me(t,function e(){var t,n,r,a,i,o,l,c,u=this;return S(e,function(e){if(1==e.g)return u.g.graph&&u.g.graph.url&&u.P===u.g.graph.url?e.return():(u.o=!0,u.g.graph&&u.g.graph.url?(u.P=u.g.graph.url,v(e,at(u,u.g.graph.url),3)):void(e.g=2));for(2!=e.g&&(t=e.h,u.i.loadGraph(t)),n=s(Object.keys(u.B)),r=n.next();!r.done;r=n.next())a=r.value,u.i.overrideFile(a,u.B[a]);if(u.B={},u.g.listeners)for(i=s(u.g.listeners),o=i.next();!o.done;o=i.next())l=o.value,ot(u,l);c=u.j,u.j={},u.setOptions(c),e.g=0})}),3):v(e,function(e){return Me(e,function e(){var t,n,r,a,i,o,l=this;return S(e,function(e){switch(e.g){case 1:if(!l.o)return e.return();if(!l.u){e.g=2;break}t=s(l.u),n=t.next();case 3:if(n.done){e.g=5;break}return v(e,(0,n.value)(),4);case 4:n=t.next(),e.g=3;break;case 5:l.u=void 0;case 2:if(l.A){for(r=new l.h.GraphOptionChangeRequestList,a=s(l.A),i=a.next();!i.done;i=a.next())o=i.value,r.push_back(o);l.i.changeOptions(r),r.delete(),l.A=void 0}l.o=!1,e.g=0}})})}(t),0)})})},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){return Me(this,function n(){var r,a,i,o,l,c,u,h,d,p=this;return S(n,function(n){switch(n.g){case 1:return p.g.inputs?(r=1e3*(void 0===t||null===t?performance.now():t),v(n,p.C,2)):n.return();case 2:return v(n,p.initialize(),3);case 3:for(a=new p.h.PacketDataList,i=s(Object.keys(e)),o=i.next();!o.done;o=i.next())if(l=o.value,c=p.g.inputs[l]){e:{var f=p,m=e[l];switch(c.type){case"video":var g=f.m[c.stream];if(g||(g=new Ze(f.h,f.D),f.m[c.stream]=g),0===(f=g).l&&(f.l=f.h.createTexture()),"undefined"!==typeof HTMLVideoElement&&m instanceof HTMLVideoElement){var y=m.videoWidth;g=m.videoHeight}else"undefined"!==typeof HTMLImageElement&&m instanceof HTMLImageElement?(y=m.naturalWidth,g=m.naturalHeight):(y=m.width,g=m.height);g={glName:f.l,width:y,height:g},(y=f.g).canvas.width=g.width,y.canvas.height=g.height,y.activeTexture(y.TEXTURE0),f.h.bindTexture2d(f.l),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,m),f.h.bindTexture2d(0),f=g;break e;case"detections":for((g=f.m[c.stream])||(g=new Je(f.h),f.m[c.stream]=g),(f=g).data||(f.data=new f.g.DetectionListData),f.data.reset(m.length),g=0;g<m.length;++g){y=m[g];var b=f.data,x=b.setBoundingBox,w=g,k=y.T,S=new We;we(S,1,k.Z),we(S,2,k.$),we(S,3,k.height),we(S,4,k.width),we(S,5,k.rotation),we(S,6,k.X);var N=k=new ne;ie(N,1,ge(S,1)),ie(N,2,ge(S,2)),ie(N,3,ge(S,3)),ie(N,4,ge(S,4)),ie(N,5,ge(S,5));var T=ge(S,6);if(null!=T&&null!=T){q(N.g,48);var I=N.g,E=T;T=0>E;var C=(E=Math.abs(E))>>>0;for(E=Math.floor((E-C)/4294967296),E>>>=0,T&&(E=~E>>>0,4294967295<(C=(~C>>>0)+1)&&(C=0,4294967295<++E&&(E=0))),T=U=C,C=E;0<C||127<T;)I.push(127&T|128),T=(T>>>7|C<<25)>>>0,C>>>=7;I.push(T)}if(Ee(S,N),k=ae(k),x.call(b,w,k),y.O)for(b=0;b<y.O.length;++b)N=!!(S=y.O[b]).visibility,w=(x=f.data).addNormalizedLandmark,k=g,S=Object.assign(Object.assign({},S),{visibility:N?S.visibility:0}),we(N=new Le,1,S.x),we(N,2,S.y),we(N,3,S.z),S.visibility&&we(N,4,S.visibility),ie(I=S=new ne,1,ge(N,1)),ie(I,2,ge(N,2)),ie(I,3,ge(N,3)),ie(I,4,ge(N,4)),ie(I,5,ge(N,5)),Ee(N,I),S=ae(S),w.call(x,k,S);if(y.M)for(b=0;b<y.M.length;++b){if(w=(x=f.data).addClassification,k=g,S=y.M[b],we(N=new Re,2,S.Y),S.index&&we(N,1,S.index),S.label&&we(N,3,S.label),S.displayName&&we(N,4,S.displayName),I=S=new ne,null!=(C=ge(N,1))&&null!=C)if(q(I.g,8),T=I.g,0<=C)q(T,C);else{for(E=0;9>E;E++)T.push(127&C|128),C>>=7;T.push(1)}ie(I,2,ge(N,2)),null!=(T=ge(N,3))&&(T=M(T),q(I.g,26),q(I.g,T.length),re(I,I.g.end()),re(I,T)),null!=(T=ge(N,4))&&(T=M(T),q(I.g,34),q(I.g,T.length),re(I,I.g.end()),re(I,T)),Ee(N,I),S=ae(S),w.call(x,k,S)}}f=f.data;break e;default:f={}}}switch(u=f,h=c.stream,c.type){case"video":a.pushTexture2d(Object.assign(Object.assign({},u),{stream:h,timestamp:r}));break;case"detections":(d=u).stream=h,d.timestamp=r,a.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+c.type+"'")}}return p.i.send(a),v(n,p.C,4);case 4:a.delete(),n.g=0}})})},e.onResults=function(e,t){this.listeners[t||"$"]=e},I("Solution",nt),I("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});var lt={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(e){return e.map(st)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(e){return e.map(function(e){return Se(Be(e),Le).map(Ye)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},ct=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],ut=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],ht=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],dt=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],pt=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],ft=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],mt=[].concat(l(ct),l(ut),l(ht),l(dt),l(pt),l(ft));function gt(e){e=e||{},e=Object.assign(Object.assign({},lt),e),this.g=new nt(e)}(e=gt.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){return Me(this,function e(){var t=this;return S(e,function(e){return v(e,t.g.initialize(),0)})})},e.reset=function(){this.g.reset()},e.send=function(e){return Me(this,function t(){var n=this;return S(t,function(t){return v(t,n.g.send(e),0)})})},e.setOptions=function(e){this.g.setOptions(e)},I("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),I("FaceMesh",gt),I("FACEMESH_LIPS",ct),I("FACEMESH_LEFT_EYE",ut),I("FACEMESH_LEFT_EYEBROW",ht),I("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),I("FACEMESH_RIGHT_EYE",dt),I("FACEMESH_RIGHT_EYEBROW",pt),I("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),I("FACEMESH_FACE_OVAL",ft),I("FACEMESH_CONTOURS",mt),I("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),I("matrixDataToMatrix",function(e){for(var t=e.getCols(),n=e.getRows(),r=e.getPackedDataList(),a=[],i=0;i<n;i++)a.push(Array(t));for(i=0;i<n;i++)for(var o=0;o<t;o++){var s=1===e.getLayout()?i*t+o:o*n+i;a[i][o]=r[s]}return a}),I("VERSION","0.4.1633559619")}).call(this)},7231(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(3799),a=n(4879);t.range=function(e,t,n){n&&"number"!==typeof n&&r.isIterateeCall(e,t,n)&&(t=n=void 0),e=a.toFinite(e),void 0===t?(t=e,e=0):t=a.toFinite(t),n=void 0===n?e<t?1:-1:a.toFinite(n);const i=Math.max(Math.ceil((t-e)/(n||1)),0),o=new Array(i);for(let r=0;r<i;r++)o[r]=e,e+=n;return o}},7237(e,t,n){"use strict";n(8365)},7260(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7312(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[],r=Math.floor(t),a=(e,t)=>{for(let i=0;i<e.length;i++){const o=e[i];Array.isArray(o)&&t<r?a(o,t+1):n.push(o)}};return a(e,0),n}},7330(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9323);t.property=function(e){return function(t){return r.get(t,e)}}},7353(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(T){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=l(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=l(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=p)return k}else{if(e<=-f)return S;if(e+1>=f)return w}return e<0?s(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=l;var c=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=g,o=0;o<e.length;o+=8){var l=Math.min(8,e.length-o),h=parseInt(e.substring(o,o+l),n);if(l<8){var d=s(c(n,l));i=i.mul(d).add(s(h))}else i=(i=i.mul(a)).add(s(h))}return i.unsigned=t,i}function h(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?u(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=h;var d=4294967296,p=d*d,f=p/2,m=o(1<<24),g=o(0);n.ZERO=g;var y=o(0,!0);n.UZERO=y;var v=o(1);n.ONE=v;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var w=l(-1,2147483647,!1);n.MAX_VALUE=w;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=l(0,-2147483648,!1);n.MIN_VALUE=S;var N=n.prototype;N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},N.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var l=i.div(a),u=(i.sub(l.mul(a)).toInt()>>>0).toString(e);if((i=l).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},N.isZero=function(){return 0===this.high&&0===this.low},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return 1===(1&this.low)},N.isEven=function(){return 0===(1&this.low)},N.equals=function(e){return r(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},N.eq=N.equals,N.notEquals=function(e){return!this.eq(e)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(e){return this.comp(e)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(e){return this.comp(e)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(e){return this.comp(e)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(e){return this.comp(e)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(e){if(r(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(v)},N.neg=N.negate,N.add=function(e){r(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=i+(65535&e.low))>>>16,d+=(p+=a+c)>>>16,u+=(d+=n+s)>>>16,u+=t+o,l((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},N.subtract=function(e){return r(e)||(e=h(e)),this.add(e.neg())},N.sub=N.subtract,N.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=h(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,y=0,v=0,b=0;return v+=(b+=o*p)>>>16,y+=(v+=i*p)>>>16,v&=65535,y+=(v+=o*d)>>>16,f+=(y+=a*p)>>>16,y&=65535,f+=(y+=i*d)>>>16,y&=65535,f+=(y+=o*u)>>>16,f+=n*p+a*d+i*u+o*c,l((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},N.mul=N.multiply,N.divide=function(e){if(r(e)||(e=h(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return b;i=y}else{if(this.eq(S))return e.eq(v)||e.eq(x)?S:e.eq(S)?v:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),u=o<=48?1:c(2,o-48),d=s(n),p=d.mul(e);p.isNegative()||p.gt(a);)p=(d=s(n-=u,this.unsigned)).mul(e);d.isZero()&&(d=v),i=i.add(d),a=a.sub(p)}return i},N.div=N.divide,N.modulo=function(e){return r(e)||(e=h(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return l(~this.low,~this.high,this.unsigned)},N.and=function(e){return r(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},N.or=function(e){return r(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},N.xor=function(e){return r(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},N.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},N.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},N.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},7359(e,t,n){var r;!function(e,a){function i(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&o(r,n),a.state=function(){return o(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},7599(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7736(e,t,n){var r=n(3738).default,a=n(9045);e.exports=function(e){var t=a(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7770(e,t,n){e.exports=n(9323).get},7820(e,t,n){e.exports=n(5414).throttle},7950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8108(){},8210(e,t,n){var r;!function(){"use strict";var a,i=1e9,o={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",h=Math.floor,d=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,m=9007199254740991,g=h(1286742750677284.5),y={};function v(e,t){var n,r,a,i,o,l,c,u,h=e.constructor,d=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),s?C(t,d):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a){for(i<0?(r=c,i=-i,l=u.length):(r=u,a=o,l=c.length),i>(l=(o=Math.ceil(d/7))>l?o+1:l+1)&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((l=c.length)-(i=u.length)<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/f|0,c[i]%=f;for(n&&(c.unshift(n),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,s?C(t,d):t}function b(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function x(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)(n=7-(r=e[t]+"").length)&&(i+=T(n)),i+=r;(n=7-(r=(o=e[t])+"").length)&&(i+=T(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return i+o}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,n=(r=i.d.length)<(a=e.d.length)?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return C(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return S(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(a))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(a)?new r(0):(s=!1,t=w(I(n,o),I(e,o),o),s=!0,C(t,i))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?A(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(s=!1,t=w(n,e,0,1).times(e),s=!0,n.minus(t)):C(new r(n),a)},y.naturalExponential=y.exp=function(){return k(this)},y.naturalLogarithm=y.ln=function(){return I(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):A(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=S(a)+1,n=7*(r=a.d.length-1)+1,r=a.d[r]){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,a,i,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=S(c),s=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=x(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=h((e+1)/2)-(e<0||e%2),r=new u(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(a.toString()),a=o=(n=u.precision)+3;;)if(r=(i=r).plus(w(c,i,o+2)).times(.5),x(i.d).slice(0,o)===(t=x(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&"4999"==t){if(C(i,n+1,0),i.times(i).eq(c)){r=i;break}}else if("9999"!=t)break;o+=4}return s=!0,C(r,n)},y.times=y.mul=function(e){var t,n,r,a,i,o,l,c,u,h=this,d=h.constructor,p=h.d,m=(e=new d(e)).d;if(!h.s||!e.s)return new d(0);for(e.s*=h.s,n=h.e+e.e,(c=p.length)<(u=m.length)&&(i=p,p=m,m=i,o=c,c=u,u=o),i=[],r=o=c+u;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=i[a]+m[r]*p[a-r-1]+t,i[a--]=l%f|0,t=l/f|0;i[a]=(i[a]+t)%f|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,s?C(e,d.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(b(e,0,i),void 0===t?t=r.rounding:b(t,0,8),C(n,e+S(n)+1,t))},y.toExponential=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=O(r,!0):(b(e,0,i),void 0===t?t=a.rounding:b(t,0,8),n=O(r=C(new a(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,a=this,o=a.constructor;return void 0===e?O(a):(b(e,0,i),void 0===t?t=o.rounding:b(t,0,8),n=O((r=C(new o(a),e+S(a)+1,t)).abs(),!1,e+S(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return C(new t(e),S(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,i,o,c,u=this,d=u.constructor,p=+(e=new d(e));if(!e.s)return new d(a);if(!(u=new d(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(a))return u;if(r=d.precision,e.eq(a))return C(u,r);if(c=(t=e.e)>=(n=e.d.length-1),o=u.s,c){if((n=p<0?-p:p)<=m){for(i=new d(a),t=Math.ceil(r/7+4),s=!1;n%2&&_((i=i.times(u)).d,t),0!==(n=h(n/2));)_((u=u.times(u)).d,t);return s=!0,e.s<0?new d(a).div(i):C(i,r)}}else if(o<0)throw Error(l+"NaN");return o=o<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,s=!1,i=e.times(I(u,r+12)),s=!0,(i=k(i)).s=o,i},y.toPrecision=function(e,t){var n,r,a=this,o=a.constructor;return void 0===e?r=O(a,(n=S(a))<=o.toExpNeg||n>=o.toExpPos):(b(e,1,i),void 0===t?t=o.rounding:b(t,0,8),r=O(a=C(new o(a),e,t),e<=(n=S(a))||n<=o.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(b(e,1,i),void 0===t?t=n.rounding:b(t,0,8)),C(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=S(e),n=e.constructor;return O(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+r,e[a]=n%f|0,r=n/f|0;return r&&e.unshift(r),e}function t(e,t,n,r){var a,i;if(n!=r)i=n>r?1:-1;else for(a=i=0;a<n;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}return i}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,i,o){var s,c,u,h,d,p,m,g,y,v,b,x,w,k,N,T,I,E,A=r.constructor,O=r.s==a.s?1:-1,_=r.d,M=a.d;if(!r.s)return new A(r);if(!a.s)throw Error(l+"Division by zero");for(c=r.e-a.e,I=M.length,N=_.length,g=(m=new A(O)).d=[],u=0;M[u]==(_[u]||0);)++u;if(M[u]>(_[u]||0)&&--c,(x=null==i?i=A.precision:o?i+(S(r)-S(a))+1:i)<0)return new A(0);if(x=x/7+2|0,u=0,1==I)for(h=0,M=M[0],x++;(u<N||h)&&x--;u++)w=h*f+(_[u]||0),g[u]=w/M|0,h=w%M|0;else{for((h=f/(M[0]+1)|0)>1&&(M=e(M,h),_=e(_,h),I=M.length,N=_.length),k=I,v=(y=_.slice(0,I)).length;v<I;)y[v++]=0;(E=M.slice()).unshift(0),T=M[0],M[1]>=f/2&&++T;do{h=0,(s=t(M,y,I,v))<0?(b=y[0],I!=v&&(b=b*f+(y[1]||0)),(h=b/T|0)>1?(h>=f&&(h=f-1),1==(s=t(d=e(M,h),y,p=d.length,v=y.length))&&(h--,n(d,I<p?E:M,p))):(0==h&&(s=h=1),d=M.slice()),(p=d.length)<v&&d.unshift(0),n(y,d,v),-1==s&&(s=t(M,y,I,v=y.length))<1&&(h++,n(y,I<v?E:M,v)),v=y.length):0===s&&(h++,y=[0]),g[u++]=h,s&&y[0]?y[v++]=_[k]||0:(y=[_[k]],v=1)}while((k++<N||void 0!==y[0])&&x--)}return g[0]||g.shift(),m.e=c,C(m,o?i+S(m)+1:i)}}();function k(e,t){var n,r,i,o,l,c=0,h=0,p=e.constructor,f=p.precision;if(S(e)>16)throw Error(u+S(e));if(!e.s)return new p(a);for(null==t?(s=!1,l=f):l=t,o=new p(.03125);e.abs().gte(.1);)e=e.times(o),h+=5;for(l+=Math.log(d(2,h))/Math.LN10*2+5|0,n=r=i=new p(a),p.precision=l;;){if(r=C(r.times(e),l),n=n.times(++c),x((o=i.plus(w(r,n,l))).d).slice(0,l)===x(i.d).slice(0,l)){for(;h--;)i=C(i.times(i),l);return p.precision=f,null==t?(s=!0,C(i,f)):i}i=o}}function S(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function N(e,t,n){if(t>e.LN10.sd())throw s=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return C(new e(e.LN10),t)}function T(e){for(var t="";e--;)t+="0";return t}function I(e,t){var n,r,i,o,c,u,h,d,p,f=1,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(a))return new y(0);if(null==t?(s=!1,d=v):d=t,m.eq(10))return null==t&&(s=!0),N(y,d);if(d+=10,y.precision=d,r=(n=x(g)).charAt(0),o=S(m),!(Math.abs(o)<15e14))return h=N(y,d+2,v).times(o+""),m=I(new y(r+"."+n.slice(1)),d-10).plus(h),y.precision=v,null==t?(s=!0,C(m,v)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=x((m=m.times(e)).d)).charAt(0),f++;for(o=S(m),r>1?(m=new y("0."+n),o++):m=new y(r+"."+n.slice(1)),u=c=m=w(m.minus(a),m.plus(a),d),p=C(m.times(m),d),i=3;;){if(c=C(c.times(p),d),x((h=u.plus(w(c,new y(i),d))).d).slice(0,d)===x(u.d).slice(0,d))return u=u.times(2),0!==o&&(u=u.plus(N(y,d+2,v).times(o+""))),u=w(u,new y(f),d),y.precision=v,null==t?(s=!0,C(u,v)):u;u=h,i+=2}}function E(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(r,a)){if(a-=r,n=n-r-1,e.e=h(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),s&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function C(e,t,n){var r,a,i,o,l,c,p,m,y=e.d;for(o=1,i=y[0];i>=10;i/=10)o++;if((r=t-o)<0)r+=7,a=t,p=y[m=0];else{if((m=Math.ceil((r+1)/7))>=(i=y.length))return e;for(p=i=y[m],o=1;i>=10;i/=10)o++;a=(r%=7)-7+o}if(void 0!==n&&(l=p/(i=d(10,o-a-1))%10|0,c=t<0||void 0!==y[m+1]||p%i,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?a>0?p/d(10,o-a):0:y[m-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return c?(i=S(e),y.length=1,t=t-i-1,y[0]=d(10,(7-t%7)%7),e.e=h(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=m,i=1,m--):(y.length=m+1,i=d(10,7-r),y[m]=a>0?(p/d(10,o-a)%d(10,a)|0)*i:0),c)for(;;){if(0==m){(y[0]+=i)==f&&(y[0]=1,++e.e);break}if(y[m]+=i,y[m]!=f)break;y[m--]=0,i=1}for(r=y.length;0===y[--r];)y.pop();if(s&&(e.e>g||e.e<-g))throw Error(u+S(e));return e}function A(e,t){var n,r,a,i,o,l,c,u,h,d,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),s?C(t,m):t;if(c=e.d,d=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r){for((h=o<0)?(n=c,o=-o,l=d.length):(n=d,r=u,l=c.length),o>(a=Math.max(Math.ceil(m/7),l)+2)&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for((h=(a=c.length)<(l=d.length))&&(l=a),a=0;a<l;a++)if(c[a]!=d[a]){h=c[a]<d[a];break}o=0}for(h&&(n=c,c=d,d=n,t.s=-t.s),l=c.length,a=d.length-l;a>0;--a)c[l++]=0;for(a=d.length;a>o;){if(c[--a]<d[a]){for(i=a;i&&0===c[--i];)c[i]=f-1;--c[i],c[a]+=f}c[a]-=d[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,s?C(t,m):t):new p(0)}function O(e,t,n){var r,a=S(e),i=x(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+T(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+T(-a-1)+i,n&&(r=n-o)>0&&(i+=T(r))):a>=o?(i+=T(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+T(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=T(r))),e.s<0?"-"+i:i}function _(e,t){if(e.length>t)return e.length=t,!0}function M(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,a=["precision",1,i,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(r=e[n=a[t]])){if(!(h(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}o=function e(t){var n,r,a;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):E(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);E(t,e)}if(i.prototype=y,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=M,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<a.length;)t.hasOwnProperty(r=a[n++])||(t[r]=this[r]);return i.config(t),i}(o),o.default=o.Decimal=o,a=new o(1),void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},8268(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2132);t.isMatch=function(e,t){return r.isMatchWith(e,t,()=>{})}},8346(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365(e,t,n){"use strict";var r=n(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useSyncExternalStore,o=r.useRef,s=r.useEffect,l=r.useMemo,c=r.useDebugValue},8396(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5508);t.cloneDeep=function(e){return r.cloneDeepWith(e)}},8420(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8443(e,t,n){"use strict";e.exports=n(9717)},8499(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new a(r,i||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,o=new Array(i);a<i;a++)o[a]=r[a].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,a,i,o){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,a),!0;case 5:return u.fn.call(u.context,t,r,a,i),!0;case 6:return u.fn.call(u.context,t,r,a,i,o),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,a);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||r&&s.context!==r||o(this,i);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||a&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[i]=1===c.length?c[0]:c:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},8590(){},8845(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),a=n(3272),i=n(8396),o=n(9323),s=n(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":var n;Object.is(null===(n=e)||void 0===n?void 0:n.valueOf(),-0)&&(e="-0");break;case"number":e=a.toKey(e)}return t=i.cloneDeep(t),function(n){const a=o.get(n,e);return void 0===a?s.has(n,e):void 0===t?void 0===a:r.isMatch(a,t)}}},8853(e,t,n){"use strict";e.exports=n(5896)},9016(e,t,n){var r;!function(e,a){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&o(r,n),a.state=function(){return o(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},9045(e,t,n){var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9323(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(7260),a=n(2489),i=n(3272),o=n(1444);t.get=function e(t,n,s){if(null==t)return s;switch(typeof n){case"string":{if(r.isUnsafeProperty(n))return s;const i=t[n];return void 0===i?a.isDeepKey(n)?e(t,o.toPath(n),s):s:i}case"number":case"symbol":{"number"===typeof n&&(n=i.toKey(n));const e=t[n];return void 0===e?s:e}default:{var l;if(Array.isArray(n))return function(e,t,n){if(0===t.length)return n;let a=e;for(let i=0;i<t.length;i++){if(null==a)return n;if(r.isUnsafeProperty(t[i]))return n;a=a[t[i]]}if(void 0===a)return n;return a}(t,n,s);if(n=Object.is(null===(l=n)||void 0===l?void 0:l.valueOf(),-0)?"-0":String(n),r.isUnsafeProperty(n))return s;const e=t[n];return void 0===e?s:e}}}},9461(e,t,n){"use strict";e.exports=n(2330)},9538(e,t,n){var r;!function(e,a){function i(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&o(r,n),a.state=function(){return o(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},9599(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645(e,t,n){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6392),a=n(8346),i=n(1203);t.last=function(e){if(i.isArrayLike(e))return r.last(a.toArray(e))}},9709(e,t){"use strict";function n(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,r)=>{if(e!==t){const a=n(e),i=n(t);if(a===i&&0===a){if(e<t)return"desc"===r?1:-1;if(e>t)return"desc"===r?-1:1}return"desc"===r?i-a:a-i}return 0}},9717(e,t,n){"use strict";var r=n(5043),a=n(9461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=a.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c(function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==a&&d.hasValue){var t=d.value;if(a(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(o=e,t):(o=e,s=n)}var o,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,a]);var p=o(e,h[0],h[1]);return l(function(){d.hasValue=!0,d.value=p},[p]),u(p),p}},9859(e,t,n){e.exports=n(7231).range},9921(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},9972(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(i,o),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".a740559c.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="normal-react:";n.l=(r,a,i,o)=>{if(e[r])e[r].push(a);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+i){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach(e=>e(n)),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/new_front/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,i,[o,s,l]=r,c=0;if(o.some(t=>0!==e[t])){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)l(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunknormal_react=self.webpackChunknormal_react||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>$i,scaleDiverging:()=>Xu,scaleDivergingLog:()=>Yu,scaleDivergingPow:()=>Qu,scaleDivergingSqrt:()=>Ju,scaleDivergingSymlog:()=>Zu,scaleIdentity:()=>Ws,scaleImplicit:()=>Qi,scaleLinear:()=>Us,scaleLog:()=>Qs,scaleOrdinal:()=>Ji,scalePoint:()=>to,scalePow:()=>ol,scaleQuantile:()=>vl,scaleQuantize:()=>bl,scaleRadial:()=>cl,scaleSequential:()=>Uu,scaleSequentialLog:()=>Wu,scaleSequentialPow:()=>Gu,scaleSequentialQuantile:()=>Ku,scaleSequentialSqrt:()=>Hu,scaleSequentialSymlog:()=>Vu,scaleSqrt:()=>sl,scaleSymlog:()=>tl,scaleThreshold:()=>xl,scaleTime:()=>Lu,scaleUtc:()=>zu,tickFormat:()=>js});var t={};n.r(t),n.d(t,{CompositeArrayBuffer:()=>L_,browserFiles:()=>MR,browserHTTPRequest:()=>UR,concatenateArrayBuffers:()=>rM,copyModel:()=>WM,decodeWeights:()=>X_,decodeWeightsStream:()=>$_,encodeWeights:()=>q_,fromMemory:()=>HR,fromMemorySync:()=>KR,getLoadHandlers:()=>fM,getModelArtifactsForJSON:()=>sM,getModelArtifactsForJSONSync:()=>oM,getModelArtifactsInfoForJSON:()=>lM,getSaveHandlers:()=>pM,getWeightSpecs:()=>cM,http:()=>BR,isHTTPScheme:()=>zR,listModels:()=>BM,loadWeights:()=>FR,moveModel:()=>VM,registerLoadRouter:()=>dM,registerSaveRouter:()=>hM,removeModel:()=>UM,weightsLoaderFactory:()=>PR,withSaveHandler:()=>qR,withSaveHandlerSync:()=>XR});var r={};n.r(r),n.d(r,{assertParamsValid:()=>aD,computeFlatOffset:()=>yD,computeOutShape:()=>oD,getNormalizedAxes:()=>uD,isSliceContinous:()=>gD,maskToAxes:()=>iD,parseSliceParams:()=>vD,sliceInfo:()=>bD,startForAxis:()=>fD,startIndicesWithElidedDims:()=>hD,stopForAxis:()=>mD,stopIndicesWithElidedDims:()=>dD,stridesForAxis:()=>pD,stridesWithElidedDims:()=>sD});var a={};n.r(a),n.d(a,{conv2d:()=>Mz,depthwiseConv2d:()=>Fz,matMul:()=>Pz});var i={};n.r(i),n.d(i,{collectGatherOpShapeInfo:()=>qB,computeOutShape:()=>KB,segOpComputeOptimalWindowSize:()=>HB});var o={};n.r(o),n.d(o,{ERF_A1:()=>cB,ERF_A2:()=>uB,ERF_A3:()=>hB,ERF_A4:()=>dB,ERF_A5:()=>pB,ERF_P:()=>lB,PARALLELIZE_THRESHOLD:()=>Qj,RowPartitionType:()=>Kj,SELU_SCALE:()=>sB,SELU_SCALEALPHA:()=>oB,applyActivation:()=>Oz,assertAndGetBroadcastShape:()=>kR,assertAxesAreInnerMostDims:()=>KF,assertParamsConsistent:()=>Gj,assignToTypedArray:()=>bB,axesAreInnerMostDims:()=>WF,calculateShapes:()=>oz,checkEinsumDimSizes:()=>CB,checkPadOnDimRoundingMode:()=>qD,combineLocations:()=>VF,combineRaggedTensorToTensorShapes:()=>qj,complexWithEvenIndex:()=>gB,complexWithOddIndex:()=>yB,computeConv2DInfo:()=>PD,computeConv3DInfo:()=>LD,computeDefaultPad:()=>zD,computeDilation2DInfo:()=>RD,computeOptimalWindowSize:()=>Jj,computeOutAndReduceShapes:()=>GF,computeOutShape:()=>Hj,computePool2DInfo:()=>DD,computePool3DInfo:()=>FD,convertConv2DDataFormat:()=>KD,decodeEinsumEquation:()=>IB,eitherStridesOrDilationsAreOne:()=>GD,expandShapeToKeepDim:()=>HF,exponent:()=>wB,exponents:()=>xB,fromStringArrayToUint8:()=>YB,fromUint8ToStringArray:()=>XB,getAxesPermutation:()=>qF,getBroadcastDims:()=>xR,getComplexWithIndex:()=>vB,getEinsumComputePath:()=>AB,getEinsumPermutation:()=>EB,getFusedBiasGradient:()=>Az,getFusedDyActivation:()=>Cz,getImageCenter:()=>$j,getInnerMostAxes:()=>YF,getPermuted:()=>tB,getRaggedRank:()=>Yj,getReductionAxes:()=>wR,getReshaped:()=>eB,getReshapedPermuted:()=>nB,getRowPartitionTypesHelper:()=>Xj,getSliceBeginCoords:()=>rB,getSliceSize:()=>aB,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>RB,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>DB,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>FB,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>zB,getSparseReshapeInputOutputMismatchErrorMessage:()=>BB,getSparseReshapeInputOutputMultipleErrorMessage:()=>jB,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>PB,getSparseReshapeNegativeOutputDimErrorMessage:()=>LB,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>GB,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>UB,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>WB,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>VB,getUndoAxesPermutation:()=>XF,isIdentityPermutation:()=>OB,log:()=>uO,mergeRealAndImagArrays:()=>fB,prepareAndValidate:()=>iB,prepareSplitSize:()=>MB,segment_util:()=>i,shouldFuse:()=>_z,slice_util:()=>r,splitRealAndImagArrays:()=>mB,stridesOrDilationsArePositive:()=>HD,tupleValuesAreOne:()=>VD,upcastType:()=>l_,validateDefaultValueShape:()=>Zj,validateInput:()=>iz,validateUpdateShape:()=>az,warn:()=>cO});var s={};n.r(s),n.d(s,{json:()=>xX});var l={};n.r(l),n.d(l,{json:()=>wX});var c={};n.r(c),n.d(c,{json:()=>kX});var u={};n.r(u),n.d(u,{json:()=>SX});var h={};n.r(h),n.d(h,{json:()=>NX});var d={};n.r(d),n.d(d,{json:()=>TX});var p={};n.r(p),n.d(p,{json:()=>IX});var f={};n.r(f),n.d(f,{json:()=>EX});var m={};n.r(m),n.d(m,{json:()=>CX});var g={};n.r(g),n.d(g,{json:()=>AX});var y={};n.r(y),n.d(y,{json:()=>OX});var v={};n.r(v),n.d(v,{json:()=>_X});var b={};n.r(b),n.d(b,{json:()=>MX});var x={};n.r(x),n.d(x,{json:()=>RX});var w={};n.r(w),n.d(w,{json:()=>DX});var k={};n.r(k),n.d(k,{json:()=>FX});var S={};n.r(S),n.d(S,{json:()=>PX});var N={};n.r(N),n.d(N,{json:()=>LX});var T={};n.r(T),n.d(T,{json:()=>zX});var I={};n.r(I),n.d(I,{OP_SCOPE_SUFFIX:()=>__,abs:()=>bR,acos:()=>wD,acosh:()=>kD,add:()=>JM,addN:()=>SD,all:()=>ND,any:()=>TD,argMax:()=>ID,argMin:()=>ED,asin:()=>CD,asinh:()=>AD,atan:()=>OD,atan2:()=>_D,atanh:()=>MD,avgPool:()=>YD,avgPool3d:()=>ZD,basicLSTMCell:()=>nF,batchNorm:()=>aF,batchNorm2d:()=>iF,batchNorm3d:()=>oF,batchNorm4d:()=>sF,batchToSpaceND:()=>rF,bincount:()=>lF,bitwiseAnd:()=>cF,booleanMaskAsync:()=>yz,broadcastArgs:()=>uF,broadcastTo:()=>hF,buffer:()=>XM,cast:()=>YM,ceil:()=>dF,clipByValue:()=>pF,clone:()=>ZM,complex:()=>R_,concat:()=>QD,concat1d:()=>fF,concat2d:()=>mF,concat3d:()=>gF,concat4d:()=>yF,conv1d:()=>bF,conv2d:()=>vF,conv2dTranspose:()=>wF,conv3d:()=>kF,conv3dTranspose:()=>NF,cos:()=>TF,cosh:()=>IF,cosineWindow:()=>Tz,cumprod:()=>EF,cumsum:()=>CF,denseBincount:()=>AF,depthToSpace:()=>OF,depthwiseConv2d:()=>_F,diag:()=>MF,dilation2d:()=>RF,div:()=>eR,divNoNan:()=>PF,dot:()=>LF,dropout:()=>Sz,einsum:()=>zF,elu:()=>jF,enclosingPowerOfTwo:()=>Nz,ensureShape:()=>BF,equal:()=>DF,erf:()=>UF,euclideanNorm:()=>tP,exp:()=>nP,expandDims:()=>rP,expm1:()=>aP,eye:()=>oP,fft:()=>WL,fill:()=>fR,floor:()=>sP,floorDiv:()=>$M,fused:()=>a,gather:()=>lP,gatherND:()=>kz,greater:()=>cP,greaterEqual:()=>uP,ifft:()=>VL,imag:()=>hP,image:()=>Pj,inTopKAsync:()=>Iz,irfft:()=>GL,isFinite:()=>dP,isInf:()=>pP,isNaN:()=>fP,leakyRelu:()=>mP,less:()=>gP,lessEqual:()=>yP,linalg:()=>Lj,linspace:()=>vP,localResponseNormalization:()=>bP,log:()=>xP,log1p:()=>wP,logSigmoid:()=>NP,logSoftmax:()=>TP,logSumExp:()=>IP,logicalAnd:()=>EP,logicalNot:()=>CP,logicalOr:()=>AP,logicalXor:()=>OP,losses:()=>zj,lowerBound:()=>RP,matMul:()=>JD,max:()=>ZF,maxPool:()=>DP,maxPool3d:()=>FP,maxPoolWithArgmax:()=>PP,maximum:()=>SR,mean:()=>LP,meshgrid:()=>BP,min:()=>QF,minimum:()=>UP,mirrorPad:()=>WP,mod:()=>VP,moments:()=>GP,movingAverage:()=>bz,mul:()=>tR,multiRNNCell:()=>HP,multinomial:()=>KP,neg:()=>kP,norm:()=>eP,notEqual:()=>qP,oneHot:()=>XP,ones:()=>jP,onesLike:()=>YP,op:()=>M_,outerProduct:()=>ZP,pad:()=>QP,pad1d:()=>JP,pad2d:()=>$P,pad3d:()=>eL,pad4d:()=>tL,pool:()=>rL,pow:()=>gR,prelu:()=>aL,print:()=>QM,prod:()=>iL,raggedGather:()=>oL,raggedRange:()=>sL,raggedTensorToTensor:()=>lL,rand:()=>cL,randomGamma:()=>fL,randomNormal:()=>mL,randomStandardNormal:()=>gL,randomUniform:()=>yL,randomUniformInt:()=>vL,range:()=>bL,real:()=>xL,reciprocal:()=>wL,relu:()=>kL,relu6:()=>SL,reshape:()=>XD,reverse:()=>NL,reverse1d:()=>TL,reverse2d:()=>IL,reverse3d:()=>EL,reverse4d:()=>CL,rfft:()=>KL,round:()=>AL,rsqrt:()=>OL,scalar:()=>oR,scatterND:()=>xz,searchSorted:()=>MP,selu:()=>_L,separableConv2d:()=>ML,setdiff1dAsync:()=>RL,sigmoid:()=>$D,sign:()=>DL,signal:()=>Fj,sin:()=>FL,sinh:()=>PL,slice:()=>eF,slice1d:()=>LL,slice2d:()=>zL,slice3d:()=>jL,slice4d:()=>BL,softmax:()=>UL,softplus:()=>SP,spaceToBatchND:()=>nL,sparse:()=>jj,sparseToDense:()=>wz,spectral:()=>Dj,split:()=>HL,sqrt:()=>nR,square:()=>rR,squaredDifference:()=>qL,squeeze:()=>XL,stack:()=>YL,step:()=>ZL,stridedSlice:()=>QL,string:()=>Bj,sub:()=>yR,sum:()=>JF,tan:()=>JL,tanh:()=>tF,tensor:()=>F_,tensor1d:()=>$L,tensor2d:()=>ez,tensor3d:()=>YR,tensor4d:()=>tz,tensor5d:()=>nz,tensor6d:()=>rz,tensorScatterUpdate:()=>sz,tile:()=>iP,topk:()=>lz,transpose:()=>vz,truncatedNormal:()=>cz,unique:()=>uz,unsortedSegmentSum:()=>hz,unstack:()=>dz,upperBound:()=>pz,variable:()=>fz,where:()=>FF,whereAsync:()=>gz,zeros:()=>zP,zerosLike:()=>aR});var E={};n.r(E),n.d(E,{mx:()=>jZ,XI:()=>_Q,Nk:()=>MQ,f6:()=>DQ,ct:()=>DZ,YG:()=>zQ,hH:()=>GQ,z3:()=>CJ,sG:()=>jJ,uM:()=>GJ,vS:()=>s$,qB:()=>m$,GG:()=>y$,lg:()=>k$,rq:()=>b$,cu:()=>F$,WR:()=>M$,GE:()=>z$,px:()=>B$,jC:()=>t1,He:()=>a1,hE:()=>f1,BF:()=>xJ,Dk:()=>N1,cl:()=>M1,_B:()=>H1,ub:()=>Z1,_f:()=>$1,Ku:()=>i0,qy:()=>s0,Zy:()=>b0,bu:()=>k0,zv:()=>TZ,dH:()=>XZ,HS:()=>EQ,yH:()=>W0,l3:()=>G0,z9:()=>K0,x6:()=>Q0,_m:()=>a2,eW:()=>c2,GK:()=>d2,SP:()=>m2,yr:()=>y2,dl:()=>ZJ,Dw:()=>S2,xT:()=>E2,_X:()=>tQ,wz:()=>D2});var C=n(5043),A=n.t(C,2),O=n(4391);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function M(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}function R(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){R(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const P={NODE_ENV:"production",PUBLIC_URL:"/new_front",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:5000",L=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=localStorage.getItem("token"),r=await fetch("".concat(P).concat(e),F({headers:F({"Content-Type":"application/json"},n&&{Authorization:"Bearer ".concat(n)})},t));let a=null;try{a=await r.json()}catch(i){a=null}if(!r.ok){const e=a&&a.error||r.statusText||"Something went wrong";throw new Error(e)}return a};function z(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=z(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function j(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=z(e))&&(r&&(r+=" "),r+=t);return r}var B=n(7820),U=n.n(B),W=n(7770),V=n.n(W);function G(e){var t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),n=Math.round(e*t)/t;return Object.is(n,-0)?0:n}function H(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce((e,t,r)=>{var a=n[r-1];return"string"===typeof a?e+a+t:void 0!==a?e+G(a)+t:e+t},"")}var K=e=>0===e?0:e>0?1:-1,q=e=>"number"==typeof e&&e!=+e,X=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,Y=e=>("number"===typeof e||e instanceof Number)&&!q(e),Z=e=>Y(e)||"string"===typeof e,Q=0,J=e=>{var t=++Q;return"".concat(e||"").concat(t)},$=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Y(e)&&"string"!==typeof e)return r;if(X(e)){if(null==t)return r;var i=e.indexOf("%");n=t*parseFloat(e.slice(0,i))/100}else n=+e;return q(n)&&(n=r),a&&null!=t&&n>t&&(n=t),n},ee=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[String(e[r])])return!0;n[String(e[r])]=!0}return!1};function te(e,t,n){return Y(e)&&Y(t)?G(e+n*(t-e)):t}function ne(e,t,n){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):V()(e,t))===n)}var re=e=>null===e||"undefined"===typeof e,ae=e=>re(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function ie(e){return null!=e}function oe(){}var se=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if("undefined"!==typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(t.replace(/%s/g,()=>r[i++]))}},le=(e,t,n)=>{var{width:r="100%",height:a="100%",aspect:i,maxHeight:o}=n,s=X(r)?e:Number(r),l=X(a)?t:Number(a);return i&&i>0&&(s?l=s/i:l&&(s=l*i),o&&null!=l&&l>o&&(l=o)),{calculatedWidth:s,calculatedHeight:l}},ce={width:0,height:0,overflow:"visible"},ue={width:0,overflowX:"visible"},he={height:0,overflowY:"visible"},de={},pe=e=>{var{width:t,height:n}=e,r=X(t),a=X(n);return r&&a?ce:r?ue:a?he:de};function fe(e){return Number.isFinite(e)}function me(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(null,arguments)}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach(function(t){be(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=(0,C.createContext)({width:-1,height:-1});function we(e){var{children:t,width:n,height:r}=e,a=(0,C.useMemo)(()=>({width:n,height:r}),[n,r]);return function(e){return me(e.width)&&me(e.height)}(a)?C.createElement(xe.Provider,{value:a},t):null}var ke=()=>(0,C.useContext)(xe),Se=(0,C.forwardRef)((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:a,height:i,minWidth:o=0,minHeight:s,maxHeight:l,children:c,debounce:u=0,id:h,className:d,onResize:p,style:f={}}=e,m=(0,C.useRef)(null),g=(0,C.useRef)();g.current=p,(0,C.useImperativeHandle)(t,()=>m.current);var[y,v]=(0,C.useState)({containerWidth:r.width,containerHeight:r.height}),b=(0,C.useCallback)((e,t)=>{v(n=>{var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}})},[]);(0,C.useEffect)(()=>{if(null==m.current||"undefined"===typeof ResizeObserver)return oe;var e=e=>{var t,{width:n,height:r}=e[0].contentRect;b(n,r),null===(t=g.current)||void 0===t||t.call(g,n,r)};u>0&&(e=U()(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:n,height:r}=m.current.getBoundingClientRect();return b(n,r),t.observe(m.current),()=>{t.disconnect()}},[b,u]);var{containerWidth:x,containerHeight:w}=y;se(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:k,calculatedHeight:S}=le(x,w,{width:a,height:i,aspect:n,maxHeight:l});return se(null!=k&&k>0||null!=S&&S>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",k,S,a,i,o,s,n),C.createElement("div",{id:h?"".concat(h):void 0,className:j("recharts-responsive-container",d),style:ve(ve({},f),{},{width:a,height:i,minWidth:o,minHeight:s,maxHeight:l}),ref:m},C.createElement("div",{style:pe({width:a,height:i})},C.createElement(we,{width:k,height:S},c)))}),Ne=(0,C.forwardRef)((e,t)=>{var n=ke();if(me(n.width)&&me(n.height))return e.children;var{width:r,height:a}=function(e){var{width:t,height:n,aspect:r}=e,a=t,i=n;return void 0===a&&void 0===i?(a="100%",i="100%"):void 0===a?a=r&&r>0?void 0:"100%":void 0===i&&(i=r&&r>0?void 0:"100%"),{width:a,height:i}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=le(void 0,void 0,{width:r,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Y(i)&&Y(o)?C.createElement(we,{width:i,height:o},e.children):C.createElement(Se,ge({},e,{width:r,height:a,ref:t}))});function Te(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ie=Symbol.for("immer-nothing"),Ee=Symbol.for("immer-draftable"),Ce=Symbol.for("immer-state");function Ae(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Oe=Object,_e=Oe.getPrototypeOf,Me="constructor",Re="prototype",De="configurable",Fe="enumerable",Pe="writable",Le="value",ze=e=>!!e&&!!e[Ce];function je(e){var t;return!!e&&(We(e)||Xe(e)||!!e[Ee]||!(null===(t=e[Me])||void 0===t||!t[Ee])||Ye(e)||Ze(e))}var Be=Oe[Re][Me].toString(),Ue=new WeakMap;function We(e){if(!e||!Qe(e))return!1;const t=_e(e);if(null===t||t===Oe[Re])return!0;const n=Oe.hasOwnProperty.call(t,Me)&&t[Me];if(n===Object)return!0;if(!Je(n))return!1;let r=Ue.get(n);return void 0===r&&(r=Function.toString.call(n),Ue.set(n,r)),r===Be}function Ve(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===Ge(e)){(n?Reflect.ownKeys(e):Oe.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,r)=>t(r,n,e))}function Ge(e){const t=e[Ce];return t?t.type_:Xe(e)?1:Ye(e)?2:Ze(e)?3:0}var He=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ge(e))?e.has(t):Oe[Re].hasOwnProperty.call(e,t)},Ke=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ge(e))?e.get(t):e[t]},qe=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ge(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n};var Xe=Array.isArray,Ye=e=>e instanceof Map,Ze=e=>e instanceof Set,Qe=e=>"object"===typeof e,Je=e=>"function"===typeof e,$e=e=>"boolean"===typeof e;var et=e=>e.copy_||e.base_,tt=e=>e.modified_?e.copy_:e.base_;function nt(e,t){if(Ye(e))return new Map(e);if(Ze(e))return new Set(e);if(Xe(e))return Array[Re].slice.call(e);const n=We(e);if(!0===t||"class_only"===t&&!n){const t=Oe.getOwnPropertyDescriptors(e);delete t[Ce];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],i=t[a];!1===i[Pe]&&(i[Pe]=!0,i[De]=!0),(i.get||i.set)&&(t[a]={[De]:!0,[Pe]:!0,[Fe]:i[Fe],[Le]:e[a]})}return Oe.create(_e(e),t)}{const t=_e(e);if(null!==t&&n)return F({},e);const r=Oe.create(t);return Oe.assign(r,e)}}function rt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return it(e)||ze(e)||!je(e)||(Ge(e)>1&&Oe.defineProperties(e,{set:at,add:at,clear:at,delete:at}),Oe.freeze(e),t&&Ve(e,(e,t)=>{rt(t,!0)},!1)),e}var at={[Le]:function(){Ae(2)}};function it(e){return null===e||!Qe(e)||Oe.isFrozen(e)}var ot="MapSet",st="Patches",lt="ArrayMethods",ct={};function ut(e){const t=ct[e];return t||Ae(0),t}var ht,dt=e=>!!ct[e];var pt=()=>ht;function ft(e,t){t&&(e.patchPlugin_=ut(st),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function mt(e){gt(e),e.drafts_.forEach(vt),e.drafts_=null}function gt(e){e===ht&&(ht=e.parent_)}var yt=e=>ht={drafts_:[],parent_:ht,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:dt(ot)?ut(ot):void 0,arrayMethodsPlugin_:dt(lt)?ut(lt):void 0};function vt(e){const t=e[Ce];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function bt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(void 0!==e&&e!==n){n[Ce].modified_&&(mt(t),Ae(4)),je(e)&&(e=xt(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(n[Ce].base_,e,t)}else e=xt(t,n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rt(t,n)}(t,e,!0),mt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ie?e:void 0}function xt(e,t){if(it(t))return t;const n=t[Ce];if(!n){return Et(t,e.handledSet_,e)}if(!kt(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:t}=n;if(t)for(;t.length>0;){t.pop()(e)}Tt(n,e)}return n.copy_}function wt(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var kt=(e,t)=>e.scope_===t,St=[];function Nt(e,t,n,r){var a;const i=et(e),o=e.type_;if(void 0!==r){if(Ke(i,r,o)===t)return void qe(i,r,n,o)}if(!e.draftLocations_){const t=e.draftLocations_=new Map;Ve(i,(e,n)=>{if(ze(n)){const r=t.get(n)||[];r.push(e),t.set(n,r)}})}const s=null!==(a=e.draftLocations_.get(t))&&void 0!==a?a:St;for(const l of s)qe(i,l,n,o)}function Tt(e,t){var n,r;if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(null!==(n=null===(r=e.assigned_)||void 0===r?void 0:r.size)&&void 0!==n?n:0)>0)){const{patchPlugin_:n}=t;if(n){const r=n.getPath(e);r&&n.generatePatches_(e,r,t)}wt(e)}}function It(e,t,n){const{scope_:r}=e;if(ze(n)){const a=n[Ce];kt(a,r)&&a.callbacks_.push(function(){Rt(e);const r=tt(a);Nt(e,n,r,t)})}else je(n)&&e.callbacks_.push(function(){const a=et(e);var i;3===e.type_?a.has(n)&&Et(n,r.handledSet_,r):Ke(a,t,e.type_)===n&&r.drafts_.length>1&&!0===(null!==(i=e.assigned_.get(t))&&void 0!==i&&i)&&e.copy_&&Et(Ke(e.copy_,t,e.type_),r.handledSet_,r)})}function Et(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||ze(e)||t.has(e)||!je(e)||it(e)||(t.add(e),Ve(e,(r,a)=>{if(ze(a)){const t=a[Ce];if(kt(t,n)){const n=tt(t);qe(e,r,n,e.type_),wt(t)}}else je(a)&&Et(a,t,n)})),e}var Ct={get(e,t){if(t===Ce)return e;let n=e.scope_.arrayMethodsPlugin_;const r=1===e.type_&&"string"===typeof t;if(r&&null!==n&&void 0!==n&&n.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const a=et(e);if(!He(a,t,e.type_))return function(e,t,n){var r;const a=_t(t,n);return a?Le in a?a[Le]:null===(r=a.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,a,t);const i=a[t];if(e.finalized_||!je(i))return i;if(r&&e.operationMethod&&null!==n&&void 0!==n&&n.isMutatingArrayMethod(e.operationMethod)&&function(e){const t=+e;return Number.isInteger(t)&&String(t)===e}(t))return i;if(i===Ot(e.base_,t)){Rt(e);const n=1===e.type_?+t:t,r=Dt(e.scope_,i,e,n);return e.copy_[n]=r}return i},has:(e,t)=>t in et(e),ownKeys:e=>Reflect.ownKeys(et(e)),set(e,t,n){const r=_t(et(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Ot(et(e),t),o=null===r||void 0===r?void 0:r[Ce];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(((a=n)===(i=r)?0!==a||1/a===1/i:a!==a&&i!==i)&&(void 0!==n||He(e.base_,t,e.type_)))return!0;Rt(e),Mt(e)}var a,i;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),It(e,t,n)),!0},deleteProperty:(e,t)=>(Rt(e),void 0!==Ot(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),Mt(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=et(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{[Pe]:!0,[De]:1!==e.type_||"length"!==t,[Fe]:r[Fe],[Le]:n[t]}:r},defineProperty(){Ae(11)},getPrototypeOf:e=>_e(e.base_),setPrototypeOf(){Ae(12)}},At={};for(let n in Ct){let e=Ct[n];At[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}function Ot(e,t){const n=e[Ce];return(n?et(n):e)[t]}function _t(e,t){if(!(t in e))return;let n=_e(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=_e(n)}}function Mt(e){e.modified_||(e.modified_=!0,e.parent_&&Mt(e.parent_))}function Rt(e){e.copy_||(e.assigned_=new Map,e.copy_=nt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}At.deleteProperty=function(e,t){return At.set.call(this,e,t,void 0)},At.set=function(e,t,n){return Ct.set.call(this,e[0],t,n,e[0])};function Dt(e,t,n,r){var a,i;const[o,s]=Ye(t)?ut(ot).proxyMap_(t,n):Ze(t)?ut(ot).proxySet_(t,n):function(e,t){const n=Xe(e),r={type_:n?1:0,scope_:t?t.scope_:pt(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,i=Ct;n&&(a=[r],i=At);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,[s,r]}(t,n);return(null!==(a=null===n||void 0===n?void 0:n.scope_)&&void 0!==a?a:pt()).drafts_.push(o),s.callbacks_=null!==(i=null===n||void 0===n?void 0:n.callbacks_)&&void 0!==i?i:[],s.key_=r,n&&void 0!==r?function(e,t,n){e.callbacks_.push(function(r){var a,i;const o=t;if(!o||!kt(o,r))return;null===(a=r.mapSetPlugin_)||void 0===a||a.fixSetContents(o);const s=tt(o);Nt(e,null!==(i=o.draft_)&&void 0!==i?i:o,s,n),Tt(o,r)})}(n,s,r):s.callbacks_.push(function(e){var t;null===(t=e.mapSetPlugin_)||void 0===t||t.fixSetContents(s);const{patchPlugin_:n}=e;s.modified_&&n&&n.generatePatches_(s,[],e)}),o}function Ft(e){return ze(e)||Ae(10),Pt(e)}function Pt(e){if(!je(e)||it(e))return e;const t=e[Ce];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=nt(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=nt(e,!0);return Ve(n,(e,t)=>{qe(n,e,Pt(t))},r),t&&(t.finalized_=!1),n}var Lt=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,n)=>{if(Je(e)&&!Je(t)){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return r.produce(e,e=>t.call(this,e,...i))}}let r;if(Je(t)||Ae(6),void 0===n||Je(n)||Ae(7),je(e)){const a=yt(this),i=Dt(a,e,void 0);let o=!0;try{r=t(i),o=!1}finally{o?mt(a):gt(a)}return ft(a,n),bt(r,a)}if(!e||!Qe(e)){if(r=t(e),void 0===r&&(r=e),r===Ie&&(r=void 0),this.autoFreeze_&&rt(r,!0),n){const t=[],a=[];ut(st).generateReplacementPatches_(e,r,{patches_:t,inversePatches_:a}),n(t,a)}return r}Ae(1)},this.produceWithPatches=(e,n)=>{if(Je(e))return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return t.produceWithPatches(n,t=>e(t,...a))};let r,a;const i=this.produce(e,n,(e,t)=>{r=e,a=t});return[i,r,a]},$e(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),$e(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),$e(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){je(e)||Ae(8),ze(e)&&(e=Ft(e));const t=yt(this),n=Dt(t,e,void 0);return n[Ce].isManual_=!0,gt(t),n}finishDraft(e,t){const n=e&&e[Ce];n&&n.isManual_||Ae(9);const{scope_:r}=n;return ft(r,t),bt(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=ut(st).applyPatches_;return ze(e)?r(e,t):this.produce(e,e=>r(e,t))}},zt=Lt.produce;function jt(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Bt=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),Ut=()=>Math.random().toString(36).substring(7).split("").join("."),Wt={INIT:"@@redux/INIT".concat(Ut()),REPLACE:"@@redux/REPLACE".concat(Ut()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Ut())};function Vt(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Gt(e,t,n){if("function"!==typeof e)throw new Error(jt(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(jt(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(jt(1));return n(Gt)(e,t)}let r=e,a=t,i=new Map,o=i,s=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((e,t)=>{o.set(t,e)}))}function u(){if(l)throw new Error(jt(3));return a}function h(e){if("function"!==typeof e)throw new Error(jt(4));if(l)throw new Error(jt(5));let t=!0;c();const n=s++;return o.set(n,e),function(){if(t){if(l)throw new Error(jt(6));t=!1,c(),o.delete(n),i=null}}}function d(e){if(!Vt(e))throw new Error(jt(7));if("undefined"===typeof e.type)throw new Error(jt(8));if("string"!==typeof e.type)throw new Error(jt(17));if(l)throw new Error(jt(9));try{l=!0,a=r(a,e)}finally{l=!1}return(i=o).forEach(e=>{e()}),e}d({type:Wt.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(jt(10));r=e,d({type:Wt.REPLACE})},[Bt]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(jt(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Bt](){return this}}}}}function Ht(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:Wt.INIT}))throw new Error(jt(12));if("undefined"===typeof n(void 0,{type:Wt.PROBE_UNKNOWN_ACTION()}))throw new Error(jt(13))})}(n)}catch(i){a=i}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let i=!1;const o={};for(let a=0;a<r.length;a++){const s=r[a],l=n[s],c=e[s],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(jt(14))}o[s]=u,i=i||u!==c}return i=i||r.length!==Object.keys(e).length,i?o:e}}function Kt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function qt(e){return Vt(e)&&"type"in e&&"string"===typeof e.type}function Xt(e){return t=>{let{dispatch:n,getState:r}=t;return t=>a=>"function"===typeof a?a(n,r,e):t(a)}}var Yt=Xt(),Zt=Xt;const Qt=["reducerPath"];var Jt="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Kt:Kt.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function $t(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Xn(0));return F(F({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>qt(t)&&t.type===e,n}var en=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function tn(e){return je(e)?zt(e,()=>{}):e}function nn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var rn="RTK_autoBatch",an=()=>e=>({payload:e,meta:{[rn]:!0}}),on=e=>t=>{setTimeout(t,e)},sn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,a=!1,i=!1;const o=new Set,s="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:on(10):"callback"===e.type?e.queueNotification:on(e.timeout),l=()=>{i=!1,a&&(a=!1,o.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>r&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[rn]),a=!r,a&&(i||(i=!0,s(l))),n.dispatch(e)}finally{r=!0}}})}};function ln(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=null!==e&&void 0!==e?e:{};let i=new en;return t&&("boolean"===typeof t?i.push(Yt):i.push(Zt(t.extraArgument))),i},{reducer:n,middleware:r,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o,enhancers:s}=e||{};let l,c;if("function"===typeof n)l=n;else{if(!Vt(n))throw new Error(Xn(1));l=Ht(n)}c="function"===typeof r?r(t):t();let u=Kt;a&&(u=Jt(F({trace:!1},"object"===typeof a&&a)));const h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const a=e(n,r);let i=()=>{throw new Error(jt(15))};const o={getState:a.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e,...n)}},s=t.map(e=>e(o));return i=Kt(...s)(a.dispatch),F(F({},a),{},{dispatch:i})}}(...c),d=(e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new en(e);return n&&r.push(sn("object"===typeof n?n:void 0)),r})(h);return Gt(l,o,u(..."function"===typeof s?s(d):d()))}function cn(e){const t={},n=[];let r;const a={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Xn(28));if(r in t)throw new Error(Xn(29));return t[r]=n,a},addAsyncThunk:(e,r)=>(r.pending&&(t[e.pending.type]=r.pending),r.rejected&&(t[e.rejected.type]=r.rejected),r.fulfilled&&(t[e.fulfilled.type]=r.fulfilled),r.settled&&n.push({matcher:e.settled,reducer:r.settled}),a),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(r=e,a)};return e(a),[t,n,r]}var un=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var hn=Symbol.for("rtk-slice-createasyncthunk");function dn(e,t){return"".concat(e,"/").concat(t)}function pn(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[hn];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(Xn(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return F({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(a),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Xn(12));if(n in o.sliceCaseReducersByType)throw new Error(Xn(13));return o.sliceCaseReducersByType[n]=t,s},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),s),exposeAction:(e,t)=>(o.actionCreators[e]=t,s),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,s)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?cn(e.extraReducers):[e.extraReducers],a=F(F({},t),o.sliceCaseReducersByType);return function(e,t){let n,[r,a,i]=cn(t);if("function"===typeof e)n=()=>tn(e());else{const t=tn(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[r[t.type],...a.filter(e=>{let{matcher:n}=e;return n(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===o.filter(e=>!!e).length&&(o=[i]),o.reduce((e,n)=>{if(n){if(ze(e)){const r=n(e,t);return void 0===r?e:r}if(je(e))return zt(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return o.getInitialState=n,o}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}i.forEach(r=>{const i=a[r],o={reducerName:r,type:dn(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(i)?function(e,t,n){let r,a,{type:i,reducerName:o,createNotation:s}=e;if("reducer"in t){if(s&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Xn(17));r=t.reducer,a=t.prepare}else r=t;n.addCase(i,r).exposeCaseReducer(o,r).exposeAction(o,a?$t(i,a):$t(i))}(o,i,s):function(e,t,n,r){let{type:a,reducerName:i}=e;if(!r)throw new Error(Xn(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:u,options:h}=t,d=r(a,o,h);n.exposeAction(i,d),s&&n.addCase(d.fulfilled,s);l&&n.addCase(d.pending,l);c&&n.addCase(d.rejected,c);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(i,{fulfilled:s||gn,pending:l||gn,rejected:c||gn,settled:u||gn})}(o,i,s,n)});const c=e=>e,u=new Map,h=new WeakMap;let d;function p(e,t){return d||(d=l()),d(e,t)}function f(){return d||(d=l()),d.getInitialState()}function m(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let a=e[t];return"undefined"===typeof a&&n&&(a=nn(h,r,f)),a}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const r=nn(u,n,()=>new WeakMap);return nn(r,t,()=>{const r={};for(const[i,o]of Object.entries(null!==(a=e.selectors)&&void 0!==a?a:{})){var a;r[i]=fn(o,t,()=>nn(h,t,f),n)}return r})}return{reducerPath:t,getSelectors:a,get selectors(){return a(r)},selectSlice:r}}const g=F(F({name:t,reducer:p,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:f},m(r)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,a=Te(t,Qt);const i=null!==n&&void 0!==n?n:r;return e.inject({reducerPath:i,reducer:p},a),F(F({},g),m(i,!0))}});return g}}function fn(e,t,n,r){function a(a){let i=t(a);"undefined"===typeof i&&r&&(i=n());for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return e(i,...s)}return a.unwrapped=e,a}var mn=pn();function gn(){}var yn="listener",vn="completed",bn="cancelled",xn="task-".concat(bn),wn="task-".concat(vn),kn="".concat(yn,"-").concat(bn),Sn="".concat(yn,"-").concat(vn),Nn=class{constructor(e){R(this,"name","TaskAbortError"),R(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(bn," (reason: ").concat(e,")")}},Tn=(e,t)=>{if("function"!==typeof e)throw new TypeError(Xn(32))},In=()=>{},En=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:In;return e.catch(t),e},Cn=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),An=e=>{if(e.aborted)throw new Nn(e.reason)};function On(e,t){let n=In;return new Promise((r,a)=>{const i=()=>a(new Nn(e.reason));e.aborted?i():(n=Cn(e,i),t.finally(()=>n()).then(r,a))}).finally(()=>{n=In})}var _n=e=>t=>En(On(e,t).then(t=>(An(e),t))),Mn=e=>{const t=_n(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:Rn}=Object,Dn={},Fn="listenerMiddleware",Pn=(e,t)=>(n,r)=>{Tn(n);const a=new AbortController;var i;i=a,Cn(e,()=>i.abort(e.reason));const o=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Nn?"cancelled":"rejected",error:n}}finally{null===t||void 0===t||t()}})(async()=>{An(e),An(a.signal);const t=await n({pause:_n(a.signal),delay:Mn(a.signal),signal:a.signal});return An(a.signal),t},()=>a.abort(wn));return null!==r&&void 0!==r&&r.autoJoin&&t.push(o.catch(In)),{result:_n(e)(o),cancel(){a.abort(xn)}}},Ln=(e,t)=>(n,r)=>En((async(n,r)=>{An(t);let a=()=>{};const i=[new Promise((t,r)=>{let i=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});a=()=>{i(),r()}})];null!=r&&i.push(new Promise(e=>setTimeout(e,r,null)));try{const e=await On(t,Promise.race(i));return An(t),e}finally{a()}})(n,r)),zn=e=>{let{type:t,actionCreator:n,matcher:r,predicate:a,effect:i}=e;if(t)a=$t(t).match;else if(n)t=n.type,a=n.match;else if(r)a=r;else if(!a)throw new Error(Xn(21));return Tn(i),{predicate:a,type:t,effect:i}},jn=Rn(e=>{const{type:t,predicate:n,effect:r}=zn(e);return{id:un(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Xn(22))}}},{withTypes:()=>jn}),Bn=(e,t)=>{const{type:n,effect:r,predicate:a}=zn(t);return Array.from(e.values()).find(e=>("string"===typeof n?e.type===n:e.predicate===a)&&e.effect===r)},Un=e=>{e.pending.forEach(e=>{e.abort(kn)})},Wn=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},Vn=Rn($t("".concat(Fn,"/add")),{withTypes:()=>Vn}),Gn=$t("".concat(Fn,"/removeAll")),Hn=Rn($t("".concat(Fn,"/remove")),{withTypes:()=>Hn}),Kn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("".concat(Fn,"/error"),...t)},qn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,n=new Map,{extra:r,onError:a=Kn}=e;Tn(a);const i=e=>{var n;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&Un(e)}))(null!==(n=Bn(t,e))&&void 0!==n?n:jn(e))};Rn(i,{withTypes:()=>i});const o=e=>{const n=Bn(t,e);return n&&(n.unsubscribe(),e.cancelActive&&Un(n)),!!n};Rn(o,{withTypes:()=>o});const s=async(e,o,s,l)=>{const c=new AbortController,u=Ln(i,c.signal),h=[];try{e.pending.add(c),(e=>{var t;const r=null!==(t=n.get(e))&&void 0!==t?t:0;n.set(e,r+1)})(e),await Promise.resolve(e.effect(o,Rn({},s,{getOriginalState:l,condition:(e,t)=>u(e,t).then(Boolean),take:u,delay:Mn(c.signal),pause:_n(c.signal),extra:r,signal:c.signal,fork:Pn(c.signal,h),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,n)=>{e!==c&&(e.abort(kn),n.delete(e))})},cancel:()=>{c.abort(kn),e.pending.delete(c)},throwIfCancelled:()=>{An(c.signal)}})))}catch(d){d instanceof Nn||Wn(a,d,{raisedBy:"effect"})}finally{await Promise.all(h),c.abort(Sn),(e=>{var t;const r=null!==(t=n.get(e))&&void 0!==t?t:1;1===r?n.delete(e):n.set(e,r-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())Un(e);e.clear()})(t,n);return{middleware:e=>n=>r=>{if(!qt(r))return n(r);if(Vn.match(r))return i(r.payload);if(Gn.match(r))return void l();if(Hn.match(r))return o(r.payload);let c=e.getState();const u=()=>{if(c===Dn)throw new Error(Xn(23));return c};let h;try{if(h=n(r),t.size>0){const n=e.getState(),i=Array.from(t.values());for(const t of i){let i=!1;try{i=t.predicate(r,n,c)}catch(d){i=!1,Wn(a,d,{raisedBy:"predicate"})}i&&s(t,r,e,u)}}}finally{c=Dn}return h},startListening:i,stopListening:o,clearListeners:l}};Symbol.for("rtk-state-proxy-original");function Xn(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function Yn(e,t){if(t){var n=Number.parseInt(t,10);if(!q(n))return null===e||void 0===e?void 0:e[n]}}var Zn=mn({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Qn=Zn.reducer,{createEventEmitter:Jn}=Zn.actions;n(7237);function $n(e){e()}var er={notify(){},get:()=>[]};function tr(e,t){let n,r=er,a=0,i=!1;function o(){c.onStateChange&&c.onStateChange()}function s(){a++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){$n(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){r&&null!==e&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,n&&0===a&&(n(),n=void 0,r.clear(),r=er)}const c={addNestedSub:function(e){s();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,s())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>r};return c}var nr=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),rr=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),ar=(()=>nr||rr?C.useLayoutEffect:C.useEffect)();function ir(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function or(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!ir(e[n[a]],t[n[a]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var sr=Symbol.for("react-redux-context"),lr="undefined"!==typeof globalThis?globalThis:{};function cr(){var e;if(!C.createContext)return{};const t=null!==(e=lr[sr])&&void 0!==e?e:lr[sr]=new Map;let n=t.get(C.createContext);return n||(n=C.createContext(null),t.set(C.createContext,n)),n}var ur=cr();var hr=function(e){const{children:t,context:n,serverState:r,store:a}=e,i=C.useMemo(()=>{const e=tr(a);return{store:a,subscription:e,getServerState:r?()=>r:void 0}},[a,r]),o=C.useMemo(()=>a.getState(),[a]);ar(()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[i,o]);const s=n||ur;return C.createElement(s.Provider,{value:i},t)};var dr=Symbol.for("immer-nothing"),pr=Symbol.for("immer-draftable"),fr=Symbol.for("immer-state");function mr(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var gr=Object.getPrototypeOf;function yr(e){return!!e&&!!e[fr]}function vr(e){var t;return!!e&&(wr(e)||Array.isArray(e)||!!e[pr]||!(null===(t=e.constructor)||void 0===t||!t[pr])||Ir(e)||Er(e))}var br=Object.prototype.constructor.toString(),xr=new WeakMap;function wr(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if("function"!==typeof n)return!1;let r=xr.get(n);return void 0===r&&(r=Function.toString.call(n),xr.set(n,r)),r===br}function kr(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===Sr(e)){(n?Reflect.ownKeys(e):Object.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,r)=>t(r,n,e))}function Sr(e){const t=e[fr];return t?t.type_:Array.isArray(e)?1:Ir(e)?2:Er(e)?3:0}function Nr(e,t){return 2===Sr(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Tr(e,t,n){const r=Sr(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Ir(e){return e instanceof Map}function Er(e){return e instanceof Set}function Cr(e){return e.copy_||e.base_}function Ar(e,t){if(Ir(e))return new Map(e);if(Er(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=wr(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[fr];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(gr(e),t)}{const t=gr(e);if(null!==t&&n)return F({},e);const r=Object.create(t);return Object.assign(r,e)}}function Or(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Mr(e)||yr(e)||!vr(e)||(Sr(e)>1&&Object.defineProperties(e,{set:_r,add:_r,clear:_r,delete:_r}),Object.freeze(e),t&&Object.values(e).forEach(e=>Or(e,!0))),e}var _r={value:function(){mr(2)}};function Mr(e){return null===e||"object"!==typeof e||Object.isFrozen(e)}var Rr,Dr={};function Fr(e){const t=Dr[e];return t||mr(0),t}function Pr(){return Rr}function Lr(e,t){t&&(Fr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function zr(e){jr(e),e.drafts_.forEach(Ur),e.drafts_=null}function jr(e){e===Rr&&(Rr=e.parent_)}function Br(e){return Rr={drafts_:[],parent_:Rr,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ur(e){const t=e[fr];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Wr(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[fr].modified_&&(zr(t),mr(4)),vr(e)&&(e=Vr(t,e),t.parent_||Hr(t,e)),t.patches_&&Fr("Patches").generateReplacementPatches_(n[fr].base_,e,t.patches_,t.inversePatches_)):e=Vr(t,n,[]),zr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dr?e:void 0}function Vr(e,t,n){if(Mr(t))return t;const r=e.immer_.shouldUseStrictIteration(),a=t[fr];if(!a)return kr(t,(r,i)=>Gr(e,a,t,r,i,n),r),t;if(a.scope_!==e)return t;if(!a.modified_)return Hr(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const t=a.copy_;let i=t,o=!1;3===a.type_&&(i=new Set(t),t.clear(),o=!0),kr(i,(r,i)=>Gr(e,a,t,r,i,n,o),r),Hr(e,t,!1),n&&e.patches_&&Fr("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function Gr(e,t,n,r,a,i,o){if(null==a)return;if("object"!==typeof a&&!o)return;const s=Mr(a);if(!s||o){if(yr(a)){const o=Vr(e,a,i&&t&&3!==t.type_&&!Nr(t.assigned_,r)?i.concat(r):void 0);if(Tr(n,r,o),!yr(o))return;e.canAutoFreeze_=!1}else o&&n.add(a);if(vr(a)&&!s){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[r]===a&&s)return;Vr(e,a),t&&t.scope_.parent_||"symbol"===typeof r||!(Ir(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))||Hr(e,a)}}}function Hr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Or(t,n)}var Kr={get(e,t){if(t===fr)return e;const n=Cr(e);if(!Nr(n,t))return function(e,t,n){var r;const a=Yr(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!vr(r)?r:r===Xr(e.base_,t)?(Qr(e),e.copy_[t]=Jr(r,e)):r},has:(e,t)=>t in Cr(e),ownKeys:e=>Reflect.ownKeys(Cr(e)),set(e,t,n){const r=Yr(Cr(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Xr(Cr(e),t),o=null===r||void 0===r?void 0:r[fr];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((a=n)===(i=r)?0!==a||1/a===1/i:a!==a&&i!==i)&&(void 0!==n||Nr(e.base_,t)))return!0;Qr(e),Zr(e)}var a,i;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Xr(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Qr(e),Zr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Cr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){mr(11)},getPrototypeOf:e=>gr(e.base_),setPrototypeOf(){mr(12)}},qr={};function Xr(e,t){const n=e[fr];return(n?Cr(n):e)[t]}function Yr(e,t){if(!(t in e))return;let n=gr(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=gr(n)}}function Zr(e){e.modified_||(e.modified_=!0,e.parent_&&Zr(e.parent_))}function Qr(e){e.copy_||(e.copy_=Ar(e.base_,e.scope_.immer_.useStrictShallowCopy_))}kr(Kr,(e,t)=>{qr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),qr.deleteProperty=function(e,t){return qr.set.call(this,e,t,void 0)},qr.set=function(e,t,n){return Kr.set.call(this,e[0],t,n,e[0])};function Jr(e,t){const n=Ir(e)?Fr("MapSet").proxyMap_(e,t):Er(e)?Fr("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Pr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=Kr;n&&(a=[r],i=qr);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}(e,t);return(t?t.scope_:Pr()).drafts_.push(n),n}function $r(e){if(!vr(e)||Mr(e))return e;const t=e[fr];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ar(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Ar(e,!0);return kr(n,(e,t)=>{Tr(n,e,$r(t))},r),t&&(t.finalized_=!1),n}var ea=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return r.produce(e,e=>t.call(this,e,...i))}}let r;if("function"!==typeof t&&mr(6),void 0!==n&&"function"!==typeof n&&mr(7),vr(e)){const a=Br(this),i=Jr(e,void 0);let o=!0;try{r=t(i),o=!1}finally{o?zr(a):jr(a)}return Lr(a,n),Wr(r,a)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===dr&&(r=void 0),this.autoFreeze_&&Or(r,!0),n){const t=[],a=[];Fr("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}mr(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return t.produceWithPatches(n,t=>e(t,...a))};let r,a;const i=this.produce(e,n,(e,t)=>{r=e,a=t});return[i,r,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){vr(e)||mr(8),yr(e)&&(e=function(e){yr(e)||mr(10);return $r(e)}(e));const t=Br(this),n=Jr(e,void 0);return n[fr].isManual_=!0,jr(t),n}finishDraft(e,t){const n=e&&e[fr];n&&n.isManual_||mr(9);const{scope_:r}=n;return Lr(r,t),Wr(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Fr("Patches").applyPatches_;return yr(e)?r(e,t):this.produce(e,e=>r(e,t))}};ea.produce;var ta={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},na=mn({name:"tooltip",initialState:{itemInteraction:{click:ta,hover:ta},axisInteraction:{click:ta,hover:ta},keyboardInteraction:ta,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:an()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,a=Ft(e).tooltipItemPayloads.indexOf(n);a>-1&&(e.tooltipItemPayloads[a]=r)},prepare:an()},removeTooltipEntrySettings:{reducer(e,t){var n=Ft(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:an()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:ra,replaceTooltipEntrySettings:aa,removeTooltipEntrySettings:ia,setTooltipSettingsState:oa,setActiveMouseOverItemIndex:sa,mouseLeaveItem:la,mouseLeaveChart:ca,setActiveClickItemIndex:ua,setMouseOverAxisIndex:ha,setMouseClickAxisIndex:da,setSyncInteraction:pa,setKeyboardInteraction:fa}=na.actions,ma=na.reducer,ga=mn({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;null!=n&&(e.dataStartIndex=n),null!=r&&(e.dataEndIndex=r)}}}),{setChartData:ya,setDataStartEndIndexes:va,setComputedData:ba}=ga.actions,xa=ga.reducer,wa=mn({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,a,i;e.margin.top=null!==(n=t.payload.top)&&void 0!==n?n:0,e.margin.right=null!==(r=t.payload.right)&&void 0!==r?r:0,e.margin.bottom=null!==(a=t.payload.bottom)&&void 0!==a?a:0,e.margin.left=null!==(i=t.payload.left)&&void 0!==i?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:ka,setLayout:Sa,setChartSize:Na,setScale:Ta}=wa.actions,Ia=wa.reducer;function Ea(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Ca=e=>Array.isArray(e)?e:[e];function Aa(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const n=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Oa="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function _a(){return{s:0,v:void 0,o:null,p:null}}function Ma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let a,i=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=_a(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=_a(),e.set(n,t)):t=r}}const s=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),i++,r){var c,u,h;const e=null!==(c=null===(u=a)||void 0===u||null===(h=u.deref)||void 0===h?void 0:h.call(u))&&void 0!==c?c:a;null!=e&&r(e,l)&&(l=e,0!==i&&i--);a="object"===typeof l&&null!==l||"function"===typeof l?new Oa(l):l}return s.s=1,s.v=l,l}return o.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function Ra(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a="function"===typeof e?{memoize:e,memoizeOptions:n}:e,i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,i=0,o=0,s={},l=t.pop();"object"===typeof l&&(s=l,l=t.pop()),Ea(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c=F(F({},a),s),{memoize:u,memoizeOptions:h=[],argsMemoize:d=Ma,argsMemoizeOptions:p=[],devModeChecks:f={}}=c,m=Ca(h),g=Ca(p),y=Aa(t),v=u(function(){return i++,l.apply(null,arguments)},...m);const b=d(function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let a=0;a<r;a++)n.push(e[a].apply(null,t));return n}(y,arguments);return r=v.apply(null,e),r},...g);return Object.assign(b,{resultFunc:l,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>r,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:u,argsMemoize:d})};return Object.assign(i,{withTypes:()=>i}),i}var Da=Ra(Ma),Fa=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Da;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((e,t,r)=>(e[n[r]]=t,e),{})});return r},{withTypes:()=>Fa}),Pa=n(8443),La=(0,C.createContext)(null),za=e=>e,ja=()=>{var e=(0,C.useContext)(La);return e?e.store.dispatch:za},Ba=()=>{},Ua=()=>Ba,Wa=(e,t)=>e===t;function Va(e){var t=(0,C.useContext)(La);return(0,Pa.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:Ua,t?t.store.getState:Ba,t?t.store.getState:Ba,t?e:Ba,Wa)}var Ga=n(3821),Ha=n.n(Ga),Ka=e=>e.legend.settings;Da([e=>e.legend.payload,Ka],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Ha()(r,n):r});function qa(e,t){if((a=e.length)>1)for(var n,r,a,i=1,o=e[t[0]],s=o.length;i<a;++i)for(r=o,o=e[t[i]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}Array.prototype.slice;function Xa(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Ya(e){return function(){return e}}function Za(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Qa(e,t){return e[t]}function Ja(e){const t=[];return t.key=e,t}function $a(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach(function(t){ni(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ni(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ri(e,t,n){return re(e)||re(t)?n:Z(t)?V()(e,t,n):"function"===typeof t?t(e):n}var ai=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,ii=(e,t,n,r)=>{if(r)return e.map(e=>e.coordinate);var a,i,o=e.map(e=>(e.coordinate===t&&(a=!0),e.coordinate===n&&(i=!0),e.coordinate));return a||o.push(t),i||o.push(n),o},oi=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:a,range:i,scale:o,realScaleType:s,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:h,niceTicks:d,axisType:p}=e;if(!o)return null;var f="scaleBand"===s&&o.bandwidth?o.bandwidth()/2:2,m=(t||n)&&"category"===a&&o.bandwidth?o.bandwidth()/f:0;return m="angleAxis"===p&&i&&i.length>=2?2*K(i[0]-i[1])*m:m,t&&(h||d)?(h||d||[]).map((e,t)=>{var n=r?r.indexOf(e):e;return{coordinate:o(n)+m,value:e,offset:m,index:t}}).filter(e=>!q(e.coordinate)):l&&c?c.map((e,t)=>({coordinate:o(e)+m,value:e,index:t,offset:m})):o.ticks&&!n&&null!=u?o.ticks(u).map((e,t)=>({coordinate:o(e)+m,value:e,offset:m,index:t})):o.domain().map((e,t)=>({coordinate:o(e)+m,value:r?r[e]:e,index:t,offset:m}))},si=1e-4,li={sign:e=>{var t,n=e.length;if(!(n<=0)){var r=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==r||r<=0))for(var a=0;a<r;++a)for(var i=0,o=0,s=0;s<n;++s){var l=e[s],c=null===l||void 0===l?void 0:l[a];if(null!=c){var u=c[1],h=c[0],d=q(u)?h:u;d>=0?(c[0]=i,c[1]=i+d,i=u):(c[0]=o,c[1]=o+d,o=u)}}}},expand:function(e,t){if((r=e.length)>0){for(var n,r,a,i=0,o=e[0].length;i<o;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}qa(e,t)}},none:qa,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],i=a.length;r<i;++r){for(var o=0,s=0;o<n;++o)s+=e[o][r][1]||0;a[r][1]+=a[r][0]=-s/2}qa(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,i=0,o=1;o<r;++o){for(var s=0,l=0,c=0;s<a;++s){for(var u=e[t[s]],h=u[o][1]||0,d=(h-(u[o-1][1]||0))/2,p=0;p<s;++p){var f=e[t[p]];d+=(f[o][1]||0)-(f[o-1][1]||0)}l+=h,c+=d*h}n[o-1][1]+=n[o-1][0]=i,l&&(i-=c/l)}n[o-1][1]+=n[o-1][0]=i,qa(e,t)}},positive:e=>{var t,n=e.length;if(!(n<=0)){var r=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==r||r<=0))for(var a=0;a<r;++a)for(var i=0,o=0;o<n;++o){var s=e[o],l=null===s||void 0===s?void 0:s[a];if(null!=l){var c=q(l[1])?l[0]:l[1];c>=0?(l[0]=i,l[1]=i+c,i=l[1]):(l[0]=0,l[1]=0)}}}}},ci=(e,t,n)=>{var r,a=null!==(r=li[n])&&void 0!==r?r:qa,i=function(){var e=Ya([]),t=Za,n=qa,r=Qa;function a(a){var i,o,s=Array.from(e.apply(this,arguments),Ja),l=s.length,c=-1;for(const e of a)for(i=0,++c;i<l;++i)(s[i][c]=[0,+r(e,s[i].key,c,a)]).data=e;for(i=0,o=Xa(t(s));i<l;++i)s[o[i]].index=i;return n(s,o),s}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:Ya(Array.from(t)),a):e},a.value=function(e){return arguments.length?(r="function"===typeof e?e:Ya(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?Za:"function"===typeof e?e:Ya(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?qa:e,a):n},a}().keys(t).value((e,t)=>Number(ri(e,t,0))).order(Za).offset(a),o=i(e);return o.forEach((n,r)=>{n.forEach((n,a)=>{var i=ri(e[a],t[r],0);Array.isArray(i)&&2===i.length&&Y(i[0])&&Y(i[1])&&(n[0]=i[0],n[1]=i[1])})}),o};function ui(e){var{axis:t,ticks:n,bandSize:r,entry:a,index:i,dataKey:o}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!re(a[t.dataKey])){var s=ne(n,"value",a[t.dataKey]);if(s)return s.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=ri(a,re(o)?t.dataKey:o);return re(l)?null:t.scale(l)}var hi=(e,t,n)=>{var r;if(null!=e)return[(r=Object.keys(e).reduce((r,a)=>{var i=e[a];if(!i)return r;var{stackedData:o}=i,s=o.reduce((e,r)=>{var a=(e=>{var t=e.flat(2).filter(Y);return[Math.min(...t),Math.max(...t)]})($a(r,t,n));return fe(a[0])&&fe(a[1])?[Math.min(e[0],a[0]),Math.max(e[1],a[1])]:e},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]))[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]]},di=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pi=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fi=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var a=Ha()(t,e=>e.coordinate),i=1/0,o=1,s=a.length;o<s;o++){var l=a[o],c=a[o-1];i=Math.min(((null===l||void 0===l?void 0:l.coordinate)||0)-((null===c||void 0===c?void 0:c.coordinate)||0),i)}return i===1/0?0:i}return n?void 0:0};function mi(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:a,name:i}=e;return ti(ti({},t),{},{dataKey:n,payload:r,value:a,name:i})}function gi(e,t){return e?String(e):"string"===typeof t?t:void 0}var yi=e=>e.layout.width,vi=e=>e.layout.height,bi=e=>e.layout.scale,xi=e=>e.layout.margin,wi=Da(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ki=Da(e=>e.cartesianAxis.yAxis,e=>Object.values(e));function Si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(n),!0).forEach(function(t){Ti(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Si(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ti(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ii=Da([yi,vi,xi,e=>e.brush.height,function(e){return ki(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return ki(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return wi(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return wi(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},Ka,e=>e.legend.size],(e,t,n,r,a,i,o,s,l,c)=>{var u={left:(n.left||0)+a,right:(n.right||0)+i},h=Ni(Ni({},{top:(n.top||0)+o,bottom:(n.bottom||0)+s}),u),d=h.bottom;h.bottom+=r,h=((e,t,n)=>{if(t&&n){var{width:r,height:a}=n,{align:i,verticalAlign:o,layout:s}=t;if(("vertical"===s||"horizontal"===s&&"middle"===o)&&"center"!==i&&Y(e[i]))return ti(ti({},e),{},{[i]:e[i]+(r||0)});if(("horizontal"===s||"vertical"===s&&"center"===i)&&"middle"!==o&&Y(e[o]))return ti(ti({},e),{},{[o]:e[o]+(a||0)})}return e})(h,l,c);var p=e-h.left-h.right,f=t-h.top-h.bottom;return Ni(Ni({brushBottom:d},h),{},{width:Math.max(p,0),height:Math.max(f,0)})}),Ei=Da(Ii,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Ci=Da(yi,vi,(e,t)=>({x:0,y:0,width:e,height:t})),Ai=(0,C.createContext)(null),Oi=()=>null!=(0,C.useContext)(Ai),_i=e=>e.brush,Mi=Da([_i,Ii,xi],(e,t,n)=>({height:e.height,x:Y(e.x)?e.x:t.left,y:Y(e.y)?e.y:t.top+t.height+t.brushBottom-((null===n||void 0===n?void 0:n.bottom)||0),width:Y(e.width)?e.width:t.width}));function Ri(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Di=()=>{var e,t=Oi(),n=Va(Ei),r=Va(Mi),a=null===(e=Va(_i))||void 0===e?void 0:e.padding;return t&&r&&a?{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,x:a.left,y:a.top}:n},Fi={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Pi=()=>{var e;return null!==(e=Va(Ii))&&void 0!==e?e:Fi},Li=()=>Va(yi),zi=()=>Va(vi),ji=e=>e.layout.layoutType,Bi=()=>Va(ji),Ui=e=>{var t=ja(),n=Oi(),{width:r,height:a}=e,i=ke(),o=r,s=a;return i&&(o=i.width>0?i.width:r,s=i.height>0?i.height:a),(0,C.useEffect)(()=>{!n&&me(o)&&me(s)&&t(Na({width:o,height:s}))},[t,n,o,s]),null},Wi=n(9859),Vi=n.n(Wi);function Gi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Hi(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class Ki extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zi;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(qi(this,e))}has(e){return super.has(qi(this,e))}set(e,t){return super.set(Xi(this,e),t)}delete(e){return super.delete(Yi(this,e))}}Set;function qi(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):t}function Xi(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):(n.set(a,t),t)}function Yi(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)&&(t=n.get(a),n.delete(a)),t}function Zi(e){return null!==e&&"object"===typeof e?e.valueOf():e}const Qi=Symbol("implicit");function Ji(){var e=new Ki,t=[],n=[],r=Qi;function a(a){let i=e.get(a);if(void 0===i){if(r!==Qi)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Ki;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return Ji(t,n).unknown(r)},Gi.apply(a,arguments),a}function $i(){var e,t,n=Ji().unknown(void 0),r=n.domain,a=n.range,i=0,o=1,s=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=o<i,d=h?o:i,p=h?i:o;e=(p-d)/Math.max(1,n-l+2*c),s&&(e=Math.floor(e)),d+=(p-d-e*(n-l))*u,t=e*(1-l),s&&(d=Math.round(d),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}(n).map(function(t){return d+e*t});return a(h?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([i,o]=e,i=+i,o=+o,h()):[i,o]},n.rangeRound=function(e){return[i,o]=e,i=+i,o=+o,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return $i(r(),[i,o]).round(s).paddingInner(l).paddingOuter(c).align(u)},Gi.apply(h(),arguments)}function eo(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eo(t())},e}function to(){return eo($i.apply(null,arguments).paddingInner(1))}const no=Math.sqrt(50),ro=Math.sqrt(10),ao=Math.sqrt(2);function io(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=no?10:i>=ro?5:i>=ao?2:1;let s,l,c;return a<0?(c=Math.pow(10,-a)/o,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*o,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?io(e,t,2*n):[s,l,c]}function oo(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[a,i,o]=r?io(t,e,n):io(e,t,n);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(i-c)/-o;else for(let c=0;c<s;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(a+c)/-o;else for(let c=0;c<s;++c)l[c]=(a+c)*o;return l}function so(e,t,n){return io(e=+e,t=+t,n=+n)[2]}function lo(e,t,n){n=+n;const r=(t=+t)<(e=+e),a=r?so(t,e,n):so(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function co(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uo(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ho(e){let t,n,r;function a(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{const t=a+i>>>1;n(e[t],r)<0?a=t+1:i=t}while(a<i)}return a}return 2!==e.length?(t=co,n=(t,n)=>co(e(t),n),r=(t,n)=>e(t)-n):(t=e===co||e===uo?e:po,n=e,r=e),{left:a,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=a(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return i>n&&r(e[i-1],t)>-r(e[i],t)?i-1:i},right:function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{const t=a+i>>>1;n(e[t],r)<=0?a=t+1:i=t}while(a<i)}return a}}}function po(){return 0}function fo(e){return null===e?NaN:+e}const mo=ho(co),go=mo.right,yo=(mo.left,ho(fo).center,go);function vo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xo(){}var wo=.7,ko=1/wo,So="\\s*([+-]?\\d+)\\s*",No="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",To="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Io=/^#([0-9a-f]{3,8})$/,Eo=new RegExp("^rgb\\(".concat(So,",").concat(So,",").concat(So,"\\)$")),Co=new RegExp("^rgb\\(".concat(To,",").concat(To,",").concat(To,"\\)$")),Ao=new RegExp("^rgba\\(".concat(So,",").concat(So,",").concat(So,",").concat(No,"\\)$")),Oo=new RegExp("^rgba\\(".concat(To,",").concat(To,",").concat(To,",").concat(No,"\\)$")),_o=new RegExp("^hsl\\(".concat(No,",").concat(To,",").concat(To,"\\)$")),Mo=new RegExp("^hsla\\(".concat(No,",").concat(To,",").concat(To,",").concat(No,"\\)$")),Ro={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Do(){return this.rgb().formatHex()}function Fo(){return this.rgb().formatRgb()}function Po(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Io.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Lo(t):3===n?new Bo(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?zo(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?zo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Eo.exec(e))?new Bo(t[1],t[2],t[3],1):(t=Co.exec(e))?new Bo(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ao.exec(e))?zo(t[1],t[2],t[3],t[4]):(t=Oo.exec(e))?zo(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=_o.exec(e))?Ko(t[1],t[2]/100,t[3]/100,1):(t=Mo.exec(e))?Ko(t[1],t[2]/100,t[3]/100,t[4]):Ro.hasOwnProperty(e)?Lo(Ro[e]):"transparent"===e?new Bo(NaN,NaN,NaN,0):null}function Lo(e){return new Bo(e>>16&255,e>>8&255,255&e,1)}function zo(e,t,n,r){return r<=0&&(e=t=n=NaN),new Bo(e,t,n,r)}function jo(e,t,n,r){return 1===arguments.length?((a=e)instanceof xo||(a=Po(a)),a?new Bo((a=a.rgb()).r,a.g,a.b,a.opacity):new Bo):new Bo(e,t,n,null==r?1:r);var a}function Bo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Uo(){return"#".concat(Ho(this.r)).concat(Ho(this.g)).concat(Ho(this.b))}function Wo(){const e=Vo(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Go(this.r),", ").concat(Go(this.g),", ").concat(Go(this.b)).concat(1===e?")":", ".concat(e,")"))}function Vo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Go(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ho(e){return((e=Go(e))<16?"0":"")+e.toString(16)}function Ko(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Xo(e,t,n,r)}function qo(e){if(e instanceof Xo)return new Xo(e.h,e.s,e.l,e.opacity);if(e instanceof xo||(e=Po(e)),!e)return new Xo;if(e instanceof Xo)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,l=(i+a)/2;return s?(o=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new Xo(o,s,l,e.opacity)}function Xo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Yo(e){return(e=(e||0)%360)<0?e+360:e}function Zo(e){return Math.max(0,Math.min(1,e||0))}function Qo(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Jo(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}vo(xo,Po,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Do,formatHex:Do,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return qo(this).formatHsl()},formatRgb:Fo,toString:Fo}),vo(Bo,jo,bo(xo,{brighter(e){return e=null==e?ko:Math.pow(ko,e),new Bo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?wo:Math.pow(wo,e),new Bo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Bo(Go(this.r),Go(this.g),Go(this.b),Vo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Uo,formatHex:Uo,formatHex8:function(){return"#".concat(Ho(this.r)).concat(Ho(this.g)).concat(Ho(this.b)).concat(Ho(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Wo,toString:Wo})),vo(Xo,function(e,t,n,r){return 1===arguments.length?qo(e):new Xo(e,t,n,null==r?1:r)},bo(xo,{brighter(e){return e=null==e?ko:Math.pow(ko,e),new Xo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?wo:Math.pow(wo,e),new Xo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Bo(Qo(e>=240?e-240:e+120,a,r),Qo(e,a,r),Qo(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Xo(Yo(this.h),Zo(this.s),Zo(this.l),Vo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vo(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Yo(this.h),", ").concat(100*Zo(this.s),"%, ").concat(100*Zo(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const $o=e=>()=>e;function es(e,t){return function(n){return e+n*t}}function ts(e){return 1===(e=+e)?ns:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):$o(isNaN(t)?n:t)}}function ns(e,t){var n=t-e;return n?es(e,n):$o(isNaN(e)?t:e)}const rs=function e(t){var n=ts(t);function r(e,t){var r=n((e=jo(e)).r,(t=jo(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=ns(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function as(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=jo(t[n]),i[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return i=e(i),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=s(e),r+""}}}as(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,s=r<t-1?e[r+2]:2*i-a;return Jo((n-r/t)*t,o,a,i,s)}}),as(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return Jo((n-r/t)*t,a,i,o,s)}});function is(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=ps(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function os(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ss(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ls(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=ps(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var cs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,us=new RegExp(cs.source,"g");function hs(e,t){var n,r,a,i=cs.lastIndex=us.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=cs.exec(e))&&(r=us.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:ss(n,r)})),i=us.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function ds(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function ps(e,t){var n,r,a=typeof t;return null==t||"boolean"===a?$o(t):("number"===a?ss:"string"===a?(n=Po(t))?(t=n,rs):hs:t instanceof Po?rs:t instanceof Date?os:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?is:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?ls:ss:ds))(e,t)}function fs(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function ms(e){return+e}var gs=[0,1];function ys(e){return e}function vs(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function bs(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=vs(a,r),i=n(o,i)):(r=vs(r,a),i=n(i,o)),function(e){return i(r(e))}}function xs(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=vs(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=yo(e,t,1,r)-1;return i[n](a[n](t))}}function ws(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ks(){var e,t,n,r,a,i,o=gs,s=gs,l=ps,c=ys;function u(){var e=Math.min(o.length,s.length);return c!==ys&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?xs:bs,a=i=null,h}function h(t){return null==t||isNaN(t=+t)?n:(a||(a=r(o.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((i||(i=r(s,o.map(e),ss)))(n)))},h.domain=function(e){return arguments.length?(o=Array.from(e,ms),u()):o.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=fs,u()},h.clamp=function(e){return arguments.length?(c=!!e||ys,u()):c!==ys},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function Ss(){return ks()(ys,ys)}var Ns,Ts=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Is(e){if(!(t=Ts.exec(e)))throw new Error("invalid format: "+e);var t;return new Es({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Es(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Cs(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function As(e){return(e=Cs(Math.abs(e)))?e[1]:NaN}function Os(e,t){var n=Cs(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}Is.prototype=Es.prototype,Es.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const _s={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Os(100*e,t),r:Os,s:function(e,t){var n=Cs(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(Ns=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Cs(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ms(e){return e}var Rs,Ds,Fs,Ps=Array.prototype.map,Ls=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function zs(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Ms:(t=Ps.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,s=t[0],l=0;a>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(e.substring(a-=s,a+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Ms:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Ps.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Is(e)).fill,n=e.align,h=e.sign,d=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):_s[v]||(void 0===g&&(g=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===d?a:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?i:/[%p]/.test(v)?l:"",w=_s[v],k=/[defgprs%]/.test(v);function S(e){var a,i,l,d=b,S=x;if("c"===v)S=w(e)+S,e="";else{var N=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),N&&0===+e&&"+"!==h&&(N=!1),d=(N?"("===h?h:c:"-"===h||"("===h?"":h)+d,S=("s"===v?Ls[8+Ns/3]:"")+S+(N&&"("===h?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(l=e.charCodeAt(a))||l>57){S=(46===l?o+e.slice(a+1):e.slice(a))+S,e=e.slice(0,a);break}}m&&!p&&(e=r(e,1/0));var T=d.length+e.length+S.length,I=T<f?new Array(f-T+1).join(t):"";switch(m&&p&&(e=r(I+e,I.length?f-S.length:1/0),I=""),n){case"<":e=d+e+S+I;break;case"=":e=d+I+e+S;break;case"^":e=I.slice(0,T=I.length>>1)+d+e+S+I.slice(T);break;default:e=I+d+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:h,formatPrefix:function(e,t){var n=h(((e=Is(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(As(t)/3))),a=Math.pow(10,-r),i=Ls[8+r/3];return function(e){return n(a*e)+i}}}}function js(e,t,n,r){var a,i=lo(e,t,n);switch((r=Is(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(As(t)/3)))-As(Math.abs(e)))}(i,o))||(r.precision=a),Fs(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,As(t)-As(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-As(Math.abs(e)))}(i))||(r.precision=a-2*("%"===r.type))}return Ds(r)}function Bs(e){var t=e.domain;return e.ticks=function(e){var n=t();return oo(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return js(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,s=i.length-1,l=i[o],c=i[s],u=10;for(c<l&&(a=l,l=c,c=a,a=o,o=s,s=a);u-- >0;){if((a=so(l,c,n))===r)return i[o]=l,i[s]=c,t(i);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function Us(){var e=Ss();return e.copy=function(){return ws(e,Us())},Gi.apply(e,arguments),Bs(e)}function Ws(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,ms),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Ws(e).unknown(t)},e=arguments.length?Array.from(e,ms):[0,1],Bs(n)}function Vs(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Gs(e){return Math.log(e)}function Hs(e){return Math.exp(e)}function Ks(e){return-Math.log(-e)}function qs(e){return-Math.exp(-e)}function Xs(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Ys(e){return(t,n)=>-e(-t,n)}function Zs(e){const t=e(Gs,Hs),n=t.domain;let r,a,i=10;function o(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),a=function(e){return 10===e?Xs:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),n()[0]<0?(r=Ys(r),a=Ys(a),e(Ks,qs)):e(Gs,Hs),t}return t.base=function(e){return arguments.length?(i=+e,o()):i},t.domain=function(e){return arguments.length?(n(e),o()):n()},t.ticks=e=>{const t=n();let o=t[0],s=t[t.length-1];const l=s<o;l&&([o,s]=[s,o]);let c,u,h=r(o),d=r(s);const p=null==e?10:+e;let f=[];if(!(i%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),o>0){for(;h<=d;++h)for(c=1;c<i;++c)if(u=h<0?c/a(-h):c*a(h),!(u<o)){if(u>s)break;f.push(u)}}else for(;h<=d;++h)for(c=i-1;c>=1;--c)if(u=h>0?c/a(-h):c*a(h),!(u<o)){if(u>s)break;f.push(u)}2*f.length<p&&(f=oo(o,s,p))}else f=oo(h,d,Math.min(d-h,p)).map(a);return l?f.reverse():f},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===i?"s":","),"function"!==typeof n&&(i%1||null!=(n=Is(n)).precision||(n.trim=!0),n=Ds(n)),e===1/0)return n;const o=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/a(Math.round(r(e)));return t*i<i-.5&&(t*=i),t<=o?n(e):""}},t.nice=()=>n(Vs(n(),{floor:e=>a(Math.floor(r(e))),ceil:e=>a(Math.ceil(r(e)))})),t}function Qs(){const e=Zs(ks()).domain([1,10]);return e.copy=()=>ws(e,Qs()).base(e.base()),Gi.apply(e,arguments),e}function Js(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function $s(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function el(e){var t=1,n=e(Js(t),$s(t));return n.constant=function(n){return arguments.length?e(Js(t=+n),$s(t)):t},Bs(n)}function tl(){var e=el(ks());return e.copy=function(){return ws(e,tl()).constant(e.constant())},Gi.apply(e,arguments)}function nl(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rl(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function al(e){return e<0?-e*e:e*e}function il(e){var t=e(ys,ys),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(ys,ys):.5===n?e(rl,al):e(nl(n),nl(1/n)):n},Bs(t)}function ol(){var e=il(ks());return e.copy=function(){return ws(e,ol()).exponent(e.exponent())},Gi.apply(e,arguments),e}function sl(){return ol.apply(null,arguments).exponent(.5)}function ll(e){return Math.sign(e)*e*e}function cl(){var e,t=Ss(),n=[0,1],r=!1;function a(n){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(a)?e:r?Math.round(a):a}return a.invert=function(e){return t.invert(ll(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((n=Array.from(e,ms)).map(ll)),a):n.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(r=!!e,a):r},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return cl(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},Gi.apply(a,arguments),Bs(a)}function ul(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n<a||void 0===n&&a>=a)&&(n=a)}return n}function hl(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n>a||void 0===n&&a>=a)&&(n=a)}return n}function dl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:co;if(e===co)return pl;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function pl(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function fl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=void 0===a?pl:dl(a);r>n;){if(r-n>600){const i=r-n+1,o=t-n+1,s=Math.log(i),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(i-l)/i)*(o-i/2<0?-1:1);fl(e,t,Math.max(n,Math.floor(t-o*l/i+c)),Math.min(r,Math.floor(t+(i-o)*l/i+c)),a)}const i=e[t];let o=n,s=r;for(ml(e,n,t),a(e[r],i)>0&&ml(e,n,r);o<s;){for(ml(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}0===a(e[n],i)?ml(e,n,s):(++s,ml(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function ml(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function gl(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return hl(e);if(t>=1)return ul(e);var r,a=(r-1)*t,i=Math.floor(a),o=ul(fl(e,i).subarray(0,i+1));return o+(hl(e.subarray(i+1))-o)*(a-i)}}function yl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fo;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e);return o+(+n(e[i+1],i+1,e)-o)*(a-i)}}function vl(){var e,t=[],n=[],r=[];function a(){var e=0,a=Math.max(1,n.length);for(r=new Array(a-1);++e<a;)r[e-1]=yl(t,e/a);return i}function i(t){return null==t||isNaN(t=+t)?e:n[yo(r,t)]}return i.invertExtent=function(e){var a=n.indexOf(e);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(co),a()},i.range=function(e){return arguments.length?(n=Array.from(e),a()):n.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.quantiles=function(){return r.slice()},i.copy=function(){return vl().domain(t).range(n).unknown(e)},Gi.apply(i,arguments)}function bl(){var e,t=0,n=1,r=1,a=[.5],i=[0,1];function o(t){return null!=t&&t<=t?i[yo(a,t,0,r)]:e}function s(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},o.range=function(e){return arguments.length?(r=(i=Array.from(e)).length-1,s()):i.slice()},o.invertExtent=function(e){var o=i.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,a[0]]:o>=r?[a[r-1],n]:[a[o-1],a[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return a.slice()},o.copy=function(){return bl().domain([t,n]).range(i).unknown(e)},Gi.apply(Bs(o),arguments)}function xl(){var e,t=[.5],n=[0,1],r=1;function a(a){return null!=a&&a<=a?n[yo(t,a,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return xl().domain(t).range(n).unknown(e)},Gi.apply(a,arguments)}Rs=zs({thousands:",",grouping:[3],currency:["$",""]}),Ds=Rs.format,Fs=Rs.formatPrefix;const wl=1e3,kl=6e4,Sl=36e5,Nl=864e5,Tl=6048e5,Il=2592e6,El=31536e6,Cl=new Date,Al=new Date;function Ol(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),a.round=e=>{const t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),a.range=(n,r,i)=>{const o=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return o;let s;do{o.push(s=new Date(+n)),t(n,i),e(n)}while(s<n&&n<r);return o},a.filter=n=>Ol(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(a.count=(t,r)=>(Cl.setTime(+t),Al.setTime(+r),e(Cl),e(Al),Math.floor(n(Cl,Al))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?t=>r(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const _l=Ol(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_l.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Ol(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):_l:null);_l.range;const Ml=Ol(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*wl)},(e,t)=>(t-e)/wl,e=>e.getUTCSeconds()),Rl=(Ml.range,Ol(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wl)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getMinutes())),Dl=(Rl.range,Ol(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getUTCMinutes())),Fl=(Dl.range,Ol(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wl-e.getMinutes()*kl)},(e,t)=>{e.setTime(+e+t*Sl)},(e,t)=>(t-e)/Sl,e=>e.getHours())),Pl=(Fl.range,Ol(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Sl)},(e,t)=>(t-e)/Sl,e=>e.getUTCHours())),Ll=(Pl.range,Ol(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kl)/Nl,e=>e.getDate()-1)),zl=(Ll.range,Ol(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Nl,e=>e.getUTCDate()-1)),jl=(zl.range,Ol(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Nl,e=>Math.floor(e/Nl)));jl.range;function Bl(e){return Ol(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kl)/Tl)}const Ul=Bl(0),Wl=Bl(1),Vl=Bl(2),Gl=Bl(3),Hl=Bl(4),Kl=Bl(5),ql=Bl(6);Ul.range,Wl.range,Vl.range,Gl.range,Hl.range,Kl.range,ql.range;function Xl(e){return Ol(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/Tl)}const Yl=Xl(0),Zl=Xl(1),Ql=Xl(2),Jl=Xl(3),$l=Xl(4),ec=Xl(5),tc=Xl(6),nc=(Yl.range,Zl.range,Ql.range,Jl.range,$l.range,ec.range,tc.range,Ol(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),rc=(nc.range,Ol(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),ac=(rc.range,Ol(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));ac.every=e=>isFinite(e=Math.floor(e))&&e>0?Ol(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;ac.range;const ic=Ol(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ic.every=e=>isFinite(e=Math.floor(e))&&e>0?Ol(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;ic.range;function oc(e,t,n,r,a,i){const o=[[Ml,1,wl],[Ml,5,5e3],[Ml,15,15e3],[Ml,30,3e4],[i,1,kl],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,Sl],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,Nl],[r,2,1728e5],[n,1,Tl],[t,1,Il],[t,3,7776e6],[e,1,El]];function s(t,n,r){const a=Math.abs(n-t)/r,i=ho(e=>{let[,,t]=e;return t}).right(o,a);if(i===o.length)return e.every(lo(t/El,n/El,r));if(0===i)return _l.every(Math.max(lo(t,n,r),1));const[s,l]=o[a/o[i-1][2]<o[i][2]/a?i-1:i];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const a=n&&"function"===typeof n.range?n:s(e,t,n),i=a?a.range(e,+t+1):[];return r?i.reverse():i},s]}const[sc,lc]=oc(ic,rc,Yl,jl,Pl,Dl),[cc,uc]=oc(ac,nc,Ul,Ll,Fl,Rl);function hc(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function dc(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var fc,mc,gc,yc={"-":"",_:" ",0:"0"},vc=/^\s*\d+/,bc=/^%/,xc=/[\\^$*+?|[\]().{}]/g;function wc(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function kc(e){return e.replace(xc,"\\$&")}function Sc(e){return new RegExp("^(?:"+e.map(kc).join("|")+")","i")}function Nc(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function Tc(e,t,n){var r=vc.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ic(e,t,n){var r=vc.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ec(e,t,n){var r=vc.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Cc(e,t,n){var r=vc.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ac(e,t,n){var r=vc.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Oc(e,t,n){var r=vc.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function _c(e,t,n){var r=vc.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Mc(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Rc(e,t,n){var r=vc.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Dc(e,t,n){var r=vc.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Fc(e,t,n){var r=vc.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Pc(e,t,n){var r=vc.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Lc(e,t,n){var r=vc.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function zc(e,t,n){var r=vc.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function jc(e,t,n){var r=vc.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Bc(e,t,n){var r=vc.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Uc(e,t,n){var r=vc.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Wc(e,t,n){var r=bc.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Vc(e,t,n){var r=vc.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Gc(e,t,n){var r=vc.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Hc(e,t){return wc(e.getDate(),t,2)}function Kc(e,t){return wc(e.getHours(),t,2)}function qc(e,t){return wc(e.getHours()%12||12,t,2)}function Xc(e,t){return wc(1+Ll.count(ac(e),e),t,3)}function Yc(e,t){return wc(e.getMilliseconds(),t,3)}function Zc(e,t){return Yc(e,t)+"000"}function Qc(e,t){return wc(e.getMonth()+1,t,2)}function Jc(e,t){return wc(e.getMinutes(),t,2)}function $c(e,t){return wc(e.getSeconds(),t,2)}function eu(e){var t=e.getDay();return 0===t?7:t}function tu(e,t){return wc(Ul.count(ac(e)-1,e),t,2)}function nu(e){var t=e.getDay();return t>=4||0===t?Hl(e):Hl.ceil(e)}function ru(e,t){return e=nu(e),wc(Hl.count(ac(e),e)+(4===ac(e).getDay()),t,2)}function au(e){return e.getDay()}function iu(e,t){return wc(Wl.count(ac(e)-1,e),t,2)}function ou(e,t){return wc(e.getFullYear()%100,t,2)}function su(e,t){return wc((e=nu(e)).getFullYear()%100,t,2)}function lu(e,t){return wc(e.getFullYear()%1e4,t,4)}function cu(e,t){var n=e.getDay();return wc((e=n>=4||0===n?Hl(e):Hl.ceil(e)).getFullYear()%1e4,t,4)}function uu(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+wc(t/60|0,"0",2)+wc(t%60,"0",2)}function hu(e,t){return wc(e.getUTCDate(),t,2)}function du(e,t){return wc(e.getUTCHours(),t,2)}function pu(e,t){return wc(e.getUTCHours()%12||12,t,2)}function fu(e,t){return wc(1+zl.count(ic(e),e),t,3)}function mu(e,t){return wc(e.getUTCMilliseconds(),t,3)}function gu(e,t){return mu(e,t)+"000"}function yu(e,t){return wc(e.getUTCMonth()+1,t,2)}function vu(e,t){return wc(e.getUTCMinutes(),t,2)}function bu(e,t){return wc(e.getUTCSeconds(),t,2)}function xu(e){var t=e.getUTCDay();return 0===t?7:t}function wu(e,t){return wc(Yl.count(ic(e)-1,e),t,2)}function ku(e){var t=e.getUTCDay();return t>=4||0===t?$l(e):$l.ceil(e)}function Su(e,t){return e=ku(e),wc($l.count(ic(e),e)+(4===ic(e).getUTCDay()),t,2)}function Nu(e){return e.getUTCDay()}function Tu(e,t){return wc(Zl.count(ic(e)-1,e),t,2)}function Iu(e,t){return wc(e.getUTCFullYear()%100,t,2)}function Eu(e,t){return wc((e=ku(e)).getUTCFullYear()%100,t,2)}function Cu(e,t){return wc(e.getUTCFullYear()%1e4,t,4)}function Au(e,t){var n=e.getUTCDay();return wc((e=n>=4||0===n?$l(e):$l.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ou(){return"+0000"}function _u(){return"%"}function Mu(e){return+e}function Ru(e){return Math.floor(+e/1e3)}function Du(e){return new Date(e)}function Fu(e){return e instanceof Date?+e:+new Date(+e)}function Pu(e,t,n,r,a,i,o,s,l,c){var u=Ss(),h=u.invert,d=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(l(e)<e?p:s(e)<e?f:o(e)<e?m:i(e)<e?g:r(e)<e?a(e)<e?y:v:n(e)<e?b:x)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?d(Array.from(e,Fu)):d().map(Du)},u.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=d();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(Vs(n,e)):u},u.copy=function(){return ws(u,Pu(e,t,n,r,a,i,o,s,l,c))},u}function Lu(){return Gi.apply(Pu(cc,uc,ac,nc,Ul,Ll,Fl,Rl,Ml,mc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function zu(){return Gi.apply(Pu(sc,lc,ic,rc,Yl,zl,Pl,Dl,Ml,gc).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ju(){var e,t,n,r,a,i=0,o=1,s=ys,l=!1;function c(t){return null==t||isNaN(t=+t)?a:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(a){return arguments.length?([i,o]=a,e=r(i=+i),t=r(o=+o),n=e===t?0:1/(t-e),c):[i,o]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(ps),c.rangeRound=u(fs),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(i),t=a(o),n=e===t?0:1/(t-e),c}}function Bu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Uu(){var e=Bs(ju()(ys));return e.copy=function(){return Bu(e,Uu())},Hi.apply(e,arguments)}function Wu(){var e=Zs(ju()).domain([1,10]);return e.copy=function(){return Bu(e,Wu()).base(e.base())},Hi.apply(e,arguments)}function Vu(){var e=el(ju());return e.copy=function(){return Bu(e,Vu()).constant(e.constant())},Hi.apply(e,arguments)}function Gu(){var e=il(ju());return e.copy=function(){return Bu(e,Gu()).exponent(e.exponent())},Hi.apply(e,arguments)}function Hu(){return Gu.apply(null,arguments).exponent(.5)}function Ku(){var e=[],t=ys;function n(n){if(null!=n&&!isNaN(n=+n))return t((yo(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(co),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((n,r)=>t(r/(e.length-1)))},n.quantiles=function(t){return Array.from({length:t+1},(n,r)=>gl(e,r/t))},n.copy=function(){return Ku(t).domain(e)},Hi.apply(n,arguments)}function qu(){var e,t,n,r,a,i,o,s=0,l=.5,c=1,u=1,h=ys,d=!1;function p(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(u*e<u*t?r:a),h(d?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var n,r,a;return arguments.length?([n,r,a]=t,h=function(e,t){void 0===t&&(t=e,e=ps);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}(e,[n,r,a]),p):[h(0),h(.5),h(1)]}}return p.domain=function(o){return arguments.length?([s,l,c]=o,e=i(s=+s),t=i(l=+l),n=i(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),u=t<e?-1:1,p):[s,l,c]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(h=e,p):h},p.range=f(ps),p.rangeRound=f(fs),p.unknown=function(e){return arguments.length?(o=e,p):o},function(o){return i=o,e=o(s),t=o(l),n=o(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function Xu(){var e=Bs(qu()(ys));return e.copy=function(){return Bu(e,Xu())},Hi.apply(e,arguments)}function Yu(){var e=Zs(qu()).domain([.1,1,10]);return e.copy=function(){return Bu(e,Yu()).base(e.base())},Hi.apply(e,arguments)}function Zu(){var e=el(qu());return e.copy=function(){return Bu(e,Zu()).constant(e.constant())},Hi.apply(e,arguments)}function Qu(){var e=il(qu());return e.copy=function(){return Bu(e,Qu()).exponent(e.exponent())},Hi.apply(e,arguments)}function Ju(){return Qu.apply(null,arguments).exponent(.5)}!function(e){fc=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=Sc(a),u=Nc(a),h=Sc(i),d=Nc(i),p=Sc(o),f=Nc(o),m=Sc(s),g=Nc(s),y=Sc(l),v=Nc(l),b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Hc,e:Hc,f:Zc,g:su,G:cu,H:Kc,I:qc,j:Xc,L:Yc,m:Qc,M:Jc,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Mu,s:Ru,S:$c,u:eu,U:tu,V:ru,w:au,W:iu,x:null,X:null,y:ou,Y:lu,Z:uu,"%":_u},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:hu,e:hu,f:gu,g:Eu,G:Au,H:du,I:pu,j:fu,L:mu,m:yu,M:vu,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Mu,s:Ru,S:bu,u:xu,U:wu,V:Su,w:Nu,W:Tu,x:null,X:null,y:Iu,Y:Cu,Z:Ou,"%":_u},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return N(e,t,n,r)},d:Fc,e:Fc,f:Uc,g:_c,G:Oc,H:Lc,I:Lc,j:Pc,L:Bc,m:Dc,M:zc,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Rc,Q:Vc,s:Gc,S:jc,u:Ic,U:Ec,V:Cc,w:Tc,W:Ac,x:function(e,t,r){return N(e,n,t,r)},X:function(e,t,n){return N(e,r,t,n)},y:_c,Y:Oc,Z:Mc,"%":Wc};function k(e,t){return function(n){var r,a,i,o=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(a=yc[r=e.charAt(++s)])?r=e.charAt(++s):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function S(e,t){return function(n){var r,a,i=pc(1900,void 0,1);if(N(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=dc(pc(i.y,0,1))).getUTCDay(),r=a>4||0===a?Zl.ceil(r):Zl(r),r=zl.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=hc(pc(i.y,0,1))).getDay(),r=a>4||0===a?Wl.ceil(r):Wl(r),r=Ll.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?dc(pc(i.y,0,1)).getUTCDay():hc(pc(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,dc(i)):hc(i)}}function N(e,t,n,r){for(var a,i,o=0,s=t.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in yc?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),mc=fc.format,fc.parse,gc=fc.utcFormat,fc.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var $u=e=>e.chartData,eh=Da([$u],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),th=(e,t,n,r)=>r?eh(e):$u(e);function nh(e){if(Array.isArray(e)&&2===e.length){var[t,n]=e;if(fe(t)&&fe(n))return!0}return!1}function rh(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function ah(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var n,r,[a,i]=e;if(fe(a))n=a;else if("function"===typeof a)return;if(fe(i))r=i;else if("function"===typeof i)return;var o=[n,r];if(nh(o))return o}}var ih,oh=n(8210),sh=n.n(oh),lh=e=>e,ch={"@@functional/placeholder":!0},uh=e=>e===ch,hh=e=>function t(){return 0===arguments.length||1===arguments.length&&uh(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},dh=(e,t)=>1===e?t:hh(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.filter(e=>e!==ch).length;return i>=e?t(...r):dh(e-i,hh(function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=r.map(e=>uh(e)?n.shift():e);return t(...i,...n)}))}),ph=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},fh=dh((ih=(e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)).length,ih);function mh(e){return 0===e?1:Math.floor(new(sh())(e).abs().log(10).toNumber())+1}function gh(e,t,n){for(var r=new(sh())(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var yh=e=>{var[t,n]=e,[r,a]=[t,n];return t>n&&([r,a]=[n,t]),[r,a]},vh=(e,t,n)=>{if(e.lte(0))return new(sh())(0);var r=mh(e.toNumber()),a=new(sh())(10).pow(r),i=e.div(a),o=1!==r?.05:.1,s=new(sh())(Math.ceil(i.div(o).toNumber())).add(n).mul(o).mul(a);return t?new(sh())(s.toNumber()):new(sh())(Math.ceil(s.toNumber()))},bh=(e,t,n)=>{var r=new(sh())(1),a=new(sh())(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new(sh())(10).pow(mh(e)-1),a=new(sh())(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new(sh())(Math.floor(e)))}else 0===e?a=new(sh())(Math.floor((t-1)/2)):n||(a=new(sh())(Math.floor(e)));var o=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return lh;var r=t.reverse(),a=r[0],i=r.slice(1);return function(){return i.reduce((e,t)=>t(e),a(...arguments))}}(fh(e=>a.add(new(sh())(e-o).mul(r)).toNumber()),ph)(0,t)},xh=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(sh())(0),tickMin:new(sh())(0),tickMax:new(sh())(0)};var i,o=vh(new(sh())(t).sub(e).div(n-1),r,a);i=e<=0&&t>=0?new(sh())(0):(i=new(sh())(e).add(t).div(2)).sub(new(sh())(i).mod(o));var s=Math.ceil(i.sub(e).div(o).toNumber()),l=Math.ceil(new(sh())(t).sub(i).div(o).toNumber()),c=s+l+1;return c>n?xh(e,t,n,r,a+1):(c<n&&(l=t>0?l+(n-c):l,s=t>0?s:s+(n-c)),{step:o,tickMin:i.sub(new(sh())(s).mul(o)),tickMax:i.add(new(sh())(l).mul(o))})},wh=e=>e.rootProps.stackOffset,kh=e=>e.rootProps.reverseStackOrder,Sh=e=>e.options.chartName,Nh=e=>e.rootProps.syncId,Th=e=>e.rootProps.syncMethod,Ih=e=>e.options.eventEmitter;function Eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ch(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eh(Object(n),!0).forEach(function(t){Ah(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ah(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oh=Math.PI/180,_h=e=>180*e/Math.PI,Mh=(e,t,n,r)=>({x:e+Math.cos(-Oh*r)*n,y:t+Math.sin(-Oh*r)*n}),Rh=(e,t)=>{var{x:n,y:r}=e,{cx:a,cy:i}=t,o=((e,t)=>{var{x:n,y:r}=e,{x:a,y:i}=t;return Math.sqrt((n-a)**2+(r-i)**2)})({x:n,y:r},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var s=(n-a)/o,l=Math.acos(s);return r>i&&(l=2*Math.PI-l),{radius:o,angle:_h(l),angleInRadian:l}},Dh=(e,t)=>{var{startAngle:n,endAngle:r}=t,a=Math.floor(n/360),i=Math.floor(r/360);return e+360*Math.min(a,i)},Fh=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:a,angle:i}=Rh({x:n,y:r},t),{innerRadius:o,outerRadius:s}=t;if(a<o||a>s)return null;if(0===a)return null;var l,{startAngle:c,endAngle:u}=(e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),a=Math.floor(n/360),i=Math.min(r,a);return{startAngle:t-360*i,endAngle:n-360*i}})(t),h=i;if(c<=u){for(;h>u;)h-=360;for(;h<c;)h+=360;l=h>=c&&h<=u}else{for(;h>c;)h-=360;for(;h<u;)h+=360;l=h>=u&&h<=c}return l?Ch(Ch({},t),{},{radius:a,angle:Dh(h,t)}):null},Ph={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Lh=!0,zh=0,jh=!1,Bh="auto",Uh=!0,Wh="category",Vh=(Ph.axis,!1),Gh=!0,Hh=0,Kh="auto",qh=!0,Xh=5,Yh="number",Zh=(Ph.axis,(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t}),Qh={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:zh,includeHidden:!1,name:void 0,reversed:jh,scale:Bh,tick:Uh,tickCount:void 0,ticks:void 0,type:Wh,unit:void 0},Jh={allowDataOverflow:Vh,allowDecimals:!1,allowDuplicatedCategory:Gh,dataKey:void 0,domain:void 0,id:Hh,includeHidden:!1,name:void 0,reversed:!1,scale:Kh,tick:qh,tickCount:Xh,ticks:void 0,type:Yh,unit:void 0},$h={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Lh,dataKey:void 0,domain:void 0,id:zh,includeHidden:!1,name:void 0,reversed:!1,scale:Bh,tick:Uh,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ed={allowDataOverflow:Vh,allowDecimals:!1,allowDuplicatedCategory:Gh,dataKey:void 0,domain:void 0,id:Hh,includeHidden:!1,name:void 0,reversed:!1,scale:Kh,tick:qh,tickCount:Xh,ticks:void 0,type:"category",unit:void 0},td=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?$h:Qh,nd=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?ed:Jh,rd=e=>e.polarOptions,ad=Da([yi,vi,Ii],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2}),id=Da([rd,ad],(e,t)=>{if(null!=e)return $(e.innerRadius,t,0)}),od=Da([rd,ad],(e,t)=>{if(null!=e)return $(e.outerRadius,t,.8*t)}),sd=Da([rd],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]}),ld=(Da([td,sd],Zh),Da([ad,id,od],(e,t,n)=>{if(null!=e&&null!=t&&null!=n)return[t,n]})),cd=(Da([nd,ld],Zh),Da([ji,rd,id,od,yi,vi],(e,t,n,r,a,i)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=n&&null!=r){var{cx:o,cy:s,startAngle:l,endAngle:c}=t;return{cx:$(o,a,a/2),cy:$(s,i,i/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}})),ud=(e,t)=>t,hd=(e,t,n)=>n;function dd(e){return null===e||void 0===e?void 0:e.id}function pd(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=n,o=new Map;return e.forEach(e=>{var t,n=null!==(t=e.data)&&void 0!==t?t:r;if(null!=n&&0!==n.length){var s=dd(e);n.forEach((t,n)=>{var r,l=null==i||a?n:String(ri(t,i,null)),c=ri(t,e.dataKey,0);r=o.has(l)?o.get(l):{},Object.assign(r,{[s]:c}),o.set(l,r)})}}),Array.from(o.values())}function fd(e){return"stackId"in e&&null!=e.stackId&&null!=e.dataKey}var md=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function gd(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var yd=e=>{var t=ji(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},vd=e=>e.tooltip.settings.axisId;function bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bd(Object(n),!0).forEach(function(t){wd(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kd=[0,"auto"],Sd={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Nd=(e,t)=>e.cartesianAxis.xAxis[t],Td=(e,t)=>{var n=Nd(e,t);return null==n?Sd:n},Id={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:kd,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},Ed=(e,t)=>e.cartesianAxis.yAxis[t],Cd=(e,t)=>{var n=Ed(e,t);return null==n?Id:n},Ad={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Od=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return null==n?Ad:n},_d=(e,t,n)=>{switch(t){case"xAxis":return Td(e,n);case"yAxis":return Cd(e,n);case"zAxis":return Od(e,n);case"angleAxis":return td(e,n);case"radiusAxis":return nd(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Md=(e,t,n)=>{switch(t){case"xAxis":return Td(e,n);case"yAxis":return Cd(e,n);case"angleAxis":return td(e,n);case"radiusAxis":return nd(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Rd=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function Dd(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Fd=e=>e.graphicalItems.cartesianItems,Pd=Da([ud,hd],Dd),Ld=(e,t,n)=>e.filter(n).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),zd=Da([Fd,_d,Pd],Ld,{memoizeOptions:{resultEqualityCheck:gd}}),jd=Da([zd],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(fd)),Bd=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),Ud=Da([zd],Bd),Wd=e=>e.map(e=>e.data).filter(Boolean).flat(1),Vd=Da([zd],Wd,{memoizeOptions:{resultEqualityCheck:gd}}),Gd=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:a}=t;return e.length>0?e:n.slice(r,a+1)},Hd=Da([Vd,th],Gd),Kd=(e,t,n)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:ri(e,t.dataKey)})):n.length>0?n.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:ri(e,t)}))):e.map(e=>({value:e})),qd=Da([Hd,_d,zd],Kd);function Xd(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function Yd(e){if(Z(e)||e instanceof Date){var t=Number(e);if(fe(t))return t}}function Zd(e){if(Array.isArray(e)){var t=[Yd(e[0]),Yd(e[1])];return nh(t)?t:void 0}var n=Yd(e);if(null!=n)return[n,n]}function Qd(e){return e.map(Yd).filter(ie)}var Jd=e=>{var t=yd(e),n=vd(e);return Md(e,t,n)},$d=Da([Jd],e=>null===e||void 0===e?void 0:e.dataKey),ep=Da([jd,th,Jd],pd),tp=(e,t,n,r)=>{var a=t.reduce((e,t)=>{if(null==t.stackId)return e;var n=e[t.stackId];return null==n&&(n=[]),n.push(t),e[t.stackId]=n,e},{});return Object.fromEntries(Object.entries(a).map(t=>{var[a,i]=t,o=r?[...i].reverse():i,s=o.map(dd);return[a,{stackedData:ci(e,s,n),graphicalItems:o}]}))},np=Da([ep,jd,wh,kh],tp),rp=(e,t,n,r)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(null==r&&"zAxis"!==n){var o=hi(e,a,i);if(null==o||0!==o[0]||0!==o[1])return o}},ap=Da([_d],e=>e.allowDataOverflow),ip=e=>{var t;if(null==e||!("domain"in e))return kd;if(null!=e.domain)return e.domain;if("ticks"in e&&null!=e.ticks){if("number"===e.type){var n=Qd(e.ticks);return[Math.min(...n),Math.max(...n)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:kd},op=Da([_d],ip),sp=Da([op,ap],ah),lp=Da([np,$u,ud,sp],rp,{memoizeOptions:{resultEqualityCheck:md}}),cp=e=>e.errorBars,up=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);if(0!==r.length){var a=r.flat();return[Math.min(...a),Math.max(...a)]}},hp=(e,t,n,r,a)=>{var i,o;if(n.length>0&&e.forEach(e=>{n.forEach(n=>{var s,l,c=null===(s=r[n.id])||void 0===s?void 0:s.filter(e=>Xd(a,e)),u=ri(e,null!==(l=t.dataKey)&&void 0!==l?l:n.dataKey),h=function(e,t,n){return!n||"number"!==typeof t||q(t)?[]:n.length?Qd(n.flatMap(n=>{var r,a,i=ri(e,n.dataKey);if(Array.isArray(i)?[r,a]=i:r=a=i,fe(r)&&fe(a))return[t-r,t+a]})):[]}(e,u,c);if(h.length>=2){var d=Math.min(...h),p=Math.max(...h);(null==i||d<i)&&(i=d),(null==o||p>o)&&(o=p)}var f=Zd(u);null!=f&&(i=null==i?f[0]:Math.min(i,f[0]),o=null==o?f[1]:Math.max(o,f[1]))})}),null!=(null===t||void 0===t?void 0:t.dataKey)&&e.forEach(e=>{var n=Zd(ri(e,t.dataKey));null!=n&&(i=null==i?n[0]:Math.min(i,n[0]),o=null==o?n[1]:Math.max(o,n[1]))}),fe(i)&&fe(o))return[i,o]},dp=Da([Hd,_d,Ud,cp,ud],hp,{memoizeOptions:{resultEqualityCheck:md}});function pp(e){var{value:t}=e;if(Z(t)||t instanceof Date)return t}var fp=e=>e.referenceElements.dots,mp=(e,t,n)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===n:e.yAxisId===n),gp=Da([fp,ud,hd],mp),yp=e=>e.referenceElements.areas,vp=Da([yp,ud,hd],mp),bp=e=>e.referenceElements.lines,xp=Da([bp,ud,hd],mp),wp=(e,t)=>{if(null!=e){var n=Qd(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},kp=Da(gp,ud,wp),Sp=(e,t)=>{if(null!=e){var n=Qd(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},Np=Da([vp,ud],Sp);var Tp=(e,t)=>{if(null!=e){var n=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return Qd([e.x]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==n||0===n.length?[]:Qd(n)}(e):function(e){var t;if(null!=e.y)return Qd([e.y]);var n=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==n||0===n.length?[]:Qd(n)}(e));if(0!==n.length)return[Math.min(...n),Math.max(...n)]}},Ip=Da([xp,ud],Tp),Ep=Da(kp,Ip,Np,(e,t,n)=>up(e,n,t)),Cp=(e,t,n,r,a,i,o,s)=>null!=n?n:function(e,t,n){if(n||null!=t){if("function"===typeof e&&null!=t)try{var r=e(t,n);if(nh(r))return rh(r,t,n)}catch(p){}if(Array.isArray(e)&&2===e.length){var a,i,[o,s]=e;if("auto"===o)null!=t&&(a=Math.min(...t));else if(Y(o))a=o;else if("function"===typeof o)try{null!=t&&(a=o(null===t||void 0===t?void 0:t[0]))}catch(f){}else if("string"===typeof o&&di.test(o)){var l=di.exec(o);if(null==l||null==l[1]||null==t)a=void 0;else{var c=+l[1];a=t[0]-c}}else a=null===t||void 0===t?void 0:t[0];if("auto"===s)null!=t&&(i=Math.max(...t));else if(Y(s))i=s;else if("function"===typeof s)try{null!=t&&(i=s(null===t||void 0===t?void 0:t[1]))}catch(m){}else if("string"===typeof s&&pi.test(s)){var u=pi.exec(s);if(null==u||null==u[1]||null==t)i=void 0;else{var h=+u[1];i=t[1]+h}}else i=null===t||void 0===t?void 0:t[1];var d=[a,i];if(nh(d))return null==t?d:rh(d,t,n)}}}(t,"vertical"===o&&"xAxis"===s||"horizontal"===o&&"yAxis"===s?up(r,i,a):up(i,a),e.allowDataOverflow),Ap=Da([_d,op,sp,lp,dp,Ep,ji,ud],Cp,{memoizeOptions:{resultEqualityCheck:md}}),Op=[0,1],_p=(e,t,n,r,a,i,o)=>{if(null!=e&&null!=n&&0!==n.length||void 0!==o){var s,{dataKey:l,type:c}=e,u=ai(t,i);return u&&null==l?Vi()(0,null!==(s=null===n||void 0===n?void 0:n.length)&&void 0!==s?s:0):"category"===c?((e,t,n)=>{var r=e.map(pp).filter(e=>null!=e);return n&&(null==t.dataKey||t.allowDuplicatedCategory&&ee(r))?Vi()(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))})(r,e,u):"expand"===a?Op:o}},Mp=Da([_d,ji,Hd,qd,wh,ud,Ap],_p),Rp=(t,n,r,a,i)=>{if(null!=t){var{scale:o,type:s}=t;if("auto"===o)return"radial"===n&&"radiusAxis"===i?"band":"radial"===n&&"angleAxis"===i?"linear":"category"===s&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":"category"===s?"band":"linear";if("string"===typeof o){var l="scale".concat(ae(o));return l in e?l:"point"}}},Dp=Da([_d,ji,Rd,Sh,ud],Rp);function Fp(t,n,r,a){if(null!=r&&null!=a){if("function"===typeof t.scale)return t.scale.copy().domain(r).range(a);var i=function(t){if(null!=t){if(t in e)return e[t]();var n="scale".concat(ae(t));return n in e?e[n]():void 0}}(n);if(null!=i){var o=i.domain(r).range(a);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),a=Math.min(r[0],r[1])-si,i=Math.max(r[0],r[1])+si,o=e(t[0]),s=e(t[n-1]);(o<a||o>i||s<a||s>i)&&e.domain([t[0],t[n-1]])}})(o),o}}}var Pp=(e,t,n)=>{var r=ip(t);if("auto"===n||"linear"===n)return null!=t&&t.tickCount&&Array.isArray(r)&&("auto"===r[0]||"auto"===r[1])&&nh(e)?function(e){var[t,n]=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(r,2),[o,s]=yh([t,n]);if(o===-1/0||s===1/0){var l=s===1/0?[o,...ph(0,r-1).map(()=>1/0)]:[...ph(0,r-1).map(()=>-1/0),s];return t>n?l.reverse():l}if(o===s)return bh(o,r,a);var{step:c,tickMin:u,tickMax:h}=xh(o,s,i,a,0),d=gh(u,h.add(new(sh())(.1).mul(c)),c);return t>n?d.reverse():d}(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&nh(e)?function(e,t){var[n,r]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[i,o]=yh([n,r]);if(i===-1/0||o===1/0)return[n,r];if(i===o)return[i];var s=Math.max(t,2),l=vh(new(sh())(o).sub(i).div(s-1),a,0),c=[...gh(new(sh())(i),new(sh())(o),l),o];return!1===a&&(c=c.map(e=>Math.round(e))),n>r?c.reverse():c}(e,t.tickCount,t.allowDecimals):void 0},Lp=Da([Mp,Md,Dp],Pp),zp=(e,t,n,r)=>{if("angleAxis"!==r&&"number"===(null===e||void 0===e?void 0:e.type)&&nh(t)&&Array.isArray(n)&&n.length>0){var a=t[0],i=n[0],o=t[1],s=n[n.length-1];return[Math.min(a,i),Math.max(o,s)]}return t},jp=Da([_d,Mp,Lp,ud],zp),Bp=Da(qd,_d,(e,t)=>{if(t&&"number"===t.type){var n=1/0,r=Array.from(Qd(e.map(e=>e.value))).sort((e,t)=>e-t),a=r[0],i=r[r.length-1];if(null==a||null==i)return 1/0;var o=i-a;if(0===o)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s],c=r[s+1];if(null!=l&&null!=c){var u=c-l;n=Math.min(n,u)}}return n/o}}),Up=Da(Bp,ji,e=>e.rootProps.barCategoryGap,Ii,(e,t,n,r,a)=>a,(e,t,n,r,a)=>{if(!fe(e))return 0;var i="vertical"===t?r.height:r.width;if("gap"===a)return e*i/2;if("no-gap"===a){var o=$(n,e*i),s=e*i/2;return s-o-(s-o)/i*o}return 0}),Wp=Da(Td,(e,t,n)=>{var r=Td(e,t);return null==r||"string"!==typeof r.padding?0:Up(e,"xAxis",t,n,r.padding)},(e,t)=>{var n,r;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"===typeof a?{left:t,right:t}:{left:(null!==(n=a.left)&&void 0!==n?n:0)+t,right:(null!==(r=a.right)&&void 0!==r?r:0)+t}}),Vp=Da(Cd,(e,t,n)=>{var r=Cd(e,t);return null==r||"string"!==typeof r.padding?0:Up(e,"yAxis",t,n,r.padding)},(e,t)=>{var n,r;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"===typeof a?{top:t,bottom:t}:{top:(null!==(n=a.top)&&void 0!==n?n:0)+t,bottom:(null!==(r=a.bottom)&&void 0!==r?r:0)+t}}),Gp=Da([Ii,Wp,Mi,_i,(e,t,n)=>n],(e,t,n,r,a)=>{var{padding:i}=r;return a?[i.left,n.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Hp=Da([Ii,ji,Vp,Mi,_i,(e,t,n)=>n],(e,t,n,r,a,i)=>{var{padding:o}=a;return i?[r.height-o.bottom,o.top]:"horizontal"===t?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Kp=(e,t,n,r)=>{var a;switch(t){case"xAxis":return Gp(e,n,r);case"yAxis":return Hp(e,n,r);case"zAxis":return null===(a=Od(e,n))||void 0===a?void 0:a.range;case"angleAxis":return sd(e);case"radiusAxis":return ld(e,n);default:return}},qp=Da([_d,Kp],Zh),Xp=Da([_d,Dp,jp,qp],Fp);Da([zd,cp,ud],(e,t,n)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>Xd(n,e)));function Yp(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Zp=(e,t)=>t,Qp=(e,t,n)=>n,Jp=Da(wi,Zp,Qp,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(Yp)),$p=Da(ki,Zp,Qp,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(Yp)),ef=(e,t)=>({width:e.width,height:t.height}),tf=Da(Ii,Td,ef),nf=Da(vi,Ii,Jp,Zp,Qp,(e,t,n,r,a)=>{var i,o={};return n.forEach(n=>{var s=ef(t,n);null==i&&(i=((e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}})(t,r,e));var l="top"===r&&!a||"bottom"===r&&a;o[n.id]=i-Number(l)*s.height,i+=(l?-1:1)*s.height}),o}),rf=Da(yi,Ii,$p,Zp,Qp,(e,t,n,r,a)=>{var i,o={};return n.forEach(n=>{var s=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,n);null==i&&(i=((e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}})(t,r,e));var l="left"===r&&!a||"right"===r&&a;o[n.id]=i-Number(l)*s.width,i+=(l?-1:1)*s.width}),o}),af=Da([Ii,Td,(e,t)=>{var n=Td(e,t);if(null!=n)return nf(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,r)=>{if(null!=t){var a=null===n||void 0===n?void 0:n[r];return null==a?{x:e.left,y:0}:{x:e.left,y:a}}}),of=Da([Ii,Cd,(e,t)=>{var n=Cd(e,t);if(null!=n)return rf(e,n.orientation,n.mirror)},(e,t)=>t],(e,t,n,r)=>{if(null!=t){var a=null===n||void 0===n?void 0:n[r];return null==a?{x:0,y:e.top}:{x:a,y:e.top}}}),sf=Da(Ii,Cd,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),lf=(e,t,n,r)=>{if(null!=n){var{allowDuplicatedCategory:a,type:i,dataKey:o}=n,s=ai(e,r),l=t.map(e=>e.value);return o&&s&&"category"===i&&a&&ee(l)?l:void 0}},cf=Da([ji,qd,_d,ud],lf),uf=(e,t,n,r)=>{if(null!=n&&null!=n.dataKey){var{type:a,scale:i}=n;return!ai(e,r)||"number"!==a&&"auto"===i?void 0:t.map(e=>e.value)}},hf=Da([ji,qd,Md,ud],uf),df=Da([ji,(e,t,n)=>{switch(t){case"xAxis":return Td(e,n);case"yAxis":return Cd(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Dp,Xp,cf,hf,Kp,Lp,ud],(e,t,n,r,a,i,o,s,l)=>{if(null!=t){var c=ai(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:a,isCategorical:c,niceTicks:s,range:o,realScaleType:n,scale:r}}}),pf=Da([ji,Md,Dp,Xp,Lp,Kp,cf,hf,ud],(e,t,n,r,a,i,o,s,l)=>{if(null!=t&&null!=r){var c=ai(e,l),{type:u,ticks:h,tickCount:d}=t,p="scaleBand"===n&&"function"===typeof r.bandwidth?r.bandwidth()/2:2,f="category"===u&&r.bandwidth?r.bandwidth()/p:0;f="angleAxis"===l&&null!=i&&i.length>=2?2*K(i[0]-i[1])*f:f;var m=h||a;return m?m.map((e,t)=>{var n=o?o.indexOf(e):e;return{index:t,coordinate:r(n)+f,value:e,offset:f}}).filter(e=>fe(e.coordinate)):c&&s?s.map((e,t)=>({coordinate:r(e)+f,value:e,index:t,offset:f})).filter(e=>fe(e.coordinate)):r.ticks?r.ticks(d).map(e=>({coordinate:r(e)+f,value:e,offset:f})):r.domain().map((e,t)=>({coordinate:r(e)+f,value:o?o[e]:e,index:t,offset:f}))}}),ff=Da([ji,Md,Xp,Kp,cf,hf,ud],(e,t,n,r,a,i,o)=>{if(null!=t&&null!=n&&null!=r&&r[0]!==r[1]){var s=ai(e,o),{tickCount:l}=t,c=0;return c="angleAxis"===o&&(null===r||void 0===r?void 0:r.length)>=2?2*K(r[0]-r[1])*c:c,s&&i?i.map((e,t)=>({coordinate:n(e)+c,value:e,index:t,offset:c})):n.ticks?n.ticks(l).map(e=>({coordinate:n(e)+c,value:e,offset:c})):n.domain().map((e,t)=>({coordinate:n(e)+c,value:a?a[e]:e,index:t,offset:c}))}}),mf=Da(_d,Xp,(e,t)=>{if(null!=e&&null!=t)return xd(xd({},e),{},{scale:t})}),gf=Da([_d,Dp,Mp,qp],Fp),yf=(Da((e,t,n)=>Od(e,n),gf,(e,t)=>{if(null!=e&&null!=t)return xd(xd({},e),{},{scale:t})}),Da([ji,wi,ki],(e,t,n)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),vf=e=>e.options.defaultTooltipEventType,bf=e=>e.options.validateTooltipEventTypes;function xf(e,t,n){if(null==e)return t;var r=e?"axis":"item";return null==n?t:n.includes(r)?r:t}function wf(e,t){return xf(t,vf(e),bf(e))}var kf=(e,t)=>{var n,r=Number(t);if(!q(r)&&null!=t)return r>=0?null===e||void 0===e||null===(n=e[r])||void 0===n?void 0:n.value:void 0};function Sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sf(Object(n),!0).forEach(function(t){Tf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Tf(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var If=(e,t,n,r)=>{if(null==t)return ta;var a=function(e,t,n){return"axis"===t?"click"===n?e.axisInteraction.click:e.axisInteraction.hover:"click"===n?e.itemInteraction.click:e.itemInteraction.hover}(e,t,n);if(null==a)return ta;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var i=!0===e.settings.active;if(null!=a.index){if(i)return Nf(Nf({},a),{},{active:!0})}else if(null!=r)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Nf(Nf({},ta),{},{coordinate:a.coordinate})};function Ef(e,t){var n=function(e){if("number"===typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}(e),r=t[0],a=t[1];if(void 0===n)return!1;var i=Math.min(r,a),o=Math.max(r,a);return n>=i&&n<=o}var Cf=(e,t,n,r)=>{var a=null===e||void 0===e?void 0:e.index;if(null==a)return null;var i=Number(a);if(!fe(i))return a;var o=1/0;t.length>0&&(o=t.length-1);var s=Math.max(0,Math.min(i,o)),l=t[s];return null==l||function(e,t,n){if(null==n||null==t)return!0;var r=ri(e,t);return null==r||!nh(n)||Ef(r,n)}(l,n,r)?String(s):null},Af=(e,t,n,r,a,i,o,s)=>{if(null!=i&&null!=s){var l=o[0],c=null==l?void 0:s(l.positions,i);if(null!=c)return c;var u=null===a||void 0===a?void 0:a[Number(i)];if(u)return"horizontal"===n?{x:u.coordinate,y:(r.top+t)/2}:{x:(r.left+e)/2,y:u.coordinate}}},Of=(e,t,n,r)=>{if("axis"===t)return e.tooltipItemPayloads;if(0===e.tooltipItemPayloads.length)return[];var a;if(null==(a="hover"===n?e.itemInteraction.hover.graphicalItemId:e.itemInteraction.click.graphicalItemId)&&null!=r){var i=e.tooltipItemPayloads[0];return null!=i?[i]:[]}return e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.graphicalItemId)===a})},_f=e=>e.options.tooltipPayloadSearcher,Mf=e=>e.tooltip;function Rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Df(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rf(Object(n),!0).forEach(function(t){Ff(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ff(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pf=(e,t,n,r,a,i,o)=>{if(null!=t&&null!=i){var{chartData:s,computedData:l,dataStartIndex:c,dataEndIndex:u}=n;return e.reduce((e,n)=>{var h,d,p,{dataDefinedOnItem:f,settings:m}=n,g=function(e,t){return null!=e?e:t}(f,s),y=Array.isArray(g)?$a(g,c,u):g,v=null!==(h=null===m||void 0===m?void 0:m.dataKey)&&void 0!==h?h:r,b=null===m||void 0===m?void 0:m.nameKey;(d=r&&Array.isArray(y)&&!Array.isArray(y[0])&&"axis"===o?ne(y,r,a):i(y,t,l,b),Array.isArray(d))?d.forEach(t=>{var n=Df(Df({},m),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(mi({tooltipEntrySettings:n,dataKey:t.dataKey,payload:t.payload,value:ri(t.payload,t.dataKey),name:t.name}))}):e.push(mi({tooltipEntrySettings:m,dataKey:v,payload:d,value:ri(d,v),name:null!==(p=ri(d,b))&&void 0!==p?p:null===m||void 0===m?void 0:m.name}));return e},[])}},Lf=Da([Jd,ji,Rd,Sh,yd],Rp),zf=Da([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),jf=Da([yd,vd],Dd),Bf=Da([zf,Jd,jf],Ld,{memoizeOptions:{resultEqualityCheck:gd}}),Uf=Da([Bf],e=>e.filter(fd)),Wf=Da([Bf],Wd,{memoizeOptions:{resultEqualityCheck:gd}}),Vf=Da([Wf,$u],Gd),Gf=Da([Uf,$u,Jd],pd),Hf=Da([Vf,Jd,Bf],Kd),Kf=Da([Jd],ip),qf=Da([Jd],e=>e.allowDataOverflow),Xf=Da([Kf,qf],ah),Yf=Da([Bf],e=>e.filter(fd)),Zf=Da([Gf,Yf,wh,kh],tp),Qf=Da([Zf,$u,yd,Xf],rp),Jf=Da([Bf],Bd),$f=Da([Vf,Jd,Jf,cp,yd],hp,{memoizeOptions:{resultEqualityCheck:md}}),em=Da([fp,yd,vd],mp),tm=Da([em,yd],wp),nm=Da([yp,yd,vd],mp),rm=Da([nm,yd],Sp),am=Da([bp,yd,vd],mp),im=Da([am,yd],Tp),om=Da([tm,im,rm],up),sm=Da([Jd,Kf,Xf,Qf,$f,om,ji,yd],Cp),lm=Da([Jd,ji,Vf,Hf,wh,yd,sm],_p),cm=Da([lm,Jd,Lf],Pp),um=Da([Jd,lm,cm,yd],zp),hm=e=>{var t=yd(e),n=vd(e);return Kp(e,t,n,!1)},dm=Da([Jd,hm],Zh),pm=Da([Jd,Lf,um,dm],Fp),fm=Da([ji,Hf,Jd,yd],lf),mm=Da([ji,Hf,Jd,yd],uf),gm=Da([ji,Jd,Lf,pm,hm,fm,mm,yd],(e,t,n,r,a,i,o,s)=>{if(t){var{type:l}=t,c=ai(e,s);if(r){var u="scaleBand"===n&&r.bandwidth?r.bandwidth()/2:2,h="category"===l&&r.bandwidth?r.bandwidth()/u:0;return h="angleAxis"===s&&null!=a&&(null===a||void 0===a?void 0:a.length)>=2?2*K(a[0]-a[1])*h:h,c&&o?o.map((e,t)=>({coordinate:r(e)+h,value:e,index:t,offset:h})):r.domain().map((e,t)=>({coordinate:r(e)+h,value:i?i[e]:e,index:t,offset:h}))}}}),ym=Da([vf,bf,e=>e.tooltip.settings],(e,t,n)=>xf(n.shared,e,t)),vm=e=>e.tooltip.settings.trigger,bm=e=>e.tooltip.settings.defaultIndex,xm=Da([Mf,ym,vm,bm],If),wm=Da([xm,Vf,$d,lm],Cf),km=Da([gm,wm],kf),Sm=Da([xm],e=>{if(e)return e.dataKey}),Nm=(Da([xm],e=>{if(e)return e.graphicalItemId}),Da([Mf,ym,vm,bm],Of)),Tm=Da([yi,vi,ji,Ii,gm,bm,Nm,_f],Af),Im=Da([xm,Tm],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),Em=Da([xm],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.active)&&void 0!==t&&t}),Cm=Da([Nm,wm,$u,$d,km,_f,ym],Pf),Am=Da([Cm],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function Om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Om(Object(n),!0).forEach(function(t){Mm(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Om(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mm(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rm=(e,t,n,r,a)=>{var i,o=null!==(i=null===t||void 0===t?void 0:t.length)&&void 0!==i?i:0;if(o<=1||null==e)return 0;if("angleAxis"===r&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var s=0;s<o;s++){var l,c,u,h,d,p=s>0?null===(l=n[s-1])||void 0===l?void 0:l.coordinate:null===(c=n[o-1])||void 0===c?void 0:c.coordinate,f=null===(u=n[s])||void 0===u?void 0:u.coordinate,m=s>=o-1?null===(h=n[0])||void 0===h?void 0:h.coordinate:null===(d=n[s+1])||void 0===d?void 0:d.coordinate,g=void 0;if(null!=p&&null!=f&&null!=m)if(K(f-p)!==K(m-f)){var y=[];if(K(m-f)===K(a[1]-a[0])){g=m;var v=f+a[1]-a[0];y[0]=Math.min(v,(v+p)/2),y[1]=Math.max(v,(v+p)/2)}else{g=p;var b=m+a[1]-a[0];y[0]=Math.min(f,(b+f)/2),y[1]=Math.max(f,(b+f)/2)}var x,w=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>w[0]&&e<=w[1]||e>=y[0]&&e<=y[1])return null===(x=n[s])||void 0===x?void 0:x.index}else{var k,S=Math.min(p,m),N=Math.max(p,m);if(e>(S+f)/2&&e<=(N+f)/2)return null===(k=n[s])||void 0===k?void 0:k.index}}else if(t)for(var T=0;T<o;T++){var I=t[T];if(null!=I){var E=t[T+1],C=t[T-1];if(0===T&&null!=E&&e<=(I.coordinate+E.coordinate)/2)return I.index;if(T===o-1&&null!=C&&e>(I.coordinate+C.coordinate)/2)return I.index;if(T>0&&T<o-1&&null!=C&&null!=E&&e>(I.coordinate+C.coordinate)/2&&e<=(I.coordinate+E.coordinate)/2)return I.index}}return-1},Dm=()=>Va(Sh),Fm=(e,t)=>t,Pm=(e,t,n)=>n,Lm=(e,t,n,r)=>r,zm=Da(gm,e=>Ha()(e,e=>e.coordinate)),jm=Da([Mf,Fm,Pm,Lm],If),Bm=Da([jm,Vf,$d,lm],Cf),Um=Da([Mf,Fm,Pm,Lm],Of),Wm=Da([yi,vi,ji,Ii,gm,Lm,Um,_f],Af),Vm=Da([jm,Wm],(e,t)=>{var n;return null!==(n=e.coordinate)&&void 0!==n?n:t}),Gm=Da([gm,Bm],kf),Hm=Da([Um,Bm,$u,$d,Gm,_f,Fm],Pf),Km=Da([jm,Bm],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),qm=(e,t,n,r,a,i,o)=>{if(e&&r&&a&&i&&n){var s=Fh(e,n);if(s){var l=((e,t)=>"centric"===t?e.angle:e.radius)(s,t),c=Rm(l,o,i,r,a),u=((e,t,n,r)=>{var a=t.find(e=>e&&e.index===n);if(a){if("centric"===e){var i=a.coordinate,{radius:o}=r;return _m(_m(_m({},r),Mh(r.cx,r.cy,o,i)),{},{angle:i,radius:o})}var s=a.coordinate,{angle:l}=r;return _m(_m(_m({},r),Mh(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,i,c,s);return{activeIndex:String(c),activeCoordinate:u}}}},Xm=Da([(e,t)=>t,ji,cd,yd,dm,gm,zm,Ii],(e,t,n,r,a,i,o,s)=>{if(e&&t&&r&&a&&i)return"horizontal"===t||"vertical"===t?((e,t,n,r,a,i,o)=>{if(e&&n&&r&&a&&function(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}(e,o)){var s=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),l=Rm(s,i,a,n,r),c=((e,t,n,r)=>{var a=t.find(e=>e&&e.index===n);if(a){if("horizontal"===e)return{x:a.coordinate,y:r.chartY};if("vertical"===e)return{x:r.chartX,y:a.coordinate}}return{x:0,y:0}})(t,a,l,e);return{activeIndex:String(l),activeCoordinate:c}}})(e,t,r,a,i,o,s):qm(e,t,n,r,a,i,o)}),Ym=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},Zm=$t("mouseClick"),Qm=qn();Qm.startListening({actionCreator:Zm,effect:(e,t)=>{var n=e.payload,r=Xm(t.getState(),Ym(n));null!=(null===r||void 0===r?void 0:r.activeIndex)&&t.dispatch(da({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Jm=$t("mouseMove"),$m=qn(),eg=null;function tg(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":"children"===e&&"object"===typeof t&&null!==t?"<<CHILDREN>>":t}function ng(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ng(Object(n),!0).forEach(function(t){ag(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ng(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ag(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$m.startListening({actionCreator:Jm,effect:(e,t)=>{var n=e.payload;null!==eg&&cancelAnimationFrame(eg);var r=Ym(n);eg=requestAnimationFrame(()=>{var e=t.getState();if("axis"===wf(e,e.tooltip.settings.shared)){var n=Xm(e,r);null!=(null===n||void 0===n?void 0:n.activeIndex)?t.dispatch(ha({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate})):t.dispatch(ca())}eg=null})}});var ig=mn({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:an()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;void 0!==e.xAxis[n.id]&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:an()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:an()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:an()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;void 0!==e.yAxis[n.id]&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:an()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:an()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:an()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;void 0!==e.zAxis[n.id]&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:an()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:an()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,a=e.yAxis[n];if(a){var i=a.widthHistory||[];if(3===i.length&&i[0]===i[2]&&r===i[1]&&r!==a.width&&Math.abs(r-i[0])<=1)return;var o=[...i,r].slice(-3);e.yAxis[n]=rg(rg({},e.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:og,replaceXAxis:sg,removeXAxis:lg,addYAxis:cg,replaceYAxis:ug,removeYAxis:hg,addZAxis:dg,replaceZAxis:pg,removeZAxis:fg,updateYAxisWidth:mg}=ig.actions,gg=ig.reducer,yg=mn({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:an()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,a=Ft(e).cartesianItems.indexOf(n);a>-1&&(e.cartesianItems[a]=r)},prepare:an()},removeCartesianGraphicalItem:{reducer(e,t){var n=Ft(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:an()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:an()},removePolarGraphicalItem:{reducer(e,t){var n=Ft(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:an()}}}),{addCartesianGraphicalItem:vg,replaceCartesianGraphicalItem:bg,removeCartesianGraphicalItem:xg,addPolarGraphicalItem:wg,removePolarGraphicalItem:kg}=yg.actions,Sg=yg.reducer,Ng=mn({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ft(e).dots.findIndex(e=>e===t.payload);-1!==n&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ft(e).areas.findIndex(e=>e===t.payload);-1!==n&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ft(e).lines.findIndex(e=>e===t.payload);-1!==n&&e.lines.splice(n,1)}}}),{addDot:Tg,removeDot:Ig,addArea:Eg,removeArea:Cg,addLine:Ag,removeLine:Og}=Ng.actions,_g=Ng.reducer,Mg={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Rg=mn({name:"brush",initialState:Mg,reducers:{setBrushSettings:(e,t)=>null==t.payload?Mg:t.payload}}),{setBrushSettings:Dg}=Rg.actions,Fg=Rg.reducer,Pg=mn({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:an()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,a=Ft(e).payload.indexOf(n);a>-1&&(e.payload[a]=r)},prepare:an()},removeLegendPayload:{reducer(e,t){var n=Ft(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:an()}}}),{setLegendSize:Lg,setLegendSettings:zg,addLegendPayload:jg,replaceLegendPayload:Bg,removeLegendPayload:Ug}=Pg.actions,Wg=Pg.reducer,Vg={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Gg=mn({name:"rootProps",initialState:Vg,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:Vg.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Hg=Gg.reducer,{updateOptions:Kg}=Gg.actions,qg=mn({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Xg,removeRadiusAxis:Yg,addAngleAxis:Zg,removeAngleAxis:Qg}=qg.actions,Jg=qg.reducer,$g=mn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:ey}=$g.actions,ty=$g.reducer,ny=$t("keyDown"),ry=$t("focus"),ay=qn();ay.startListening({actionCreator:ny,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var i=Cf(r,Vf(n),$d(n),lm(n)),o=null==i?-1:Number(i);if(Number.isFinite(o)&&!(o<0)){var s=gm(n);if("Enter"!==a){var l=o+("ArrowRight"===a?1:-1)*("left-to-right"===yf(n)?1:-1);if(!(null==s||l>=s.length||l<0)){var c=Wm(n,"axis","hover",String(l));t.dispatch(fa({active:!0,activeIndex:l.toString(),activeCoordinate:c}))}}else{var u=Wm(n,"axis","hover",String(r.index));t.dispatch(fa({active:!r.active,activeIndex:r.index,activeCoordinate:u}))}}}}}}),ay.startListening({actionCreator:ry,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&null==r.index){var a=Wm(n,"axis","hover",String("0"));t.dispatch(fa({active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var iy=$t("externalEvent"),oy=qn(),sy=new Map;oy.startListening({actionCreator:iy,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(null!=n){r.persist();var a=r.type,i=sy.get(a);void 0!==i&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var e=t.getState(),i={activeCoordinate:Im(e),activeDataKey:Sm(e),activeIndex:wm(e),activeLabel:km(e),activeTooltipIndex:wm(e),isTooltipActive:Em(e)};n(i,r)}finally{sy.delete(a)}});sy.set(a,o)}}});var ly=Da([Mf],e=>e.tooltipItemPayloads),cy=Da([ly,_f,(e,t)=>t,(e,t,n)=>n],(e,t,n,r)=>{var a=e.find(e=>e.settings.graphicalItemId===r);if(null!=a){var{positions:i}=a;if(null!=i)return t(i,n)}}),uy=$t("touchMove"),hy=qn();hy.startListening({actionCreator:uy,effect:(e,t)=>{var n=e.payload;if(null!=n.touches&&0!==n.touches.length){var r=t.getState(),a=wf(r,r.tooltip.settings.shared);if("axis"===a){var i=n.touches[0];if(null==i)return;var o=Xm(r,Ym({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));null!=(null===o||void 0===o?void 0:o.activeIndex)&&t.dispatch(ha({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if("item"===a){var s,l=n.touches[0];if(null==document.elementFromPoint||null==l)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute("data-recharts-item-index"),h=null!==(s=c.getAttribute("data-recharts-item-id"))&&void 0!==s?s:void 0,d=Bf(r).find(e=>e.id===h);if(null==u||null==d||null==h)return;var{dataKey:p}=d,f=cy(r,u,h);t.dispatch(sa({activeDataKey:p,activeIndex:u,activeCoordinate:f,activeGraphicalItemId:h}))}}}});var dy=mn({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:a}=t.payload;e[n]&&(e[n]=e[n].map(e=>e.dataKey===r.dataKey&&e.direction===r.direction?a:e))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(e=>e.dataKey!==r.dataKey||e.direction!==r.direction))}}}),{addErrorBar:py,replaceErrorBar:fy,removeErrorBar:my}=dy.actions,gy=dy.reducer,yy=!0,vy=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function by(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?by(Object(n),!0).forEach(function(t){wy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):by(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wy(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ky={zIndexMap:Object.values(Ph).reduce((e,t)=>xy(xy({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),{})},Sy=new Set(Object.values(Ph));var Ny=mn({name:"zIndex",initialState:ky,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:an()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!function(e){return Sy.has(e)}(n)&&delete e.zIndexMap[n])},prepare:an()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:r,isPanorama:a}=t.payload;e.zIndexMap[n]?a?e.zIndexMap[n].panoramaElement=r:e.zIndexMap[n].element=r:e.zIndexMap[n]={consumers:0,element:a?void 0:r,panoramaElement:a?r:void 0}},prepare:an()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:an()}}}),{registerZIndexPortal:Ty,unregisterZIndexPortal:Iy,registerZIndexPortalElement:Ey,unregisterZIndexPortalElement:Cy}=Ny.actions,Ay=Ht({brush:Fg,cartesianAxis:gg,chartData:xa,errorBars:gy,graphicalItems:Sg,layout:Ia,legend:Wg,options:Qn,polarAxis:Jg,polarOptions:ty,referenceElements:_g,rootProps:Hg,tooltip:ma,zIndex:Ny.reducer});function Oy(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,a=Oi(),i=(0,C.useRef)(null);if(a)return n;null==i.current&&(i.current=function(e){return ln({reducer:Ay,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([Qm.middleware,$m.middleware,ay.middleware,oy.middleware,hy.middleware]),enhancers:e=>{var t=e;return"function"===typeof e&&(t=e()),t.concat(sn({type:"raf"}))},devTools:yy&&{serialize:{replacer:tg},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,r));var o=La;return C.createElement(hr,{context:o,store:i.current},n)}var _y=e=>{var{chartData:t}=e,n=ja(),r=Oi();return(0,C.useEffect)(()=>r?()=>{}:(n(ya(t)),()=>{n(ya(void 0))}),[t,n,r]),null},My=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Ry(e,t){return null==e&&null==t||("number"===typeof e&&"number"===typeof t?e===t||e!==e&&t!==t:e===t)}function Dy(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(My.has(r)){if(null==e[r]&&null==t[r])continue;if(!or(e[r],t[r]))return!1}else if(!Ry(e[r],t[r]))return!1;return!0}function Fy(e){var{layout:t,margin:n}=e,r=ja(),a=Oi();return(0,C.useEffect)(()=>{a||(r(Sa(t)),r(ka(n)))},[r,a,t,n]),null}var Py=(0,C.memo)(Fy,Dy);function Ly(e){var t=ja();return(0,C.useEffect)(()=>{t(Kg(e))},[t,e]),null}var zy=()=>{var e;return null===(e=Va(e=>e.rootProps.accessibilityLayer))||void 0===e||e},jy=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function By(e){return"string"===typeof e&&jy.includes(e)}var Uy=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function Wy(e){return"string"===typeof e&&Uy.has(e)}function Vy(e){return"string"===typeof e&&e.startsWith("data-")}function Gy(e){if("object"!==typeof e||null===e)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Wy(n)||Vy(n))&&(t[n]=e[n]);return t}function Hy(e){return null==e?null:(0,C.isValidElement)(e)&&"object"===typeof e.props&&null!==e.props?Gy(e.props):"object"!==typeof e||Array.isArray(e)?null:Gy(e)}function Ky(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Wy(n)||Vy(n)||By(n))&&(t[n]=e[n]);return t}var qy=["children","width","height","viewBox","className","style","title","desc"];function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(null,arguments)}var Yy=(0,C.forwardRef)((e,t)=>{var{children:n,width:r,height:a,viewBox:i,className:o,style:s,title:l,desc:c}=e,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,qy),h=i||{width:r,height:a,x:0,y:0},d=j("recharts-surface",o);return C.createElement("svg",Xy({},Ky(u),{className:d,width:r,height:a,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),C.createElement("title",null,l),C.createElement("desc",null,c),n)}),Zy=Da(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(null!=t){var r=e[t];if(null!=r)return n?r.panoramaElement:r.element}}),Qy=Da(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(Ph));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}}});function Jy(e){var{zIndex:t,isPanorama:n}=e,r=(0,C.useRef)(null),a=ja();return(0,C.useLayoutEffect)(()=>(r.current&&a(Ey({zIndex:t,element:r.current,isPanorama:n})),()=>{a(Cy({zIndex:t,isPanorama:n}))}),[a,t,n]),C.createElement("g",{tabIndex:-1,ref:r})}function $y(e){var{children:t,isPanorama:n}=e,r=Va(Qy);if(!r||0===r.length)return t;var a=r.filter(e=>e<0),i=r.filter(e=>e>0);return C.createElement(C.Fragment,null,a.map(e=>C.createElement(Jy,{key:e,zIndex:e,isPanorama:n})),t,i.map(e=>C.createElement(Jy,{key:e,zIndex:e,isPanorama:n})))}var ev=["children"];function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(null,arguments)}var nv={width:"100%",height:"100%",display:"block"},rv=(0,C.forwardRef)((e,t)=>{var n=Li(),r=zi(),a=zy();if(!me(n)||!me(r))return null;var i,o,{children:s,otherAttributes:l,title:c,desc:u}=e;return null!=l&&(i="number"===typeof l.tabIndex?l.tabIndex:a?0:void 0,o="string"===typeof l.role?l.role:a?"application":void 0),C.createElement(Yy,tv({},l,{title:c,desc:u,role:o,tabIndex:i,width:n,height:r,style:nv,ref:t}),s)}),av=e=>{var{children:t}=e,n=Va(Mi);if(!n)return null;var{width:r,height:a,y:i,x:o}=n;return C.createElement(Yy,{width:r,height:a,x:o,y:i},t)},iv=(0,C.forwardRef)((e,t)=>{var{children:n}=e,r=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ev);return Oi()?C.createElement(av,null,C.createElement($y,{isPanorama:!0},n)):C.createElement(rv,tv({ref:t},r),C.createElement($y,{isPanorama:!1},n))});var ov=new(n(8499)),sv="recharts.syncEvent.tooltip",lv="recharts.syncEvent.brush";function cv(e){return e.tooltip.syncInteraction}var uv=["x","y"];function hv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hv(Object(n),!0).forEach(function(t){pv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fv(){var e=Va(Nh),t=Va(Ih),n=ja(),r=Va(Th),a=Va(gm),i=Bi(),o=Di(),s=Va(e=>e.rootProps.className);(0,C.useEffect)(()=>{if(null==e)return oe;var s=(s,l,c)=>{var u;if(t!==c&&e===s)if("index"!==r){if(null!=a){var h;if("function"===typeof r){var d={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},p=r(a,d);h=a[p]}else"value"===r&&(h=a.find(e=>String(e.value)===l.payload.label));var{coordinate:f}=l.payload;if(null!=h&&!1!==l.payload.active&&null!=f&&null!=o){var{x:m,y:g}=f,y=Math.min(m,o.x+o.width),v=Math.min(g,o.y+o.height),b={x:"horizontal"===i?h.coordinate:y,y:"horizontal"===i?v:h.coordinate},x=pa({active:l.payload.active,coordinate:b,dataKey:l.payload.dataKey,index:String(h.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox,graphicalItemId:l.payload.graphicalItemId});n(x)}else n(pa({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}))}}else if(o&&null!==l&&void 0!==l&&null!==(u=l.payload)&&void 0!==u&&u.coordinate&&l.payload.sourceViewBox){var w=l.payload.coordinate,{x:k,y:S}=w,N=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(w,uv),{x:T,y:I,width:E,height:C}=l.payload.sourceViewBox,A=dv(dv({},N),{},{x:o.x+(E?(k-T)/E:0)*o.width,y:o.y+(C?(S-I)/C:0)*o.height});n(dv(dv({},l),{},{payload:dv(dv({},l.payload),{},{coordinate:A})}))}else n(l)};return ov.on(sv,s),()=>{ov.off(sv,s)}},[s,n,t,e,r,a,i,o])}function mv(){var e=ja();(0,C.useEffect)(()=>{e(Jn())},[e]),fv(),function(){var e=Va(Nh),t=Va(Ih),n=ja();(0,C.useEffect)(()=>{if(null==e)return oe;var r=(r,a,i)=>{t!==i&&e===r&&n(va(a))};return ov.on(lv,r),()=>{ov.off(lv,r)}},[n,t,e])}()}function gv(e,t,n,r,a,i){var o=Va(n=>((e,t,n)=>{if(null!=t){var r=Mf(e);return"axis"===t?"hover"===n?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:"hover"===n?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}})(n,e,t)),s=Va(Ih),l=Va(Nh),c=Va(Th),u=Va(cv),h=null===u||void 0===u?void 0:u.active,d=Di();(0,C.useEffect)(()=>{if(!h&&null!=l&&null!=s){var e=pa({active:i,coordinate:n,dataKey:o,index:a,label:"number"===typeof r?String(r):r,sourceViewBox:d,graphicalItemId:void 0});ov.emit(sv,l,e,s)}},[h,n,o,a,r,s,l,c,i,d])}var yv=(0,C.createContext)(null),vv=(0,C.createContext)(null);function bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bv(Object(n),!0).forEach(function(t){wv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kv.apply(null,arguments)}var Sv=()=>(mv(),null);function Nv(e){if("number"===typeof e)return e;if("string"===typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Tv=(0,C.forwardRef)((e,t)=>{var n,r,a=(0,C.useRef)(null),[i,o]=(0,C.useState)({containerWidth:Nv(null===(n=e.style)||void 0===n?void 0:n.width),containerHeight:Nv(null===(r=e.style)||void 0===r?void 0:r.height)}),s=(0,C.useCallback)((e,t)=>{o(n=>{var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}})},[]),l=(0,C.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e&&"undefined"!==typeof ResizeObserver){var{width:n,height:r}=e.getBoundingClientRect();s(n,r);var i=new ResizeObserver(e=>{var{width:t,height:n}=e[0].contentRect;s(t,n)});i.observe(e),a.current=i}},[t,s]);return(0,C.useEffect)(()=>()=>{var e=a.current;null!=e&&e.disconnect()},[s]),C.createElement(C.Fragment,null,C.createElement(Ui,{width:i.containerWidth,height:i.containerHeight}),C.createElement("div",kv({ref:l},e)))}),Iv=(0,C.forwardRef)((e,t)=>{var{width:n,height:r}=e,[a,i]=(0,C.useState)({containerWidth:Nv(n),containerHeight:Nv(r)}),o=(0,C.useCallback)((e,t)=>{i(n=>{var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}})},[]),s=(0,C.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e){var{width:n,height:r}=e.getBoundingClientRect();o(n,r)}},[t,o]);return C.createElement(C.Fragment,null,C.createElement(Ui,{width:a.containerWidth,height:a.containerHeight}),C.createElement("div",kv({ref:s},e)))}),Ev=(0,C.forwardRef)((e,t)=>{var{width:n,height:r}=e;return C.createElement(C.Fragment,null,C.createElement(Ui,{width:n,height:r}),C.createElement("div",kv({ref:t},e)))}),Cv=(0,C.forwardRef)((e,t)=>{var{width:n,height:r}=e;return X(n)||X(r)?C.createElement(Iv,kv({},e,{ref:t})):C.createElement(Ev,kv({},e,{ref:t}))});var Av=(0,C.forwardRef)((e,t)=>{var{children:n,className:r,height:a,onClick:i,onContextMenu:o,onDoubleClick:s,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:h,onMouseUp:d,onTouchEnd:p,onTouchMove:f,onTouchStart:m,style:g,width:y,responsive:v,dispatchTouchEvents:b=!0}=e,x=(0,C.useRef)(null),w=ja(),[k,S]=(0,C.useState)(null),[N,T]=(0,C.useState)(null),I=function(){var e=ja(),[t,n]=(0,C.useState)(null),r=Va(bi);return(0,C.useEffect)(()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;fe(n)&&n!==r&&e(Ta(n))}},[t,e,r]),n}(),E=ke(),A=(null===E||void 0===E?void 0:E.width)>0?E.width:y,O=(null===E||void 0===E?void 0:E.height)>0?E.height:a,_=(0,C.useCallback)(e=>{I(e),"function"===typeof t&&t(e),S(e),T(e),null!=e&&(x.current=e)},[I,t,S,T]),M=(0,C.useCallback)(e=>{w(Zm(e)),w(iy({handler:i,reactEvent:e}))},[w,i]),R=(0,C.useCallback)(e=>{w(Jm(e)),w(iy({handler:c,reactEvent:e}))},[w,c]),D=(0,C.useCallback)(e=>{w(ca()),w(iy({handler:u,reactEvent:e}))},[w,u]),F=(0,C.useCallback)(e=>{w(Jm(e)),w(iy({handler:h,reactEvent:e}))},[w,h]),P=(0,C.useCallback)(()=>{w(ry())},[w]),L=(0,C.useCallback)(e=>{w(ny(e.key))},[w]),z=(0,C.useCallback)(e=>{w(iy({handler:o,reactEvent:e}))},[w,o]),B=(0,C.useCallback)(e=>{w(iy({handler:s,reactEvent:e}))},[w,s]),U=(0,C.useCallback)(e=>{w(iy({handler:l,reactEvent:e}))},[w,l]),W=(0,C.useCallback)(e=>{w(iy({handler:d,reactEvent:e}))},[w,d]),V=(0,C.useCallback)(e=>{w(iy({handler:m,reactEvent:e}))},[w,m]),G=(0,C.useCallback)(e=>{b&&w(uy(e)),w(iy({handler:f,reactEvent:e}))},[w,b,f]),H=(0,C.useCallback)(e=>{w(iy({handler:p,reactEvent:e}))},[w,p]),K=function(e){return!0===e?Tv:Cv}(v);return C.createElement(yv.Provider,{value:k},C.createElement(vv.Provider,{value:N},C.createElement(K,{width:null!==A&&void 0!==A?A:null===g||void 0===g?void 0:g.width,height:null!==O&&void 0!==O?O:null===g||void 0===g?void 0:g.height,className:j("recharts-wrapper",r),style:xv({position:"relative",cursor:"default",width:A,height:O},g),onClick:M,onContextMenu:z,onDoubleClick:B,onFocus:P,onKeyDown:L,onMouseDown:U,onMouseEnter:R,onMouseLeave:D,onMouseMove:F,onMouseUp:W,onTouchEnd:H,onTouchMove:G,onTouchStart:V,ref:_},C.createElement(Sv,null),n)))}),Ov=Da([Ii],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),_v=Da([Ov,yi,vi],(e,t,n)=>{if(e&&null!=t&&null!=n)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),Mv=()=>Va(_v),Rv=(0,C.createContext)(void 0),Dv=e=>{var{children:t}=e,[n]=(0,C.useState)("".concat(J("recharts"),"-clip")),r=Mv();if(null==r)return null;var{x:a,y:i,width:o,height:s}=r;return C.createElement(Rv.Provider,{value:n},C.createElement("defs",null,C.createElement("clipPath",{id:n},C.createElement("rect",{x:a,y:i,height:s,width:o}))),t)},Fv=["width","height","responsive","children","className","style","compact","title","desc"];var Pv=(0,C.forwardRef)((e,t)=>{var{width:n,height:r,responsive:a,children:i,className:o,style:s,compact:l,title:c,desc:u}=e,h=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Fv),d=Gy(h);return l?C.createElement(C.Fragment,null,C.createElement(Ui,{width:n,height:r}),C.createElement(iv,{otherAttributes:d,title:c,desc:u},i)):C.createElement(Av,{className:o,style:s,width:n,height:r,responsive:null!==a&&void 0!==a&&a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},C.createElement(iv,{otherAttributes:d,title:c,desc:u,ref:t},C.createElement(Dv,null,i)))});function Lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jv(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lv(Object(n),!0).forEach(function(t){zv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),r=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==r[t]&&(e[t]=r[t]),e),n)}function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bv.apply(null,arguments)}var Uv={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Wv=(0,C.forwardRef)(function(e,t){var n,r=jv(e.categoricalChartProps,Uv),{chartName:a,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:s,categoricalChartProps:l}=e,c={chartName:a,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:s,eventEmitter:void 0};return C.createElement(Oy,{preloadedState:{options:c},reduxStoreName:null!==(n=l.id)&&void 0!==n?n:a},C.createElement(_y,{chartData:l.data}),C.createElement(Py,{layout:r.layout,margin:r.margin}),C.createElement(Ly,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),C.createElement(Pv,Bv({},r,{ref:t})))}),Vv=["axis"],Gv=(0,C.forwardRef)((e,t)=>C.createElement(Wv,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Vv,tooltipPayloadSearcher:Yn,categoricalChartProps:e,ref:t}));function Hv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kv(Object(n),!0).forEach(function(t){Xv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yv=qv({},{cacheSize:2e3,enableCache:!0}),Zv=new class{constructor(e){Hv(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;null!=n&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(Yv.cacheSize),Qv={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Jv="recharts_measurement_span";var $v=(e,t)=>{try{var n=document.getElementById(Jv);n||((n=document.createElement("span")).setAttribute("id",Jv),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Qv,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch(a){return{width:0,height:0}}},eb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||vy)return{width:0,height:0};if(!Yv.enableCache)return $v(e,t);var n=function(e,t){var n=t.fontSize||"",r=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",s=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(a,"|").concat(i,"|").concat(o,"|").concat(s)}(e,t),r=Zv.get(n);if(r)return r;var a=$v(e,t);return Zv.set(n,a),a};function tb(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class nb{static create(e){return new nb(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(t){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}tb(nb,"EPS",1e-4);function rb(e,t){if(t<1)return[];if(1===t)return e;for(var n=[],r=0;r<e.length;r+=t){var a=e[r];void 0!==a&&n.push(a)}return n}function ab(e,t,n){return function(e){var{width:t,height:n}=e,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=r*Math.PI/180,i=Math.atan(n/t),o=a>i&&a<Math.PI-i?n/Math.sin(a):t/Math.cos(a);return Math.abs(o)}({width:e.width+t.width,height:e.height+t.height},n)}function ib(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function ob(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ob(Object(n),!0).forEach(function(t){lb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ob(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lb(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cb(e,t,n){var r,{tick:a,ticks:i,viewBox:o,minTickGap:s,orientation:l,interval:c,tickFormatter:u,unit:h,angle:d}=e;if(!i||!i.length||!a)return[];if(Y(c)||vy)return null!==(r=function(e,t){return rb(e,t+1)}(i,Y(c)?c:0))&&void 0!==r?r:[];var p=[],f="top"===l||"bottom"===l?"width":"height",m=h&&"width"===f?eb(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=(e,r)=>{var a="function"===typeof u?u(e.value,r):e.value;return"width"===f?ab(eb(a,{fontSize:t,letterSpacing:n}),m,d):eb(a,{fontSize:t,letterSpacing:n})[f]},y=i.length>=2?K(i[1].coordinate-i[0].coordinate):1,v=function(e,t,n){var r="width"===n,{x:a,y:i,width:o,height:s}=e;return 1===t?{start:r?a:i,end:r?a+o:i+s}:{start:r?a+o:i+s,end:r?a:i}}(o,y,f);return"equidistantPreserveStart"===c?function(e,t,n,r,a){for(var i,o=(r||[]).slice(),{start:s,end:l}=t,c=0,u=1,h=s,d=function(){var t=null===r||void 0===r?void 0:r[c];if(void 0===t)return{v:rb(r,u)};var i,o=c,d=()=>(void 0===i&&(i=n(t,o)),i),p=t.coordinate,f=0===c||ib(e,p,d,h,l);f||(c=0,h=s,u+=1),f&&(h=p+e*(d()/2+a),c+=u)};u<=o.length;)if(i=d())return i.v;return[]}(y,v,g,i,s):"equidistantPreserveEnd"===c?function(e,t,n,r,a){var i=(r||[]).slice().length;if(0===i)return[];for(var{start:o,end:s}=t,l=1;l<=i;l++){for(var c=(i-1)%l,u=o,h=!0,d=function(){var t,i=r[p],o=p,l=()=>(void 0===t&&(t=n(i,o)),t),d=i.coordinate,f=p===c||ib(e,d,l,u,s);if(!f)return h=!1,1;f&&(u=d+e*(l()/2+a))},p=c;p<i&&!d();p+=l);if(h){for(var f=[],m=c;m<i;m+=l)f.push(r[m]);return f}}return[]}(y,v,g,i,s):(p="preserveStart"===c||"preserveStartEnd"===c?function(e,t,n,r,a,i){var o=(r||[]).slice(),s=o.length,{start:l,end:c}=t;if(i){var u=r[s-1],h=n(u,s-1),d=e*(u.coordinate+e*h/2-c);o[s-1]=u=sb(sb({},u),{},{tickCoord:d>0?u.coordinate-d*e:u.coordinate}),null!=u.tickCoord&&ib(e,u.tickCoord,()=>h,l,c)&&(c=u.tickCoord-e*(h/2+a),o[s-1]=sb(sb({},u),{},{isShow:!0}))}for(var p=i?s-1:s,f=function(t){var r,i=o[t],s=()=>(void 0===r&&(r=n(i,t)),r);if(0===t){var u=e*(i.coordinate-e*s()/2-l);o[t]=i=sb(sb({},i),{},{tickCoord:u<0?i.coordinate-u*e:i.coordinate})}else o[t]=i=sb(sb({},i),{},{tickCoord:i.coordinate});null!=i.tickCoord&&ib(e,i.tickCoord,s,l,c)&&(l=i.tickCoord+e*(s()/2+a),o[t]=sb(sb({},i),{},{isShow:!0}))},m=0;m<p;m++)f(m);return o}(y,v,g,i,s,"preserveStartEnd"===c):function(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,{start:s}=t,{end:l}=t,c=function(t){var r,c=i[t],u=()=>(void 0===r&&(r=n(c,t)),r);if(t===o-1){var h=e*(c.coordinate+e*u()/2-l);i[t]=c=sb(sb({},c),{},{tickCoord:h>0?c.coordinate-h*e:c.coordinate})}else i[t]=c=sb(sb({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&ib(e,c.tickCoord,u,s,l)&&(l=c.tickCoord-e*(u()/2+a),i[t]=sb(sb({},c),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}(y,v,g,i,s),p.filter(e=>e.isShow))}var ub=["children","className"];function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hb.apply(null,arguments)}var db=C.forwardRef((e,t)=>{var{children:n,className:r}=e,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ub),i=j("recharts-layer",r);return C.createElement("g",hb({className:i},Ky(a),{ref:t}),n)});var pb=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fb=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mb=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gb=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,yb={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},vb=["cm","mm","pt","pc","in","Q","px"];var bb="NaN";class xb{static parse(e){var t,[,n,r]=null!==(t=gb.exec(e))&&void 0!==t?t:[];return null==n?xb.NaN:new xb(parseFloat(n),null!==r&&void 0!==r?r:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,q(e)&&(this.unit=""),""===t||mb.test(t)||(this.num=NaN,this.unit=""),function(e){return vb.includes(e)}(t)&&(this.num=function(e,t){return e*yb[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new xb(NaN,""):new xb(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new xb(NaN,""):new xb(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new xb(NaN,""):new xb(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new xb(NaN,""):new xb(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return q(this.num)}}function wb(e){if(null==e||e.includes(bb))return bb;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,a,i]=null!==(n=pb.exec(t))&&void 0!==n?n:[],o=xb.parse(null!==r&&void 0!==r?r:""),s=xb.parse(null!==i&&void 0!==i?i:""),l="*"===a?o.multiply(s):o.divide(s);if(l.isNaN())return bb;t=t.replace(pb,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,h,d]=null!==(c=fb.exec(t))&&void 0!==c?c:[],p=xb.parse(null!==u&&void 0!==u?u:""),f=xb.parse(null!==d&&void 0!==d?d:""),m="+"===h?p.add(f):p.subtract(f);if(m.isNaN())return bb;t=t.replace(fb,m.toString())}return t}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xb,"NaN",new xb(NaN,""));var kb=/\(([^()]*)\)/;function Sb(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,n=e;null!=(t=kb.exec(n));){var[,r]=t;n=n.replace(kb,wb(r))}return n}(t),t=wb(t)}function Nb(e){var t=function(e){try{return Sb(e)}catch(t){return bb}}(e.slice(5,-1));return t===bb?"":t}var Tb=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Ib=["dx","dy","angle","className","breakAll"];function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eb.apply(null,arguments)}function Cb(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ab=/[ \f\n\r\t\v\u2028\u2029]+/,Ob=e=>{var{children:t,breakAll:n,style:r}=e;try{var a=[];return re(t)||(a=n?t.toString().split(""):t.toString().split(Ab)),{wordsWithComputedWidth:a.map(e=>({word:e,width:eb(e,r).width})),spaceWidth:n?0:eb("\xa0",r).width}}catch(i){return null}};function _b(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var Mb=(e,t,n,r)=>e.reduce((e,a)=>{var{word:i,width:o}=a,s=e[e.length-1];if(s&&null!=o&&(null==t||r||s.width+o+n<Number(t)))s.words.push(i),s.width+=o+n;else{var l={words:[i],width:o};e.push(l)}return e},[]),Rb=e=>e.reduce((e,t)=>e.width>t.width?e:t),Db=(e,t,n,r,a,i,o,s)=>{var l=e.slice(0,t),c=Ob({breakAll:n,style:r,children:l+"\u2026"});if(!c)return[!1,[]];var u=Mb(c.wordsWithComputedWidth,i,o,s);return[u.length>a||Rb(u).width>Number(i),u]},Fb=e=>[{words:re(e)?[]:e.toString().split(Ab),width:void 0}],Pb=e=>{var{width:t,scaleToFit:n,children:r,style:a,breakAll:i,maxLines:o}=e;if((t||n)&&!vy){var s=Ob({breakAll:i,children:r,style:a});if(!s)return Fb(r);var{wordsWithComputedWidth:l,spaceWidth:c}=s;return((e,t,n,r,a)=>{var{maxLines:i,children:o,style:s,breakAll:l}=e,c=Y(i),u=String(o),h=Mb(t,r,n,a);if(!c||a)return h;if(!(h.length>i||Rb(h).width>Number(r)))return h;for(var d,p=0,f=u.length-1,m=0;p<=f&&m<=u.length-1;){var g=Math.floor((p+f)/2),y=g-1,[v,b]=Db(u,y,l,s,i,r,n,a),[x]=Db(u,g,l,s,i,r,n,a);if(v||x||(p=g+1),v&&x&&(f=g-1),!v&&x){d=b;break}m++}return d||h})({breakAll:i,children:r,maxLines:o,style:a},l,c,t,Boolean(n))}return Fb(r)},Lb="#808080",zb={angle:0,breakAll:!1,capHeight:"0.71em",fill:Lb,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},jb=(0,C.forwardRef)((e,t)=>{var n=jv(e,zb),{x:r,y:a,lineHeight:i,capHeight:o,fill:s,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,h=Cb(n,Tb),d=(0,C.useMemo)(()=>Pb({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:p,dy:f,angle:m,className:g,breakAll:y}=h,v=Cb(h,Ib);if(!Z(r)||!Z(a)||0===d.length)return null;var b,x=Number(r)+(Y(p)?p:0),w=Number(a)+(Y(f)?f:0);if(!fe(x)||!fe(w))return null;switch(u){case"start":b=Nb("calc(".concat(o,")"));break;case"middle":b=Nb("calc(".concat((d.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:b=Nb("calc(".concat(d.length-1," * -").concat(i,")"))}var k=[];if(l){var S=d[0].width,{width:N}=h;k.push("scale(".concat(Y(N)&&Y(S)?N/S:1,")"))}return m&&k.push("rotate(".concat(m,", ").concat(x,", ").concat(w,")")),k.length&&(v.transform=k.join(" ")),C.createElement("text",Eb({},Ky(v),{ref:t,x:x,y:w,className:j("recharts-text",g),textAnchor:c,fill:s.includes("url")?Lb:s}),d.map((e,t)=>{var n=e.words.join(y?"":" ");return C.createElement("tspan",{x:x,dy:0===t?b:i,key:"".concat(n,"-").concat(t)},n)}))});jb.displayName="Text";var Bb=n(7950);function Ub(e){var{zIndex:t,children:n}=e,r=void 0!==Bi()&&void 0!==t&&0!==t,a=Oi(),i=ja();(0,C.useLayoutEffect)(()=>r?(i(Ty({zIndex:t})),()=>{i(Iy({zIndex:t}))}):oe,[i,t,r]);var o=Va(e=>Zy(e,t,a));return r?o?(0,Bb.createPortal)(n,o):null:n}var Wb=["labelRef"],Vb=["content"];function Gb(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Kb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hb(Object(n),!0).forEach(function(t){qb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qb(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xb(){return Xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xb.apply(null,arguments)}var Yb=(0,C.createContext)(null),Zb=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:a,width:i,height:o,children:s}=e,l=(0,C.useMemo)(()=>({x:t,y:n,upperWidth:r,lowerWidth:a,width:i,height:o}),[t,n,r,a,i,o]);return C.createElement(Yb.Provider,{value:l},s)},Qb=()=>{var e=(0,C.useContext)(Yb),t=Di();return e||Ri(t)},Jb=(0,C.createContext)(null),$b=()=>{var e=(0,C.useContext)(Jb),t=Va(cd);return e||t},ex=e=>null!=e&&"function"===typeof e,tx=(e,t,n,r,a)=>{var i,o,{offset:s,className:l}=e,{cx:c,cy:u,innerRadius:h,outerRadius:d,startAngle:p,endAngle:f,clockWise:m}=a,g=(h+d)/2,y=((e,t)=>K(t-e)*Math.min(Math.abs(t-e),360))(p,f),v=y>=0?1:-1;switch(t){case"insideStart":i=p+v*s,o=m;break;case"insideEnd":i=f-v*s,o=!m;break;case"end":i=f+v*s,o=m;break;default:throw new Error("Unsupported position ".concat(t))}o=y<=0?o:!o;var b=Mh(c,u,g,i),x=Mh(c,u,g,i+359*(o?1:-1)),w="M".concat(b.x,",").concat(b.y,"\n    A").concat(g,",").concat(g,",0,1,").concat(o?0:1,",\n    ").concat(x.x,",").concat(x.y),k=re(e.id)?J("recharts-radial-line-"):e.id;return C.createElement("text",Xb({},r,{dominantBaseline:"central",className:j("recharts-radial-bar-label",l)}),C.createElement("defs",null,C.createElement("path",{id:k,d:w})),C.createElement("textPath",{xlinkHref:"#".concat(k)},n))},nx=e=>"cx"in e&&Y(e.cx),rx={angle:0,offset:5,zIndex:Ph.label,position:"middle",textBreakAll:!1};function ax(e){var t,n,r,a=jv(e,rx),{viewBox:i,position:o,value:s,children:l,content:c,className:u="",textBreakAll:h,labelRef:d}=a,p=$b(),f=Qb();if(!(t=null==i?"center"===o?f:null!==p&&void 0!==p?p:f:nx(i)?i:Ri(i))||re(s)&&re(l)&&!(0,C.isValidElement)(c)&&"function"!==typeof c)return null;var m=Kb(Kb({},a),{},{viewBox:t});if((0,C.isValidElement)(c)){var{labelRef:g}=m,y=Gb(m,Wb);return(0,C.cloneElement)(c,y)}if("function"===typeof c){var{content:v}=m,b=Gb(m,Vb);if(n=(0,C.createElement)(c,b),(0,C.isValidElement)(n))return n}else n=(e=>{var{value:t,formatter:n}=e,r=re(e.children)?t:e.children;return"function"===typeof n?n(r):r})(a);var x=Ky(a);if(nx(t)){if("insideStart"===o||"insideEnd"===o||"end"===o)return tx(a,o,n,x,t);r=((e,t,n)=>{var{cx:r,cy:a,innerRadius:i,outerRadius:o,startAngle:s,endAngle:l}=e,c=(s+l)/2;if("outside"===n){var{x:u,y:h}=Mh(r,a,o+t,c);return{x:u,y:h,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:r,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:r,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:r,y:a,textAnchor:"middle",verticalAnchor:"end"};var d=(i+o)/2,{x:p,y:f}=Mh(r,a,d,c);return{x:p,y:f,textAnchor:"middle",verticalAnchor:"middle"}})(t,a.offset,a.position)}else r=((e,t)=>{var n,{parentViewBox:r,offset:a,position:i}=e;null==r||nx(r)||(n=r);var{x:o,y:s,upperWidth:l,lowerWidth:c,height:u}=t,h=o,d=o+(l-c)/2,p=(h+d)/2,f=(l+c)/2,m=h+l/2,g=u>=0?1:-1,y=g*a,v=g>0?"end":"start",b=g>0?"start":"end",x=l>=0?1:-1,w=x*a,k=x>0?"end":"start",S=x>0?"start":"end";if("top"===i)return Kb(Kb({},{x:h+l/2,y:s-y,textAnchor:"middle",verticalAnchor:v}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===i)return Kb(Kb({},{x:d+c/2,y:s+u+y,textAnchor:"middle",verticalAnchor:b}),n?{height:Math.max(n.y+n.height-(s+u),0),width:c}:{});if("left"===i){var N={x:p-w,y:s+u/2,textAnchor:k,verticalAnchor:"middle"};return Kb(Kb({},N),n?{width:Math.max(N.x-n.x,0),height:u}:{})}if("right"===i){var T={x:p+f+w,y:s+u/2,textAnchor:S,verticalAnchor:"middle"};return Kb(Kb({},T),n?{width:Math.max(n.x+n.width-T.x,0),height:u}:{})}var I=n?{width:f,height:u}:{};return"insideLeft"===i?Kb({x:p+w,y:s+u/2,textAnchor:S,verticalAnchor:"middle"},I):"insideRight"===i?Kb({x:p+f-w,y:s+u/2,textAnchor:k,verticalAnchor:"middle"},I):"insideTop"===i?Kb({x:h+l/2,y:s+y,textAnchor:"middle",verticalAnchor:b},I):"insideBottom"===i?Kb({x:d+c/2,y:s+u-y,textAnchor:"middle",verticalAnchor:v},I):"insideTopLeft"===i?Kb({x:h+w,y:s+y,textAnchor:S,verticalAnchor:b},I):"insideTopRight"===i?Kb({x:h+l-w,y:s+y,textAnchor:k,verticalAnchor:b},I):"insideBottomLeft"===i?Kb({x:d+w,y:s+u-y,textAnchor:S,verticalAnchor:v},I):"insideBottomRight"===i?Kb({x:d+c-w,y:s+u-y,textAnchor:k,verticalAnchor:v},I):i&&"object"===typeof i&&(Y(i.x)||X(i.x))&&(Y(i.y)||X(i.y))?Kb({x:o+$(i.x,f),y:s+$(i.y,u),textAnchor:"end",verticalAnchor:"end"},I):Kb({x:m,y:s+u/2,textAnchor:"middle",verticalAnchor:"middle"},I)})(a,t);return C.createElement(Ub,{zIndex:a.zIndex},C.createElement(jb,Xb({ref:d,className:j("recharts-label",u)},x,r,{textAnchor:_b(x.textAnchor)?x.textAnchor:r.textAnchor,breakAll:h}),n))}ax.displayName="Label";var ix=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return!0===e?C.createElement(ax,Xb({key:"label-implicit"},r)):Z(e)?C.createElement(ax,Xb({key:"label-implicit",value:e},r)):(0,C.isValidElement)(e)?e.type===ax?(0,C.cloneElement)(e,Kb({key:"label-implicit"},r)):C.createElement(ax,Xb({key:"label-implicit",content:e},r)):ex(e)?C.createElement(ax,Xb({key:"label-implicit",content:e},r)):e&&"object"===typeof e?C.createElement(ax,Xb({},e,{key:"label-implicit"},r)):null};function ox(e){var{label:t,labelRef:n}=e,r=Qb();return ix(t,r,n)||null}var sx=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,lx=(e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,C.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var r={};return Object.keys(n).forEach(e=>{By(e)&&(r[e]=t||(t=>n[e](n,t)))}),r},cx=["axisLine","width","height","className","hide","ticks","axisType"];function ux(){return ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ux.apply(null,arguments)}function hx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hx(Object(n),!0).forEach(function(t){px(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function px(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fx={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ph.axis};function mx(e){var{x:t,y:n,width:r,height:a,orientation:i,mirror:o,axisLine:s,otherSvgProps:l}=e;if(!s)return null;var c=dx(dx(dx({},l),Gy(s)),{},{fill:"none"});if("top"===i||"bottom"===i){var u=+("top"===i&&!o||"bottom"===i&&o);c=dx(dx({},c),{},{x1:t,y1:n+u*a,x2:t+r,y2:n+u*a})}else{var h=+("left"===i&&!o||"right"===i&&o);c=dx(dx({},c),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+a})}return C.createElement("line",ux({},c,{className:j("recharts-cartesian-axis-line",V()(s,"className"))}))}function gx(e){var t,{option:n,tickProps:r,value:a}=e,i=j(r.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(n))t=C.cloneElement(n,dx(dx({},r),{},{className:i}));else if("function"===typeof n)t=n(dx(dx({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";"boolean"!==typeof n&&(o=j(o,null===n||void 0===n?void 0:n.className)),t=C.createElement(jb,ux({},r,{className:o}),a)}return t}var yx=(0,C.forwardRef)((e,t)=>{var{ticks:n=[],tick:r,tickLine:a,stroke:i,tickFormatter:o,unit:s,padding:l,tickTextProps:c,orientation:u,mirror:h,x:d,y:p,width:f,height:m,tickSize:g,tickMargin:y,fontSize:v,letterSpacing:b,getTicksConfig:x,events:w,axisType:k}=e,S=cb(dx(dx({},x),{},{ticks:n}),v,b),N=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(u,h),T=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(u,h),I=Gy(x),E=Hy(r),A={};"object"===typeof a&&(A=a);var O=dx(dx({},I),{},{fill:"none"},A),_=S.map(e=>dx({entry:e},function(e,t,n,r,a,i,o,s,l){var c,u,h,d,p,f,m=s?-1:1,g=e.tickSize||o,y=Y(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":c=u=e.coordinate,f=(h=(d=n+ +!s*a)-m*g)-m*l,p=y;break;case"left":h=d=e.coordinate,p=(c=(u=t+ +!s*r)-m*g)-m*l,f=y;break;case"right":h=d=e.coordinate,p=(c=(u=t+ +s*r)+m*g)+m*l,f=y;break;default:c=u=e.coordinate,f=(h=(d=n+ +s*a)+m*g)+m*l,p=y}return{line:{x1:c,y1:h,x2:u,y2:d},tick:{x:p,y:f}}}(e,d,p,f,m,u,g,h,y))),M=_.map(e=>{var{entry:t,line:n}=e;return C.createElement(db,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},a&&C.createElement("line",ux({},O,n,{className:j("recharts-cartesian-axis-tick-line",V()(a,"className"))})))}),R=_.map((e,t)=>{var{entry:n,tick:a}=e,u=dx(dx(dx(dx({textAnchor:N,verticalAnchor:T},I),{},{stroke:"none",fill:i},E),a),{},{index:t,payload:n,visibleTicksCount:S.length,tickFormatter:o,padding:l},c);return C.createElement(db,ux({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(n.value,"-").concat(n.coordinate,"-").concat(n.tickCoord)},((e,t,n)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var r=null;return Object.keys(e).forEach(a=>{var i=e[a];By(a)&&"function"===typeof i&&(r||(r={}),r[a]=((e,t,n)=>r=>(e(t,n,r),null))(i,t,n))}),r})(w,n,t)),r&&C.createElement(gx,{option:r,tickProps:u,value:"".concat("function"===typeof o?o(n.value,t):n.value).concat(s||"")}))});return C.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(k,"-ticks")},R.length>0&&C.createElement(Ub,{zIndex:Ph.label},C.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(k,"-tick-labels"),ref:t},R)),M.length>0&&C.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(k,"-tick-lines")},M))}),vx=(0,C.forwardRef)((e,t)=>{var{axisLine:n,width:r,height:a,className:i,hide:o,ticks:s,axisType:l}=e,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,cx),[u,h]=(0,C.useState)(""),[d,p]=(0,C.useState)(""),f=(0,C.useRef)(null);(0,C.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>o&&(o=t.width)}});var s=n?n.getBoundingClientRect().width:0,l=o+(a+i)+s+(n?r:0);return Math.round(l)}return 0})({ticks:f.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var m=(0,C.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");f.current=t;var n=t[0];if(n){var r=window.getComputedStyle(n),a=r.fontSize,i=r.letterSpacing;a===u&&i===d||(h(a),p(i))}}},[u,d]);return o||null!=r&&r<=0||null!=a&&a<=0?null:C.createElement(Ub,{zIndex:e.zIndex},C.createElement(db,{className:j("recharts-cartesian-axis",i)},C.createElement(mx,{x:e.x,y:e.y,width:r,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Gy(e)}),C.createElement(yx,{ref:m,axisType:l,events:c,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:d,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:s,unit:e.unit,width:e.width,x:e.x,y:e.y}),C.createElement(Zb,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},C.createElement(ox,{label:e.label,labelRef:e.labelRef}),e.children)))}),bx=C.forwardRef((e,t)=>{var n=jv(e,fx);return C.createElement(vx,ux({},n,{ref:t}))});bx.displayName="CartesianAxis";var xx=["x1","y1","x2","y2","key"],wx=["offset"],kx=["xAxisId","yAxisId"],Sx=["xAxisId","yAxisId"];function Nx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nx(Object(n),!0).forEach(function(t){Ix(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ix(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ex.apply(null,arguments)}function Cx(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ax=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:n,x:r,y:a,width:i,height:o,ry:s}=e;return C.createElement("rect",{x:r,y:a,ry:s,width:i,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Ox(e){var t,{option:n,lineItemProps:r}=e;if(C.isValidElement(n))t=C.cloneElement(n,r);else if("function"===typeof n)t=n(r);else{var a,{x1:i,y1:o,x2:s,y2:l,key:c}=r,u=null!==(a=Gy(Cx(r,xx)))&&void 0!==a?a:{},{offset:h}=u,d=Cx(u,wx);t=C.createElement("line",Ex({},d,{x1:i,y1:o,x2:s,y2:l,fill:"none",key:c}))}return t}function _x(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:a}=e;if(!r||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,s=Cx(e,kx),l=a.map((e,a)=>{var i=Tx(Tx({},s),{},{x1:t,y1:e,x2:t+n,y2:e,key:"line-".concat(a),index:a});return C.createElement(Ox,{key:"line-".concat(a),option:r,lineItemProps:i})});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Mx(e){var{y:t,height:n,vertical:r=!0,verticalPoints:a}=e;if(!r||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,s=Cx(e,Sx),l=a.map((e,a)=>{var i=Tx(Tx({},s),{},{x1:e,y1:t,x2:e,y2:t+n,key:"line-".concat(a),index:a});return C.createElement(Ox,{option:r,lineItemProps:i,key:"line-".concat(a)})});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Rx(e){var{horizontalFill:t,fillOpacity:n,x:r,y:a,width:i,height:o,horizontalPoints:s,horizontal:l=!0}=e;if(!l||!t||!t.length||null==s)return null;var c=s.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var u=c.map((e,s)=>{var l=!c[s+1]?a+o-e:c[s+1]-e;if(l<=0)return null;var u=s%t.length;return C.createElement("rect",{key:"react-".concat(s),y:e,x:r,height:l,width:i,stroke:"none",fill:t[u],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function Dx(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:a,y:i,width:o,height:s,verticalPoints:l}=e;if(!t||!n||!n.length)return null;var c=l.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var u=c.map((e,t)=>{var l=!c[t+1]?a+o-e:c[t+1]-e;if(l<=0)return null;var u=t%n.length;return C.createElement("rect",{key:"react-".concat(t),x:e,y:i,width:l,height:s,stroke:"none",fill:n[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Fx=(e,t)=>{var{xAxis:n,width:r,height:a,offset:i}=e;return ii(cb(Tx(Tx(Tx({},fx),n),{},{ticks:oi(n,!0),viewBox:{x:0,y:0,width:r,height:a}})),i.left,i.left+i.width,t)},Px=(e,t)=>{var{yAxis:n,width:r,height:a,offset:i}=e;return ii(cb(Tx(Tx(Tx({},fx),n),{},{ticks:oi(n,!0),viewBox:{x:0,y:0,width:r,height:a}})),i.top,i.top+i.height,t)},Lx={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ph.grid};function zx(e){var t=Li(),n=zi(),r=Pi(),a=Tx(Tx({},jv(e,Lx)),{},{x:Y(e.x)?e.x:r.left,y:Y(e.y)?e.y:r.top,width:Y(e.width)?e.width:r.width,height:Y(e.height)?e.height:r.height}),{xAxisId:i,yAxisId:o,x:s,y:l,width:c,height:u,syncWithTicks:h,horizontalValues:d,verticalValues:p}=a,f=Oi(),m=Va(e=>df(e,"xAxis",i,f)),g=Va(e=>df(e,"yAxis",o,f));if(!me(c)||!me(u)||!Y(s)||!Y(l))return null;var y=a.verticalCoordinatesGenerator||Fx,v=a.horizontalCoordinatesGenerator||Px,{horizontalPoints:b,verticalPoints:x}=a;if((!b||!b.length)&&"function"===typeof v){var w=d&&d.length,k=v({yAxis:g?Tx(Tx({},g),{},{ticks:w?d:g.ticks}):void 0,width:null!==t&&void 0!==t?t:c,height:null!==n&&void 0!==n?n:u,offset:r},!!w||h);se(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(b=k)}if((!x||!x.length)&&"function"===typeof y){var S=p&&p.length,N=y({xAxis:m?Tx(Tx({},m),{},{ticks:S?p:m.ticks}):void 0,width:null!==t&&void 0!==t?t:c,height:null!==n&&void 0!==n?n:u,offset:r},!!S||h);se(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(x=N)}return C.createElement(Ub,{zIndex:a.zIndex},C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(Ax,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),C.createElement(Rx,Ex({},a,{horizontalPoints:b})),C.createElement(Dx,Ex({},a,{verticalPoints:x})),C.createElement(_x,Ex({},a,{offset:r,horizontalPoints:b,xAxis:m,yAxis:g})),C.createElement(Mx,Ex({},a,{offset:r,verticalPoints:x,xAxis:m,yAxis:g}))))}zx.displayName="CartesianGrid";var jx=["domain","range"],Bx=["domain","range"];function Ux(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Wx(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&(e[0]===t[0]&&e[1]===t[1])}function Vx(e,t){if(e===t)return!0;var{domain:n,range:r}=e,a=Ux(e,jx),{domain:i,range:o}=t,s=Ux(t,Bx);return!!Wx(n,i)&&(!!Wx(r,o)&&Dy(a,s))}var Gx=["dangerouslySetInnerHTML","ticks","scale"],Hx=["id","scale"];function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kx.apply(null,arguments)}function qx(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Xx(e){var t=ja(),n=(0,C.useRef)(null);return(0,C.useLayoutEffect)(()=>{null===n.current?t(og(e)):n.current!==e&&t(sg({prev:n.current,next:e})),n.current=e},[e,t]),(0,C.useLayoutEffect)(()=>()=>{n.current&&(t(lg(n.current)),n.current=null)},[t]),null}var Yx=e=>{var{xAxisId:t,className:n}=e,r=Va(Ci),a=Oi(),i="xAxis",o=Va(e=>pf(e,i,t,a)),s=Va(e=>tf(e,t)),l=Va(e=>af(e,t)),c=Va(e=>Nd(e,t));if(null==s||null==l||null==c)return null;var{dangerouslySetInnerHTML:u,ticks:h,scale:d}=e,p=qx(e,Gx),{id:f,scale:m}=c,g=qx(c,Hx);return C.createElement(bx,Kx({},p,g,{x:l.x,y:l.y,width:s.width,height:s.height,className:j("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:o,axisType:i}))},Zx={allowDataOverflow:Sd.allowDataOverflow,allowDecimals:Sd.allowDecimals,allowDuplicatedCategory:Sd.allowDuplicatedCategory,angle:Sd.angle,axisLine:fx.axisLine,height:Sd.height,hide:!1,includeHidden:Sd.includeHidden,interval:Sd.interval,minTickGap:Sd.minTickGap,mirror:Sd.mirror,orientation:Sd.orientation,padding:Sd.padding,reversed:Sd.reversed,scale:Sd.scale,tick:Sd.tick,tickCount:Sd.tickCount,tickLine:fx.tickLine,tickSize:fx.tickSize,type:Sd.type,xAxisId:0},Qx=e=>{var t=jv(e,Zx);return C.createElement(C.Fragment,null,C.createElement(Xx,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),C.createElement(Yx,t))},Jx=C.memo(Qx,Vx);Jx.displayName="XAxis";var $x=["dangerouslySetInnerHTML","ticks","scale"],ew=["id","scale"];function tw(){return tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tw.apply(null,arguments)}function nw(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function rw(e){var t=ja(),n=(0,C.useRef)(null);return(0,C.useLayoutEffect)(()=>{null===n.current?t(cg(e)):n.current!==e&&t(ug({prev:n.current,next:e})),n.current=e},[e,t]),(0,C.useLayoutEffect)(()=>()=>{n.current&&(t(hg(n.current)),n.current=null)},[t]),null}var aw=e=>{var{yAxisId:t,className:n,width:r,label:a}=e,i=(0,C.useRef)(null),o=(0,C.useRef)(null),s=Va(Ci),l=Oi(),c=ja(),u="yAxis",h=Va(e=>sf(e,t)),d=Va(e=>of(e,t)),p=Va(e=>pf(e,u,t,l)),f=Va(e=>Ed(e,t));if((0,C.useLayoutEffect)(()=>{if("auto"===r&&h&&!ex(a)&&!(0,C.isValidElement)(a)&&null!=f){var e=i.current;if(e){var n=e.getCalculatedWidth();Math.round(h.width)!==Math.round(n)&&c(mg({id:t,width:n}))}}},[p,h,c,a,t,r,f]),null==h||null==d||null==f)return null;var{dangerouslySetInnerHTML:m,ticks:g,scale:y}=e,v=nw(e,$x),{id:b,scale:x}=f,w=nw(f,ew);return C.createElement(bx,tw({},v,w,{ref:i,labelRef:o,x:d.x,y:d.y,tickTextProps:"auto"===r?{width:void 0}:{width:r},width:h.width,height:h.height,className:j("recharts-".concat(u," ").concat(u),n),viewBox:s,ticks:p,axisType:u}))},iw={allowDataOverflow:Id.allowDataOverflow,allowDecimals:Id.allowDecimals,allowDuplicatedCategory:Id.allowDuplicatedCategory,angle:Id.angle,axisLine:fx.axisLine,hide:!1,includeHidden:Id.includeHidden,interval:Id.interval,minTickGap:Id.minTickGap,mirror:Id.mirror,orientation:Id.orientation,padding:Id.padding,reversed:Id.reversed,scale:Id.scale,tick:Id.tick,tickCount:Id.tickCount,tickLine:fx.tickLine,tickSize:fx.tickSize,type:Id.type,width:Id.width,yAxisId:0},ow=e=>{var t=jv(e,iw);return C.createElement(C.Fragment,null,C.createElement(rw,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),C.createElement(aw,t))},sw=C.memo(ow,Vx);function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lw.apply(null,arguments)}function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(t){hw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dw(e){return Array.isArray(e)&&Z(e[0])&&Z(e[1])?e.join(" ~ "):e}sw.displayName="YAxis";var pw=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:a={},payload:i,formatter:o,itemSorter:s,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:h,accessibilityLayer:d=!1}=e,p=uw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),f=uw({margin:0},a),m=!re(u),g=m?u:"",y=j("recharts-default-tooltip",l),v=j("recharts-tooltip-label",c);m&&h&&void 0!==i&&null!==i&&(g=h(u,i));var b=d?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",lw({className:y,style:p},b),C.createElement("p",{className:v,style:f},C.isValidElement(g)?g:"".concat(g)),(()=>{if(i&&i.length){var e=(s?Ha()(i,s):i).map((e,n)=>{if("none"===e.type)return null;var a=e.formatter||o||dw,{value:s,name:l}=e,c=s,u=l;if(a){var h=a(s,l,e,n,i);if(Array.isArray(h))[c,u]=h;else{if(null==h)return null;c=h}}var d=uw({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},r);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:d},Z(u)?C.createElement("span",{className:"recharts-tooltip-item-name"},u):null,Z(u)?C.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,C.createElement("span",{className:"recharts-tooltip-item-value"},c),C.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},fw="recharts-tooltip-wrapper",mw={visibility:"hidden"};function gw(e){var{coordinate:t,translateX:n,translateY:r}=e;return j(fw,{["".concat(fw,"-right")]:Y(n)&&t&&Y(t.x)&&n>=t.x,["".concat(fw,"-left")]:Y(n)&&t&&Y(t.x)&&n<t.x,["".concat(fw,"-bottom")]:Y(r)&&t&&Y(t.y)&&r>=t.y,["".concat(fw,"-top")]:Y(r)&&t&&Y(t.y)&&r<t.y})}function yw(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:s,viewBox:l,viewBoxDimension:c}=e;if(i&&Y(i[r]))return i[r];var u=n[r]-s-(a>0?a:0),h=n[r]+a;if(t[r])return o[r]?u:h;var d=l[r];return null==d?0:o[r]?u<d?Math.max(h,d):Math.max(u,d):null==c?0:h+s>d+c?Math.max(u,d):Math.max(h,d)}function vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vw(Object(n),!0).forEach(function(t){xw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ww extends C.PureComponent{constructor(){super(...arguments),xw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),xw(this,"handleKeyDown",e=>{var t,n,r,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(n=this.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(r=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==r?r:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:r,children:a,coordinate:i,hasPayload:o,isAnimationActive:s,offset:l,position:c,reverseDirection:u,useTranslate3d:h,viewBox:d,wrapperStyle:p,lastBoundingBox:f,innerRef:m,hasPortalFromProps:g}=this.props,{cssClasses:y,cssProperties:v}=function(e){var t,n,r,{allowEscapeViewBox:a,coordinate:i,offsetTopLeft:o,position:s,reverseDirection:l,tooltipBox:c,useTranslate3d:u,viewBox:h}=e;return t=c.height>0&&c.width>0&&i?function(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:n=yw({allowEscapeViewBox:a,coordinate:i,key:"x",offsetTopLeft:o,position:s,reverseDirection:l,tooltipDimension:c.width,viewBox:h,viewBoxDimension:h.width}),translateY:r=yw({allowEscapeViewBox:a,coordinate:i,key:"y",offsetTopLeft:o,position:s,reverseDirection:l,tooltipDimension:c.height,viewBox:h,viewBoxDimension:h.height}),useTranslate3d:u}):mw,{cssProperties:t,cssClasses:gw({translateX:n,translateY:r,coordinate:i})}}({allowEscapeViewBox:t,coordinate:i,offsetTopLeft:l,position:c,reverseDirection:u,tooltipBox:{height:f.height,width:f.width},useTranslate3d:h,viewBox:d}),b=g?{}:bw(bw({transition:s&&e?"transform ".concat(n,"ms ").concat(r):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),x=bw(bw({},b),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},p);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:x,ref:m},a)}}var kw=n(4332),Sw=n.n(kw);var Nw,Tw,Iw,Ew,Cw,Aw,Ow,_w,Mw,Rw,Dw,Fw,Pw,Lw;function zw(){}function jw(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Bw(e){this._context=e}function Uw(e){this._context=e}function Ww(e){this._context=e}Bw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jw(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Uw.prototype={areaStart:zw,areaEnd:zw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:jw(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ww.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:jw(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class Vw{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function Gw(e){this._context=e}function Hw(e){this._context=e}function Kw(e){return new Hw(e)}function qw(e){return e<0?-1:1}function Xw(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),s=(i*a+o*r)/(r+a);return(qw(i)+qw(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function Yw(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Zw(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-r)/3;e._context.bezierCurveTo(r+s,a+s*t,i-s,o-s*n,i,o)}function Qw(e){this._context=e}function Jw(e){this._context=new $w(e)}function $w(e){this._context=e}function ek(e){this._context=e}function tk(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function nk(e,t){this._context=e,this._t=t}function rk(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Gw.prototype={areaStart:zw,areaEnd:zw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zw(this,this._t0,Yw(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Zw(this,Yw(this,n=Xw(this,e,t)),n);break;default:Zw(this,this._t0,n=Xw(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Jw.prototype=Object.create(Qw.prototype)).point=function(e,t){Qw.prototype.point.call(this,t,e)},$w.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=tk(e),a=tk(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},nk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const ak=Math.PI,ik=2*ak,ok=1e-6,sk=ik-ok;function lk(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class ck{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?lk:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return lk;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(Nw||(Nw=rk(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Tw||(Tw=rk(["Z"]))))}lineTo(e,t){this._append(Iw||(Iw=rk(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,r){this._append(Ew||(Ew=rk(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}bezierCurveTo(e,t,n,r,a,i){this._append(Cw||(Cw=rk(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+a,this._y1=+i)}arcTo(e,t,n,r,a){if(e=+e,t=+t,n=+n,r=+r,(a=+a)<0)throw new Error("negative radius: ".concat(a));let i=this._x1,o=this._y1,s=n-e,l=r-t,c=i-e,u=o-t,h=c*c+u*u;if(null===this._x1)this._append(Aw||(Aw=rk(["M",",",""])),this._x1=e,this._y1=t);else if(h>ok)if(Math.abs(u*s-l*c)>ok&&a){let d=n-i,p=r-o,f=s*s+l*l,m=d*d+p*p,g=Math.sqrt(f),y=Math.sqrt(h),v=a*Math.tan((ak-Math.acos((f+h-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>ok&&this._append(_w||(_w=rk(["L",",",""])),e+b*c,t+b*u),this._append(Mw||(Mw=rk(["A",",",",0,0,",",",",",""])),a,a,+(u*d>c*p),this._x1=e+x*s,this._y1=t+x*l)}else this._append(Ow||(Ow=rk(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,r,a,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error("negative radius: ".concat(n));let o=n*Math.cos(r),s=n*Math.sin(r),l=e+o,c=t+s,u=1^i,h=i?r-a:a-r;null===this._x1?this._append(Rw||(Rw=rk(["M",",",""])),l,c):(Math.abs(this._x1-l)>ok||Math.abs(this._y1-c)>ok)&&this._append(Dw||(Dw=rk(["L",",",""])),l,c),n&&(h<0&&(h=h%ik+ik),h>sk?this._append(Fw||(Fw=rk(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,e-o,t-s,n,n,u,this._x1=l,this._y1=c):h>ok&&this._append(Pw||(Pw=rk(["A",",",",0,",",",",",",",""])),n,n,+(h>=ak),u,this._x1=e+n*Math.cos(a),this._y1=t+n*Math.sin(a)))}rect(e,t,n,r){this._append(Lw||(Lw=rk(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}toString(){return this._}}function uk(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new ck(t)}function hk(e){return e[0]}function dk(e){return e[1]}function pk(e,t){var n=Ya(!0),r=null,a=Kw,i=null,o=uk(s);function s(s){var l,c,u,h=(s=Xa(s)).length,d=!1;for(null==r&&(i=a(u=o())),l=0;l<=h;++l)!(l<h&&n(c=s[l],l,s))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+e(c,l,s),+t(c,l,s));if(u)return i=null,u+""||null}return e="function"===typeof e?e:void 0===e?hk:Ya(e),t="function"===typeof t?t:void 0===t?dk:Ya(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:Ya(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:Ya(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:Ya(!!e),s):n},s.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),s):a},s.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),s):r},s}function fk(e,t,n){var r=null,a=Ya(!0),i=null,o=Kw,s=null,l=uk(c);function c(c){var u,h,d,p,f,m=(c=Xa(c)).length,g=!1,y=new Array(m),v=new Array(m);for(null==i&&(s=o(f=l())),u=0;u<=m;++u){if(!(u<m&&a(p=c[u],u,c))===g)if(g=!g)h=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=u-1;d>=h;--d)s.point(y[d],v[d]);s.lineEnd(),s.areaEnd()}g&&(y[u]=+e(p,u,c),v[u]=+t(p,u,c),s.point(r?+r(p,u,c):y[u],n?+n(p,u,c):v[u]))}if(f)return s=null,f+""||null}function u(){return pk().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?hk:Ya(+e),t="function"===typeof t?t:Ya(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?dk:Ya(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:Ya(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:Ya(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Ya(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:Ya(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:Ya(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Ya(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:Ya(!!e),c):a},c.curve=function(e){return arguments.length?(o=e,null!=i&&(s=o(i)),c):o},c.context=function(e){return arguments.length?(null==e?i=s=null:s=o(i=e),c):i},c}function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mk.apply(null,arguments)}function gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gk(Object(n),!0).forEach(function(t){vk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bk={curveBasisClosed:function(e){return new Uw(e)},curveBasisOpen:function(e){return new Ww(e)},curveBasis:function(e){return new Bw(e)},curveBumpX:function(e){return new Vw(e,!0)},curveBumpY:function(e){return new Vw(e,!1)},curveLinearClosed:function(e){return new Gw(e)},curveLinear:Kw,curveMonotoneX:function(e){return new Qw(e)},curveMonotoneY:function(e){return new Jw(e)},curveNatural:function(e){return new ek(e)},curveStep:function(e){return new nk(e,.5)},curveStepAfter:function(e){return new nk(e,1)},curveStepBefore:function(e){return new nk(e,0)}},xk=e=>fe(e.x)&&fe(e.y),wk=e=>null!=e.base&&xk(e.base)&&xk(e),kk=e=>e.x,Sk=e=>e.y,Nk=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:a,connectNulls:i=!1}=e,o=((e,t)=>{if("function"===typeof e)return e;var n="curve".concat(ae(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?bk[n]||Kw:bk["".concat(n).concat("vertical"===t?"Y":"X")]})(t,a),s=i?n.filter(xk):n;if(Array.isArray(r)){var l=n.map((e,t)=>yk(yk({},e),{},{base:r[t]}));return("vertical"===a?fk().y(Sk).x1(kk).x0(e=>e.base.x):fk().x(kk).y1(Sk).y0(e=>e.base.y)).defined(wk).curve(o)(i?l.filter(wk):l)}return("vertical"===a&&Y(r)?fk().y(Sk).x1(kk).x0(r):Y(r)?fk().x(kk).y1(Sk).y0(r):pk().x(kk).y(Sk)).defined(xk).curve(o)(s)},Tk=e=>{var{className:t,points:n,path:r,pathRef:a}=e,i=Bi();if((!n||!n.length)&&!r)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},s=n&&n.length?Nk(o):r;return C.createElement("path",mk({},Gy(e),lx(e),{className:j("recharts-curve",t),d:null===s?void 0:s,ref:a}))},Ik=["x","y","top","left","width","height","className"];function Ek(){return Ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ek.apply(null,arguments)}function Ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ak(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ok=(e,t,n,r,a,i)=>"M".concat(e,",").concat(a,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n),_k=e=>{var{x:t=0,y:n=0,top:r=0,left:a=0,width:i=0,height:o=0,className:s}=e,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Ik),c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ck(Object(n),!0).forEach(function(t){Ak(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:t,y:n,top:r,left:a,width:i,height:o},l);return Y(t)&&Y(n)&&Y(i)&&Y(o)&&Y(r)&&Y(a)?C.createElement("path",Ek({},Ky(c),{className:j("recharts-cross",s),d:Ok(t,n,i,o,r,a)})):null};function Mk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mk(Object(n),!0).forEach(function(t){Dk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Dk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fk=(e,t)=>Object.keys(t).reduce((n,r)=>Rk(Rk({},n),{},{[r]:e(r,t[r])}),{});function Pk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pk(Object(n),!0).forEach(function(t){zk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jk=(e,t,n)=>e+(t-e)*n,Bk=e=>{var{from:t,to:n}=e;return t!==n},Uk=(e,t,n)=>{var r=Fk((t,n)=>{if(Bk(n)){var[r,a]=e(n.from,n.to,n.velocity);return Lk(Lk({},n),{},{from:r,velocity:a})}return n},t);return n<1?Fk((e,t)=>Bk(t)&&null!=r[e]?Lk(Lk({},t),{},{velocity:jk(t.velocity,r[e].velocity,n),from:jk(t.from,r[e].from,n)}):t,t):Uk(e,r,n-1)};function Wk(e,t,n,r,a,i){var o,s=r.reduce((n,r)=>Lk(Lk({},n),{},{[r]:{from:e[r],velocity:0,to:t[r]}}),{}),l=null,c=r=>{o||(o=r);var u=(r-o)/n.dt;s=Uk(n,s,u),a(Lk(Lk(Lk({},e),t),Fk((e,t)=>t.from,s))),o=r,Object.values(s).filter(Bk).length&&(l=i.setTimeout(c))};return()=>(l=i.setTimeout(c),()=>{var e;null===(e=l)||void 0===e||e()})}const Vk=(e,t,n,r,a,i)=>{var o,s,l=(o=e,s=t,[Object.keys(o),Object.keys(s)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==n?()=>(a(Lk(Lk({},e),t)),()=>{}):!0===n.isStepper?Wk(e,t,n,l,a,i):function(e,t,n,r,a,i,o){var s,l=null,c=a.reduce((n,r)=>{var a=e[r],i=t[r];return null==a||null==i?n:Lk(Lk({},n),{},{[r]:[a,i]})},{}),u=a=>{s||(s=a);var h=(a-s)/r,d=Fk((e,t)=>jk(...t,n(h)),c);if(i(Lk(Lk(Lk({},e),t),d)),h<1)l=o.setTimeout(u);else{var p=Fk((e,t)=>jk(...t,n(1)),c);i(Lk(Lk(Lk({},e),t),p))}};return()=>(l=o.setTimeout(u),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,n,r,l,a,i)};var Gk=1e-4,Hk=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Kk=(e,t)=>e.map((e,n)=>e*t**n).reduce((e,t)=>e+t),qk=(e,t)=>n=>{var r=Hk(e,t);return Kk(r,n)},Xk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var r=(e=>{var t,n=e.split("(");if(2!==n.length||"cubic-bezier"!==n[0])return null;var r=null===(t=n[1])||void 0===t||null===(t=t.split(")")[0])||void 0===t?void 0:t.split(",");if(null==r||4!==r.length)return null;var a=r.map(e=>parseFloat(e));return[a[0],a[1],a[2],a[3]]})(t[0]);if(r)return r}return 4===t.length?t:[0,0,1,1]},Yk=(e,t,n,r)=>{var a,i,o=qk(e,n),s=qk(t,r),l=(a=e,i=n,e=>{var t=[...Hk(a,i).map((e,t)=>e*t).slice(1),0];return Kk(t,e)}),c=e=>e>1?1:e<0?0:e,u=e=>{for(var t=e>1?1:e,n=t,r=0;r<8;++r){var a=o(n)-t,i=l(n);if(Math.abs(a-t)<Gk||i<Gk)return s(n);n=c(n-a/i)}return s(n)};return u.isStepper=!1,u},Zk=function(){return Yk(...Xk(...arguments))},Qk=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Zk(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:n=8,dt:r=17}=e,a=(e,a,i)=>{var o=i+(-(e-a)*t-i*n)*r/1e3,s=i*r/1e3+e;return Math.abs(s-a)<Gk&&Math.abs(o)<Gk?[a,0]:[s,o]};return a.isStepper=!0,a.dt=r,a}();default:if("cubic-bezier"===e.split("(")[0])return Zk(e)}return"function"===typeof e?e:null};class Jk{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now(),r=null,a=i=>{i-n>=t?e(i):"function"===typeof requestAnimationFrame&&(r=requestAnimationFrame(a))};return r=requestAnimationFrame(a),()=>{null!=r&&cancelAnimationFrame(r)}}}function $k(){return function(e){var t=()=>null,n=!1,r=null,a=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[s,...l]=o;return"number"===typeof s?void(r=e.setTimeout(a.bind(null,l),s)):(a(s),void(r=e.setTimeout(a.bind(null,l))))}"string"===typeof i&&t(i),"object"===typeof i&&t(i),"function"===typeof i&&i()}};return{stop:()=>{n=!0},start:e=>{n=!1,r&&(r(),r=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new Jk)}var eS=(0,C.createContext)($k);var tS={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},nS={t:0},rS={t:1};function aS(e){var t=jv(e,tS),{isActive:n,canBegin:r,duration:a,easing:i,begin:o,onAnimationEnd:s,onAnimationStart:l,children:c}=t,u="auto"===n?!vy:n,h=function(e,t){var n=(0,C.useContext)(eS);return(0,C.useMemo)(()=>null!==t&&void 0!==t?t:n(e),[e,t,n])}(t.animationId,t.animationManager),[d,p]=(0,C.useState)(u?nS:rS),f=(0,C.useRef)(null);return(0,C.useEffect)(()=>{u||p(rS)},[u]),(0,C.useEffect)(()=>{if(!u||!r)return oe;var e=Vk(nS,rS,Qk(i),a,p,h.getTimeoutController());return h.start([l,o,()=>{f.current=e()},a,s]),()=>{h.stop(),f.current&&f.current(),s()}},[u,r,a,i,o,l,s,h]),c(d.t)}function iS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,C.useRef)(J(t)),r=(0,C.useRef)(e);return r.current!==e&&(n.current=J(t),r.current=e),n.current}var oS,sS,lS,cS,uS,hS,dS,pS,fS,mS,gS=["radius"],yS=["radius"];function vS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vS(Object(n),!0).forEach(function(t){xS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wS(){return wS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wS.apply(null,arguments)}function kS(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function SS(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var NS,TS,IS,ES,CS,AS,OS,_S=(e,t,n,r,a)=>{var i,o=G(n),s=G(r),l=Math.min(Math.abs(o)/2,Math.abs(s)/2),c=s>=0?1:-1,u=o>=0?1:-1,h=s>=0&&o>=0||s<0&&o<0?1:0;if(l>0&&a instanceof Array){for(var d=[0,0,0,0],p=0;p<4;p++)d[p]=a[p]>l?l:a[p];i=H(oS||(oS=SS(["M",",",""])),e,t+c*d[0]),d[0]>0&&(i+=H(sS||(sS=SS(["A ",",",",0,0,",",",",",""])),d[0],d[0],h,e+u*d[0],t)),i+=H(lS||(lS=SS(["L ",",",""])),e+n-u*d[1],t),d[1]>0&&(i+=H(cS||(cS=SS(["A ",",",",0,0,",",\n        ",",",""])),d[1],d[1],h,e+n,t+c*d[1])),i+=H(uS||(uS=SS(["L ",",",""])),e+n,t+r-c*d[2]),d[2]>0&&(i+=H(hS||(hS=SS(["A ",",",",0,0,",",\n        ",",",""])),d[2],d[2],h,e+n-u*d[2],t+r)),i+=H(dS||(dS=SS(["L ",",",""])),e+u*d[3],t+r),d[3]>0&&(i+=H(pS||(pS=SS(["A ",",",",0,0,",",\n        ",",",""])),d[3],d[3],h,e,t+r-c*d[3])),i+="Z"}else if(l>0&&a===+a&&a>0){var f=Math.min(l,a);i=H(fS||(fS=SS(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),e,t+c*f,f,f,h,e+u*f,t,e+n-u*f,t,f,f,h,e+n,t+c*f,e+n,t+r-c*f,f,f,h,e+n-u*f,t+r,e+u*f,t+r,f,f,h,e,t+r-c*f)}else i=H(mS||(mS=SS(["M ",","," h "," v "," h "," Z"])),e,t,n,r,-n);return i},MS={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RS=e=>{var t=jv(e,MS),n=(0,C.useRef)(null),[r,a]=(0,C.useState)(-1);(0,C.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(t){}},[]);var{x:i,y:o,width:s,height:l,radius:c,className:u}=t,{animationEasing:h,animationDuration:d,animationBegin:p,isAnimationActive:f,isUpdateAnimationActive:m}=t,g=(0,C.useRef)(s),y=(0,C.useRef)(l),v=(0,C.useRef)(i),b=(0,C.useRef)(o),x=iS((0,C.useMemo)(()=>({x:i,y:o,width:s,height:l,radius:c}),[i,o,s,l,c]),"rectangle-");if(i!==+i||o!==+o||s!==+s||l!==+l||0===s||0===l)return null;var w=j("recharts-rectangle",u);if(!m){var k=Ky(t),{radius:S}=k,N=kS(k,gS);return C.createElement("path",wS({},N,{x:G(i),y:G(o),width:G(s),height:G(l),radius:"number"===typeof c?c:void 0,className:w,d:_S(i,o,s,l,c)}))}var T=g.current,I=y.current,E=v.current,A=b.current,O="0px ".concat(-1===r?1:r,"px"),_="".concat(r,"px 0px"),M=((e,t,n)=>e.map(e=>{return"".concat((r=e,r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(n);var r}).join(","))(["strokeDasharray"],d,"string"===typeof h?h:MS.animationEasing);return C.createElement(aS,{animationId:x,key:x,canBegin:r>0,duration:d,easing:h,isActive:m,begin:p},e=>{var r,a=te(T,s,e),u=te(I,l,e),h=te(E,i,e),d=te(A,o,e);n.current&&(g.current=a,y.current=u,v.current=h,b.current=d),r=f?e>0?{transition:M,strokeDasharray:_}:{strokeDasharray:O}:{strokeDasharray:_};var p=Ky(t),{radius:m}=p,x=kS(p,yS);return C.createElement("path",wS({},x,{radius:"number"===typeof c?c:void 0,className:w,d:_S(h,d,a,u,c),ref:n,style:bS(bS({},r),t.style)}))})};function DS(e){var{cx:t,cy:n,radius:r,startAngle:a,endAngle:i}=e;return{points:[Mh(t,n,r,a),Mh(t,n,r,i)],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function FS(){return FS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FS.apply(null,arguments)}function PS(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var LS=e=>{var{cx:t,cy:n,radius:r,angle:a,sign:i,isExternal:o,cornerRadius:s,cornerIsExternal:l}=e,c=s*(o?1:-1)+r,u=Math.asin(s/c)/Oh,h=l?a:a+i*u,d=l?a-i*u:a;return{center:Mh(t,n,c,h),circleTangency:Mh(t,n,r,h),lineTangency:Mh(t,n,c*Math.cos(u*Oh),d),theta:u}},zS=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:i,endAngle:o}=e,s=((e,t)=>K(t-e)*Math.min(Math.abs(t-e),359.999))(i,o),l=i+s,c=Mh(t,n,a,i),u=Mh(t,n,a,l),h=H(NS||(NS=PS(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),c.x,c.y,a,a,+(Math.abs(s)>180),+(i>l),u.x,u.y);if(r>0){var d=Mh(t,n,r,i),p=Mh(t,n,r,l);h+=H(TS||(TS=PS(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),p.x,p.y,r,r,+(Math.abs(s)>180),+(i<=l),d.x,d.y)}else h+=H(IS||(IS=PS(["L ",","," Z"])),t,n);return h},jS={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},BS=e=>{var t=jv(e,jS),{cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:u,className:h}=t;if(i<a||c===u)return null;var d,p=j("recharts-sector",h),f=i-a,m=$(o,f,0,!0);return d=m>0&&Math.abs(c-u)<360?(e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:s,startAngle:l,endAngle:c}=e,u=K(c-l),{circleTangency:h,lineTangency:d,theta:p}=LS({cx:t,cy:n,radius:a,angle:l,sign:u,cornerRadius:i,cornerIsExternal:s}),{circleTangency:f,lineTangency:m,theta:g}=LS({cx:t,cy:n,radius:a,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:s}),y=s?Math.abs(l-c):Math.abs(l-c)-p-g;if(y<0)return o?H(ES||(ES=PS(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),d.x,d.y,i,i,2*i,i,i,2*-i):zS({cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:l,endAngle:c});var v=H(CS||(CS=PS(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),d.x,d.y,i,i,+(u<0),h.x,h.y,a,a,+(y>180),+(u<0),f.x,f.y,i,i,+(u<0),m.x,m.y);if(r>0){var{circleTangency:b,lineTangency:x,theta:w}=LS({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),{circleTangency:k,lineTangency:S,theta:N}=LS({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),T=s?Math.abs(l-c):Math.abs(l-c)-w-N;if(T<0&&0===i)return"".concat(v,"L").concat(t,",").concat(n,"Z");v+=H(AS||(AS=PS(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),S.x,S.y,i,i,+(u<0),k.x,k.y,r,r,+(T>180),+(u>0),b.x,b.y,i,i,+(u<0),x.x,x.y)}else v+=H(OS||(OS=PS(["L",",","Z"])),t,n);return v})({cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:Math.min(m,f/2),forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:u}):zS({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:c,endAngle:u}),C.createElement("path",FS({},Ky(t),{className:p,d:d}))};function US(e,t,n){if("horizontal"===e)return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if("vertical"===e)return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(sx(t)){if("centric"===e){var{cx:r,cy:a,innerRadius:i,outerRadius:o,angle:s}=t,l=Mh(r,a,i,s),c=Mh(r,a,o,s);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return DS(t)}}function WS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function VS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WS(Object(n),!0).forEach(function(t){GS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function GS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HS=()=>{var e=Va(Jd),t=Va(gm),n=Va(pm);return fi(e&&n?VS(VS({},e),{},{scale:n}):void 0,t)};function KS(){return KS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KS.apply(null,arguments)}function qS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function XS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qS(Object(n),!0).forEach(function(t){YS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function YS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZS(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return(0,C.isValidElement)(t)?(0,C.cloneElement)(t,r):(0,C.createElement)(n,r)}function QS(e){var t,n,r,a,{coordinate:i,payload:o,index:s,offset:l,tooltipAxisBandSize:c,layout:u,cursor:h,tooltipEventType:d,chartName:p}=e,f=i,m=o,g=s;if(!h||!f||"ScatterChart"!==p&&"axis"!==d)return null;if("ScatterChart"===p)n=f,r=_k,a=Ph.cursorLine;else if("BarChart"===p)n=function(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-a,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(u,f,l,c),r=RS,a=Ph.cursorRectangle;else if("radial"===u&&sx(f)){var{cx:y,cy:v,radius:b,startAngle:x,endAngle:w}=DS(f);n={cx:y,cy:v,startAngle:x,endAngle:w,innerRadius:b,outerRadius:b},r=BS,a=Ph.cursorLine}else n={points:US(u,f,l)},r=Tk,a=Ph.cursorLine;var k="object"===typeof h&&"className"in h?h.className:void 0,S=XS(XS(XS(XS({stroke:"#ccc",pointerEvents:"none"},l),n),Hy(h)),{},{payload:m,payloadIndex:g,className:j("recharts-tooltip-cursor",k)});return C.createElement(Ub,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:a},C.createElement(ZS,{cursor:h,cursorComp:r,cursorProps:S}))}function JS(e){var t=HS(),n=Pi(),r=Bi(),a=Dm();return null==t||null==n||null==r||null==a?null:C.createElement(QS,KS({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:a}))}function $S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$S(Object(n),!0).forEach(function(t){tN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nN(e){return e.dataKey}var rN=[],aN={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function iN(e){var t,n,r=jv(e,aN),{active:a,allowEscapeViewBox:i,animationDuration:o,animationEasing:s,content:l,filterNull:c,isAnimationActive:u,offset:h,payloadUniqBy:d,position:p,reverseDirection:f,useTranslate3d:m,wrapperStyle:g,cursor:y,shared:v,trigger:b,defaultIndex:x,portal:w,axisId:k}=r,S=ja(),N="number"===typeof x?String(x):x;(0,C.useEffect)(()=>{S(oa({shared:v,trigger:b,axisId:k,active:a,defaultIndex:N}))},[S,v,b,k,a,N]);var T=Di(),I=zy(),E=function(e){return Va(t=>wf(t,e))}(v),{activeIndex:A,isActive:O}=null!==(t=Va(e=>Km(e,E,b,N)))&&void 0!==t?t:{},_=Va(e=>Hm(e,E,b,N)),M=Va(e=>Gm(e,E,b,N)),R=Va(e=>Vm(e,E,b,N)),D=_,F=(0,C.useContext)(yv),P=null!==(n=null!==a&&void 0!==a?a:O)&&void 0!==n&&n,[L,z]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,C.useState)({height:0,left:0,top:0,width:0}),r=(0,C.useCallback)(e=>{if(null!=e){var r=e.getBoundingClientRect(),a={height:r.height,left:r.left,top:r.top,width:r.width};(Math.abs(a.height-t.height)>1||Math.abs(a.left-t.left)>1||Math.abs(a.top-t.top)>1||Math.abs(a.width-t.width)>1)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}([D,P]),j="axis"===E?M:void 0;gv(E,b,R,j,A,P);var B=null!==w&&void 0!==w?w:F;if(null==B||null==T||null==E)return null;var U=null!==D&&void 0!==D?D:rN;P||(U=rN),c&&U.length&&(U=function(e,t,n){return!0===t?Sw()(e,n):"function"===typeof t?Sw()(e,t):e}(U.filter(e=>null!=e.value&&(!0!==e.hide||r.includeHidden)),d,nN));var W=U.length>0,V=C.createElement(ww,{allowEscapeViewBox:i,animationDuration:o,animationEasing:s,isAnimationActive:u,active:P,coordinate:R,hasPayload:W,offset:h,position:p,reverseDirection:f,useTranslate3d:m,viewBox:T,wrapperStyle:g,lastBoundingBox:L,innerRef:z,hasPortalFromProps:Boolean(w)},function(e,t){return C.isValidElement(e)?C.cloneElement(e,t):"function"===typeof e?C.createElement(e,t):C.createElement(pw,t)}(l,eN(eN({},r),{},{payload:U,label:j,active:P,activeIndex:A,coordinate:R,accessibilityLayer:I})));return C.createElement(C.Fragment,null,(0,Bb.createPortal)(V,B),P&&C.createElement(JS,{cursor:y,tooltipEventType:E,coordinate:R,payload:U,index:A}))}var oN=n(356),sN=n.n(oN),lN=["valueAccessor"],cN=["dataKey","clockWise","id","textBreakAll","zIndex"];function uN(){return uN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uN.apply(null,arguments)}function hN(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var dN=e=>Array.isArray(e.value)?sN()(e.value):e.value,pN=(0,C.createContext)(void 0),fN=pN.Provider,mN=(0,C.createContext)(void 0);mN.Provider;function gN(e){var{valueAccessor:t=dN}=e,n=hN(e,lN),{dataKey:r,clockWise:a,id:i,textBreakAll:o,zIndex:s}=n,l=hN(n,cN),c=(0,C.useContext)(pN),u=(0,C.useContext)(mN),h=c||u;return h&&h.length?C.createElement(Ub,{zIndex:null!==s&&void 0!==s?s:Ph.label},C.createElement(db,{className:"recharts-label-list"},h.map((e,a)=>{var s,c=re(r)?t(e,a):ri(e&&e.payload,r),u=re(i)?{}:{id:"".concat(i,"-").concat(a)};return C.createElement(ax,uN({key:"label-".concat(a)},Ky(e),l,u,{fill:null!==(s=n.fill)&&void 0!==s?s:e.fill,parentViewBox:e.parentViewBox,value:c,textBreakAll:o,viewBox:e.viewBox,index:a,zIndex:0}))}))):null}function yN(e){var{label:t}=e;return t?!0===t?C.createElement(gN,{key:"labelList-implicit"}):C.isValidElement(t)||ex(t)?C.createElement(gN,{key:"labelList-implicit",content:t}):"object"===typeof t?C.createElement(gN,uN({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function vN(){return vN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vN.apply(null,arguments)}gN.displayName="LabelList";var bN=e=>{var{cx:t,cy:n,r:r,className:a}=e,i=j("recharts-dot",a);return Y(t)&&Y(n)&&Y(r)?C.createElement("circle",vN({},Gy(e),lx(e),{className:i,cx:t,cy:n,r:r})):null};n(2086);var xN=e=>!e||"object"!==typeof e||!("clipDot"in e)||Boolean(e.clipDot),wN=["points"];function kN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function SN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kN(Object(n),!0).forEach(function(t){NN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function NN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TN(){return TN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TN.apply(null,arguments)}function IN(e){var{option:t,dotProps:n,className:r}=e;if((0,C.isValidElement)(t))return(0,C.cloneElement)(t,n);if("function"===typeof t)return t(n);var a=j(r,"boolean"!==typeof t?t.className:""),i=null!==n&&void 0!==n?n:{},{points:o}=i,s=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(i,wN);return C.createElement(bN,TN({},s,{className:a}))}function EN(e){var{points:t,dot:n,className:r,dotClassName:a,dataKey:i,baseProps:o,needClip:s,clipPathId:l,zIndex:c=Ph.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,n))return null;var u=xN(n),h=function(e){return null==e?null:(0,C.isValidElement)(e)?Ky(e.props):"object"!==typeof e||Array.isArray(e)?null:Ky(e)}(n),d=t.map((e,r)=>{var s,l,c=SN(SN(SN({r:3},o),h),{},{index:r,cx:null!==(s=e.x)&&void 0!==s?s:void 0,cy:null!==(l=e.y)&&void 0!==l?l:void 0,dataKey:i,value:e.value,payload:e.payload,points:t});return C.createElement(IN,{key:"dot-".concat(r),option:n,dotProps:c,className:a})}),p={};return s&&null!=l&&(p.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(l,")")),C.createElement(Ub,{zIndex:c},C.createElement(db,TN({className:r},p),d))}function CN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function AN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CN(Object(n),!0).forEach(function(t){ON(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ON(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _N=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:a,dataKey:i,clipPath:o}=e;if(!1===a||null==t.x||null==t.y)return null;var s,l=AN(AN(AN({},{index:n,dataKey:i,cx:t.x,cy:t.y,r:4,fill:null!==r&&void 0!==r?r:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),Hy(a)),lx(a));return s=(0,C.isValidElement)(a)?(0,C.cloneElement)(a,l):"function"===typeof a?a(l):C.createElement(bN,l),C.createElement(db,{className:"recharts-active-dot",clipPath:o},s)};function MN(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:a,clipPath:i,zIndex:o=Ph.activeDot}=e,s=Va(wm),l=Va(Am);if(null==t||null==l)return null;var c=t.find(e=>l.includes(e.payload));return re(c)?null:C.createElement(Ub,{zIndex:o},C.createElement(_N,{point:c,childIndex:Number(s),mainColor:n,dataKey:a,activeDot:r,clipPath:i}))}function RN(e){var{tooltipEntrySettings:t}=e,n=ja(),r=Oi(),a=(0,C.useRef)(null);return(0,C.useLayoutEffect)(()=>{r||(null===a.current?n(ra(t)):a.current!==t&&n(aa({prev:a.current,next:t})),a.current=t)},[t,n,r]),(0,C.useLayoutEffect)(()=>()=>{a.current&&(n(ia(a.current)),a.current=null)},[n]),null}function DN(e,t){var n,r,a=Va(t=>Td(t,e)),i=Va(e=>Cd(e,t)),o=null!==(n=null===a||void 0===a?void 0:a.allowDataOverflow)&&void 0!==n?n:Sd.allowDataOverflow,s=null!==(r=null===i||void 0===i?void 0:i.allowDataOverflow)&&void 0!==r?r:Id.allowDataOverflow;return{needClip:o||s,needClipX:o,needClipY:s}}function FN(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,a=Mv(),{needClipX:i,needClipY:o,needClip:s}=DN(t,n);if(!s||!a)return null;var{x:l,y:c,width:u,height:h}=a;return C.createElement("clipPath",{id:"clipPath-".concat(r)},C.createElement("rect",{x:i?l:l-u/2,y:o?c:c-h/2,width:i?u:2*u,height:o?h:2*h}))}function PN(e,t){var n,r;return null!==(n=null===(r=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===r?void 0:r.xAxisId)&&void 0!==n?n:0}function LN(e,t){var n,r;return null!==(n=null===(r=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===r?void 0:r.yAxisId)&&void 0!==n?n:0}var zN,jN=(e,t,n)=>mf(e,"xAxis",PN(e,t),n),BN=(e,t,n)=>ff(e,"xAxis",PN(e,t),n),UN=(e,t,n)=>mf(e,"yAxis",LN(e,t),n),WN=(e,t,n)=>ff(e,"yAxis",LN(e,t),n),VN=Da([ji,jN,UN,BN,WN],(e,t,n,r,a)=>ai(e,"xAxis")?fi(t,r,!1):fi(n,a,!1)),GN=Da([Fd,(e,t)=>t],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),HN=e=>{var t=ji(e);return ai(t,"xAxis")?"yAxis":"xAxis"},KN=Da([GN,(e,t,n)=>np(e,HN(e),((e,t)=>"yAxis"===HN(e)?LN(e,t):PN(e,t))(e,t),n)],(e,t)=>{var n;if(null!=e&&null!=t){var{stackId:r}=e,a=dd(e);if(null!=r&&null!=a){var i=null===(n=t[r])||void 0===n?void 0:n.stackedData,o=null===i||void 0===i?void 0:i.find(e=>e.key===a);if(null!=o)return o.map(e=>[e[0],e[1]])}}}),qN=Da([ji,jN,UN,BN,WN,KN,(e,t,n)=>n?eh(e):$u(e),VN,GN,e=>e.rootProps.baseValue],(e,t,n,r,a,i,o,s,l,c)=>{var{chartData:u,dataStartIndex:h,dataEndIndex:d}=o;if(null!=l&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=n&&null!=r&&null!=a&&0!==r.length&&0!==a.length&&null!=s){var p,{data:f}=l;if(null!=(p=f&&f.length>0?f:null===u||void 0===u?void 0:u.slice(h,d+1)))return function(e){var t,{areaSettings:{connectNulls:n,baseValue:r,dataKey:a},stackedData:i,layout:o,chartBaseValue:s,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:h,xAxisTicks:d,yAxisTicks:p,bandSize:f}=e,m=i&&i.length,g=wT(o,s,r,l,c),y="horizontal"===o,v=!1,b=u.map((e,t)=>{var r,o,s;if(m)s=i[h+t];else{var u=ri(e,a);Array.isArray(u)?(s=u,v=!0):s=[g,u]}var b=null!==(r=null===(o=s)||void 0===o?void 0:o[1])&&void 0!==r?r:null,x=null==b||m&&!n&&null==ri(e,a);return y?{x:ui({axis:l,ticks:d,bandSize:f,entry:e,index:t}),y:x?null:c.scale(b),value:s,payload:e}:{x:x?null:l.scale(b),y:ui({axis:c,ticks:p,bandSize:f,entry:e,index:t}),value:s,payload:e}});t=m||v?b.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return y?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?l.scale(t):null,y:e.y,payload:e.payload}}):y?c.scale(g):l.scale(g);return{points:b,baseLine:t,isRange:v}}({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataStartIndex:h,areaSettings:l,stackedData:i,displayedData:p,chartBaseValue:c,bandSize:s})}});function XN(e){var{legendPayload:t}=e,n=ja(),r=Oi(),a=(0,C.useRef)(null);return(0,C.useLayoutEffect)(()=>{r||(null===a.current?n(jg(t)):a.current!==t&&n(Bg({prev:a.current,next:t})),a.current=t)},[n,r,t]),(0,C.useLayoutEffect)(()=>()=>{a.current&&(n(Ug(a.current)),a.current=null)},[n]),null}var YN=null!==(zN=A["useId".toString()])&&void 0!==zN?zN:()=>{var[e]=C.useState(()=>J("uid-"));return e};var ZN=(0,C.createContext)(void 0),QN=e=>{var{id:t,type:n,children:r}=e,a=function(e,t){var n=YN();return t||(e?"".concat(e,"-").concat(n):n)}("recharts-".concat(n),t);return C.createElement(ZN.Provider,{value:a},r(a))};var JN=e=>{var t=ja(),n=(0,C.useRef)(null);return(0,C.useLayoutEffect)(()=>{null===n.current?t(vg(e)):n.current!==e&&t(bg({prev:n.current,next:e})),n.current=e},[t,e]),(0,C.useLayoutEffect)(()=>()=>{n.current&&(t(xg(n.current)),n.current=null)},[t]),null},$N=(0,C.memo)(JN);var eT=["id"],tT=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function nT(){return nT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nT.apply(null,arguments)}function rT(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function aT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aT(Object(n),!0).forEach(function(t){oT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sT(e,t){return e&&"none"!==e?e:t}var lT=e=>{var{dataKey:t,name:n,stroke:r,fill:a,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:sT(r,a),value:gi(n,t),payload:e}]},cT=C.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:a,fill:i,name:o,hide:s,unit:l,tooltipType:c,id:u}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:gi(o,t),hide:s,type:c,color:sT(r,i),unit:l,graphicalItemId:u}};return C.createElement(RN,{tooltipEntrySettings:h})});function uT(e){var{clipPathId:t,points:n,props:r}=e,{needClip:a,dot:i,dataKey:o}=r,s=Gy(r);return C.createElement(EN,{points:n,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:s,needClip:a,clipPathId:t})}function hT(e){var{showLabels:t,children:n,points:r}=e,a=r.map(e=>{var t,n,r={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(n=e.y)&&void 0!==n?n:0,width:0,lowerWidth:0,upperWidth:0,height:0};return iT(iT({},r),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:r,fill:void 0})});return C.createElement(fN,{value:t?a:void 0},n)}function dT(e){var{points:t,baseLine:n,needClip:r,clipPathId:a,props:i}=e,{layout:o,type:s,stroke:l,connectNulls:c,isRange:u}=i,{id:h}=i,d=rT(i,eT),p=Gy(d),f=Ky(d);return C.createElement(C.Fragment,null,(null===t||void 0===t?void 0:t.length)>1&&C.createElement(db,{clipPath:r?"url(#clipPath-".concat(a,")"):void 0},C.createElement(Tk,nT({},f,{id:h,points:t,connectNulls:c,type:s,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),"none"!==l&&C.createElement(Tk,nT({},p,{className:"recharts-area-curve",layout:o,type:s,connectNulls:c,fill:"none",points:t})),"none"!==l&&u&&C.createElement(Tk,nT({},p,{className:"recharts-area-curve",layout:o,type:s,connectNulls:c,fill:"none",points:n}))),C.createElement(uT,{points:t,props:d,clipPathId:a}))}function pT(e){var t,n,{alpha:r,baseLine:a,points:i,strokeWidth:o}=e,s=null===(t=i[0])||void 0===t?void 0:t.y,l=null===(n=i[i.length-1])||void 0===n?void 0:n.y;if(!fe(s)||!fe(l))return null;var c=r*Math.abs(s-l),u=Math.max(...i.map(e=>e.x||0));return Y(a)?u=Math.max(a,u):a&&Array.isArray(a)&&a.length&&(u=Math.max(...a.map(e=>e.x||0),u)),Y(u)?C.createElement("rect",{x:0,y:s<l?s:s-c,width:u+(o?parseInt("".concat(o),10):1),height:Math.floor(c)}):null}function fT(e){var t,n,{alpha:r,baseLine:a,points:i,strokeWidth:o}=e,s=null===(t=i[0])||void 0===t?void 0:t.x,l=null===(n=i[i.length-1])||void 0===n?void 0:n.x;if(!fe(s)||!fe(l))return null;var c=r*Math.abs(s-l),u=Math.max(...i.map(e=>e.y||0));return Y(a)?u=Math.max(a,u):a&&Array.isArray(a)&&a.length&&(u=Math.max(...a.map(e=>e.y||0),u)),Y(u)?C.createElement("rect",{x:s<l?s:s-c,y:0,width:c,height:Math.floor(u+(o?parseInt("".concat(o),10):1))}):null}function mT(e){var{alpha:t,layout:n,points:r,baseLine:a,strokeWidth:i}=e;return"vertical"===n?C.createElement(pT,{alpha:t,points:r,baseLine:a,strokeWidth:i}):C.createElement(fT,{alpha:t,points:r,baseLine:a,strokeWidth:i})}function gT(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:i}=e,{points:o,baseLine:s,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,onAnimationStart:d,onAnimationEnd:p}=r,f=iS((0,C.useMemo)(()=>({points:o,baseLine:s}),[o,s]),"recharts-area-"),m=(()=>{var e=Bi();if("horizontal"===e||"vertical"===e)return e})(),[g,y]=(0,C.useState)(!1),v=!g,b=(0,C.useCallback)(()=>{"function"===typeof p&&p(),y(!1)},[p]),x=(0,C.useCallback)(()=>{"function"===typeof d&&d(),y(!0)},[d]);if(null==m)return null;var w=a.current,k=i.current;return C.createElement(hT,{showLabels:v,points:o},r.children,C.createElement(aS,{animationId:f,begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:b,onAnimationStart:x,key:f},e=>{if(w){var c,u=w.length/o.length,h=1===e?o:o.map((t,n)=>{var r=Math.floor(n*u);if(w[r]){var a=w[r];return iT(iT({},t),{},{x:te(a.x,t.x,e),y:te(a.y,t.y,e)})}return t});return c=Y(s)?te(k,s,e):re(s)||q(s)?te(k,0,e):s.map((t,n)=>{var r=Math.floor(n*u);if(Array.isArray(k)&&k[r]){var a=k[r];return iT(iT({},t),{},{x:te(a.x,t.x,e),y:te(a.y,t.y,e)})}return t}),e>0&&(a.current=h,i.current=c),C.createElement(dT,{points:h,baseLine:c,needClip:t,clipPathId:n,props:r})}return e>0&&(a.current=o,i.current=s),C.createElement(db,null,l&&C.createElement("defs",null,C.createElement("clipPath",{id:"animationClipPath-".concat(n)},C.createElement(mT,{alpha:e,points:o,baseLine:s,layout:m,strokeWidth:r.strokeWidth}))),C.createElement(db,{clipPath:"url(#animationClipPath-".concat(n,")")},C.createElement(dT,{points:o,baseLine:s,needClip:t,clipPathId:n,props:r})))}),C.createElement(yN,{label:r.label}))}function yT(e){var{needClip:t,clipPathId:n,props:r}=e,a=(0,C.useRef)(null),i=(0,C.useRef)();return C.createElement(gT,{needClip:t,clipPathId:n,props:r,previousPointsRef:a,previousBaselineRef:i})}class vT extends C.PureComponent{render(){var{hide:e,dot:t,points:n,className:r,top:a,left:i,needClip:o,xAxisId:s,yAxisId:l,width:c,height:u,id:h,baseLine:d,zIndex:p}=this.props;if(e)return null;var f=j("recharts-area",r),m=h,{r:g,strokeWidth:y}=function(e){var t=Hy(e);if(null!=t){var{r:n,strokeWidth:r}=t,a=Number(n),i=Number(r);return(Number.isNaN(a)||a<0)&&(a=3),(Number.isNaN(i)||i<0)&&(i=2),{r:a,strokeWidth:i}}return{r:3,strokeWidth:2}}(t),v=xN(t),b=2*g+y,x=o?"url(#clipPath-".concat(v?"":"dots-").concat(m,")"):void 0;return C.createElement(Ub,{zIndex:p},C.createElement(db,{className:f},o&&C.createElement("defs",null,C.createElement(FN,{clipPathId:m,xAxisId:s,yAxisId:l}),!v&&C.createElement("clipPath",{id:"clipPath-dots-".concat(m)},C.createElement("rect",{x:i-b/2,y:a-b/2,width:c+b,height:u+b}))),C.createElement(yT,{needClip:o,clipPathId:m,props:this.props})),C.createElement(MN,{points:n,mainColor:sT(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:x}),this.props.isRange&&Array.isArray(d)&&C.createElement(MN,{points:d,mainColor:sT(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:x}))}}var bT={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Ph.area};function xT(e){var t,n=jv(e,bT),{activeDot:r,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:s,dot:l,fill:c,fillOpacity:u,hide:h,isAnimationActive:d,legendType:p,stroke:f,xAxisId:m,yAxisId:g}=n,y=rT(n,tT),v=Bi(),b=Dm(),{needClip:x}=DN(m,g),w=Oi(),{points:k,isRange:S,baseLine:N}=null!==(t=Va(t=>qN(t,e.id,w)))&&void 0!==t?t:{},T=Mv();if("horizontal"!==v&&"vertical"!==v||null==T)return null;if("AreaChart"!==b&&"ComposedChart"!==b)return null;var{height:I,width:E,x:A,y:O}=T;return k&&k.length?C.createElement(vT,nT({},y,{activeDot:r,animationBegin:a,animationDuration:i,animationEasing:o,baseLine:N,connectNulls:s,dot:l,fill:c,fillOpacity:u,height:I,hide:h,layout:v,isAnimationActive:"auto"===d?!vy:d,isRange:S,legendType:p,needClip:x,points:k,stroke:f,width:E,left:A,top:O,xAxisId:m,yAxisId:g})):null}var wT=(e,t,n,r,a)=>{var i=null!==n&&void 0!==n?n:t;if(Y(i))return i;var o="horizontal"===e?a:r,s=o.scale.domain();if("number"===o.type){var l=Math.max(s[0],s[1]),c=Math.min(s[0],s[1]);return"dataMin"===i?c:"dataMax"===i||l<0?l:Math.max(Math.min(s[0],s[1]),0)}return"dataMin"===i?s[0]:"dataMax"===i?s[1]:s[0]};function kT(e){var t=jv(e,bT),n=Oi();return C.createElement(QN,{id:t.id,type:"area"},e=>{return C.createElement(C.Fragment,null,C.createElement(XN,{legendPayload:lT(t)}),C.createElement(cT,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),C.createElement($N,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:(r=t.stackId,null==r?void 0:String(r)),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),C.createElement(xT,nT({},t,{id:e})));var r})}var ST=C.memo(kT,Dy);ST.displayName="Area";const NT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TT=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},IT=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var ET={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const CT=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],AT=(0,C.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:s,iconNode:l}=e,c=Te(e,CT);return(0,C.createElement)("svg",F(F(F({ref:t},ET),{},{width:r,height:r,stroke:n,strokeWidth:i?24*Number(a)/Number(r):a,className:IT("lucide",o)},!s&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"}),c),[...l.map(e=>{let[t,n]=e;return(0,C.createElement)(t,n)}),...Array.isArray(s)?s:[s]])}),OT=["className"],_T=(e,t)=>{const n=(0,C.forwardRef)((n,r)=>{let{className:a}=n,i=Te(n,OT);return(0,C.createElement)(AT,F({ref:r,iconNode:t,className:IT("lucide-".concat(NT(TT(e))),"lucide-".concat(e),a)},i))});return n.displayName=TT(e),n},MT=_T("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),RT=_T("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),DT=_T("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),FT=_T("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),PT=_T("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),LT=_T("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),zT=_T("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),jT=_T("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),BT=_T("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),UT=_T("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),WT=_T("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),VT=_T("chart-no-axes-column",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]]),GT=_T("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),HT=_T("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),KT=_T("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),qT=_T("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),XT=_T("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),YT=_T("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),ZT=_T("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),QT=_T("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),JT=_T("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),$T=_T("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),eI=_T("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),tI=_T("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var nI=n(579);const rI=function(){var e;const[t]=(0,C.useState)(1),[n]=(0,C.useState)("Dr. Aisha Khan"),[r,a]=(0,C.useState)([]),[i,o]=(0,C.useState)(null),[s,l]=(0,C.useState)([]),[c,u]=(0,C.useState)({}),[h,d]=(0,C.useState)(!1),[p,f]=(0,C.useState)(null);(0,C.useEffect)(()=>{const e=(JSON.parse(localStorage.getItem("skillpulse-bookings"))||[]).filter(e=>e.mentorId===t);a(e);const n=JSON.parse(localStorage.getItem("skillpulse-userReports"))||[];l(n)},[t]);const m=r.filter(e=>new Date(e.iso)<new Date),g=r.filter(e=>new Date(e.iso)>=new Date).sort((e,t)=>new Date(e.iso)-new Date(t.iso)),y=e=>{f(e),d(!0)},v=()=>{d(!1),f(null)};return(0,nI.jsxs)("div",{className:"page",style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,nI.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,nI.jsxs)("h1",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,nI.jsx)(JT,{size:32}),"Mentor Dashboard"]}),(0,nI.jsxs)("p",{style:{color:"var(--text-secondary)",marginTop:"0.5rem"},children:["Welcome, ",n,"! Manage your sessions and view student reports."]})]}),(0,nI.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,nI.jsxs)("div",{className:"stat-card",style:{background:"var(--card-background)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[(0,nI.jsx)("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:g.length}),(0,nI.jsx)("div",{style:{color:"var(--text-secondary)"},children:"Upcoming Sessions"})]}),(0,nI.jsxs)("div",{className:"stat-card",style:{background:"var(--card-background)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[(0,nI.jsx)("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:m.length}),(0,nI.jsx)("div",{style:{color:"var(--text-secondary)"},children:"Completed Sessions"})]}),(0,nI.jsxs)("div",{className:"stat-card",style:{background:"var(--card-background)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[(0,nI.jsx)("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:r.length}),(0,nI.jsx)("div",{style:{color:"var(--text-secondary)"},children:"Total Sessions"})]}),(0,nI.jsxs)("div",{className:"stat-card",style:{background:"var(--card-background)",padding:"1.5rem",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[(0,nI.jsx)("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:"4.9"}),(0,nI.jsx)("div",{style:{color:"var(--text-secondary)"},children:"Your Rating \u2b50"})]})]}),(0,nI.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[(0,nI.jsxs)("div",{className:"card",children:[(0,nI.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[(0,nI.jsx)(QT,{size:24}),(0,nI.jsx)("h2",{children:"Upcoming Sessions"})]}),g.length>0?(0,nI.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:g.map(e=>(0,nI.jsxs)("div",{style:{padding:"1rem",background:"var(--input-background)",borderRadius:"8px",border:"1px solid var(--border-color)",cursor:"pointer",transition:"all 0.2s"},onClick:()=>o((null===i||void 0===i?void 0:i.id)===e.id?null:e),children:[(0,nI.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,nI.jsxs)("div",{children:[(0,nI.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"0.25rem"},children:["\ud83d\udcda Booking ",e.id]}),(0,nI.jsxs)("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[(0,nI.jsx)(qT,{size:14,style:{display:"inline",marginRight:"0.25rem"}}),new Date(e.iso).toLocaleString()]})]}),(0,nI.jsx)("span",{style:{fontSize:"1.25rem"},children:"\u2192"})]}),e.notes&&(0,nI.jsxs)("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:[(0,nI.jsx)("strong",{children:"Notes:"})," ",e.notes]}),(null===i||void 0===i?void 0:i.id)===e.id&&(0,nI.jsxs)("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--border-color)"},children:[(0,nI.jsx)("label",{style:{display:"block",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Add Session Notes"}),(0,nI.jsx)("textarea",{value:c[e.id]||"",onChange:t=>u(F(F({},c),{},{[e.id]:t.target.value})),placeholder:"Add notes for this session...",style:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid var(--border-color)",minHeight:"80px",fontFamily:"inherit"}}),(0,nI.jsx)("button",{className:"btn btn-primary",onClick:()=>(e=>{const t=c[e]||"";if(!t.trim())return void alert("Please enter session notes");const n=r.map(n=>n.id===e?F(F({},n),{},{sessionNotes:t}):n);a(n),localStorage.setItem("skillpulse-bookings",JSON.stringify(n)),u(F(F({},c),{},{[e]:""})),alert("Session notes saved!")})(e.id),style:{marginTop:"0.5rem"},children:"Save Notes"})]})]},e.id))}):(0,nI.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:[(0,nI.jsx)(QT,{size:48,style:{opacity:.5,margin:"0 auto 1rem"}}),(0,nI.jsx)("p",{children:"No upcoming sessions scheduled"})]})]}),(0,nI.jsxs)("div",{className:"card",children:[(0,nI.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[(0,nI.jsx)($T,{size:24}),(0,nI.jsx)("h2",{children:"Completed Sessions"})]}),m.length>0?(0,nI.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:m.slice().reverse().map(e=>(0,nI.jsxs)("div",{style:{padding:"1rem",background:"var(--input-background)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[(0,nI.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:(0,nI.jsxs)("div",{children:[(0,nI.jsx)("div",{style:{fontWeight:"bold",marginBottom:"0.25rem"},children:"\u2705 Session Complete"}),(0,nI.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:new Date(e.iso).toLocaleString()})]})}),e.sessionNotes&&(0,nI.jsxs)("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginTop:"0.5rem",padding:"0.5rem",background:"var(--background)",borderRadius:"4px"},children:[(0,nI.jsx)("strong",{children:"Notes:"})," ",e.sessionNotes]}),(0,nI.jsxs)("button",{className:"btn btn-outline",onClick:()=>{const t=(n=e.id,s.find(e=>e.bookingId===n));var n;t?y(t):alert("No user report available for this session yet")},style:{marginTop:"0.5rem"},children:[(0,nI.jsx)(eI,{size:16}),"View User Report"]})]},e.id))}):(0,nI.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:[(0,nI.jsx)($T,{size:48,style:{opacity:.5,margin:"0 auto 1rem"}}),(0,nI.jsx)("p",{children:"No completed sessions yet"})]})]})]}),(0,nI.jsxs)("div",{className:"card",children:[(0,nI.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[(0,nI.jsx)(eI,{size:24}),(0,nI.jsx)("h2",{children:"Student Reports & Feedback"})]}),s.length>0?(0,nI.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:s.map(e=>(0,nI.jsxs)("div",{style:{padding:"1.5rem",background:"var(--input-background)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[(0,nI.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem"},children:[(0,nI.jsxs)("div",{children:[(0,nI.jsx)("div",{style:{fontWeight:"bold"},children:"\ud83d\udccb Report"}),(0,nI.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:new Date(e.submittedAt).toLocaleDateString()})]}),(0,nI.jsx)("div",{style:{display:"flex",gap:"2px"},children:[...Array(5)].map((t,n)=>(0,nI.jsx)(tI,{size:16,fill:n<e.rating?"var(--primary)":"transparent",color:"var(--primary)"},n))})]}),(0,nI.jsxs)("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:[(0,nI.jsx)("strong",{children:"Progress:"})," ",e.progress]}),(0,nI.jsxs)("div",{style:{fontSize:"0.875rem",lineHeight:"1.4",marginBottom:"1rem",maxHeight:"80px",overflow:"hidden"},children:[(0,nI.jsx)("strong",{children:"Feedback:"})," ",e.feedback]}),(0,nI.jsx)("button",{className:"btn btn-outline",onClick:()=>y(e),style:{width:"100%"},children:"View Full Report"})]},e.id))}):(0,nI.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:[(0,nI.jsx)(eI,{size:48,style:{opacity:.5,margin:"0 auto 1rem"}}),(0,nI.jsx)("p",{children:"No student reports submitted yet"})]})]}),h&&p&&(0,nI.jsx)("div",{className:"modal-overlay",onClick:v,children:(0,nI.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,nI.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"\ud83d\udccb Student Report"}),(0,nI.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[(0,nI.jsxs)("div",{children:[(0,nI.jsx)("label",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Rating"}),(0,nI.jsx)("div",{style:{display:"flex",gap:"4px",marginTop:"0.5rem"},children:[...Array(5)].map((e,t)=>(0,nI.jsx)(tI,{size:20,fill:t<p.rating?"var(--primary)":"transparent",color:"var(--primary)"},t))})]}),(0,nI.jsxs)("div",{children:[(0,nI.jsx)("label",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Submitted"}),(0,nI.jsx)("div",{style:{marginTop:"0.5rem"},children:new Date(p.submittedAt).toLocaleString()})]})]}),(0,nI.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,nI.jsx)("label",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Progress Made"}),(0,nI.jsx)("p",{style:{marginTop:"0.5rem",padding:"1rem",background:"var(--background)",borderRadius:"6px"},children:p.progress})]}),(0,nI.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,nI.jsx)("label",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Detailed Feedback"}),(0,nI.jsx)("p",{style:{marginTop:"0.5rem",padding:"1rem",background:"var(--background)",borderRadius:"6px",lineHeight:"1.6"},children:p.feedback})]}),(0,nI.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,nI.jsx)("label",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Learning Goals"}),(0,nI.jsx)("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem",fontSize:"0.875rem"},children:null===(e=p.goals)||void 0===e?void 0:e.map((e,t)=>(0,nI.jsx)("li",{style:{marginBottom:"0.5rem"},children:e},t))})]}),(0,nI.jsx)("button",{className:"btn btn-primary",onClick:v,style:{width:"100%"},children:"Close"})]})})]})},aI=_T("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const iI=function(e){let{completedBookings:t,onReportSubmitted:n}=e;const[r,a]=(0,C.useState)(null),[i,o]=(0,C.useState)(5),[s,l]=(0,C.useState)(""),[c,u]=(0,C.useState)(""),[h,d]=(0,C.useState)(["","",""]),[p,f]=(0,C.useState)(()=>{try{return JSON.parse(localStorage.getItem("skillpulse-userReports"))||[]}catch(e){return[]}});(0,C.useEffect)(()=>{localStorage.getItem("token")&&(async()=>{try{const{reports:e}=await L("/api/reports");e&&Array.isArray(e)&&(f(e),localStorage.setItem("skillpulse-userReports",JSON.stringify(e)))}catch(e){console.warn("Could not fetch reports from backend",e.message)}})()},[]);const m=e=>p.some(t=>t.bookingId===e||t._id&&e===t.bookingId);return(0,nI.jsxs)("div",{className:"card",children:[(0,nI.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1.5rem"},children:[(0,nI.jsx)(eI,{size:24}),(0,nI.jsx)("h2",{children:"Post-Session Feedback"})]}),t.length>0?(0,nI.jsxs)(nI.Fragment,{children:[(0,nI.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,nI.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"0.75rem"},children:"Select a Session to Review"}),(0,nI.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.75rem"},children:t.map(e=>(0,nI.jsxs)("button",{onClick:()=>!m(e.id)&&a(e),style:{padding:"1rem",borderRadius:"8px",border:(null===r||void 0===r?void 0:r.id)===e.id?"2px solid var(--primary)":"1px solid var(--border-color)",background:m(e.id)?"var(--background)":"var(--input-background)",cursor:m(e.id)?"not-allowed":"pointer",opacity:m(e.id)?.5:1,transition:"all 0.2s",textAlign:"left"},disabled:m(e.id),children:[(0,nI.jsx)("div",{style:{fontWeight:"bold",marginBottom:"0.25rem"},children:e.mentorName}),(0,nI.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:new Date(e.iso).toLocaleDateString()}),m(e.id)&&(0,nI.jsx)("div",{style:{fontSize:"0.75rem",marginTop:"0.25rem",color:"var(--success)"},children:"\u2713 Report Submitted"})]},e.id))})]}),r&&(0,nI.jsxs)("div",{style:{padding:"1.5rem",background:"var(--input-background)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[(0,nI.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,nI.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"0.75rem"},children:"Rate Your Session (1-5 stars)"}),(0,nI.jsx)("div",{style:{display:"flex",gap:"0.5rem"},children:[1,2,3,4,5].map(e=>(0,nI.jsx)("button",{onClick:()=>o(e),style:{background:"none",border:"none",cursor:"pointer",padding:0},children:(0,nI.jsx)(tI,{size:32,fill:e<=i?"var(--primary)":"transparent",color:"var(--primary)"})},e))})]}),(0,nI.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,nI.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"0.5rem"},children:"What progress did you make?"}),(0,nI.jsx)("textarea",{value:s,onChange:e=>l(e.target.value),placeholder:"Describe the progress or improvements you achieved from this session...",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid var(--border-color)",minHeight:"80px",fontFamily:"inherit",background:"var(--background)",color:"var(--text-primary)"}})]}),(0,nI.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,nI.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"0.5rem"},children:"Detailed Feedback"}),(0,nI.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"Share your thoughts about the session, mentor's approach, and areas for improvement...",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid var(--border-color)",minHeight:"80px",fontFamily:"inherit",background:"var(--background)",color:"var(--text-primary)"}})]}),(0,nI.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,nI.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"0.5rem"},children:"Learning Goals for Next Session (optional)"}),h.map((e,t)=>(0,nI.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...h];n[e]=t,d(n)})(t,e.target.value),placeholder:"Goal ".concat(t+1,"..."),style:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid var(--border-color)",marginBottom:"0.5rem",background:"var(--background)",color:"var(--text-primary)"}},t))]}),(0,nI.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,nI.jsxs)("button",{className:"btn btn-primary",onClick:async()=>{if(!r)return void alert("Please select a session");if(!s.trim()||!c.trim())return void alert("Please fill in all fields");const e={bookingId:r._id||r.id,mentorName:r.mentorName,sessionDate:r.date||new Date(r.iso).toLocaleDateString(),rating:parseInt(i),helpfulness:parseInt(i),clarity:parseInt(i),wouldRecommend:i>=4,feedback:"Progress: ".concat(s,"\n\nFeedback: ").concat(c).concat(h.filter(e=>e.trim()).length>0?"\n\nGoals: "+h.filter(e=>e.trim()).join(", "):"")};try{const t=await(e=>L("/api/reports",{method:"POST",body:JSON.stringify(e)}))(e),r=t.report||t,i=[...p,r];f(i),localStorage.setItem("skillpulse-userReports",JSON.stringify(i)),a(null),o(5),l(""),u(""),d(["","",""]),alert("Report submitted! Thank you for the feedback."),n&&n()}catch(t){alert(t.message||"Failed to submit report")}},style:{flex:1},children:[(0,nI.jsx)(aI,{size:16}),"Submit Report"]}),(0,nI.jsx)("button",{className:"btn btn-secondary",onClick:()=>{a(null),o(5),l(""),u(""),d(["","",""])},children:"Cancel"})]})]})]}):(0,nI.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:[(0,nI.jsx)(eI,{size:48,style:{opacity:.5,margin:"0 auto 1rem"}}),(0,nI.jsx)("p",{children:"No completed sessions to review yet"})]})]})};class oI{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class sI{refCount(e){return lI("refCount")}incRef(e){return lI("incRef")}timerAvailable(){return!0}time(e){return lI("time")}read(e){return lI("read")}readSync(e){return lI("readSync")}readToGPU(e,t){return lI("readToGPU")}numDataIds(){return lI("numDataIds")}disposeData(e,t){return lI("disposeData")}write(e,t,n){return lI("write")}move(e,t,n,r,a){return lI("move")}createTensorFromGPUData(e,t,n){return lI("createTensorFromGPUData")}memory(){return lI("memory")}floatPrecision(){return lI("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return lI("dispose")}}function lI(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function cI(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,dI(e,t,n)}function uI(e,t,n){return Math.max(e,Math.min(t,n))}function hI(e){return e%2===0?e:e+1}function dI(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function pI(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function fI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";pI(yI(e,t),()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}function mI(e){pI(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function gI(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function yI(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function vI(e){return e%1===0}function bI(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function xI(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function wI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((a,i)=>{let o=0;const s=()=>{if(e())return void a();o++;const l=t(o);null!=n&&o>=n?i():null!=r?r(s,l):setTimeout(s,l)};s()})}function kI(e,t){let n=1,r=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(i));r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found ".concat(e[i]," at dim ").concat(i));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const a=e.slice();return a[r]=t/n,a}function SI(e,t){const n=t.length;return pI((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)),pI(e.every(e=>vI(e)),()=>"All values in axis param must be integers but "+"got axis ".concat(e)),e.map(e=>e<0?n+e:e)}function NI(e,t){const n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:SI(t,e).sort();let o=0;for(let s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function TI(e,t){return II(e,t)}function II(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function EI(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function CI(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function AI(e){return"string"===typeof e||e instanceof String}function OI(e){return"number"===typeof e}function _I(e){return Array.isArray(e)?_I(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":OI(e)?"float32":AI(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function MI(e){return!!(e&&e.constructor&&e.call&&e.apply)}function RI(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function DI(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function FI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=new Array;if(1===t.length){const i=t[0]*(r?2:1);for(let t=0;t<i;t++)a[t]=n[e+t]}else{const i=t[0],o=t.slice(1),s=o.reduce((e,t)=>e*t)*(r?2:1);for(let t=0;t<i;t++)a[t]=FI(e+t*s,o,n,r)}return a}function PI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return FI(0,e,t,n)}function LI(e,t){const n=zI(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function zI(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function jI(e,t){const n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return PI(e,new Float32Array(n));if("int32"===t)return PI(e,new Int32Array(n));if("bool"===t)return PI(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function BI(e){e.forEach(t=>{pI(Number.isInteger(t)&&t>=0,()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"]."))})}function UI(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function WI(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function VI(e){return e&&e.then&&"function"===typeof e.then}const GI="tfjsflags";class HI{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=KI,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(qI().getBool("IS_TEST")||qI().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];qI().getBool("IS_TEST")||qI().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(VI(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(GI in e){e[GI].split(",").forEach(e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)})}}}function KI(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")}),t}function qI(){return YI}let XI,YI=null;function ZI(){if(null==XI){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}XI=e}return XI}function QI(e,t){const n=function(){const e=ZI();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const JI="Abs",$I="Acos",eE="Acosh",tE="Add",nE="AddN",rE="All",aE="Any",iE="ArgMax",oE="ArgMin",sE="Asin",lE="Asinh",cE="Atan",uE="Atanh",hE="Atan2",dE="AvgPool",pE="AvgPoolGrad",fE="AvgPool3D",mE="AvgPool3DGrad",gE="BatchMatMul",yE="BatchToSpaceND",vE="Bincount",bE="BitwiseAnd",xE="BroadcastArgs",wE="Cast",kE="Ceil",SE="ClipByValue",NE="Complex",TE="ComplexAbs",IE="Concat",EE="Conv2D",CE="Conv2DBackpropFilter",AE="Conv2DBackpropInput",OE="Conv3D",_E="Conv3DBackpropFilterV2",ME="Conv3DBackpropInputV2",RE="Cos",DE="Cosh",FE="Cumprod",PE="Cumsum",LE="CropAndResize",zE="DenseBincount",jE="DepthToSpace",BE="DepthwiseConv2dNative",UE="DepthwiseConv2dNativeBackpropFilter",WE="DepthwiseConv2dNativeBackpropInput",VE="Diag",GE="Dilation2D",HE="Dilation2DBackpropInput",KE="Dilation2DBackpropFilter",qE="Draw",XE="RealDiv",YE="Einsum",ZE="Elu",QE="EluGrad",JE="Erf",$E="Equal",eC="Exp",tC="ExpandDims",nC="Expm1",rC="FFT",aC="Fill",iC="FlipLeftRight",oC="Floor",sC="FloorDiv",lC="FusedBatchNorm",cC="GatherV2",uC="GatherNd",hC="Greater",dC="GreaterEqual",pC="Identity",fC="IFFT",mC="Imag",gC="IsFinite",yC="IsInf",vC="IsNan",bC="LeakyRelu",xC="Less",wC="LessEqual",kC="LinSpace",SC="Log",NC="Log1p",TC="LogicalAnd",IC="LogicalNot",EC="LogicalOr",CC="LRN",AC="LRNGrad",OC="Max",_C="Maximum",MC="MaxPool",RC="MaxPoolGrad",DC="MaxPool3D",FC="MaxPool3DGrad",PC="MaxPoolWithArgmax",LC="Mean",zC="Min",jC="Minimum",BC="MirrorPad",UC="Mod",WC="Multinomial",VC="Multiply",GC="Neg",HC="NotEqual",KC="NonMaxSuppressionV3",qC="NonMaxSuppressionV4",XC="NonMaxSuppressionV5",YC="OnesLike",ZC="OneHot",QC="Pack",JC="PadV2",$C="Pow",eA="Prelu",tA="Prod",nA="RaggedGather",rA="RaggedRange",aA="RaggedTensorToTensor",iA="Range",oA="Real",sA="Reciprocal",lA="Relu",cA="Reshape",uA="ResizeNearestNeighbor",hA="ResizeNearestNeighborGrad",dA="ResizeBilinear",pA="ResizeBilinearGrad",fA="Relu6",mA="Reverse",gA="Round",yA="Rsqrt",vA="ScatterNd",bA="TensorScatterUpdate",xA="SearchSorted",wA="Select",kA="Selu",SA="Slice",NA="Sin",TA="Sinh",IA="Sign",EA="Sigmoid",CA="Softplus",AA="Sqrt",OA="Sum",_A="SpaceToBatchND",MA="SplitV",RA="Softmax",DA="SparseFillEmptyRows",FA="SparseReshape",PA="SparseSegmentMean",LA="SparseSegmentSum",zA="SparseToDense",jA="SquaredDifference",BA="Square",UA="StaticRegexReplace",WA="StridedSlice",VA="StringNGrams",GA="StringSplit",HA="StringToHashBucketFast",KA="Sub",qA="Tan",XA="Tanh",YA="Tile",ZA="TopK",QA="Transform",JA="Transpose",$A="Unique",eO="Unpack",tO="UnsortedSegmentSum",nO="ZerosLike",rO="Step",aO="FromPixels",iO="RotateWithOffset",oO="_FusedMatMul",sO="FusedConv2D",lO="FusedDepthwiseConv2D";function cO(){qI().getBool("IS_TEST")||qI().getBool("PROD")||console.warn(...arguments)}function uO(){qI().getBool("IS_TEST")||qI().getBool("PROD")||console.log(...arguments)}const hO=QI("kernelRegistry",()=>new Map),dO=QI("gradRegistry",()=>new Map);function pO(e,t){const n=vO(e,t);return hO.get(n)}function fO(e){return dO.get(e)}function mO(e){const t=hO.entries(),n=[];for(;;){const{done:r,value:a}=t.next();if(r)break;const[i,o]=a,[s]=i.split("_");s===e&&n.push(o)}return n}function gO(e){const{kernelName:t,backendName:n}=e,r=vO(t,n);hO.has(r)&&cO("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),hO.set(r,e)}function yO(e){const{kernelName:t}=e;dO.has(t)&&qI().getBool("DEBUG")&&cO("Overriding the gradient for '".concat(t,"'")),dO.set(t,e)}function vO(e,t){return"".concat(t,"_").concat(e)}function bO(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var xO=n(7353);const wO=n.n(xO)()||xO;function kO(e){return wO.fromString(e,!0,16)}const SO=kO("c3a5c85c97cb3127"),NO=kO("b492b66fbe98f273"),TO=kO("9ae16a3b2f90404f");function IO(e){return e.xor(e.shru(47))}function EO(e,t,n){const r=e.slice(t,t+n);return wO.fromBytes(Array.from(r),!0,!0)}function CO(e,t){return EO(e,t,8)}function AO(e,t){return EO(e,t,4)}function OO(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function _O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kO("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function MO(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=OO(i.add(a).add(r),21);const o=a;return a=(a=a.add(t)).add(n),i=i.add(OO(a,44)),[a.add(r),i.add(o)]}(CO(e,t),CO(e,t+8),CO(e,t+16),CO(e,t+24),n,r)}function RO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=wO.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=TO.add(2*t),r=CO(e,0).add(TO),a=CO(e,t-8);return _O(OO(a,37).mul(n).add(r),OO(r,25).add(a).mul(n),n)}if(t>=4){const n=TO.add(2*t);return _O(AO(e,0).shl(3).add(t),AO(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return IO(TO.mul(n).xor(SO.mul(r))).mul(TO)}return TO}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=TO.add(2*t),r=CO(e,0).mul(NO),a=CO(e,8),i=CO(e,t-8).mul(n),o=CO(e,t-16).mul(TO);return _O(OO(r.add(a),43).add(OO(i,30)).add(o),r.add(OO(a.add(TO),18)).add(i),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=TO.add(2*t),r=CO(e,0).mul(TO),a=CO(e,8),i=CO(e,t-8).mul(n),o=CO(e,t-16).mul(TO),s=OO(r.add(a),43).add(OO(i,30)).add(o),l=_O(s,r.add(OO(a.add(TO),18)).add(i),n),c=CO(e,16).mul(n),u=CO(e,24),h=s.add(CO(e,t-32)).mul(n),d=l.add(CO(e,t-24)).mul(n);return _O(OO(c.add(u),43).add(OO(h,30)).add(d),c.add(OO(u.add(r),18)).add(h),n)}(e,t);let r=n,a=n.mul(NO).add(113),i=IO(a.mul(TO).add(113)).mul(TO),o=[wO.UZERO,wO.UZERO],s=[wO.UZERO,wO.UZERO];r=r.mul(TO).add(CO(e,0));let l=0;const c=64*(t-1>>6),u=c+(t-1&63)-63;do{r=OO(r.add(a).add(o[0]).add(CO(e,l+8)),37).mul(NO),a=OO(a.add(o[1]).add(CO(e,l+48)),42).mul(NO),r=r.xor(s[1]),a=a.add(o[0]).add(CO(e,l+40)),i=OO(i.add(s[0]),33).mul(NO),o=MO(e,l,o[1].mul(NO),r.add(s[0])),s=MO(e,l+32,i.add(s[1]),a.add(CO(e,l+16))),[i,r]=[r,i],l+=64}while(l!==c);const h=NO.add(i.and(255).shl(1));return l=u,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=OO(r.add(a).add(o[0]).add(CO(e,l+8)),37).mul(h),a=OO(a.add(o[1]).add(CO(e,l+48)),42).mul(h),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(CO(e,l+40))),i=OO(i.add(s[0]),33).mul(h),o=MO(e,l,o[1].mul(h),r.add(s[0])),s=MO(e,l+32,i.add(s[1]),a.add(CO(e,l+16))),[i,r]=[r,i],_O(_O(o[0],s[0],h).add(IO(a).mul(SO)).add(i),_O(o[1],s[1],h).add(r),h)}function DO(e,t){return"string"===t?LO(e):FO([e],t)}function FO(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=BO(e)),qI().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function PO(){return qI().platform.now()}function LO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",qI().platform.encode(e,t)}function zO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",qI().platform.decode(e,t)}function jO(e){return null!=qI().platform.isTypedArray?qI().platform.isTypedArray(e):bO(e)}function BO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||VI(e)||null==e||jO(e)&&n)t.push(e);else if(Array.isArray(e)||jO(e))for(let r=0;r<e.length;++r)BO(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let a=0;a<=r;a++)BO(e[a],t,n)}return t}class UO{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new VO)}profileKernel(e,t,n){let r;const a=()=>{r=n()};let i;const o=PO();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(a);else{a();for(const e of r)e.dataSync();i=Promise.resolve({kernelMs:PO()-o})}if(qI().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const t=r[s];t.data().then(n=>{WO(n,t.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:i.then(e=>e.kernelMs),extraInfo:i.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:i}=e;n.forEach(e=>{Promise.all([e.data(),r,i]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])})})}}function WO(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class VO{logKernelProfile(e,t,n,r,a,i){const o="number"===typeof r?xI("".concat(r,"ms"),9):r.error,s=xI(e,25),l=t.rank,c=t.size,u=xI(t.shape.toString(),14);let h="";for(const d in a){const e=a[d];if(null!=e){const n=e.shape||t.shape,r=n.length;h+="".concat(d,": ").concat(r,"D ").concat(r>0?n:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(l,"D ").concat(u,"\t%c").concat(c,"\t%c").concat(h,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function GO(e,t,n,r){const a=DI(t),i=function(e,t,n,r){const a=gI(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,l="complex64"===n?XO(e):e;if(s>1)for(let c=0;c<a/i;c++){const e=c*i;for(let t=0;t<i;t++)o[t]=Math.max(o[t],HO(l[e+t],0,n).length)}return o}(e,t,n,a),o=t.length,s=qO(e,t,n,a,i),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(o)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(s.map(e=>"    "+e).join("\n")),l.join("\n")}function HO(e,t,n){let r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):AI(e)?"'".concat(e,"'"):"bool"===n?KO(e):parseFloat(e.toFixed(7)).toString(),xI(r,t)}function KO(e){return 0===e?"false":"true"}function qO(e,t,n,r,a){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const o="complex64"===n?2:1,s=t[0],l=t.length;if(0===l){if("complex64"===n){return[HO(XO(e)[0],0,n)]}return"bool"===n?[KO(e[0])]:[e[0].toString()]}if(1===l){if(s>20){const t=3*o;let r=Array.from(e.slice(0,t)),i=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(r=XO(r),i=XO(i)),["["+r.map((e,t)=>HO(e,a[t],n)).join(", ")+", ..., "+i.map((e,t)=>HO(e,a[s-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?XO(e):Array.from(e)).map((e,t)=>HO(e,a[t],n)).join(", ")+"]"]}const c=t.slice(1),u=r.slice(1),h=r[0]*o,d=[];if(s>20){for(let t=0;t<3;t++){const r=t*h,i=r+h;d.push(...qO(e.slice(r,i),c,n,u,a,!1))}d.push("...");for(let t=s-3;t<s;t++){const r=t*h,i=r+h;d.push(...qO(e.slice(r,i),c,n,u,a,t===s-1))}}else for(let m=0;m<s;m++){const t=m*h,r=t+h;d.push(...qO(e.slice(t,r),c,n,u,a,m===s-1))}const p=2===l?",":"";d[0]="["+(s>0?d[0]+p:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":f),d}function XO(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class YO{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=gI(e),null!=n){const e=n.length;pI(e===this.size,()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'."))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||II(t,this.size),this.strides=DI(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),pI(n.length===this.rank,()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")"));const a=this.locToIndex(n);this.values[a]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const i of t){if(i<0||i>=this.shape[r]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}r++}let a=t[t.length-1];for(let i=0;i<t.length-1;++i)a+=this.strides[i]*t[i];return this.values[a]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return ZO().makeTensor(this.values,this.shape,this.dtype)}}let ZO=null,QO=null,JO=null;class $O{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=gI(e),this.strides=DI(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return QO.buffer(this.shape,this.dtype,e)}bufferSync(){return QO.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return PI(this.shape,e,"complex64"===this.dtype)}arraySync(){return PI(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=ZO().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map(e=>zO(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ZO().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ZO().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>zO(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ZO().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ZO().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return QO.print(this,e)}clone(){return this.throwIfDisposed(),QO.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return GO(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),QO.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),ZO().makeVariable(this,e,t,n)}}function e_(){return QI("Tensor",()=>$O)}Object.defineProperty($O,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),e_();class t_ extends $O{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!yI(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));ZO().disposeTensor(this),this.dataId=e.dataId,ZO().incRef(this,null)}dispose(){ZO().disposeVariable(this),this.isDisposedInternal=!0}}var n_,r_,a_,i_,o_;Object.defineProperty(t_,Symbol.hasInstance,{value:e=>e instanceof $O&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(n_||(n_={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(r_||(r_={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(a_||(a_={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(i_||(i_={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(o_||(o_={}));const s_={float32:i_,int32:r_,bool:a_,complex64:o_};function l_(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return s_[e][t]}function c_(e){return l_(e,"int32")}function u_(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function h_(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function d_(e,t){if(e.dtype===t.dtype)return[e,t];const n=l_(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function p_(e,t){return t.some(t=>t.id===e.id)}function f_(e){const t=[];return m_(e,t,new Set),t}function m_(e,t,n){if(null==e)return;if(e instanceof $O)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const a=e;for(const i in a){const e=a[i];n.has(e)||(n.add(e),m_(e,t,n))}}function g_(e){return null!=e.kernelName}class y_{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class v_{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new y_}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(cO("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new UO(this.backendInstance),!0}setupRegisteredKernels(){mO(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){mO(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof sI||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,cO("Initialization of backend ".concat(e," failed")),cO(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return cO("Initialization of backend ".concat(e," failed")),cO(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return v_.nextTensorId++}nextVariableId(){return v_.nextVariableId++}clone(e){const t=x_.runKernel(pC,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],e=>({x:()=>{const t={x:e},n={dtype:"float32"};return x_.runKernel(wE,t,n)}}),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=pO(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;let o,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=g_(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(g_(e)){const{kernelName:t,inputs:a,attrs:i}=e;null==this.backendName&&this.backend;const l=pO(t,this.backendName);pI(null!=l,()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'")),o=()=>{const e=this.backend.numDataIds();s=l.kernelFunc({inputs:a,attrs:i,backend:this.backend});const o=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,o);const c=o.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(r){const e=this.getTensorsForGradient(t,a,c);n=this.saveTensorsForBackwardMode(e)}return c}}else{const{forwardFunc:t}=e,a=e=>{r&&(n=e.map(e=>this.keep(this.clone(e))))};o=()=>{const e=this.backend.numDataIds();s=this.tidy(()=>t(this.backend,a));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:c,attrs:u}=e,h=g_(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,c,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=o()}),r&&this.addTapeNode(l,c,t,h,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(e=>null!=c[e]?c[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map(e=>this.keep(this.clone(e)));return t}getTensorsForGradient(e,t,n){const r=fO(e);if(null!=r){const e=r.inputsToSave||[],a=r.outputsToSave||[];let i;r.saveAllInputs?(pI(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),i=Object.keys(t).map(e=>t[e])):i=e.map(e=>t[e]);const o=n.filter((e,t)=>a[t]);return i.concat(o)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;"string"===n&&AI(e[0])&&(a=e.map(e=>LO(e)));const i=r.write(a,t,n),o=new $O(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){const e=this.state.tensorInfo.get(i),t=function(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return o}makeTensorFromDataId(e,t,n,r){const a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:a}=e,i=new $O(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const a=new t_(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*CI(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof t_||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*CI(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},s=fO(e);null!=s&&(r=s.gradFunc),null!=r&&(o.gradient=e=>(e=e.map((e,t)=>{if(null==e){const e=n[t],r=zI(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],a,i))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=f_(e),n=new Set(t.map(e=>e.id));for(let a=0;a<this.state.activeScope.track.length;a++){const e=this.state.activeScope.track[a];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(pI(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));pI(a instanceof $O,()=>"The result y returned by f() must be a tensor.");const i=function(e,t,n){const r={},a={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],i=n.inputs;for(const e in i){const o=i[e];let s=!1;for(let e=0;e<t.length;e++)if(r[o.id]){n.outputs.forEach(e=>r[e.id]=!0),s=!0,a[n.id]=!0;break}if(s)break}}const i={};i[n.id]=!0;const o={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(i[t.outputs[e].id]){for(const e in n)i[n[e].id]=!0,o[t.id]=!0;break}}const s=[];for(let l=0;l<e.length;l++){const t=e[l];if(a[t.id]&&o[t.id]){const e={};for(const a in t.inputs){const n=t.inputs[a];r[n.id]&&(e[a]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,a);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[a.id]=null==n?function(e){const t=LI(gI(e),"float32");return x_.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){const i=t[a],o=[];if(i.outputs.forEach(t=>{const n=e[t.id];null!=n?o.push(n):o.push(null)}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));const s=i.gradient(o);for(const t in i.inputs){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));const a=n(()=>s[t]());if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));const o=i.inputs[t];if(!yI(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{const t=e[o.id];e[o.id]=r(t,a),t.dispose()}}}}(e,i,e=>this.tidy(e),w_);const r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:r}})}customGrad(e){var t=this;return pI(MI(e),()=>"The f passed in customGrad(f) must be a function."),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];let i;pI(r.every(e=>e instanceof $O),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const o={};r.forEach((e,t)=>{o[t]=e});return t.runKernelFunc({forwardFunc:(t,n)=>(i=e(...r,n),pI(i.value instanceof $O,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),pI(MI(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),backwardsFunc:(e,t)=>{const n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];pI(a.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),pI(a.every(e=>e instanceof $O),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const o={};return a.forEach((e,t)=>{o[t]=()=>e}),o},inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=PO(),n=await this.backend.time(e);return n.wallMs=PO()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new y_;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function b_(){const e=ZI();if(null==e._tfengine){const t=new HI(e);e._tfengine=new v_(t)}var t;return t=e._tfengine.ENV,YI=t,function(e){ZO=e}(()=>e._tfengine),e._tfengine}v_.nextTensorId=0,v_.nextVariableId=0;const x_=b_();function w_(e,t){const n={a:e,b:t};return x_.runKernel(tE,n)}let k_;function S_(e){if(void 0!==k_)return k_;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function N_(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const T_=qI();function I_(e,t){let n=e;if(jO(e))return"string"===t?[]:[e.length];if(u_(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(h_(e))return[e.buffer.size/(null==t?4:CI(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||jO(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&qI().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&E_(e,r,[]),r}function E_(e,t,n){if(n=n||[],!Array.isArray(e)&&!jO(e))return void pI(0===t.length,()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements"));pI(t.length>0,()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")),pI(e.length===t[0],()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements"));const r=t.slice(1);for(let a=0;a<e.length;++a)E_(e[a],r,n.concat(a))}function C_(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function A_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof e_())return C_(r,e.dtype,t,n),e;let a=_I(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),C_(r,a,t,n),null==e||!jO(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(r,"'"))}const i=I_(e,a);jO(e)||Array.isArray(e)||(e=[e]);const o="string"!==a?FO(e,a):BO(e,[],!0);return x_.makeTensor(o,i,a)}function O_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((e,a)=>A_(e,"".concat(t,"[").concat(a,"]"),n,r))}T_.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),T_.registerFlag("IS_BROWSER",()=>N_()),T_.registerFlag("IS_NODE",()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node),T_.registerFlag("IS_CHROME",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),T_.registerFlag("IS_SAFARI",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),T_.registerFlag("PROD",()=>!1),T_.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>T_.getBool("DEBUG")),T_.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),T_.registerFlag("IS_TEST",()=>!1),T_.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>T_.getBool("DEBUG")),T_.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),T_.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),T_.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);const __="__op";function M_(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=__;const a=function(){x_.startScope(n);try{const e=r(...arguments);return VI(e)&&console.error("Cannot return a Promise inside of tidy."),x_.endScope(e),e}catch(e){throw x_.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}const R_=M_({complex_:function(e,t){const n=A_(e,"real","complex"),r=A_(t,"imag","complex");fI(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");const a={real:n,imag:r};return x_.runKernel(NE,a)}});function D_(e,t,n,r){if(null==r)r=_I(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(h_(e)||u_(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return x_.backend.createTensorFromGPUData(e,t||n,r)}if(!jO(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){BI(t);const e=gI(t),r=gI(n);pI(e===r,()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(r));for(let a=0;a<n.length;++a){const e=n[a],r=a!==n.length-1||e!==gI(t.slice(a));pI(n[a]===t[a]||!r,()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). "))}}return jO(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?FO(e,r):BO(e,[],!0),x_.makeTensor(e,t,r)}function F_(e,t,n){return D_(e,t,I_(e,n),n)}const P_={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class L_{static join(e){return new L_(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map(e=>jO(e)?e.buffer:e)).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=t+r.byteLength;this.shards.push({buffer:r,start:t,end:a}),t=a}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const r=new ArrayBuffer(t-e),a=new Uint8Array(r);let i=0;for(let o=n;o<this.shards.length;o++){const n=this.shards[o],r=e+i-n.start,s=i,l=Math.min(t,n.end)-n.start,c=new Uint8Array(n.buffer,r,l-r);if(a.set(c,s),i+=c.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const a=Math.floor((r-n)/2)+n,i=t(e[a]);if(0===i)return a;i<0?r=a:n=a+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function z_(){return x_}function j_(){return x_.memory()}function B_(e,t){return x_.tidy(e,t)}function U_(e){f_(e).forEach(e=>e.dispose())}function W_(e){return x_.keep(e)}function V_(){return x_.backendName}function G_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return x_.registerBackend(e,t,n)}function H_(){return x_.backend}!function(e){JO=e}(function(e){qI().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")});const K_=4;async function q_(e,t){const n=[],r=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let i=0;i<a.length;++i){const o=a[i],s=Array.isArray(e)?e[i].tensor:e[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));const l={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise(async e=>{const t=await s.bytes(),n=t.reduce((e,t)=>e+t.length,0)+K_*t.length,r=new Uint8Array(n);let a=0;for(let i=0;i<t.length;i++){const e=t[i],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,a),a+=K_,r.set(e,a),a+=e.length}e(r)});r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:eM(await Promise.all(r)),specs:n}}function X_(e,t){const n=new L_(e),r={};let a=0;for(const i of t){const e=Y_(i,(e,t)=>n.slice(a+e,a+t));r[i.name]=Q_(i,n.slice(a,a+e)),a+=e}return r}function Y_(e,t){const n=gI(e.shape);let r;if("quantization"in e){const t=e.quantization;r=P_[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=K_+new Uint32Array(t(e,e+K_))[0];return e}r=P_[e.dtype]}return n*r}async function Z_(e,t){const n=gI(e.shape);let r;if("quantization"in e){const t=e.quantization;r=P_[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=K_+new Uint32Array(await t(e,e+K_))[0];return e}r=P_[e.dtype]}return n*r}function Q_(e,t){const n=e.name,r=e.dtype,a=e.shape,i=gI(a);let o,s=0;if("quantization"in e){const a=e.quantization;if("uint8"===a.dtype||"uint16"===a.dtype){if(!("min"in a)||!("scale"in a))throw new Error("Weight ".concat(e.name," with quantization ").concat(a.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==a.dtype)throw new Error("Weight ".concat(e.name," has unknown ")+"quantization dtype ".concat(a.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==r)throw new Error("Weight ".concat(e.name," is quantized with ").concat(a.dtype," ")+"which only supports weights of type float32 not ".concat(r,"."))}const l=P_[a.dtype],c="uint8"===a.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===r)if("uint8"===a.dtype||"uint16"===a.dtype){o=new Float32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];o[e]=t*a.scale+a.min}}else{if("float16"!==a.dtype)throw new Error("Unsupported quantization type ".concat(a.dtype," ")+"for weight type float32.");{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0===(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let o=0;o<r.length;o++){const a=r[o],s=e[n[a>>10]+(1023&a)]+t[a>>10];i[o]=s}return new Float32Array(a)}}();o=e(c)}}else{if("int32"!==r)throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r));if("uint8"!==a.dtype&&"uint16"!==a.dtype)throw new Error("Unsupported quantization type ".concat(a.dtype," ")+"for weight type int32.");o=new Int32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];o[e]=Math.round(t*a.scale+a.min)}}s+=i*l}else if("string"===r){const n=gI(e.shape);o=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(s,s+K_))[0];s+=K_;const n=new Uint8Array(t.slice(s,s+e));o.push(n),s+=e}}else{const e=P_[r];if("float32"===r)o=new Float32Array(t);else if("int32"===r)o=new Int32Array(t);else{if("bool"!==r){if("complex64"===r){o=new Float32Array(t);const e=new Float32Array(o.length/2),n=new Float32Array(o.length/2);for(let t=0;t<e.length;t++)e[t]=o[2*t],n[t]=o[2*t+1];const r=F_(e,a,"float32"),i=F_(n,a,"float32"),s=R_(r,i);return r.dispose(),i.dispose(),s}throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r))}o=new Uint8Array(t)}s+=i*e}return F_(o,a,r)}async function J_(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:t,value:a}=await e.read();if(t&&null==a){const e=n-r.byteLength;throw new Error("Reader is done but ".concat(e," bytes are still expected"))}const i=new Uint8Array(r.length+a.byteLength);i.set(r,0),i.set(new Uint8Array(a),r.length),r=i}return r.buffer}async function $_(e,t){const n={},r=e.getReader();let a=new ArrayBuffer(0);for(const i of t){const e=await Z_(i,async(e,t)=>(a=await J_(r,a,t),a.slice(e,t)));a=await J_(r,a,e);const t=a.slice(0,e);a=a.slice(e);const o=Q_(i,t);if(n[i.name]=o,"webgpu"===V_()){const e=H_();"uploadToGPU"in e&&gI(o.shape)>=qI().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(o.dataId)}}return n}function eM(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))});const r=new Uint8Array(t);let a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}const tM="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function nM(e){return tM?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function rM(e){return L_.join(e)}function aM(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function iM(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function oM(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function sM(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),oM(e,n,r)}function lM(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:nM(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:nM(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new L_(e.weightData).byteLength}}function cM(e){const t=[];for(const n of e)t.push(...n.weights);return t}class uM{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==uM.instance&&(uM.instance=new uM),uM.instance}static registerSaveRouter(e){uM.getInstance().saveRouters.push(e)}static registerLoadRouter(e){uM.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return uM.getHandlers(e,"save")}static getLoadHandlers(e,t){return uM.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?uM.getInstance().loadRouters:uM.getInstance().saveRouters).forEach(t=>{const a=t(e,n);null!==a&&r.push(a)}),r}}const hM=e=>uM.registerSaveRouter(e),dM=e=>uM.registerLoadRouter(e),pM=e=>uM.getSaveHandlers(e),fM=(e,t)=>uM.getLoadHandlers(e,t),mM="tensorflowjs",gM="models_store",yM="model_info_store";function vM(){if(!qI().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function bM(e){const t=e.result;t.createObjectStore(gM,{keyPath:"modelPath"}),t.createObjectStore(yM,{keyPath:"modelPath"})}class xM{constructor(e){if(this.indexedDB=vM(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{const r=this.indexedDB.open(mM,1);r.onupgradeneeded=()=>bM(r),r.onsuccess=()=>{const a=r.result;if(null==t){const t=a.transaction(gM,"readonly"),r=t.objectStore(gM).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{t.weightData=L_.join(t.weightData);const r=lM(t),o=a.transaction(yM,"readwrite");let s,l,c=o.objectStore(yM);try{s=c.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(i){return n(i)}s.onsuccess=()=>{l=a.transaction(gM,"readwrite");const s=l.objectStore(gM);let u;try{u=s.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(i){return n(i)}u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{c=o.objectStore(yM);const t=c.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(u.error)),t.onerror=e=>(a.close(),n(u.error))}},s.onerror=e=>(a.close(),n(s.error)),o.oncomplete=()=>{null==l?a.close():l.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)})}}xM.URL_SCHEME="indexeddb://";const wM=e=>{return qI().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(xM.URL_SCHEME)?(t=e.slice(xM.URL_SCHEME.length),new xM(t)):null;var t};uM.registerSaveRouter(wM),uM.registerLoadRouter(wM);class kM{constructor(){this.indexedDB=vM()}async listModels(){return new Promise((e,t)=>{const n=this.indexedDB.open(mM,1);n.onupgradeneeded=()=>bM(n),n.onsuccess=()=>{const r=n.result,a=r.transaction(yM,"readonly"),i=a.objectStore(yM).getAll();i.onsuccess=()=>{const t={};for(const e of i.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},i.onerror=e=>(r.close(),t(i.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){var t;return e=(t=e).startsWith(xM.URL_SCHEME)?t.slice(xM.URL_SCHEME.length):t,new Promise((t,n)=>{const r=this.indexedDB.open(mM,1);r.onupgradeneeded=()=>bM(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(yM,"readwrite"),o=i.objectStore(yM),s=o.get(e);let l;s.onsuccess=()=>{if(null==s.result)return a.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const r=o.delete(e),i=()=>{l=a.transaction(gM,"readwrite");const r=l.objectStore(gM).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=i,r.onerror=e=>(i(),a.close(),n(s.error))}},s.onerror=e=>(a.close(),n(s.error)),i.oncomplete=()=>{null==l?a.close():l.oncomplete=()=>a.close()}},r.onerror=e=>n(r.error)})}}const SM="/",NM="tensorflowjs_models",TM="info",IM="model_topology",EM="weight_specs",CM="weight_data",AM="model_metadata";function OM(e){return{info:[NM,e,TM].join(SM),topology:[NM,e,IM].join(SM),weightSpecs:[NM,e,EM].join(SM),weightData:[NM,e,CM].join(SM),modelMetadata:[NM,e,AM].join(SM)}}function _M(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function MM(e){const t=e.split(SM);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(SM)}class RM{constructor(e){if(!qI().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=OM(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=lM(e),i=L_.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(tM)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(i));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:a}}catch(t){throw _M(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){const e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(null==i)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(tM){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(i),t}}RM.URL_SCHEME="localstorage://";const DM=e=>{return qI().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(RM.URL_SCHEME)?(t=e.slice(RM.URL_SCHEME.length),new RM(t)):null;var t};uM.registerSaveRouter(DM),uM.registerLoadRouter(DM);class FM{constructor(){pI(qI().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),pI("undefined"===typeof window||"undefined"!==typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=NM+SM,n=SM+TM;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(n)){e[MM(a)]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){var t;const n=OM(e=(t=e).startsWith(RM.URL_SCHEME)?t.slice(RM.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const r=JSON.parse(this.LS.getItem(n.info));return _M(n),r}}const PM="://";class LM{constructor(){this.managers={}}static getInstance(){return null==LM.instance&&(LM.instance=new LM),LM.instance}static registerManager(e,t){pI(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(PM)&&(e=e.slice(0,e.indexOf(PM))),pI(e.length>0,()=>"scheme must not be an empty string.");const n=LM.getInstance();pI(null==n.managers[e],()=>"A model store manager is already registered for scheme '".concat(e,"'.")),n.managers[e]=t}static getManager(e){const t=LM.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(LM.getInstance().managers)}}function zM(e){if(-1===e.indexOf(PM))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(LM.getSchemes().join(",")));return{scheme:e.split(PM)[0],path:e.split(PM)[1]}}async function jM(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];pI(e!==t,()=>"Old path and new path are the same: '".concat(e,"'"));const r=uM.getLoadHandlers(e);pI(r.length>0,()=>"Copying failed because no load handler is found for source URL ".concat(e,".")),pI(r.length<2,()=>"Copying failed because more than one (".concat(r.length,") ")+"load handlers for source URL ".concat(e,"."));const a=r[0],i=uM.getSaveHandlers(t);pI(i.length>0,()=>"Copying failed because no save handler is found for destination "+"URL ".concat(t,".")),pI(i.length<2,()=>"Copying failed because more than one (".concat(r.length,") ")+"save handlers for destination URL ".concat(t,"."));const o=i[0],s=zM(e).scheme,l=zM(e).path,c=s===zM(e).scheme,u=await a.load();n&&c&&await LM.getManager(s).removeModel(l);const h=await o.save(u);return n&&!c&&await LM.getManager(s).removeModel(l),h.modelArtifactsInfo}async function BM(){const e=LM.getSchemes(),t={};for(const n of e){const e=await LM.getManager(n).listModels();for(const r in e){t[n+PM+r]=e[r]}}return t}async function UM(e){const t=zM(e);return LM.getManager(t.scheme).removeModel(t.path)}async function WM(e,t){return jM(e,t,!1)}async function VM(e,t){return jM(e,t,!0)}class GM{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&qI().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))):setTimeout(e,t)}isTypedArray(e){return bO(e)}}if(qI().get("IS_BROWSER")){qI().setPlatform("browser",new GM);try{LM.registerManager(RM.URL_SCHEME,new FM)}catch(uoe){}try{LM.registerManager(xM.URL_SCHEME,new kM)}catch(uoe){}}const HM=()=>n(5817);let KM;class qM{constructor(){this.util=n(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=qI().global.fetch?qI().global.fetch(e,t):(null==KM&&(KM=HM()),KM(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function XM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",BI(e),new YO(e,t,n)}qI().get("IS_NODE")&&!qI().get("IS_BROWSER")&&qI().setPlatform("node",new qM);const YM=M_({cast_:function(e,t){const n=A_(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:t};return x_.runKernel(wE,r,a)}});const ZM=M_({clone_:function(e){const t={x:A_(e,"x","clone","string_or_numeric")};return x_.runKernel(pC,t)}});function QM(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}b_();QO={buffer:XM,cast:YM,clone:ZM,print:QM};const JM=M_({add_:function(e,t){let n=A_(e,"a","add"),r=A_(t,"b","add");[n,r]=d_(n,r);const a={a:n,b:r};return x_.runKernel(tE,a)}});const $M=M_({floorDiv_:function(e,t){let n=A_(e,"a","floorDiv"),r=A_(t,"b","floorDiv");[n,r]=d_(n,r);const a={a:n,b:r};return x_.runKernel(sC,a)}});const eR=M_({div_:function(e,t){let n=A_(e,"a","div"),r=A_(t,"b","div");if([n,r]=d_(n,r),"int32"===n.dtype&&"int32"===r.dtype)return $M(n,r);const a={a:n,b:r};return x_.runKernel(XE,a,{})}});const tR=M_({mul_:function(e,t){let n=A_(e,"a","mul"),r=A_(t,"b","mul");[n,r]=d_(n,r);const a={a:n,b:r};return x_.runKernel(VC,a)}});const nR=M_({sqrt_:function(e){const t={x:A_(e,"x","sqrt","float32")};return x_.runKernel(AA,t)}});const rR=M_({square_:function(e){const t=A_(e,"x","square");return x_.runKernel("Square",{x:t},{})}});const aR=M_({zerosLike_:function(e){const t={x:A_(e,"x","zerosLike")};return x_.runKernel(nO,t)}});function iR(e){return x_.customGrad(e)}function oR(e,t){if((jO(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&jO(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return D_(e,[],[],t)}const sR=new Map,lR=new Map;class cR{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class uR{constructor(){this.classNameMap={}}static getMap(){return null==uR.instance&&(uR.instance=new uR),uR.instance}static register(e){uR.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function hR(e,t,n){pI(null!=e.className,()=>"Class being registered does not have the static className property defined."),pI("string"===typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),pI(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return uR.register(e),sR.set(r,e),lR.set(e,r),e}class dR extends cR{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){const e=n.map(e=>({name:e.name,tensor:a[e.name]}));this.applyGradients(e)}else this.applyGradients(a);return U_(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){pI(MI(e),()=>"The f passed in variableGrads(f) must be a function"),pI(null==t||Array.isArray(t)&&t.every(e=>e instanceof t_),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const e in x_.registeredVariables)t.push(x_.registeredVariables[e])}const r=n?t.filter(e=>!e.trainable):null,a=t.length;t=t.filter(e=>e.trainable),pI(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(a," variables is ")+"trainable.");const{value:i,grads:o}=x_.gradients(e,t,null,!0);pI(o.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),pI(0===i.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(i.rank," tensor"));const s={};return t.forEach((e,t)=>{null!=o[t]&&(s[e.name]=o[t])}),null!=r&&r.forEach(e=>s[e.name]=null),{value:i,grads:s}}(e,t)}dispose(){null!=this.iterations_&&U_(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:oR(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(dR,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class pR extends dR{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=x_.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=x_.registeredVariables[t],a=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:B_(()=>aR(r).variable(a))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:B_(()=>aR(r).variable(a))});const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const o=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;B_(()=>{const e=JM(tR(o,this.rho),tR(rR(i),1-this.rho)),t=tR(eR(nR(JM(s,this.epsilon)),nR(JM(o,this.epsilon))),i),n=JM(tR(s,this.rho),tR(rR(t),1-this.rho));o.assign(e),s.assign(n);const a=JM(tR(t,-this.learningRate),r);r.assign(a)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(U_(this.accumulatedGrads.map(e=>e.variable)),U_(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function fR(e,t,n){BI(e);const r={shape:e,value:t,dtype:n=n||_I(t)};return x_.runKernel(aC,{},r)}class mR extends dR{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=x_.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:B_(()=>fR(r.shape,this.initialAccumulatorValue).variable(e))}}const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const i=this.accumulatedGrads[n].variable;B_(()=>{const e=JM(i,rR(a));i.assign(e);const t=JM(tR(eR(a,nR(JM(e,x_.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&U_(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const gR=M_({pow_:function(e,t){let n=A_(e,"base","pow"),r=A_(t,"exp","pow");[n,r]=d_(n,r);const a={a:n,b:r};return x_.runKernel($C,a)}});const yR=M_({sub_:function(e,t){let n=A_(e,"a","sub"),r=A_(t,"b","sub");[n,r]=d_(n,r);const a={a:n,b:r};return x_.runKernel(KA,a)}});class vR extends dR{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],B_(()=>{this.accBeta1=oR(t).variable(),this.accBeta2=oR(n).variable()}),null==r&&(this.epsilon=x_.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);B_(()=>{const n=yR(1,this.accBeta1),r=yR(1,this.accBeta2);t.forEach((t,a)=>{const i=x_.registeredVariables[t],o=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:"".concat(t,"/m"),variable:B_(()=>aR(i).variable(o))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:"".concat(t,"/v"),variable:B_(()=>aR(i).variable(o))});const s=Array.isArray(e)?e[a].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[a].variable,c=this.accumulatedSecondMoment[a].variable,u=JM(tR(l,this.beta1),tR(s,1-this.beta1)),h=JM(tR(c,this.beta2),tR(rR(s),1-this.beta2)),d=eR(u,n),p=eR(h,r);l.assign(u),c.assign(h);const f=JM(tR(eR(d,JM(nR(p),this.epsilon)),-this.learningRate),i);i.assign(f)}),this.accBeta1.assign(tR(this.accBeta1,this.beta1)),this.accBeta2.assign(tR(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&U_(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&U_(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),B_(()=>{this.accBeta1.assign(gR(this.beta1,this.iterations_+1)),this.accBeta2.assign(gR(this.beta2,this.iterations_+1))});const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const bR=M_({abs_:function(e){const t=A_(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return x_.runKernel(TE,e)}{const e={x:t};return x_.runKernel(JI,e)}}});function xR(e,t){const n=e.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function wR(e,t){const n=[];for(let r=0;r<t.length;r++){const a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function kR(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let a=0;a<n;a++){let i=e[e.length-a-1];null==i&&(i=1);let o=t[t.length-a-1];if(null==o&&(o=1),1===i)r[n-a-1]=o;else if(1===o)r[n-a-1]=i;else{if(i!==o){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}r[n-a-1]=i}}return r}const SR=M_({maximum_:function(e,t){let n=A_(e,"a","maximum"),r=A_(t,"b","maximum");[n,r]=d_(n,r),"bool"===n.dtype&&(n=YM(n,"int32"),r=YM(r,"int32")),kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(_C,a)}});class NR extends dR{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],B_(()=>{this.iteration=oR(0).variable(),this.accBeta1=oR(t).variable()}),null==r&&(this.epsilon=x_.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);B_(()=>{const n=yR(1,this.accBeta1),r=eR(-this.learningRate,JM(tR(this.iteration,this.decay),1));t.forEach((t,a)=>{const i=x_.registeredVariables[t],o=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:"".concat(t,"/m"),variable:aR(i).variable(o)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:"".concat(t,"/v"),variable:aR(i).variable(o)});const s=Array.isArray(e)?e[a].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[a].variable,c=this.accumulatedWeightedInfNorm[a].variable,u=JM(tR(l,this.beta1),tR(s,1-this.beta1)),h=tR(c,this.beta2),d=bR(s),p=SR(h,d);l.assign(u),c.assign(p);const f=JM(tR(eR(r,n),eR(u,JM(p,this.epsilon))),i);i.assign(f)}),this.iteration.assign(JM(this.iteration,1)),this.accBeta1.assign(tR(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&U_(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&U_(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class TR extends dR{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const a=x_.registeredVariables[t];B_(()=>{const e=JM(tR(this.c,r),a);a.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=W_(oR(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class IR extends TR{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=oR(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=x_.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:B_(()=>aR(r).variable(e))}}const a=this.accumulations[n].variable,i=Array.isArray(e)?e[n].tensor:e[t];null!=i&&B_(()=>{let e;const t=JM(tR(this.m,a),i);e=this.useNesterov?JM(tR(this.c,JM(i,tR(t,this.m))),r):JM(tR(this.c,t),r),a.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&U_(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class ER extends dR{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=x_.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=x_.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:B_(()=>aR(r).variable(a))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:B_(()=>aR(r).variable(a))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:B_(()=>aR(r).variable(a))});const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const o=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;B_(()=>{const e=JM(tR(o,this.decay),tR(rR(i),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,a=JM(tR(t,this.decay),tR(i,1-this.decay)),l=eR(tR(i,this.learningRate),nR(yR(e,JM(rR(a),this.epsilon)))),c=JM(tR(s,this.momentum),l);o.assign(e),t.assign(a),s.assign(c);const u=yR(r,c);r.assign(u)}else{const e=JM(tR(o,this.decay),tR(rR(i),1-this.decay)),t=JM(tR(s,this.momentum),eR(tR(i,this.learningRate),nR(JM(e,this.epsilon))));o.assign(e),s.assign(t);const n=yR(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&U_(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&U_(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&U_(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const CR=[pR,mR,vR,NR,IR,ER,TR];function AR(e){return new Promise(e=>setTimeout(e)).then(e)}class OR{constructor(e){if(!qI().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(OR.URL_SCHEME)&&(e=e.slice(OR.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=L_.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=iM(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=r,await AR(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await AR(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:lM(e)}}}}OR.URL_SCHEME="downloads://";class _R{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),a=r.modelTopology;if(null==a)return void t(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));if(null==r.weightsManifest)return void t(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));if(0===this.weightsFiles.length)return void e({modelTopology:a});const i=sM(r,e=>this.loadWeights(e));e(i)},n.onerror=e=>t("Failed to read model topology and weights manifest JSON "+"from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only."),n.readAsText(this.jsonFile)})}loadWeights(e){const t=[],n=[];for(const i of e)t.push(...i.weights),n.push(...i.paths);const r=this.checkManifestAndWeightFiles(e),a=n.map(e=>this.loadWeightsFile(e,r[e]));return Promise.all(a).then(e=>[t,e])}loadWeightsFile(e,t){return new Promise((n,r)=>{const a=new FileReader;a.onload=e=>{const t=e.target.result;n(t)},a.onerror=t=>r("Failed to weights data from file of path '".concat(e,"'.")),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map(e=>aM(e.name)),r={};for(const a of e)a.paths.forEach(e=>{const a=aM(e);if(-1!==t.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(a,"'"));if(t.push(a),-1===n.indexOf(a))throw new Error("Weight file with basename '".concat(a,"' is not provided."));r[e]=this.weightsFiles[n.indexOf(a)]});if(t.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(t.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return r}}function MR(e){return new _R(e)}function RR(e,t,n,r){!function(e){pI(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array")}(e),function(e,t){pI(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)),pI(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)),pI(t>=e,()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t))}(n=null==n?0:n,r=null==r?1:r);let a=0;return Promise.all(e.map(i=>(i.then(i=>{const o=n+ ++a/e.length*(r-n);return t(o),i}),i)))}async function DR(e,t){null==t&&(t={});const n=null==t.fetchFunc?qI().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),a=(null==t.onProgress?await Promise.all(r):await RR(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(a):await RR(a,t.onProgress,.5,1)}async function FR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return PR(e=>DR(e,{requestInit:r}))(e,t,n)}function PR(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;const a=t.map(()=>!1),i={},o=null!=r?r.map(()=>!1):[],s=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{const l="quantization"in e?e.quantization.dtype:e.dtype,c=P_[l]*gI(e.shape),u=()=>{a[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=r?r.forEach((t,n)=>{t===e.name&&(u(),o[n]=!0)}):u(),s.push(e.name),n+=c})}),!o.every(e=>e)){const e=r.filter((e,t)=>!o[t]);throw new Error("Could not find weights in manifest with names: "+"".concat(e.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(s.join(", "),"."))}const l=a.reduce((e,t,n)=>(t&&e.push(n),e),[]),c=[];l.forEach(e=>{t[e].paths.forEach(e=>{const t=n+(n.endsWith("/")?"":"/")+e;c.push(t)})});const u=await e(c),h={};let d=0;return l.forEach(e=>{const n=t[e].paths.length,r=new L_(u.slice(d,d+n));i[e].forEach(e=>{const t=X_(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)h[n]=t[n]}),d+=n}),h}}uM.registerSaveRouter(e=>qI().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(OR.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new OR(e)}(e.slice(OR.URL_SCHEME.length)):null);class LR{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(pI("function"===typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=qI().platform.fetch,pI(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&pI(2===e.length,()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,").")),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=iM(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=L_.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:lM(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(a){let e="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return sM(await this.loadModelJSON(),e=>this.loadWeights(e))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=cM(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?qI().platform.fetch:t.fetchFunc;let a,i=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var o;i<e.length;){if(!a){const n=(await r(e[i],t.requestInit,{isBinary:!0})).body;a=n.getReader()}const{done:s,value:l}=await a.read();if(!s)return void n.enqueue(l);i++,a=void 0,null===(o=t.onProgress)||void 0===o||o.call(t,i/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}(t),a=this.weightPathPrefix||n,i=[],o=[];for(const s of e)for(const e of s.paths)null!=this.weightUrlConverter?o.push(this.weightUrlConverter(e)):i.push(a+e+r);return this.weightUrlConverter&&i.push(...await Promise.all(o)),i}async loadWeights(e){const t=await this.getWeightUrls(e);return[cM(e),await DR(t,this.loadOptions)]}}function zR(e){return null!=e.match(LR.URL_SCHEME_REGEX)}LR.URL_SCHEME_REGEX=/^https?:\/\//;const jR=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>zR(e)):zR(e),n)return BR(e,t)}return null};function BR(e,t){return new LR(e,t)}function UR(e,t){return BR(e,t)}uM.registerSaveRouter(jR),uM.registerLoadRouter(jR);class WR{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class VR{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class GR{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function HR(e,t,n,r){return new GR(KR(...arguments))}function KR(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new WR(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WR({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WR({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function qR(e){return new VR(e)}function XR(e){return new VR(e)}function YR(e,t,n){if(mI(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=I_(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return D_(e,t,r,n)}let ZR,QR=!1;function JR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(null!=pO(aO,x_.backendName)){const n={pixels:e},r={numChannels:t};return x_.runKernel(aO,n,r)}const[l,c]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];let u,h;if(o)u=e.getContext("2d").getImageData(0,0,l,c).data;else if(r||n)u=e.data;else if(i||a||s){if(null==ZR)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");ZR=new OffscreenCanvas(1,1).getContext("2d")}else ZR=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});ZR.canvas.width=l,ZR.canvas.height=c,ZR.drawImage(e,0,0,l,c),u=ZR.getImageData(0,0,l,c).data}if(4===t)h=new Int32Array(u);else{const e=l*c;h=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)h[n*t+e]=u[4*n+e]}return YR(h,[c,l,t],"int32")}function $R(e){if(2!==e.rank&&3!==e.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(e.rank,"."));const t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(t));if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error("Unsupported type for toPixels: ".concat(e.dtype,".")+" Please use float32 or int32 tensors.")}async function eD(e,t){let n=A_(e,"img","toPixels");if(!(e instanceof $O)){const e=n;n=YM(e,"int32"),e.dispose()}$R(n);const[r,a]=n.shape.slice(0,2),i=2===n.rank?1:n.shape[2],o=await n.data(),s="float32"===n.dtype?255:1,l=new Uint8ClampedArray(a*r*4);for(let c=0;c<r*a;++c){const e=[0,0,0,255];for(let r=0;r<i;r++){const t=o[c*i+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===i?(e[0]=t*s,e[1]=t*s,e[2]=t*s):e[r]=t*s}const t=4*c;l[t+0]=Math.round(e[0]),l[t+1]=Math.round(e[1]),l[t+2]=Math.round(e[2]),l[t+3]=Math.round(e[3])}if(null!=t){if(!QR){null!=pO(qE,x_.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),QR=!0)}t.width=a,t.height=r;const e=t.getContext("2d"),n=new ImageData(l,a,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),l}const tD=M_({fromPixels_:JR}),nD=-2,rD=-1;function aD(e,t,n){const r=e.shape.length;pI(r===t.length,()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")),pI(r===n.length,()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,")."));for(let a=0;a<r;++a)pI(t[a]+n[a]<=e.shape[a],()=>"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")"))}function iD(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function oD(e,t,n){const r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function sD(e,t,n,r){const a=[...e];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function lD(e,t,n){return n<=e?n:n-(t-1)}function cD(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function uD(e,t,n,r,a,i,o,s,l){const c=e.length;let u=new Array(c),h=new Array(c),d=new Array(c);if(t.length&&n>0){const l=t[0],c=n+1;u=hD(o,l,c,r,e),h=dD(s,l,c,a,e),d=sD(i,l,c,e)}else for(let p=0;p<c;p++)u[p]=fD(o,r,i,e,p,l),h[p]=mD(s,a,i,e,p,l),d[p]=pD(i,p,l);return{begin:u,end:h,strides:d}}function hD(e,t,n,r,a){const i=[...a],o=cD(n,t);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{const a=lD(t,n,s);let o=r[a];e&1<<a&&(o=0),i[s]=o}return i}function dD(e,t,n,r,a){const i=[...a],o=cD(n,t);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{const a=lD(t,n,s);let o=r[a];e&1<<a&&(o=Number.MAX_SAFE_INTEGER),i[s]=o}for(let s=0;s<i.length;s++){const e=a[s];i[s]<0&&(i[s]+=e),i[s]=uI(0,i[s],a[s])}return i}function pD(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function fD(e,t,n,r,a,i){let o=t[a];const s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=uI(0,o,l-1),o}function mD(e,t,n,r,a,i){let o=t[a];const s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=s>0?uI(0,o,l):uI(-1,o,l-1),o}function gD(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function yD(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function vD(e,t,n){let r;const a=e.shape.length;let i;return r="number"===typeof t?[t,...new Array(a-1).fill(0)]:t.length<a?t.concat(new Array(a-t.length).fill(0)):t.slice(),r.forEach(e=>{pI(-1!==e,()=>"slice() does not support negative begin indexing.")}),i=null==n?new Array(a).fill(-1):"number"===typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,i=i.map((t,n)=>t>=0?t:(pI(-1===t,()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")),e.shape[n]-r[n])),[r,i]}function bD(e,t,n,r,a,i,o,s,l){let c;if(null==r?(c=new Array(t.length),c.fill(1)):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let v=0;v<h.dims;v++)u&&0!==(1<<v&s)&&h.numAddAxisAfterEllipsis++,1<<v&o&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(nD),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(rD),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,d);let p=!0,f=!0,m=!0;const g=[],y=[];for(let v=0;v<e.length;++v){if(0===d.strides[v])throw Error("strides[".concat(v,"] must be non-zero"));const t=!!(d.shrinkAxisMask&1<<v),n=e[v];if(-1===n){g.push(t?1:-1);continue}const r=[d.beginMask&1<<v,d.endMask&1<<v],a=[d.strides[v]>0?0:-1,d.strides[v]>0?n:n-1];if(t&&d.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[v];const i=!!(d.beginMask&1<<v&&d.endMask&1<<v);if(d.beginValid&&d.endValid){if(t){const e=d.begin[v]<0?n+d.begin[v]:d.begin[v];if(d.begin[v]=e,d.end[v]=d.begin[v]+1,e<0||e>=n)throw Error("slice index ".concat(d.begin[v]," of dimension ").concat(v," out of bounds."))}else d.begin[v]=xD(d.begin[v],0,d.strides[v],n,r,a),d.end[v]=xD(d.end[v],1,d.strides[v],n,r,a);const e=1===d.strides[v]&&0===d.begin[v]&&d.end[v]===n;p=p&&e,f=f&&(0===v&&1===d.strides[v]||e)}else p=p&&1===d.strides[v]&&i,f=f&&(0===v&&1===d.strides[v]||i);let o,s=!1;if(d.beginValid&&d.endValid?(o=d.end[v]-d.begin[v],s=!0):t?(o=1,s=!0):i&&n>=0&&(o=d.strides[v]<0?-n:n,s=!0),s){let e;e=0===o||o<0!==d.strides[v]<0?0:Math.trunc(o/d.strides[v])+(o%d.strides[v]!==0?1:0),g.push(e)}else g.push(-1)}for(let v=0;v<d.finalShapeGatherIndices.length;++v){const e=d.finalShapeGatherIndices[v];e>=0?y.push(g[e]):e===nD&&y.push(1)}return{finalShapeSparse:y.filter((e,t)=>d.finalShapeGatherIndices[t]!==nD),finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function xD(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];{const t=e<0?r+e:e;return t<i[0]?i[0]:t>i[1]?i[1]:t}}const wD=M_({acos_:function(e){const t={x:A_(e,"x","acos")};return x_.runKernel($I,t)}});const kD=M_({acosh_:function(e){const t={x:A_(e,"x","acosh")};return x_.runKernel(eE,t)}});const SD=M_({addN_:function(e){pI(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),pI(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length));const t=e.map((e,t)=>A_(e,"tensors".concat(t),"addN")),n=t[0];t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!yI(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=t;return x_.runKernel(nE,r)}});const ND=M_({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:A_(e,"x","all","bool")},a={axis:t,keepDims:n};return x_.runKernel(rE,r,a)}});const TD=M_({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:A_(e,"x","any","bool")},a={axis:t,keepDims:n};return x_.runKernel(aE,r,a)}});const ID=M_({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:A_(e,"x","argMax")},r={axis:t};return x_.runKernel(iE,n,r)}});const ED=M_({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:A_(e,"x","argMin")},r={axis:t};return x_.runKernel(oE,n,r)}});const CD=M_({asin_:function(e){const t={x:A_(e,"x","asin")};return x_.runKernel(sE,t)}});const AD=M_({asinh_:function(e){const t={x:A_(e,"x","asinh")};return x_.runKernel(lE,t)}});const OD=M_({atan_:function(e){const t={x:A_(e,"x","atan")};return x_.runKernel(cE,t)}});const _D=M_({atan2_:function(e,t){let n=A_(e,"a","atan2"),r=A_(t,"b","atan2");[n,r]=d_(n,r);const a={a:n,b:r};return x_.runKernel(hE,a)}});const MD=M_({atanh_:function(e){const t={x:A_(e,"x","atanh")};return x_.runKernel(uE,t)}});function RD(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0;return PD(e,[...t,e[3]],n,i,r,null,null,KD(a))}function DD(e,t,n,r,a,i){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,l]=jD(t);let c;if("channelsLast"===o)c=[s,l,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));c=[s,l,e[1],e[1]]}return PD(e,c,n,r,a,i,!1,o)}function FD(e,t,n,r,a,i){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,l,c]=BD(t);let u,h;if("NDHWC"===o)h="channelsLast",u=[s,l,c,e[4],e[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat ".concat(o));h="channelsFirst",u=[s,l,c,e[1],e[1]]}return LD(e,u,n,r,a,!1,h,i)}function PD(e,t,n,r,a,i){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,c,u,h]=[-1,-1,-1,-1];if("channelsLast"===s)[l,c,u,h]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[l,h,c,u]=e}const[d,p,,f]=t,[m,g]=jD(n),[y,v]=jD(r),b=UD(d,y),x=UD(p,v),{padInfo:w,outHeight:k,outWidth:S}=function(e,t,n,r,a,i,o,s,l){let c,u,h;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const a=function(e,t,n,r,a){null==r&&(r=zD(e,t,n));const i=e[0],o=e[1],s=WD((i-t+2*r)/n+1,a),l=WD((o-t+2*r)/n+1,a);return[s,l]}([t,n],i,r,e,s);u=a[0],h=a[1]}else if("same"===e){u=Math.ceil(t/r),h=Math.ceil(n/a);const e=Math.max(0,(u-1)*r+i-t),s=Math.max(0,(h-1)*a+o-n),l=Math.floor(e/2),d=e-l,p=Math.floor(s/2);c={top:l,bottom:d,left:p,right:s-p,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-i+1)/r),h=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];c={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},u=WD((t-i+d+p)/r+1,s),h=WD((n-o+f+m)/a+1,s)}}return{padInfo:c,outHeight:u,outWidth:h}}(a,c,u,m,g,b,x,i,s),N=o?f*h:f;let T;return"channelsFirst"===s?T=[l,N,k,S]:"channelsLast"===s&&(T=[l,k,S,N]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:u,inChannels:h,outHeight:k,outWidth:S,outChannels:N,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:e,outShape:T,filterShape:t}}function LD(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[l,c,u,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[l,c,u,h,d]=e;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));[l,d,c,u,h]=e}const[p,f,m,,g]=t,[y,v,b]=BD(n),[x,w,k]=BD(r),S=UD(p,x),N=UD(f,w),T=UD(m,k),{padInfo:I,outDepth:E,outHeight:C,outWidth:A}=function(e,t,n,r,a,i,o,s,l,c,u){let h,d,p,f;"valid"===e&&(e=0);if("number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,r,a,i){null==a&&(a=zD(e,t[0],r[0]));const o=[0,0,0,n];for(let s=0;s<3;s++)e[s]+2*a>=t[s]&&(o[s]=WD((e[s]-t[s]+2*a)/r[s]+1,i));return o}([t,n,r,1],[s,l,c],1,[a,i,o],e,u);d=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{d=Math.ceil(t/a),p=Math.ceil(n/i),f=Math.ceil(r/o);const e=(d-1)*a+s-t,u=(p-1)*i+l-n,m=(f-1)*o+c-r,g=Math.floor(e/2),y=e-g,v=Math.floor(u/2),b=u-v,x=Math.floor(m/2);h={top:v,bottom:b,left:x,right:m-x,front:g,back:y,type:"SAME"}}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(a,c,u,h,y,v,b,S,N,T,s),O=i?g*d:g;let _;return"channelsFirst"===o?_=[l,O,E,C,A]:"channelsLast"===o&&(_=[l,E,C,A,O]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:h,inChannels:d,outDepth:E,outHeight:C,outWidth:A,outChannels:O,padInfo:I,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:S,effectiveFilterHeight:N,effectiveFilterWidth:T,dilationDepth:x,dilationHeight:w,dilationWidth:k,inShape:e,outShape:_,filterShape:t}}function zD(e,t,n){const r=UD(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function jD(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function BD(e){return"number"===typeof e?[e,e,e]:e}function UD(e,t){return t<=1?e:e+(e-1)*(t-1)}function WD(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function VD(e){const[t,n,r]=jD(e);return 1===t&&1===n&&1===r}function GD(e,t){return VD(e)||VD(t)}function HD(e){return jD(e).every(e=>e>0)}function KD(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function qD(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)pI(vI(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach(t=>{t.forEach(t=>{pI(vI(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."))})})}}}const XD=M_({reshape_:function(e,t){const n={x:A_(e,"x","reshape","string_or_numeric")},r={shape:t};return x_.runKernel(cA,n,r)}});const YD=M_({avgPool_:function(e,t,n,r,a){const i=A_(e,"x","avgPool","float32");pI(GD(n,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"));let o=i,s=!1;3===i.rank&&(s=!0,o=XD(i,[1,i.shape[0],i.shape[1],i.shape[2]])),pI(4===o.rank,()=>"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")),qD("avgPool",r,a);const l={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a};let u=x_.runKernel(dE,l,c);return u=YM(u,i.dtype),s?XD(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const ZD=M_({avgPool3d_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const o=A_(e,"x","avgPool3d","float32");let s=o,l=!1;4===o.rank&&(l=!0,s=XD(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),pI(5===s.rank,()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")),pI("NDHWC"===i,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)),pI("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")),qD("avgPool3d",r,a);const c={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let h=x_.runKernel(fE,c,u);return h=YM(h,s.dtype),l?XD(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const QD=M_({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;pI(e.length>=1,()=>"Pass at least one tensor to concat");const n=O_(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))}),1===n.length)return ZM(n[0]);const r=n,a={axis:t};return x_.runKernel(IE,r,a)}});const JD=M_({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=A_(e,"a","matMul"),i=A_(t,"b","matMul");[a,i]=d_(a,i);const o={a:a,b:i},s={transposeA:n,transposeB:r};return x_.runKernel(gE,o,s)}});const $D=M_({sigmoid_:function(e){const t={x:A_(e,"x","sigmoid","float32")};return x_.runKernel(EA,t)}});const eF=M_({slice_:function(e,t,n){const r=A_(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:t,size:n};return x_.runKernel(SA,a,i)}});const tF=M_({tanh_:function(e){const t={x:A_(e,"x","tanh","float32")};return x_.runKernel(XA,t)}});const nF=M_({basicLSTMCell_:function(e,t,n,r,a,i){const o=A_(e,"forgetBias","basicLSTMCell"),s=A_(t,"lstmKernel","basicLSTMCell"),l=A_(n,"lstmBias","basicLSTMCell"),c=A_(r,"data","basicLSTMCell"),u=A_(a,"c","basicLSTMCell"),h=A_(i,"h","basicLSTMCell"),d=QD([c,h],1),p=JD(d,s),f=JM(p,l),m=f.shape[0],g=f.shape[1]/4,y=[m,g],v=eF(f,[0,0],y),b=eF(f,[0,g],y),x=eF(f,[0,2*g],y),w=eF(f,[0,3*g],y),k=JM(tR($D(v),tF(b)),tR(u,$D(JM(o,x))));return[k,tR(tF(k),$D(w))]}});const rF=M_({batchToSpaceND_:function(e,t,n){const r=A_(e,"x","batchToSpaceND"),a=t.reduce((e,t)=>e*t);pI(r.rank>=1+t.length,()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)),pI(n.length===t.length,()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)),pI(r.shape[0]%a===0,()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a));const i={x:r},o={blockShape:t,crops:n};return x_.runKernel(yE,i,o)}});const aF=M_({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);const o=A_(e,"x","batchNorm"),s=A_(t,"mean","batchNorm"),l=A_(n,"variance","batchNorm");let c,u;null!=a&&(c=A_(a,"scale","batchNorm")),null!=r&&(u=A_(r,"offset","batchNorm")),pI(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),pI(null==u||s.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),pI(null==c||s.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:function(e){let t;return t=0===e.rank||1===e.rank?XD(e,[1,1,1,e.size]):2===e.rank?XD(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?XD(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(o),scale:c,offset:u,mean:s,variance:l},d={varianceEpsilon:i},p=x_.runKernel(lC,h,d);return XD(p,o.shape)}});const iF=M_({batchNorm2d_:function(e,t,n,r,a,i){const o=A_(e,"x","batchNorm"),s=A_(t,"mean","batchNorm"),l=A_(n,"variance","batchNorm");let c,u;return null!=a&&(c=A_(a,"scale","batchNorm")),null!=r&&(u=A_(r,"offset","batchNorm")),pI(2===o.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(o.rank,".")),pI(2===s.rank||1===s.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,".")),pI(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&pI(2===c.rank||1===c.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&pI(2===u.rank||1===u.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")),aF(o,s,l,u,c,i)}});const oF=M_({batchNorm3d_:function(e,t,n,r,a,i){const o=A_(e,"x","batchNorm"),s=A_(t,"mean","batchNorm"),l=A_(n,"variance","batchNorm");let c,u;return null!=a&&(c=A_(a,"scale","batchNorm")),null!=r&&(u=A_(r,"offset","batchNorm")),pI(3===o.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(o.rank,".")),pI(3===s.rank||1===s.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,".")),pI(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&pI(3===c.rank||1===c.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&pI(3===u.rank||1===u.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")),aF(o,s,l,u,c,i)}});const sF=M_({batchNorm4d_:function(e,t,n,r,a,i){const o=A_(e,"x","batchNorm"),s=A_(t,"mean","batchNorm"),l=A_(n,"variance","batchNorm");let c,u;return null!=a&&(c=A_(a,"scale","batchNorm")),null!=r&&(u=A_(r,"offset","batchNorm")),pI(4===o.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(o.rank,".")),pI(4===s.rank||1===s.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,".")),pI(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&pI(4===c.rank||1===c.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&pI(4===u.rank||1===u.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")),aF(o,s,l,u,c,i)}});const lF=M_({bincount_:function(e,t,n){const r=A_(e,"x","bincount"),a=A_(t,"weights","bincount");pI("int32"===r.dtype,()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)),pI(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),pI(a.size===r.size||0===a.size,()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,"."));const i={x:r,weights:a},o={size:n};return x_.runKernel(vE,i,o)}});const cF=M_({bitwiseAnd_:function(e,t){const n=A_(e,"x","bitwiseAnd"),r=A_(t,"y","bitwiseAnd");if(!yI(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));const a={a:n,b:r};return x_.runKernel(bE,a)}});const uF=M_({broadcastArgs_:function(e,t){const n=A_(e,"s0","broadcastArgs","int32"),r=A_(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));const a={s0:n,s1:r};return x_.runKernel(xE,a)}});const hF=M_({broadcastTo_:function(e,t){let n=A_(e,"broadcastTo","x");const r=n.shape;if(BI(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=XD(n,e)}const a=n.shape,i=Array.from(t);for(let l=t.length-1;l>=0;l--)if(a[l]===t[l])i[l]=1;else if(1!==n.shape[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===i.map((e,t)=>e>1?t:-1).filter(e=>e>=0).length)return ZM(n);const o={x:n},s={reps:i};return x_.runKernel(YA,o,s)}});const dF=M_({ceil_:function(e){const t={x:A_(e,"x","ceil","float32")};return x_.runKernel(kE,t)}});const pF=M_({clipByValue_:function(e,t,n){const r=A_(e,"x","clipByValue");if(pI(t<=n,()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")),t===n)return fR(r.shape,t,r.dtype);const a={x:r},i={clipValueMin:t,clipValueMax:n};return x_.runKernel(SE,a,i)}});const fF=M_({concat1d_:function(e){return QD(e,0)}});const mF=M_({concat2d_:function(e,t){return QD(e,t)}});const gF=M_({concat3d_:function(e,t){return QD(e,t)}});const yF=M_({concat4d_:function(e,t){return QD(e,t)}});const vF=M_({conv2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0;const s=A_(e,"x","conv2d","float32"),l=A_(t,"filter","conv2d","float32");let c=s,u=!1;3===s.rank&&(u=!0,c=XD(s,[1,s.shape[0],s.shape[1],s.shape[2]])),pI(4===c.rank,()=>"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")),pI(4===l.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")),qD("conv2d",r,o);const h="NHWC"===a?c.shape[3]:c.shape[1];pI(h===l.shape[2],()=>"Error in conv2d: depth of input (".concat(h,") must match ")+"input depth for filter ".concat(l.shape[2],".")),pI(GD(n,i),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")),pI(HD(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),pI(HD(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:c,filter:l},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},f=x_.runKernel(EE,d,p);return u?XD(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const bF=M_({conv1d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0;const s=A_(e,"x","conv1d"),l=A_(t,"filter","conv1d");let c=s,u=!1;2===s.rank&&(u=!0,c=XD(s,[1,s.shape[0],s.shape[1]])),pI(3===c.rank,()=>"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")),pI(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,".")),qD("conv1d",r,o),pI(c.shape[2]===l.shape[1],()=>"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],".")),pI(GD(n,i),()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")),pI(HD(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),pI(HD(n),()=>"Error in conv1D: Stride should be larger than 0."),pI("NWC"===a,()=>"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported."));const h=XD(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=XD(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=vF(d,h,[1,n],r,"NHWC",[1,i],o);return XD(p,u?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const xF=M_({conv2DBackpropInput_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;pI(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let s=e,l=t,c=!1;3===t.rank&&(c=!0,l=XD(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),pI(4===s.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")),pI(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank)),pI(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank));const u="NHWC"===i?s[3]:s[1],h="NHWC"===i?l.shape[3]:l.shape[1];pI(u===n.shape[2],()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],".")),pI(h===n.shape[3],()=>"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],".")),qD("conv2dDerInput",a,o);const d={dy:l,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},f=x_.runKernel(AE,d,p);return c?XD(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const wF=M_({conv2dTranspose_:function(e,t,n,r,a,i){const o=A_(e,"x","conv2dTranspose"),s=A_(t,"filter","conv2dTranspose");return xF(n,o,s,r,a,"NHWC",i)}});const kF=M_({conv3d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const o=A_(e,"x","conv3d"),s=A_(t,"filter","conv3d");let l=o,c=!1;4===o.rank&&(c=!0,l=XD(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),pI(5===l.rank,()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")),pI(5===s.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")),pI(l.shape[4]===s.shape[3],()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")),pI(GD(n,i),()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")),pI("NDHWC"===a,()=>"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")),pI(HD(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),pI(HD(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:s},h={strides:n,pad:r,dataFormat:a,dilations:i},d=x_.runKernel(OE,u,h);return c?XD(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const SF=M_({conv3DBackpropInput_:function(e,t,n,r,a){pI(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let i=e,o=t,s=!1;4===t.rank&&(s=!0,o=XD(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);const l=i[4],c=o.shape[4];pI(5===i.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")),pI(5===o.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)),pI(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)),pI(l===n.shape[3],()=>"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],".")),pI(c===n.shape[4],()=>"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],"."));const u={dy:o,filter:n},h={pad:a,strides:r,inputShape:i},d=x_.runKernel(ME,u,h);return s?XD(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const NF=M_({conv3dTranspose_:function(e,t,n,r,a){const i=A_(e,"x","conv3dTranspose"),o=A_(t,"filter","conv3dTranspose");return SF(n,i,o,r,a)}});const TF=M_({cos_:function(e){const t={x:A_(e,"x","cos","float32")};return x_.runKernel(RE,t)}});const IF=M_({cosh_:function(e){const t={x:A_(e,"x","cosh","float32")};return x_.runKernel(DE,t)}});const EF=M_({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={x:A_(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return x_.runKernel(FE,a,i)}});const CF=M_({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={x:A_(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return x_.runKernel(PE,a,i)}});const AF=M_({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=A_(e,"x","denseBincount"),i=A_(t,"weights","denseBincount");pI("int32"===a.dtype,()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)),pI(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")),pI(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),pI(i.size===a.size||0===i.size,()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,"."));const o={x:a,weights:i},s={size:n,binaryOutput:r};return x_.runKernel(zE,o,s)}});const OF=M_({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=A_(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];pI(t>1,()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t)),pI(a*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)),pI(i*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)),pI(o%(t*t)===0,()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape));const s={x:r},l={blockSize:t,dataFormat:n};return x_.runKernel(jE,s,l)}});const _F=M_({depthwiseConv2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0;const s=A_(e,"x","depthwiseConv2d","float32"),l=A_(t,"filter","depthwiseConv2d","float32");let c=s,u=!1;3===s.rank&&(u=!0,c=XD(s,[1,s.shape[0],s.shape[1],s.shape[2]])),pI(4===c.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")),pI(4===l.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(l.rank,"."));const h="NHWC"===a?c.shape[3]:c.shape[1];pI(h===l.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(h,") must match the inChannels dimension in ")+"filter ".concat(l.shape[2],".")),qD("depthwiseConv2d",r,o);const d={x:c,filter:l},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},f=x_.runKernel(BE,d,p);return u?XD(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const MF=M_({diag_:function(e){const t={x:A_(e,"x","diag")};return x_.runKernel(VE,t)}});const RF=M_({dilation2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const o=A_(e,"x","dilation2d"),s=A_(t,"filter","dilation2d");pI(3===o.rank||4===o.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")),pI(3===s.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")),pI("NHWC"===i,()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i));let l=o,c=!1;3===o.rank&&(l=XD(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),pI(l.shape[3]===s.shape[2],()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(s.shape[2]));const u={x:l,filter:s},h={strides:n,pad:r,dilations:a},d=x_.runKernel(GE,u,h);return c?XD(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const DF=M_({equal_:function(e,t){let n=A_(e,"a","equal","string_or_numeric"),r=A_(t,"b","equal","string_or_numeric");[n,r]=d_(n,r),kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel($E,a)}});const FF=M_({where_:function(e,t,n){const r=A_(t,"a","where"),a=A_(n,"b","where"),i=A_(e,"condition","where","bool"),o=kR(kR(i.shape,r.shape),a.shape),s={condition:hF(i,o),t:hF(r,o),e:hF(a,o)};return x_.runKernel(wA,s)}});const PF=M_({divNoNan_:function(e,t){let n=A_(e,"a","div"),r=A_(t,"b","div");[n,r]=d_(n,r);const a=eR(n,r),i=aR(a),o=DF(r,i);return FF(o,i,a)}});const LF=M_({dot_:function(e,t){const n=A_(e,"t1","dot"),r=A_(t,"t2","dot");pI((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,"."));const a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(pI(a===i,()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")),1===n.rank&&1===r.rank){const e=XD(n,[1,-1]),t=XD(r,[-1,1]),a=JD(e,t);return XD(a,[])}if(1===n.rank&&2===r.rank){const e=XD(n,[1,-1]),t=XD(r,[r.shape[0],r.shape[1]]),a=JD(e,t);return XD(a,[a.size])}if(2===n.rank&&1===r.rank){const e=XD(r,[-1,1]),t=JD(n,e);return XD(t,[t.size])}{const e=XD(r,[r.shape[0],r.shape[1]]);return JD(n,e)}}});const zF=M_({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map((e,t)=>A_(e,"tensors".concat(t),"einsum")),i={equation:e};return x_.runKernel(YE,a,i)}});const jF=M_({elu_:function(e){const t={x:A_(e,"x","elu","float32")};return x_.runKernel(ZE,t)}});const BF=M_({ensureShape_:function(e,t){const n=A_(e,"x","ensureShape","string_or_numeric");if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}});const UF=M_({erf_:function(e){let t=A_(e,"x","erf");pI("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=YM(t,"float32"));const n={x:t};return x_.runKernel(JE,n)}});function WF(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function VF(e,t,n){const r=e.length+t.length,a=[];let i=0,o=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function GF(e,t){const n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map(t=>e[t])]}function HF(e,t){return VF(e,t.map(e=>1),t)}function KF(e,t,n){pI(WF(t,n),()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input."))}function qF(e,t){if(WF(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function XF(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function YF(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const ZF=M_({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:A_(e,"x","max")},a={reductionIndices:t,keepDims:n};return x_.runKernel(OC,r,a)}});const QF=M_({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:A_(e,"x","min")},a={axis:t,keepDims:n};return x_.runKernel(zC,r,a)}});const JF=M_({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=A_(e,"x","sum");"bool"===r.dtype&&(r=YM(r,"int32"));const a={x:r},i={axis:t,keepDims:n};return x_.runKernel(OA,a,i)}});function $F(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return bR(e);if(1!==e.rank&&null===n)return $F(XD(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return JF(bR(e),n);if(t===1/0)return ZF(bR(e),n);if(t===-1/0)return QF(bR(e),n);if("euclidean"===t||2===t)return nR(JF(gR(bR(e),oR(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return ZF(JF(bR(e),n[0]),n[1]-1);if(t===1/0)return ZF(JF(bR(e),n[1]),n[0]);if(t===-1/0)return QF(JF(bR(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return nR(JF(rR(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const eP=M_({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=$F(e=A_(e,"x","norm"),t,n);let i=a.shape;if(r){const t=SI(n,e.shape);i=HF(a.shape,t)}return XD(a,i)}});const tP=M_({euclideanNorm_:function(e){return eP(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});const nP=M_({exp_:function(e){const t={x:A_(e,"x","exp")};return x_.runKernel(eC,t)}});const rP=M_({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=A_(e,"x","expandDims","string_or_numeric");pI(t<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:t};return x_.runKernel(tC,r,a)}});const aP=M_({expm1_:function(e){const t={x:A_(e,"x","expm1")};return x_.runKernel(nC,t)}});const iP=M_({tile_:function(e,t){const n=A_(e,"x","tile","string_or_numeric");pI(n.rank===t.length,()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,"."));const r={x:n},a={reps:t};return x_.runKernel(YA,r,a)}});const oP=M_({eye_:function(e,t,n){null==t&&(t=e);const r=XM([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t;for(let o=0;o<a;++o)r.set(1,o,o);const i=XD(r.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return iP(rP(i,0),[n[0],1,1]);if(2===n.length)return iP(rP(rP(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return iP(rP(rP(rP(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const sP=M_({floor_:function(e){const t={x:A_(e,"x","floor","float32")};return x_.runKernel(oC,t)}});const lP=M_({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a={x:A_(e,"x","gather"),indices:A_(t,"indices","gather","int32")},i={axis:n,batchDims:r};return x_.runKernel(cC,a,i)}});const cP=M_({greater_:function(e,t){let n=A_(e,"a","greater","string_or_numeric"),r=A_(t,"b","greater","string_or_numeric");[n,r]=d_(n,r),kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(hC,a)}});const uP=M_({greaterEqual_:function(e,t){let n=A_(e,"a","greaterEqual","string_or_numeric"),r=A_(t,"b","greaterEqual","string_or_numeric");[n,r]=d_(n,r),kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(dC,a)}});const hP=M_({imag_:function(e){const t={input:A_(e,"input","imag")};return x_.runKernel(mC,t)}});const dP=M_({isFinite_:function(e){const t={x:A_(e,"x","isFinite")};return x_.runKernel(gC,t)}});const pP=M_({isInf_:function(e){const t={x:A_(e,"x","isInf")};return x_.runKernel(yC,t)}});const fP=M_({isNaN_:function(e){const t={x:A_(e,"x","isNaN")};return x_.runKernel(vC,t)}});const mP=M_({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:A_(e,"x","leakyRelu")},r={alpha:t};return x_.runKernel(bC,n,r)}});const gP=M_({less_:function(e,t){let n=A_(e,"a","less","string_or_numeric"),r=A_(t,"b","less","string_or_numeric");[n,r]=d_(n,r),kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(xC,a)}});const yP=M_({lessEqual_:function(e,t){let n=A_(e,"a","lessEqual","string_or_numeric"),r=A_(t,"b","lessEqual","string_or_numeric");[n,r]=d_(n,r),kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(wC,a)}});function vP(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return x_.runKernel(kC,{},r)}const bP=M_({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const i=A_(e,"x","localResponseNormalization");pI(4===i.rank||3===i.rank,()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")),pI(vI(t),()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,"."));let o=i,s=!1;3===i.rank&&(s=!0,o=XD(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},u=x_.runKernel(CC,l,c);return s?XD(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const xP=M_({log_:function(e){const t={x:A_(e,"x","log","float32")};return x_.runKernel(SC,t)}});const wP=M_({log1p_:function(e){const t={x:A_(e,"x","log1p")};return x_.runKernel(NC,t)}});const kP=M_({neg_:function(e){const t={x:A_(e,"x","neg")};return x_.runKernel(GC,t)}});const SP=M_({softplus_:function(e){const t={x:A_(e,"x","softplus")};return x_.runKernel(CA,t)}});const NP=M_({logSigmoid_:function(e){const t=A_(e,"x","logSigmoid");return iR(e=>({value:kP(SP(kP(e))),gradFunc:t=>tR(t,$D(kP(e)))}))(t)}});const TP=M_({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=A_(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const r=iR((e,n)=>{const r=ZF(e,t,!0),a=yR(e,r),i=yR(YM(a,"float32"),xP(JF(nP(a),t,!0)));n([i]);return{value:i,gradFunc:(e,n)=>{const[r]=n,a=nP(r);return yR(e,tR(JF(e,t,!0),a))}}});return r(n)}});const IP=M_({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=A_(e,"x","logSumExp"),a=SI(t,r.shape),i=ZF(r,a,!0),o=yR(r,i),s=nP(o),l=JF(s,a),c=xP(l),u=JM(XD(i,c.shape),c);if(n){const e=HF(u.shape,a);return XD(u,e)}return u}});const EP=M_({logicalAnd_:function(e,t){const n=A_(e,"a","logicalAnd","bool"),r=A_(t,"b","logicalAnd","bool");kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(TC,a)}});const CP=M_({logicalNot_:function(e){const t={x:A_(e,"x","logicalNot","bool")};return x_.runKernel(IC,t)}});const AP=M_({logicalOr_:function(e,t){const n=A_(e,"a","logicalOr","bool"),r=A_(t,"b","logicalOr","bool");kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(EC,a)}});const OP=M_({logicalXor_:function(e,t){const n=A_(e,"a","logicalXor","bool"),r=A_(t,"b","logicalXor","bool");return kR(n.shape,r.shape),EP(AP(e,t),CP(EP(e,t)))}}),_P=2147483648;const MP=M_({searchSorted_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const r=A_(e,"sortedSequence","searchSorted"),a=A_(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=XD(r,[-1,i]),l=XD(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(gI(l.shape)>=_P)throw new Error("values tensor size must less than ".concat(_P));if(s.shape[1]>=_P)throw new Error("trailing dim_size must less than ".concat(_P," for int32 output type, was ").concat(s.shape[1]));const c={sortedSequence:s,values:l},u={side:n};return x_.runKernel(xA,c,u)}});function RP(e,t){return MP(e,t,"left")}const DP=M_({maxPool_:function(e,t,n,r,a){const i=A_(e,"x","maxPool");let o=i,s=!1;3===i.rank&&(s=!0,o=XD(i,[1,i.shape[0],i.shape[1],i.shape[2]])),pI(4===o.rank,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")),pI(GD(n,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")),qD("maxPool",r,a);const l={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},u=x_.runKernel(MC,l,c);return s?XD(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const FP=M_({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const o=A_(e,"x","maxPool3d");let s=o,l=!1;4===o.rank&&(l=!0,s=XD(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),pI(5===s.rank,()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")),pI("NDHWC"===i,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)),qD("maxPool3d",r,a);const c={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},h=x_.runKernel(DC,c,u);return l?XD(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const PP=M_({maxPoolWithArgmax_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i={x:A_(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=x_.runKernel(PC,i,o);return{result:s[0],indexes:s[1]}}});const LP=M_({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:A_(e,"x","mean")},a={axis:t,keepDims:n};return x_.runKernel(LC,r,a)}});function zP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(BI(e),"complex64"===t){const t=zP(e,"float32"),n=zP(e,"float32");return R_(t,n)}const n=zI(gI(e),t);return x_.makeTensor(n,e,t)}function jP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(BI(e),"complex64"===t){const t=jP(e,"float32"),n=zP(e,"float32");return R_(t,n)}const n=LI(gI(e),t);return x_.makeTensor(n,e,t)}function BP(e,t){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(void 0===e)return[];let r=A_(e,"x","meshgrid",e instanceof $O?e.dtype:"float32");if(void 0===t)return[r];let a=A_(t,"y","meshgrid",t instanceof $O?t.dtype:"float32");const i=gI(r.shape),o=gI(a.shape);return"xy"===n?(r=XD(r,[1,-1]),a=XD(a,[-1,1]),[JD(jP([o,1],r.dtype),r),JD(a,jP([1,i],a.dtype))]):(r=XD(r,[-1,1]),a=XD(a,[1,-1]),[JD(r,jP([1,o],r.dtype)),JD(jP([i,1],a.dtype),a)])}const UP=M_({minimum_:function(e,t){let n=A_(e,"a","minimum"),r=A_(t,"b","minimum");[n,r]=d_(n,r),"bool"===n.dtype&&(n=YM(n,"int32"),r=YM(r,"int32")),kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(jC,a)}});const WP=M_({mirrorPad_:function(e,t,n){pI("reflect"===n||"symmetric"===n,()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,"."));const r=A_(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");pI(t.length===r.rank,()=>"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,"."));const a="reflect"===n?1:0;for(let s=0;s<r.rank;s++)pI(2===t[s].length,()=>"Invalid number of paddings. Must be length of 2 each."),pI(t[s][0]>=0&&t[s][0]<=r.shape[s]-a&&t[s][1]>=0&&t[s][1]<=r.shape[s]-a,()=>"Padding in dimension ".concat(s," cannot be greater than or equal ")+"to ".concat(r.shape[s]-a," or less than 0 for input of ")+"shape ".concat(r.shape));const i={paddings:t,mode:n},o={x:r};return x_.runKernel(BC,o,i)}});const VP=M_({mod_:function(e,t){let n=A_(e,"a","mod"),r=A_(t,"b","mod");[n,r]=d_(n,r);const a={a:n,b:r};return x_.runKernel(UC,a)}});const GP=M_({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=SI(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=A_(e,"x","moments")).shape),r=LP(e,n,t);let a=r.shape;t||(a=HF(r.shape,n));const i=rR(yR(YM(e,"float32"),XD(r,a)));return{mean:r,variance:LP(i,n,t)}}});const HP=M_({multiRNNCell_:function(e,t,n,r){const a=A_(t,"data","multiRNNCell"),i=O_(n,"c","multiRNNCell"),o=O_(r,"h","multiRNNCell");let s=a;const l=[];for(let h=0;h<e.length;h++){const t=e[h](s,i[h],o[h]);l.push(t[0]),l.push(t[1]),s=t[1]}const c=[],u=[];for(let h=0;h<l.length;h+=2)c.push(l[h]),u.push(l[h+1]);return[c,u]}});const KP=M_({multinomial_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=A_(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();const s={logits:1===o?XD(a,[1,-1]):a},l={numSamples:t,seed:n,normalized:r},c=x_.runKernel(WC,s,l);return 1===o?XD(c,[c.size]):c}});const qP=M_({notEqual_:function(e,t){let n=A_(e,"a","notEqual","string_or_numeric"),r=A_(t,"b","notEqual","string_or_numeric");[n,r]=d_(n,r),kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(HC,a)}});const XP=M_({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const i={indices:A_(e,"indices","oneHot","int32")},o={dtype:a,depth:t,onValue:n,offValue:r};return x_.runKernel(ZC,i,o)}});const YP=M_({onesLike_:function(e){const t={x:A_(e,"x","onesLike")};return x_.runKernel(YC,t)}});const ZP=M_({outerProduct_:function(e,t){const n=A_(e,"v1","outerProduct"),r=A_(t,"v2","outerProduct");pI(1===n.rank&&1===r.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,"."));const a=XD(n,[-1,1]),i=XD(r,[1,-1]);return JD(a,i)}});const QP=M_({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=A_(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:t,constantValue:n},i={x:r};return x_.runKernel(JC,i,a)}});const JP=M_({pad1d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pI(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),QP(e,[t],n)}});const $P=M_({pad2d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pI(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),QP(e,t,n)}});const eL=M_({pad3d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pI(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),QP(e,t,n)}});const tL=M_({pad4d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return pI(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),QP(e,t,n)}});const nL=M_({spaceToBatchND_:function(e,t,n){const r=A_(e,"x","spaceToBatchND");pI(r.rank>=1+t.length,()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)),pI(n.length===t.length,()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)),pI(r.shape.reduce((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e,!0),()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString()));const a={x:r},i={blockShape:t,paddings:n};return x_.runKernel(_A,a,i)}});const rL=M_({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");const s=A_(e,"x","maxPool");let l=s,c=!1;3===s.rank&&(c=!0,l=XD(s,[1,s.shape[0],s.shape[1],s.shape[2]])),pI(GD(i,a),()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'"));const u=DD(l.shape,t,i,a,r),h=[u.dilationHeight,u.dilationWidth];let d;d="same"===r?function(e,t){const n=e.map((e,n)=>e+(e-1)*(t[n]-1)),r=n.map(e=>e-1),a=r.map(e=>Math.floor(e/2)),i=r.map((e,t)=>e-a[t]);return r.map((e,t)=>[a[t],i[t]])}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];const p=1===h[0]&&1===h[1],[f,m]=function(e,t,n){const r=n.map(e=>e[0]),a=n.map(e=>e[1]),i=e.concat(r,a),o=t.map((e,t)=>(e-i[t]%e)%e),s=a.map((e,t)=>e+o[t]),l=t.map((e,t)=>[r[t],s[t]]),c=t.map((e,t)=>[0,o[t]]);return[l,c]}([u.inHeight,u.inWidth],h,d),g=p?r:"valid",y=p?l:nL(l,h,f),v=("avg"===n?()=>YD(y,t,i,g,o):()=>DP(y,t,i,g,o))(),b=p?v:rF(v,h,m);return c?XD(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});const aL=M_({prelu_:function(e,t){const n={x:A_(e,"x","prelu"),alpha:A_(t,"alpha","prelu")};return x_.runKernel(eA,n)}});const iL=M_({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=A_(e,"x","prod");"bool"===r.dtype&&(r=YM(r,"int32"));const a={x:r},i={axis:t,keepDims:n};return x_.runKernel(tA,a,i)}});const oL=M_({raggedGather_:function(e,t,n,r){const a={paramsNestedSplits:e.map((e,t)=>A_(e,"tensors".concat(t),"raggedGather","int32")),paramsDenseValues:A_(t,"paramsDenseValues","raggedGather"),indices:A_(n,"indices","raggedGather","int32")},i={outputRaggedRank:r},o=x_.runKernel(nA,a,i);return{outputNestedSplits:o.slice(0,o.length-1),outputDenseValues:o[o.length-1]}}});const sL=M_({raggedRange_:function(e,t,n){const r=A_(e,"starts","raggedRange"),a={starts:r,limits:A_(t,"limits","raggedRange",r.dtype),deltas:A_(n,"deltas","raggedRange",r.dtype)},i=x_.runKernel(rA,a);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}});const lL=M_({raggedTensorToTensor_:function(e,t,n,r,a){const i=A_(e,"shape","raggedTensorToTensor","int32"),o=A_(t,"values","raggedTensorToTensor"),s={shape:i,values:o,defaultValue:A_(n,"defaultValue","raggedTensorToTensor",o.dtype),rowPartitionTensors:r.map((e,t)=>A_(e,"tensors".concat(t),"raggedTensorToTensor","int32"))},l={rowPartitionTypes:a};return x_.runKernel(aA,s,l)}});const cL=M_({rand_:function(e,t,n){BI(e);const r=gI(e);let a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(let i=0;i<r;i++)a[i]=t();return x_.makeTensor(a,e,n)}});var uL=n(4334);class hL{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const i=a||Math.random();this.random=uL.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,i;do{r=2*this.random()-1,a=2*this.random()-1,i=r*r+a*a}while(i>=1||0===i);const o=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*o,t=this.mean+this.stdDev*a*o,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class dL{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const a=r||Math.random();this.randu=uL.alea(a.toString()),this.randn=new hL(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,i;for(;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-i+Math.log(i)),a=this.randu(),a<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class pL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=uL.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const fL=M_({randomGamma_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(BI(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));const i=new dL(t,n,r,a),o=XM(e,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});const mL=M_({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(BI(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));const i=new hL(t,n,r,!1,a),o=XM(e,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});const gL=M_({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return mL(e,0,1,t,n)}});const yL=M_({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;BI(e);const i=XM(e,r),o=new pL(t,n,null,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});const vL=M_({randomUniformInt_:function(e,t,n,r){return yL(e,t,n,"int32",r)}});function bL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const a={start:e,stop:t,step:n,dtype:r};return x_.runKernel(iA,{},a)}const xL=M_({real_:function(e){const t={input:A_(e,"input","real")};return x_.runKernel(oA,t)}});const wL=M_({reciprocal_:function(e){const t={x:A_(e,"x","reciprocal")};return x_.runKernel(sA,t)}});const kL=M_({relu_:function(e){const t={x:A_(e,"x","relu")};return x_.runKernel(lA,t)}});const SL=M_({relu6_:function(e){const t={x:A_(e,"x","relu6")};return x_.runKernel(fA,t)}});const NL=M_({reverse_:function(e,t){const n={x:A_(e,"x","reverse")},r={dims:t};return x_.runKernel(mA,n,r)}});const TL=M_({reverse1d_:function(e){const t=A_(e,"x","reverse");return pI(1===t.rank,()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")),NL(t,0)}});const IL=M_({reverse2d_:function(e,t){const n=A_(e,"x","reverse");return pI(2===n.rank,()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")),NL(n,t)}});const EL=M_({reverse3d_:function(e,t){const n=A_(e,"x","reverse");return pI(3===n.rank,()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")),NL(n,t)}});const CL=M_({reverse4d_:function(e,t){const n=A_(e,"x","reverse");return pI(4===n.rank,()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")),NL(n,t)}});const AL=M_({round_:function(e){const t={x:A_(e,"x","round")};return x_.runKernel(gA,t)}});const OL=M_({rsqrt_:function(e){const t={x:A_(e,"x","rsqrt","float32")};return x_.runKernel(yA,t)}});const _L=M_({selu_:function(e){const t={x:A_(e,"x","selu")};return x_.runKernel(kA,t)}});const ML=M_({separableConv2d_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=A_(e,"x","separableConv2d"),l=A_(t,"depthwiseFilter","separableConv2d"),c=A_(n,"pointwiseFilter","separableConv2d");let u=s,h=!1;if(3===s.rank&&(h=!0,u=XD(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");pI(4===u.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,".")),pI(4===l.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),pI(4===c.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),pI(1===c.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")),pI(1===c.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],"."));const d=l.shape[2],p=l.shape[3];pI(c.shape[2]===d*p,()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*p,", ")+"but got ".concat(c.shape[2],"."));const f=_F(u,l,r,a,o,i),m=vF(f,c,1,"valid",o);return h?XD(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const RL=async function(e,t){const n=A_(e,"x","setdiff1d"),r=A_(t,"y","setdiff1d");pI(n.dtype===r.dtype,()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,").")),pI(1===n.rank,()=>"x should be 1D tensor, but got x (".concat(n.shape,").")),pI(1===r.rank,()=>"y should be 1D tensor, but got y (".concat(r.shape,")."));const a=await n.data(),i=await r.data(),o=new Set(i);let s=0;for(let u=0;u<a.length;u++)o.has(a[u])||s++;const l=new YO([s],n.dtype),c=new YO([s],"int32");for(let u=0,h=0;u<a.length;u++)o.has(a[u])||(l.values[h]=a[u],c.values[h]=u,h++);return[l.toTensor(),c.toTensor()]};const DL=M_({sign_:function(e){const t={x:A_(e,"x","sign")};return x_.runKernel(IA,t)}});const FL=M_({sin_:function(e){const t={x:A_(e,"x","sin","float32")};return x_.runKernel(NA,t)}});const PL=M_({sinh_:function(e){const t={x:A_(e,"x","sinh")};return x_.runKernel(TA,t)}});const LL=M_({slice1d_:function(e,t,n){const r=A_(e,"x","slice1d");return pI(1===r.rank,()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")),eF(r,[t],[n])}});const zL=M_({slice2d_:function(e,t,n){const r=A_(e,"x","slice2d");return pI(2===r.rank,()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")),eF(r,t,n)}});const jL=M_({slice3d_:function(e,t,n){const r=A_(e,"x","slice3d");return pI(3===r.rank,()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")),eF(r,t,n)}});const BL=M_({slice4d_:function(e,t,n){const r=A_(e,"x","slice4d");return pI(4===r.rank,()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")),eF(r,t,n)}});const UL=M_({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=A_(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const r={logits:n},a={dim:t};return x_.runKernel(RA,r,a)}});const WL=M_({fft_:function(e){pI("complex64"===e.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return x_.runKernel(rC,t)}});const VL=M_({ifft_:function(e){pI("complex64"===e.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return x_.runKernel(fC,t)}});const GL=M_({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const a=XD(e,[n,t]);r=VL(a)}else{const a=[n,2*(t-1)],i=XD(xL(e),[n,t]),o=XD(hP(e),[n,t]),s=NL(eF(i,[0,1],[n,t-2]),1),l=tR(NL(eF(o,[0,1],[n,t-2]),1),oR(-1)),c=QD([i,s],1),u=QD([o,l],1),h=XD(R_(c,u),[a[0],a[1]]);r=VL(h)}if(r=xL(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=XD(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const HL=M_({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:A_(e,"x","split")},a={numOrSizeSplits:t,axis:n};return x_.runKernel(MA,r,a)}});const KL=M_({rfft_:function(e,t){pI("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got ".concat(e.dtype));let n=e.shape[e.shape.length-1];const r=e.size/n;let a;if(null!=t&&t<n){const r=e.shape.map(e=>0),i=e.shape.map(e=>e);i[e.shape.length-1]=t,a=eF(e,r,i),n=t}else if(null!=t&&t>n){const r=e.shape.map(e=>e);r[e.shape.length-1]=t-n,a=QD([e,zP(r)],e.shape.length-1),n=t}else a=e;const i=aR(a),o=XD(R_(a,i),[r,n]),s=WL(o),l=Math.floor(n/2)+1,c=xL(s),u=hP(s),h=HL(c,[l,n-l],c.shape.length-1),d=HL(u,[l,n-l],u.shape.length-1),p=a.shape.slice();return p[a.shape.length-1]=l,XD(R_(h[0],d[0]),p)}});const qL=M_({squaredDifference_:function(e,t){let n=A_(e,"a","squaredDifference"),r=A_(t,"b","squaredDifference");[n,r]=d_(n,r),kR(n.shape,r.shape);const a={a:n,b:r};return x_.runKernel(jA,a,{})}});const XL=M_({squeeze_:function(e,t){const n=A_(e,"x","squeeze","string_or_numeric");return XD(n,NI(n.shape,t).newShape)}});const YL=M_({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=O_(e,"tensors","stack","string_or_numeric");pI(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&pI(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:t};return x_.runKernel(QC,r,a)}});const ZL=M_({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:A_(e,"x","step")},r={alpha:t};return x_.runKernel(rO,n,r)}});const QL=M_({stridedSlice_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const c={x:A_(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return x_.runKernel(WA,c,u)}});const JL=M_({tan_:function(e){const t={x:A_(e,"x","tan","float32")};return x_.runKernel(qA,t)}});function $L(e,t){mI(e);const n=I_(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return D_(e,null,n,t)}function ez(e,t,n){if(mI(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=I_(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return D_(e,t,r,n)}function tz(e,t,n){if(mI(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=I_(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return D_(e,t,r,n)}function nz(e,t,n){if(mI(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=I_(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return D_(e,t,r,n)}function rz(e,t,n){if(mI(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=I_(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return D_(e,t=t||r,r,n)}function az(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(let o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(let o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape[".concat(o+a,"] (").concat(n.shape[o+a],") != shape[").concat(o+a,"] (").concat(e[o+a],")"))}function iz(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}az(n,t,e)}function oz(e,t,n){const r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length;let o=1;for(let l=a;l<i;++l)o*=n[l];const s=a<1?1:a;return{sliceRank:a,numUpdates:gI(t.shape)/s,sliceSize:o,strides:[...DI(n.slice(0,a)),1],outputSize:gI(n)}}const sz=M_({tensorScatterUpdate_:function(e,t,n){const r=A_(e,"tensor","tensorScatterupdate"),a=A_(t,"indices","tensorScatterupdate","int32"),i=A_(n,"updates","tensorScatterupdate");if(iz(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));const o={tensor:r,indices:a,updates:i};return x_.runKernel(bA,o,{})}});const lz=M_({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=A_(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));const i={x:r},o={k:t,sorted:n},[s,l]=x_.runKernel(ZA,i,o);return{values:s,indices:l}}});const cz=M_({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(BI(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const i=new hL(t,n,r,!0,a),o=XM(e,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});const uz=M_({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=A_(e,"x","unique","string_or_numeric");pI(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:t},[i,o]=x_.runKernel($A,r,a);return{values:i,indices:o}}});const hz=M_({unsortedSegmentSum_:function(e,t,n){const r=A_(e,"x","unsortedSegmentSum"),a=A_(t,"segmentIds","unsortedSegmentSum","int32");pI(vI(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},o={numSegments:n};return x_.runKernel(tO,i,o)}});const dz=M_({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=A_(e,"x","unstack","string_or_numeric");pI(t>=-n.shape.length&&t<n.shape.length,()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")"));const r={value:n},a={axis:t};return x_.runKernel(eO,r,a)}});function pz(e,t){return MP(e,t,"right")}function fz(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return x_.makeVariable(e,t,n,r)}function mz(e,t){const n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);const r=XM(e,"int32"),a=XM([n.length,e.length],"int32");for(let i=0;i<n.length;i++){const t=r.indexToLoc(n[i]),o=i*e.length;a.values.set(t,o)}return a.toTensor()}const gz=async function(e){const t=A_(e,"condition","whereAsync","bool"),n=await t.data(),r=mz(t.shape,n);return e!==t&&t.dispose(),r};const yz=async function(e,t,n){const r=A_(e,"tensor","boolMask"),a=A_(t,"mask","boolMask","bool"),i=null==n?0:n,o=a.rank,s=r.shape;pI(o>0,()=>"mask cannot be scalar"),fI(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+o;m++)l*=s[m];const c=s.slice(0,i).concat([l],s.slice(i+o)),u=XD(r,c),h=XD(a,[-1]),d=await gz(h),p=XL(d,[1]),f=lP(u,p,i);return e!==r&&r.dispose(),t!==a&&a.dispose(),p.dispose(),u.dispose(),h.dispose(),d.dispose(),f};const vz=M_({transpose_:function(e,t,n){const r=A_(e,"x","transpose");if(null==t&&(t=r.shape.map((e,t)=>t).reverse()),pI(r.rank===t.length,()=>"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")),t.forEach(e=>{pI(e>=0&&e<r.rank,()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t))}),r.rank<=1)return r.clone();const a={x:r},i={perm:t};return"complex64"===r.dtype?B_(()=>{let e=xL(r),t=hP(r);return e=x_.runKernel(JA,{x:e},i),t=x_.runKernel(JA,{x:t},i),n&&(t=kP(t)),R_(e,t)}):x_.runKernel(JA,a,i)}});const bz=M_({movingAverage_:function(e,t,n,r){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const i=A_(e,"v","movingAverage"),o=A_(t,"x","movingAverage"),s=A_(n,"decay","movingAverage");var l,c;c=o,pI((l=i).dtype===c.dtype,()=>"The dtypes of the first(".concat(l.dtype,") and")+" second(".concat(c.dtype,") input must match")),pI(yI(i.shape,o.shape),()=>"Shape mismatch in v and x");const u=oR(1),h=yR(u,s);let d=tR(yR(o,i),h);if(a){pI(null!=r,()=>"When using zeroDebias: true, step is required.");const e=A_(r,"step","movingAverage");d=eR(d,yR(u,gR(s,e)))}return JM(i,d)}});const xz=M_({scatterND_:function(e,t,n){BI(n);const r=A_(e,"indices","scatterND","int32"),a=A_(t,"updates","scatterND");iz(a,r,n);const i={indices:r,updates:a},o={shape:n};return x_.runKernel(vA,i,o)}});const wz=M_({sparseToDense_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;BI(n);const a=A_(e,"sparseIndices","sparseToDense","int32"),i=A_(t,"sparseValues","sparseToDense","string_or_numeric"),o=A_(r,"defaultValue","sparseToDense",i.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));const a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));const o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o);const s={sparseIndices:a,sparseValues:i,defaultValue:o},l={outputShape:n};return x_.runKernel(zA,s,l)}});const kz=M_({gatherND_:function(e,t){const n=A_(t,"indices","gatherND","int32"),r={params:A_(e,"x","gatherND","string_or_numeric"),indices:n};return x_.runKernel(uC,r)}});const Sz=M_({dropout_:function(e,t,n,r){const a=A_(e,"x","dropout");if(pI("float32"===a.dtype,()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")),pI(t>=0&&t<1,()=>"rate must be a float in the range [0, 1), but got ".concat(t,".")),0===t)return e instanceof $O?a.clone():a;const i=function(e,t){if(null==t)return e.shape.slice();if(yI(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=eR(sP(JM(yL(i,0,1,"float32",r),o)),o);return tR(a,s)}});function Nz(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Tz(e,t,n){const r=1-e%2,a=new Float32Array(e);for(let i=0;i<e;++i){const o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return $L(a,"float32")}const Iz=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=A_(e,"predictions","inTopK"),a=A_(t,"targets","inTopK");pI(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(r.rank)),pI(r.rank-1===a.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(r.rank," and targets rank ").concat(a.rank)),fI(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];pI(n>0&&n<=i,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(i,"), but got ").concat(n));const o=await r.data(),s=await a.data(),[l,c]=[o.length/i,i],u=TI("bool",l);for(let h=0;h<l;h++){const e=h*c,t=o.subarray(e,e+c),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort((e,t)=>t.value-e.value),u[h]=0;for(let a=0;a<n;a++)if(r[a].index===s[h]){u[h]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),F_(u,a.shape,"bool")};const Ez=M_({conv2DBackpropFilter_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=XD(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=XD(t,[1,t.shape[0],t.shape[1],t.shape[2]])),pI(4===s.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")),pI(4===l.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,".")),pI(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,"."));const c="NHWC"===i?s.shape[3]:s.shape[1],u="NHWC"===i?l.shape[3]:l.shape[1];pI(c===n[2],()=>"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")),pI(u===n[3],()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],").")),qD("conv2dDerFilter",a,o);const h={x:s,dy:l},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return x_.runKernel(CE,h,d)}});function Cz(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return tR(e,ZL(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Az(e,t){let n=t;const r=wR(e.shape,t.shape);return r.length>0&&(n=JF(n,r)),XD(n,e.shape)}function Oz(e,t,n,r){if("linear"===t)return e;if("relu"===t)return kL(e);if("elu"===t)return jF(e);if("relu6"===t)return SL(e);if("prelu"===t)return aL(e,n);if("leakyrelu"===t)return mP(e,r);if("sigmoid"===t)return $D(e);throw new Error("Unknown fused activation ".concat(t,"."))}const _z=(e,t)=>!(e>0)||"linear"===t;const Mz=M_({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:a,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:h}=e;if(c=c||"linear",!1===_z(x_.state.gradientDepth,c)){pI("NHWC"===i,()=>"Error in fused conv2d: got dataFormat of ".concat(i," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.");let e=vF(t,n,r,a,i,o,s);return null!=l&&(e=JM(e,l)),Oz(e,c,u,h)}const d=A_(t,"x","conv2d","float32"),p=A_(n,"filter","conv2d","float32");let f=d,m=!1;3===d.rank&&(m=!0,f=XD(d,[1,d.shape[0],d.shape[1],d.shape[2]])),pI(4===f.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,".")),pI(4===p.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")),qD("fused conv2d",a,s);const g="NHWC"===i?f.shape[3]:f.shape[1];pI(p.shape[2]===g,()=>"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(p.shape[2],".")),pI(GD(r,o),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(o,"'"));const y=PD(f.shape,p.shape,r,o,a,s);let v,b;if(null!=l&&(v=A_(l,"bias","fused conv2d"),[v]=d_(v,d),"NHWC"===i?kR(y.outShape,v.shape):(pI(v.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(v.shape.length,".")),pI(0===v.shape.length||v.shape[0]===y.outChannels||1===v.shape[0],()=>"Error in fused conv2d: bias shape (".concat(v.shape,") is not ")+"compatible with the number of output channels "+"(".concat(y.outChannels,")")))),null!=u){const e=u.shape;if(pI(e.length<=1||3===e.length,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,".")),1===e.length)pI(1===e[0]||e[0]===y.outChannels,()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(y.outChannels,")."));else if(3===e.length)try{kR(e,y.outShape)}catch(S){const t="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(y.outShape,").");throw Error(t)}b=A_(u,"prelu weights","fused conv2d")}const x=(e,t)=>{pI("NHWC"===i,()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(i," but only NHWC is currently supported."));const[n,s,l,u]=t,h=Cz(e,l,c);pI(VD(o),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'"));const d=[xF(s.shape,h,n,r,a),Ez(s,h,n.shape,r,a)];if(null!=u){const e=Az(u,h);d.push(e)}return d},w={x:f,filter:p,bias:v,preluActivationWeights:b},k={strides:r,pad:a,dataFormat:i,dilations:o,dimRoundingMode:s,activation:c,leakyreluAlpha:h};if(null==l){const e=iR((e,t,n)=>{let r=x_.runKernel(sO,w,k);return n([t,e,r]),m&&(r=XD(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}});return e(f,p)}{const e=iR((e,t,n,r)=>{let a=x_.runKernel(sO,w,k);return r([t,e,a,n]),m&&(a=XD(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:x}});return e(f,p,v)}}});const Rz=M_({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=XD(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=XD(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:s,dy:l},u={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return x_.runKernel(UE,c,u)}});const Dz=M_({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,l=!1;3===t.rank&&(l=!0,s=XD(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:s,filter:n},u={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},h=x_.runKernel(WE,c,u);return l?XD(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const Fz=M_({fusedDepthwiseConv2d_:function(e){let{x:t,filter:n,strides:r,pad:a,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:h}=e;if(!1===_z(x_.state.gradientDepth,c)){let e=_F(t,n,r,a,i,o,s);return null!=l&&(e=JM(e,l)),Oz(e,c,u,h)}const d=A_(t,"x","depthwiseConv2d","float32"),p=A_(n,"filter","depthwiseConv2d","float32");let f=d,m=!1;3===d.rank&&(m=!0,f=XD(d,[1,d.shape[0],d.shape[1],d.shape[2]])),pI(4===f.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(f.rank,".")),pI(4===p.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(p.rank,".")),pI(f.shape[3]===p.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+"(".concat(f.shape[3],") must match the inChannels dimension in ")+"filter ".concat(p.shape[2],".")),null==o&&(o=[1,1]),pI(GD(r,o),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(o,"'")),qD("fused depthwiseConv2d",a,s);const g=PD(f.shape,p.shape,r,o,a,s,!0);let y,v;null!=l&&(y=A_(l,"bias","fused conv2d"),[y]=d_(y,d),kR(g.outShape,y.shape)),null!=u&&(v=A_(u,"prelu weights","fused depthwiseConv2d"));const b=(e,t)=>{pI(VD(o),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(o,"'"));const[n,i,l,u]=t,h=Cz(e,l,c),d=Dz(i.shape,h,n,r,a,o,s),p=Rz(i,h,n.shape,r,a,o,s);if(null!=u){return[d,p,Az(y,h)]}return[d,p]},x={x:f,filter:p,bias:y,preluActivationWeights:v},w={strides:r,pad:a,dataFormat:i,dilations:o,dimRoundingMode:s,activation:c,leakyreluAlpha:h};if(null==l){const e=iR((e,t,n)=>{let r=x_.runKernel(lO,x,w);return n([t,e,r]),m&&(r=XD(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}});return e(f,p)}{const e=iR((e,t,n,r)=>{let a=x_.runKernel(lO,x,w);return r([t,e,a,n]),m&&(a=XD(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}});return e(f,p,y)}}});const Pz=M_({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:a=!1,bias:i,activation:o="linear",preluActivationWeights:s,leakyreluAlpha:l=.2}=e;if(!1===_z(x_.state.gradientDepth,o)){let e=JD(t,n,r,a);return null!=i&&(e=JM(e,i)),Oz(e,o,s,l)}let c=A_(t,"a","fused matMul"),u=A_(n,"b","fused matMul");[c,u]=d_(c,u);const h=r?c.shape[c.rank-2]:c.shape[c.rank-1],d=a?u.shape[u.rank-1]:u.shape[u.rank-2],p=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=a?u.shape[u.rank-2]:u.shape[u.rank-1],m=c.shape.slice(0,-2),g=u.shape.slice(0,-2),y=gI(m),v=gI(g);pI(h===d,()=>"Error in fused matMul: inner shapes (".concat(h,") and (")+"".concat(d,") of Tensors with shapes ").concat(c.shape," and ")+"".concat(u.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match."));const b=kR(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),x=XD(c,r?[y,h,p]:[y,p,h]),w=XD(u,a?[v,f,d]:[v,d,f]);let k,S;null!=i&&(k=A_(i,"bias","fused matMul"),[k]=d_(k,c),kR(b,k.shape)),null!=s&&(S=A_(s,"prelu weights","fused matMul"));const N=(e,t)=>{const[n,s,l,c]=t,u=Cz(XD(e,l.shape),l,o);let h,d;if(r||a?!r&&a?(h=JD(u,s,!1,!1),d=JD(u,n,!0,!1)):r&&!a?(h=JD(s,u,!1,!0),d=JD(n,u,!1,!1)):(h=JD(s,u,!0,!0),d=JD(u,n,!0,!0)):(h=JD(u,s,!1,!0),d=JD(n,u,!0,!1)),null!=i){return[h,d,Az(c,u)]}return[h,d]},T={a:x,b:w,bias:k,preluActivationWeights:S},I={transposeA:r,transposeB:a,activation:o,leakyreluAlpha:l};if(null==i){const e=iR((e,t,n)=>{const r=x_.runKernel(oO,T,I);return n([e,t,r]),{value:XD(r,b),gradFunc:N}});return e(x,w)}{const e=iR((e,t,n,r)=>{const a=x_.runKernel(oO,T,I);return r([e,t,a,n]),{value:XD(a,b),gradFunc:N}});return e(x,w,k)}}});const Lz=M_({hammingWindow_:function(e){return Tz(e,.54,.46)}});const zz=M_({hannWindow_:function(e){return Tz(e,.5,.5)}});const jz=M_({frame_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0;const o=[];for(;i+t<=e.size;)o.push(eF(e,i,t)),i+=n;if(r)for(;i<e.size;){const r=i+t-e.size,s=QD([eF(e,i,t-r),fR([r],a)]);o.push(s),i+=n}return 0===o.length?ez([],[0,t]):XD(QD(o),[o.length,t])}});const Bz=M_({stft_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zz;null==r&&(r=Nz(t));const i=jz(e,t,n),o=tR(i,a(t));return KL(o,r)}});const Uz=M_({cropAndResize_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const o=A_(e,"image","cropAndResize"),s=A_(t,"boxes","cropAndResize","float32"),l=A_(n,"boxInd","cropAndResize","int32"),c=s.shape[0];pI(4===o.rank,()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")),pI(2===s.rank&&4===s.shape[1],()=>"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")),pI(1===l.rank&&l.shape[0]===c,()=>"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")),pI(2===r.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")),pI(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was ".concat(r)),pI("bilinear"===a||"nearest"===a,()=>"method must be bilinear or nearest, but was ".concat(a));const u={image:o,boxes:s,boxInd:l},h={method:a,extrapolationValue:i,cropSize:r};return x_.runKernel(LE,u,h)}});const Wz=M_({flipLeftRight_:function(e){const t=A_(e,"image","flipLeftRight","float32");pI(4===t.rank,()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,"."));const n={image:t};return x_.runKernel(iC,n,{})}});const Vz=M_({grayscaleToRGB_:function(e){const t=A_(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];pI(t.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),pI(1===r,()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,"."));const a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,iP(t,a)}});const Gz=M_({rgbToGrayscale_:function(e){const t=A_(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];pI(t.rank>=2,()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),pI(3===r,()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,"."));const a=t.dtype,i=YM(t,"float32"),o=$L([.2989,.587,.114]);let s;switch(t.rank){case 2:s=zF("ij,j->i",i,o);break;case 3:s=zF("ijk,k->ij",i,o);break;case 4:s=zF("ijkl,l->ijk",i,o);break;case 5:s=zF("ijklm,m->ijkl",i,o);break;case 6:s=zF("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return s=rP(s,-1),YM(s,a)}});const Hz=M_({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const a=A_(e,"image","rotateWithOffset","float32");pI(4===a.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,"."));const i={image:a},o={radians:t,fillValue:n,center:r};return x_.runKernel(iO,i,o)}});function Kz(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);const o=e.shape[0];return n=Math.min(n,o),pI(0<=r&&r<=1,()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'")),pI(2===e.rank,()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")),pI(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])),pI(1===t.rank,()=>"scores must be a 1D tensor"),pI(t.shape[0]===o,()=>"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])),pI(0<=i&&i<=1,()=>"softNmsSigma must be in [0, 1], but was '".concat(i,"'")),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}const qz=M_({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const i=A_(e,"boxes","nonMaxSuppression","float32"),o=A_(t,"scores","nonMaxSuppression","float32"),s=Kz(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return x_.runKernel(KC,{boxes:i,scores:o},l)}});function Xz(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,i=0,o=!1;for(;r<a;){i=r+(a-r>>>1);const s=n(t,e[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||Yz)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Yz(e,t){return e>t?1:e<t?-1:0}function Zz(e,t,n,r,a){return $z(e,t,n,r,a,0)}function Qz(e,t,n,r,a,i){return $z(e,t,n,r,a,0,!1,i,!0)}function Jz(e,t,n,r,a,i){return $z(e,t,n,r,a,i,!0)}function $z(e,t,n,r,a,i){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const c=[];for(let g=0;g<t.length;g++)t[g]>a&&c.push({score:t[g],boxIndex:g,suppressBeginIndex:0});c.sort(nj);const u=i>0?-.5/i:0,h=[],d=[];for(;h.length<n&&c.length>0;){const t=c.pop(),{score:n,boxIndex:i,suppressBeginIndex:o}=t;if(n<a)break;let s=!1;for(let l=h.length-1;l>=o;--l){const n=ej(e,i,h[l]);if(n>=r){s=!0;break}if(t.score=t.score*tj(r,u,n),t.score<=a)break}t.suppressBeginIndex=h.length,s||(t.score===n?(h.push(i),d.push(t.score)):t.score>a&&Xz(c,t,nj))}const p=h.length,f=n-p;s&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:h};return o&&(m.selectedScores=d),l&&(m.validOutputs=p),m}function ej(e,t,n){const r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),p=(s-i)*(l-o),f=(h-c)*(d-u);if(p<=0||f<=0)return 0;const m=Math.max(i,c),g=Math.max(o,u),y=Math.min(s,h),v=Math.min(l,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(p+f-b)}function tj(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function nj(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const rj=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const i=A_(e,"boxes","nonMaxSuppressionAsync"),o=A_(t,"scores","nonMaxSuppressionAsync"),s=Kz(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:h}=Zz(c,u,n,r,a);return i!==e&&i.dispose(),o!==t&&o.dispose(),$L(h,"int32")};const aj=M_({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const o=A_(e,"boxes","nonMaxSuppression"),s=A_(t,"scores","nonMaxSuppression"),l=Kz(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:o,scores:s},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},h=x_.runKernel(XC,c,u);return{selectedIndices:h[0],selectedScores:h[1]}}});const ij=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const o=A_(e,"boxes","nonMaxSuppressionAsync"),s=A_(t,"scores","nonMaxSuppressionAsync"),l=Kz(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([o.data(),s.data()]),u=c[0],h=c[1],{selectedIndices:d,selectedScores:p}=Jz(u,h,n,r,a,i);return o!==e&&o.dispose(),s!==t&&s.dispose(),{selectedIndices:$L(d,"int32"),selectedScores:$L(p)}};const oj=M_({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=A_(e,"boxes","nonMaxSuppression"),s=A_(t,"scores","nonMaxSuppression"),l=Kz(o,s,n,r,a,null),c={boxes:o,scores:s},u={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:i},h=x_.runKernel(qC,c,u);return{selectedIndices:h[0],validOutputs:h[1]}}});const sj=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=A_(e,"boxes","nonMaxSuppressionAsync"),s=A_(t,"scores","nonMaxSuppressionAsync"),l=Kz(o,s,n,r,a,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,[d,p]=await Promise.all([o.data(),s.data()]),{selectedIndices:f,validOutputs:m}=Qz(d,p,c,u,h,i);return o!==e&&o.dispose(),s!==t&&s.dispose(),{selectedIndices:$L(f,"int32"),validOutputs:oR(m,"int32")}};const lj=M_({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=A_(e,"images","resizeBilinear");pI(3===a.rank||4===a.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")),pI(2===t.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")),pI(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;3===a.rank&&(o=!0,i=XD(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,s={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=x_.runKernel(dA,s,l);return o?XD(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const cj=M_({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=A_(e,"images","resizeNearestNeighbor");pI(3===a.rank||4===a.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")),pI(2===t.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")),pI("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),pI(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;3===a.rank&&(o=!0,i=XD(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,s={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=x_.runKernel(uA,s,l);return o?XD(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const uj=M_({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const a=A_(e,"image","threshold"),i=a.shape[0]*a.shape[1];let o,s,l,c,u=tR($L([r]),255);if(pI(3===a.rank,()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(a.rank,".")),pI(3===a.shape[2]||1===a.shape[2],()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(a.shape[2],".")),pI("int32"===a.dtype||"float32"===a.dtype,()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(a.dtype,".")),pI("otsu"===t||"binary"===t,()=>"Method must be binary or otsu, but was ".concat(t)),3===a.shape[2]){[o,s,l]=HL(a,[1,1,1],-1);const e=tR(o,.2989),t=tR(s,.587),n=tR(l,.114);c=JM(JM(e,t),n)}else c=e;if("otsu"===t){u=function(e,t){let n,r,a,i,o,s,l=$L([-1]),c=$L([0]),u=$L([0]);for(let h=0;h<e.size-1;h++){n=eF(e,0,h+1),r=eF(e,h+1),o=eR(JF(n),t),s=eR(JF(r),t);const d=JF(tR(n,bL(0,n.size)));a=eR(d,JF(n));const p=fR(r.shape,n.size),f=JM(bL(0,r.size),p),m=tR(r,f);i=eR(JF(m),JF(r));const g=yR(a,i),y=yR(a,i),v=tR(o,s);u=tR(tR(v,g),y);const b=cP(u,c);c=FF(b,u,c),l=FF(b,$L([h]),l)}return l}(lF(YM(AL(c),"int32"),F_([]),256),i)}const h=n?yP(c,u):cP(c,u);return YM(tR(h,255),"int32")}});const hj=M_({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0;const o=A_(e,"image","transform","float32"),s=A_(t,"transforms","transform","float32");pI(4===o.rank,()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")),pI(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),pI(null==i||2===i.length,()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,"."));const l={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return x_.runKernel(QA,l,c)}});const dj=M_({bandPart_:function(e,t,n){const r=A_(e,"a","bandPart");pI(r.rank>=2,()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,"."));const a=r.shape,[i,o]=r.shape.slice(-2);let s,l;"number"===typeof t?(pI(t%1===0,()=>"bandPart(): numLower must be an integer, got ".concat(t,".")),pI(t<=i,()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(i,").")),s=A_(t<0?i:t,"numLower","bandPart")):(pI("int32"===t.dtype,()=>"bandPart(): numLower's dtype must be an int32."),s=FF(gP(t,0),i,UP(t,i))),"number"===typeof n?(pI(n%1===0,()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")),pI(n<=o,()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(o,").")),l=A_(n<0?o:n,"numUpper","bandPart")):(pI("int32"===n.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),l=FF(gP(n,0),o,UP(n,o)));const c=XD(bL(0,i,1,"int32"),[-1,1]),u=bL(0,o,1,"int32"),h=yR(c,u),d=EP(yP(h,s),uP(h,kP(l))),p=zP([i,o],r.dtype);return XD(YL(dz(XD(r,[-1,i,o])).map(e=>FF(d,e,p))),a)}});const pj=M_({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,pI(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=e[0].shape[0];for(let t=1;t<e.length;++t)pI(e[t].shape[0]===n,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")"))}else t=!0,e=HL(e,e.shape[0],0).map(e=>XL(e,[0]));pI(e.length<=e[0].shape[0],()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],")."));const n=[],r=e;for(let a=0;a<e.length;++a)n.push(x_.tidy(()=>{let e=r[a];if(a>0)for(let t=0;t<a;++t){const r=tR(JF(tR(n[t],e)),n[t]);e=yR(e,r)}return eR(e,eP(e,"euclidean"))}));return t?YL(n,0):n}});function fj(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return x_.tidy(()=>{pI(2===e.shape.length,()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor."));const n=e.shape[0],r=e.shape[1];let a=oP(n),i=ZM(e);const o=ez([[1]],[1,1]);let s=ZM(o);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=i,l=s,c=a;[s,i,a]=x_.tidy(()=>{const t=eF(i,[e,e],[n-e,1]),l=eP(t),c=eF(i,[e,e],[1,1]),u=FF(cP(c,0),ez([[-1]]),ez([[1]])),h=yR(c,tR(u,l)),d=eR(t,h);s=1===d.shape[0]?ZM(o):QD([o,eF(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=kP(eR(JD(u,h),l)),f=eF(i,[e,0],[n-e,r]),m=tR(p,s),g=vz(s);if(0===e)i=yR(f,JD(m,JD(g,f)));else{const t=yR(f,JD(m,JD(g,f)));i=QD([eF(i,[0,0],[e,r]),t],0)}const y=vz(m),v=eF(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=yR(v,JD(JD(v,s),y));else{const t=yR(v,JD(JD(v,s),y));a=QD([eF(a,[0,0],[n,e]),t],1)}return[s,i,a]}),U_([t,l,c])}return!t&&n>r&&(a=eF(a,[0,0],[n,r]),i=eF(i,[0,0],[r,r])),[a,i]})}const mj=M_({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(pI(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)),2===e.rank)return fj(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=dz(XD(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach(e=>{const[n,r]=fj(e,t);a.push(n),i.push(r)});return[XD(YL(a,0),e.shape),XD(YL(i,0),e.shape)]}}});var gj;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(gj||(gj={}));const yj=M_({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gj.SUM_BY_NONZERO_WEIGHTS;const r=A_(e,"losses","computeWeightedLoss");let a=null;null!=t&&(a=A_(t,"weights","computeWeightedLoss"));const i=null==a?r:tR(r,a);if(n===gj.NONE)return i;if(n===gj.SUM)return JF(i);if(n===gj.MEAN){if(null==a)return LP(i);{const e=r.size/a.size,t=eR(JF(i),JF(a));return e>1?eR(t,oR(e)):t}}if(n===gj.SUM_BY_NONZERO_WEIGHTS){if(null==a)return eR(JF(i),oR(r.size));{const e=tR(a,jP(r.shape)),t=YM(JF(qP(e,oR(0))),"float32");return eR(JF(i),t)}}throw Error("Unknown reduction: ".concat(n))}});const vj=M_({absoluteDifference_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gj.SUM_BY_NONZERO_WEIGHTS;const a=A_(e,"labels","absoluteDifference"),i=A_(t,"predictions","absoluteDifference");let o=null;null!=n&&(o=A_(n,"weights","absoluteDifference")),fI(a.shape,i.shape,"Error in absoluteDifference: ");const s=bR(yR(a,i));return yj(s,o,r)}});const bj=M_({cosineDistance_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gj.SUM_BY_NONZERO_WEIGHTS;const i=A_(e,"labels","cosineDistance"),o=A_(t,"predictions","cosineDistance");let s=null;null!=r&&(s=A_(r,"weights","cosineDistance")),fI(i.shape,o.shape,"Error in cosineDistance: ");const l=oR(1),c=yR(l,JF(tR(i,o),n,!0));return yj(c,s,a)}});const xj=M_({hingeLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gj.SUM_BY_NONZERO_WEIGHTS,a=A_(e,"labels","hingeLoss");const i=A_(t,"predictions","hingeLoss");let o=null;null!=n&&(o=A_(n,"weights","hingeLoss")),fI(a.shape,i.shape,"Error in hingeLoss: ");const s=oR(1);a=yR(tR(oR(2),a),s);const l=kL(yR(s,tR(a,i)));return yj(l,o,r)}});const wj=M_({huberLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gj.SUM_BY_NONZERO_WEIGHTS;const i=A_(e,"labels","huberLoss"),o=A_(t,"predictions","huberLoss");let s=null;null!=n&&(s=A_(n,"weights","huberLoss")),fI(i.shape,o.shape,"Error in huberLoss: ");const l=oR(r),c=bR(yR(o,i)),u=UP(c,l),h=yR(c,u),d=JM(tR(oR(.5),rR(u)),tR(l,h));return yj(d,s,a)}});const kj=M_({logLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gj.SUM_BY_NONZERO_WEIGHTS;const i=A_(e,"labels","logLoss"),o=A_(t,"predictions","logLoss");let s=null;null!=n&&(s=A_(n,"weights","logLoss")),fI(i.shape,o.shape,"Error in logLoss: ");const l=oR(1),c=oR(r),u=kP(tR(i,xP(JM(o,c)))),h=tR(yR(l,i),xP(JM(yR(l,o),c))),d=yR(u,h);return yj(d,s,a)}});const Sj=M_({meanSquaredError_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gj.SUM_BY_NONZERO_WEIGHTS;const a=A_(e,"labels","meanSquaredError"),i=A_(t,"predictions","meanSquaredError");let o=null;null!=n&&(o=A_(n,"weights","meanSquaredError")),fI(a.shape,i.shape,"Error in meanSquaredError: ");const s=qL(a,i);return yj(s,o,r)}});const Nj=M_({sigmoidCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gj.SUM_BY_NONZERO_WEIGHTS,i=A_(e,"multiClassLabels","sigmoidCrossEntropy");const o=A_(t,"logits","sigmoidCrossEntropy");let s=null;if(null!=n&&(s=A_(n,"weights","sigmoidCrossEntropy")),fI(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=oR(r),t=oR(1),n=oR(.5);i=JM(tR(i,yR(t,e)),tR(n,e))}const l=function(e,t){const n=A_(e,"labels","sigmoidCrossEntropyWithLogits"),r=A_(t,"logits","sigmoidCrossEntropyWithLogits");fI(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=kL(r),i=tR(r,n),o=wP(nP(kP(bR(r))));return JM(yR(a,i),o)}(i,o);return yj(l,s,a)}});const Tj=M_({softmaxCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gj.SUM_BY_NONZERO_WEIGHTS,i=A_(e,"onehotLabels","softmaxCrossEntropy");const o=A_(t,"logits","softmaxCrossEntropy");let s=null;if(null!=n&&(s=A_(n,"weights","softmaxCrossEntropy")),fI(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const e=oR(r),t=oR(1),n=oR(i.shape[1]);i=JM(tR(i,yR(t,e)),eR(e,n))}const l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));const r=iR((e,t,r)=>{const a=IP(t,[n],!0),i=yR(YM(t,"float32"),a);r([e,i]);const o=kP(tR(i,e));return{value:JF(o,[n]),gradFunc:(e,t)=>{const[r,a]=t,i=HF(e.shape,[n]);return[tR(XD(e,i),yR(YM(r,"float32"),nP(a))),tR(XD(e,i),yR(nP(a),YM(r,"float32")))]}}});return r(e,t)}(i,o);return yj(l,s,a)}});const Ij=M_({sparseFillEmptyRows_:function(e,t,n,r){const a=A_(e,"indices","sparseFillEmptyRows","int32"),i=A_(t,"values","sparseFillEmptyRows"),o=A_(n,"denseShape","sparseFillEmptyRows","int32"),s=A_(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));const l={indices:a,values:i,denseShape:o,defaultValue:s},c=x_.runKernel(DA,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});const Ej=M_({sparseReshape_:function(e,t,n){const r=A_(e,"inputIndices","sparseReshape","int32"),a=A_(t,"inputShape","sparseReshape","int32"),i=A_(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));const o={inputIndices:r,inputShape:a,newShape:i},s=x_.runKernel(FA,o);return{outputIndices:s[0],outputShape:s[1]}}});const Cj=M_({sparseSegmentMean_:function(e,t,n){const r=A_(e,"data","sparseSegmentMean"),a=A_(t,"indices","sparseSegmentMean","int32"),i=A_(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));const o={data:r,indices:a,segmentIds:i};return x_.runKernel(PA,o)}});const Aj=M_({sparseSegmentSum_:function(e,t,n){const r=A_(e,"data","sparseSegmentSum"),a=A_(t,"indices","sparseSegmentSum","int32"),i=A_(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));const o={data:r,indices:a,segmentIds:i};return x_.runKernel(LA,o)}});const Oj=M_({stringNGrams_:function(e,t,n,r,a,i,o,s){const l=A_(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: ".concat(l.shape));const c=A_(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},h={data:l,dataSplits:c},d=x_.runKernel(VA,h,u);return{nGrams:d[0],nGramsSplits:d[1]}}});const _j=M_({stringSplit_:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=A_(e,"input","stringSplit","string"),a=A_(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));const i={skipEmpty:n},o={input:r,delimiter:a},s=x_.runKernel(GA,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});const Mj=M_({stringToHashBucketFast_:function(e,t){const n=A_(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return x_.runKernel(HA,a,r)}});const Rj=M_({staticRegexReplace_:function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=A_(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return x_.runKernel(UA,{x:a},i)}}),Dj={fft:WL,ifft:VL,rfft:KL,irfft:GL},Fj={hammingWindow:Lz,hannWindow:zz,frame:jz,stft:Bz},Pj={flipLeftRight:Wz,grayscaleToRGB:Vz,resizeNearestNeighbor:cj,resizeBilinear:lj,rgbToGrayscale:Gz,rotateWithOffset:Hz,cropAndResize:Uz,nonMaxSuppression:qz,nonMaxSuppressionAsync:rj,nonMaxSuppressionWithScore:aj,nonMaxSuppressionWithScoreAsync:ij,nonMaxSuppressionPadded:oj,nonMaxSuppressionPaddedAsync:sj,threshold:uj,transform:hj},Lj={bandPart:dj,gramSchmidt:pj,qr:mj},zj={absoluteDifference:vj,computeWeightedLoss:yj,cosineDistance:bj,hingeLoss:xj,huberLoss:wj,logLoss:kj,meanSquaredError:Sj,sigmoidCrossEntropy:Nj,softmaxCrossEntropy:Tj},jj={sparseFillEmptyRows:Ij,sparseReshape:Ej,sparseSegmentMean:Cj,sparseSegmentSum:Aj},Bj={stringNGrams:Oj,stringSplit:_j,stringToHashBucketFast:Mj,staticRegexReplace:Rj};const Uj=class{static sgd(e){return new TR(e)}static momentum(e,t){return new IR(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new ER(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new vR(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new pR(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new NR(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new mR(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},Wj="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function Vj(){return new Promise(e=>Wj(()=>e()))}function Gj(e,t){const n=e[0].length;e.forEach((e,t)=>{pI(e.length===n,()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")"))}),pI(t>=0&&t<n,()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,"."));const r=e[0];e.forEach((e,a)=>{for(let i=0;i<n;i++)pI(i===t||e[i]===r[i],()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,"."))})}function Hj(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Kj;function qj(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let a=1;a<n.length;++a){const i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(s))}else r[o]=i}return r}function Xj(e){const t={FIRST_DIM_SIZE:Kj.FIRST_DIM_SIZE,VALUE_ROWIDS:Kj.VALUE_ROWIDS,ROW_LENGTHS:Kj.ROW_LENGTHS,ROW_SPLITS:Kj.ROW_SPLITS,ROW_LIMITS:Kj.ROW_LIMITS,ROW_STARTS:Kj.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function Yj(e){return 0===e.length?0:e[0]===Kj.FIRST_DIM_SIZE?e.length-1:e.length}function Zj(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let a=0;a<Math.min(n,r-1);++a){const n=e[a],r=t[a+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(r))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(Kj||(Kj={}));const Qj=30;function Jj(e){return e<=Qj?e:RI(e,Math.floor(Math.sqrt(e)))}function $j(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function eB(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let a=0;a<n;++a)r=r.concat([e[a+1]/t[a],t[a]]);r=r.concat(e.slice(n+1))}return r}function tB(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],a=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?a.push(n):r.push(n);n.push(...r),n.push(0),n.push(...a)}return n}function nB(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function rB(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function aB(e,t,n){const r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function iB(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===gI(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const a=t.shape,i=a[a.length-1];let o=1;for(let h=0;h<a.length-1;++h)o*=a[h];const s=e.shape,l=a.slice();l.pop();let c=1;for(let h=i;h<n;++h)c*=s[h],l.push(s[h]);const u=[...DI(e.shape).map(e=>e/c),1].slice(0,i);return[l,o,c,u]}const oB=1.7580993408473768,sB=1.0507009873554805,lB=.3275911,cB=.254829592,uB=-.284496736,hB=1.421413741,dB=-1.453152027,pB=1.061405429;function fB(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function mB(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function gB(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function yB(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function vB(e,t){return{real:e[2*t],imag:e[2*t+1]}}function bB(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function xB(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){const i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function wB(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const kB="->",SB=/->/g,NB=",",TB="...";function IB(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(SB,"").length)/kB.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(kB,'").'));const[r,a]=e.split(kB);pI(-1===r.indexOf(TB),()=>'The ellipsis notation ("'.concat(TB,'") is not supported yet.'));const i=r.split(NB),o=i.length;if(t!==o)throw new Error("Expected ".concat(o," input tensors, received ").concat(t));if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let h=0;h<a.length;++h){const e=a[h];if(!i.some(t=>-1!==t.indexOf(e)))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===s.indexOf(e)&&s.push(e)}for(let h=0;h<r.length;++h){const e=r[h];-1===s.indexOf(e)&&e!==NB&&s.push(e)}const l=new Array(i.length);for(let h=0;h<o;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error("Found duplicate axes in input component ".concat(i[h],". ")+"Support for duplicate axes in input is not implemented yet.");l[h]=[];for(let e=0;e<i[h].length;++e)l[h].push(s.indexOf(i[h][e]))}const c=s.length,u=[];for(let h=a.length;h<c;++h)u.push(h);return{allDims:s,summedDims:u,idDims:l}}function EB(e,t){let n=new Array(e);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;const r=[];for(let a=0;a<e;++a)-1===n[a]&&r.push(a);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function CB(e,t,n){const r=new Array(e);for(let a=0;a<n.length;++a){const e=n[a].shape;for(let n=0;n<t[a].length;++n)void 0===r[t[a][n]]?r[t[a][n]]=e[n]:pI(r[t[a][n]]===e[n],()=>"Expected dimension ".concat(r[t[a][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n]))}}function AB(e,t){const n=e,r=[];let a=0;0===e.length&&n.push(-1),a=e.length+1;for(let o=0;o<a;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const e=_B(t,n[o]);for(const t of e)-1===i.indexOf(t)&&(r[o].push(t),i.push(t))}return{path:n,steps:r}}function OB(e){return e.every((e,t)=>e===t)}function _B(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function MB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)pI(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const a=t.reduce((e,t)=>(-1===t&&(e+=1),e),0);pI(a<=1,()=>"There should be only one negative value in split array.");const i=t.indexOf(-1);if(-1!==i){const r=t.reduce((e,t)=>t>0?e+t:e);t[i]=e.shape[n]-r}pI(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function RB(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function DB(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function FB(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function PB(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function LB(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function zB(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function jB(e,t){const n=gI(e),r=gI(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function BB(e,t){const n=gI(e),r=gI(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function UB(){return"segment ids must be >= 0"}function WB(){return"segment ids are not increasing"}function VB(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function GB(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function HB(e,t){let n,r=!1;for(e<=Qj?(n=e,r=!0):n=RI(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=RI(e,n+1);return n}function KB(e,t,n){const r=[],a=e.length;for(let i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function qB(e,t,n,r){const a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let h=0;h<r;++h)if(e.shape[h]!==t.shape[h])throw new Error("x.shape[".concat(h,"]: ").concat(e.shape[h]," should be equal to indices.shape[").concat(h,"]: ").concat(t.shape[h],"."));const o=e.shape[n],s=[];let l=1,c=1,u=1;for(let h=0;h<r;++h)s.push(e.shape[h]),l*=e.shape[h];for(let h=r;h<n;h++)s.push(e.shape[h]),c*=e.shape[h];for(let h=r;h<a;h++)s.push(t.shape[h]);for(let h=n+1;h<i;h++)s.push(e.shape[h]),u*=e.shape[h];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:s}}function XB(e){try{return e.map(e=>zO(e))}catch(uoe){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(uoe))}}function YB(e){return e.map(e=>LO(e))}!function(){for(const e of CR)hR(e)}();const ZB={kernelName:JI,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(e,ZL(YM(n,"float32"),-1))}}},QB={kernelName:$I,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=rR(YM(n,"float32")),r=nR(yR(oR(1),t));return kP(eR(e,r))}}}},JB={kernelName:eE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=nR(yR(rR(YM(n,"float32")),1));return eR(e,t)}}}},$B={kernelName:tE,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=kR(n.shape,r.shape);return{a:()=>{let t=e;const r=wR(n.shape,a);return r.length>0&&(t=JF(t,r)),XD(t,n.shape)},b:()=>{let t=e;const n=wR(r.shape,a);return n.length>0&&(t=JF(t,n)),XD(t,r.shape)}}}},eU={kernelName:nE,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}},tU={kernelName:iE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>aR(n)}}},nU={kernelName:oE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>aR(n)}}},rU={kernelName:sE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eR(e,nR(yR(oR(1),rR(YM(n,"float32")))))}}},aU={kernelName:lE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=nR(JM(oR(1),rR(YM(n,"float32"))));return eR(e,t)}}}},iU={kernelName:hE,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=kR(n.shape,r.shape);return{a:()=>{const t=JM(rR(n),rR(r));let i=tR(e,eR(r,t));const o=wR(n.shape,a);return o.length>0&&(i=JF(i,o)),XD(i,n.shape)},b:()=>{const t=JM(rR(n),rR(r));let i=kP(tR(e,eR(n,t)));const o=wR(r.shape,a);return o.length>0&&(i=JF(i,o)),XD(i,r.shape)}}}},oU={kernelName:cE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eR(e,JM(rR(YM(n,"float32")),1))}}},sU={kernelName:uE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eR(e,yR(oR(1),rR(YM(n,"float32"))))}}};const lU=M_({avgPool3dGrad_:function(e,t,n,r,a,i){const o=A_(e,"dy","avgPool3dGrad"),s=A_(t,"input","avgPool3dGrad");let l=o,c=s,u=!1;4===s.rank&&(u=!0,l=XD(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=XD(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),pI(5===l.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")),pI(5===c.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")),qD("avgPool3dGrad",a,i);const h={dy:l,input:c},d={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=x_.runKernel(mE,h,d);return u?XD(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),cU={kernelName:fE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:i,pad:o,dimRoundingMode:s}=n;return{x:()=>lU(e,r,a,i,o,s)}}};const uU=M_({avgPoolGrad_:function(e,t,n,r,a){const i=A_(e,"dy","avgPoolGrad"),o=A_(t,"input","avgPoolGrad");pI(o.rank===i.rank,()=>"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")"));let s=o,l=i,c=!1;3===o.rank&&(c=!0,s=XD(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=XD(i,[1,i.shape[0],i.shape[1],i.shape[2]])),pI(4===l.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,".")),pI(4===s.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,"."));const u={dy:l,input:s},h={filterSize:n,strides:r,pad:a},d=x_.runKernel(pE,u,h);return c?XD(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),hU={kernelName:dE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:i,pad:o}=n;return{x:()=>uU(e,r,a,i,o)}}},dU={kernelName:gE,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,a]=t,{transposeA:i,transposeB:o}=n;return i||o?!i&&o?{a:()=>JD(e,a,!1,!1),b:()=>JD(e,r,!0,!1)}:i&&!o?{a:()=>JD(a,e,!1,!0),b:()=>JD(r,e,!1,!1)}:{a:()=>JD(a,e,!0,!0),b:()=>JD(e,r,!0,!0)}:{a:()=>JD(e,a,!1,!0),b:()=>JD(r,e,!0,!1)}}},pU={kernelName:yE,gradFunc:(e,t,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>nL(e,r,a)}}},fU={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,a=r.inputShape,i=r.shape,o=Array.from(i);for(let l=a.length-1;l>=0;l--)if(a[l]===i[l])o[l]=1;else if(1!==a[l])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));const s=[];for(let l=0;l<o.length;l++)o[l]>1&&s.push(l);return{x:()=>JF(e,s,!0)}}},mU={kernelName:wE,gradFunc:e=>({x:()=>e.clone()})},gU={kernelName:kE,gradFunc:e=>({x:()=>aR(e)})},yU={kernelName:SE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>FF(EP(uP(r,a),yP(r,i)),e,aR(e))}}},vU={kernelName:TE,inputsToSave:["x"],gradFunc:ZB.gradFunc},bU={kernelName:IE,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(e=>e.shape),{axis:a}=n,i=SI(a,t[0].shape)[0],o=r.map(e=>e[i]);return HL(e,o,i).map(e=>()=>e)}},xU={kernelName:EE,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{dilations:i,strides:o,pad:s,dataFormat:l}=n;return pI(VD(i),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'")),{x:()=>xF(r.shape,e,a,o,s,l),filter:()=>Ez(r,e,a.shape,o,s,l)}}},wU={kernelName:AE,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{strides:i,pad:o,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>vF(e,a,i,o,s,1,l),filter:()=>Ez(e,r,a.shape,i,o,s,l)}}};const kU=M_({conv3DBackpropFilter_:function(e,t,n,r,a){let i=e;4===e.rank&&(i=XD(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let o=t;4===o.rank&&(o=XD(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),pI(5===i.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")),pI(5===o.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")),pI(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")),pI(i.shape[4]===n[3],()=>"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")),pI(o.shape[4]===n[4],()=>"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],")."));const s={x:i,dy:o},l={strides:r,pad:a,filterShape:n};return x_.runKernel(_E,s,l)}}),SU={kernelName:OE,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:i}=n;pI(VD(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'"));const[o,s]=t;return{x:()=>SF(o.shape,e,s,a,i),filter:()=>kU(o,e,s.shape,a,i)}}},NU={kernelName:RE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(kP(FL(YM(n,"float32"))),e)}}},TU={kernelName:DE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(PL(YM(n,"float32")),e)}}},IU={kernelName:PE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a,exclusive:i,reverse:o}=n;return{x:()=>{const t=qF([a],r.rank);let n=CF(e,a,i,!o);return null!=t&&(n=vz(n,t)),n}}}},EU={kernelName:BE,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:i,dimRoundingMode:o}=n,s=null==r?[1,1]:r;pI(VD(s),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'"));const[l,c]=t;return pI(4===l.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")),pI(4===c.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")),pI(l.shape[3]===c.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")),pI(GD(a,s),()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")),qD("depthwiseConv2d",i,o),{x:()=>Dz(l.shape,e,c,a,i,s,o),filter:()=>Rz(l,e,c.shape,a,i,s,o)}}},CU={kernelName:GE,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,i={x:r,filter:a,dy:e},o={x:r,filter:a,dy:e};return{x:()=>x_.runKernel(HE,i,n),filter:()=>x_.runKernel(KE,o,n)}}},AU={kernelName:ZE,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>x_.runKernel(QE,r)}}},OU={kernelName:JE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=tR(nP(kP(rR(n))),2/Math.sqrt(Math.PI));return{x:()=>tR(e,r)}}},_U={kernelName:eC,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(e,n)}}},MU={kernelName:tC,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>XD(e,n.shape)}}},RU={kernelName:nC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(e,nP(n))}}},DU={kernelName:oC,gradFunc:e=>({x:()=>aR(e)})},FU={kernelName:sC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=kR(n.shape,r.shape);return{a:()=>{const t=eR(e,YM(r,"float32")),i=wR(n.shape,a);return i.length>0?XD(JF(t,i),n.shape):t},b:()=>{let t=tR(e,YM(n,"float32"));const i=wR(r.shape,a);i.length>0&&(t=XD(JF(t,i),r.shape));const o=rR(r);return kP(eR(t,YM(o,"float32")))}}}},PU={kernelName:lC,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[a,i,o,s]=t,l=null==s?oR(1):s,c=wR(i.shape,a.shape),u=[];if(1===i.rank){for(let e=0;e<a.shape.length-1;++e)u.push(a.shape[e]);u.push(1)}const h=yR(a,i),d=tR(e,l),p=OL(JM(o,oR(r))),f=tR(tR(tR(p,p),p),oR(-.5));return{x:()=>1===i.rank?XD(tR(tR(e,iP(XD(p,[1,1,1,i.shape[0]]),u)),l),a.shape):XD(tR(tR(e,p),l),a.shape),mean:()=>{let e=tR(tR(p,oR(-1)),d);return 1===i.rank&&(e=JF(e,c)),XD(e,i.shape)},variance:()=>{let e=tR(tR(f,h),d);return 1===i.rank&&(e=JF(e,c)),XD(e,i.shape)},scale:()=>{const t=tR(h,p);let n=tR(e,t);return 1===i.rank&&(n=JF(n,c)),XD(n,i.shape)},offset:()=>{let t=e;return 1===i.rank&&(t=JF(t,c)),XD(t,i.shape)}}}},LU={kernelName:cC,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,a]=t,{axis:i,batchDims:o}=n,s=SI(i,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,a=t.size,o=r.slice(0,s),l=o.length,c=r.slice(i,r.length).slice(1),u=c.length,h=zU(0,l),d=zU(l+1,l+1+u),p=jU([o,[a],c]),f=XD(n,p),m=XD(t,[a]),g=jU([[l],h,d]),y=vz(f,g);let v=hz(y,m,e.shape[s]);const b=XF(g);return v=vz(v,b),v};if(1===o){const t=r.shape[0],n=r.split(t,0);return{x:()=>{const t=YL(n.map((t,n)=>l(t,a.slice(n,1),e.slice(n,1))()));return t.reshape(r.shape)},indices:()=>a}}return{x:l(r,a,e),indices:()=>a}}};function zU(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function jU(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const BU={kernelName:dC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>aR(n),b:()=>aR(r)}}},UU={kernelName:pC,gradFunc:e=>({x:()=>YM(e,"float32")})},WU={kernelName:gC,gradFunc:e=>({x:()=>aR(e)})},VU={kernelName:yC,gradFunc:e=>({x:()=>aR(e)})},GU={kernelName:vC,gradFunc:e=>({x:()=>aR(e)})},HU={kernelName:bC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:a}=n,i=cP(r,0);return{x:()=>FF(i,e,tR(e,a))}}},KU={kernelName:NC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eR(e,JM(n,1))}}},qU={kernelName:SC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eR(e,YM(n,"float32"))}}},XU={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;return{logits:()=>{const t=nP(r);return yR(e,tR(JF(e,a,!0),t))}}}};const YU=M_({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},a={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return x_.runKernel(AC,r,a)}}),ZU={kernelName:CC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{depthRadius:i,bias:o,alpha:s,beta:l}=n;return{x:()=>YU(r,a,e,i,o,s,l)}}};function QU(e,t,n,r){return t.rank<n.rank&&(t=XD(t,HF(t.shape,r))),e.rank<n.rank&&(e=XD(e,HF(e.shape,r))),{x:()=>tR(e,YM(DF(n,t),e.dtype))}}const JU={kernelName:OC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:a}=r,i=t[0],o=QU(e,t[1],i,SI(a,i.shape));return{x:()=>o.x()}}},$U={kernelName:_C,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>tR(e,YM(uP(n,r),"float32")),b:()=>tR(e,YM(gP(n,r),"float32"))}}};const eW=M_({maxPool3dGrad_:function(e,t,n,r,a,i,o){const s=A_(e,"dy","maxPool3dGrad"),l=A_(t,"input","maxPool3dGrad"),c=A_(n,"output","maxPool3dGrad");let u=s,h=l,d=c,p=!1;4===l.rank&&(p=!0,u=XD(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=XD(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=XD(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),pI(5===u.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")),pI(5===h.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(h.rank,".")),pI(5===d.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")),qD("maxPool3dGrad",i,o);const f={dy:u,input:h,output:d},m={filterSize:r,strides:a,pad:i,dimRoundingMode:o},g=x_.runKernel(FC,f,m);return p?XD(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),tW={kernelName:DC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=n;return{x:()=>eW(e,r,a,i,o,s,l)}}};const nW=M_({maxPoolGrad_:function(e,t,n,r,a,i,o){const s=A_(e,"dy","maxPoolGrad"),l=A_(t,"input","maxPoolGrad"),c=A_(n,"output","maxPoolGrad");pI(l.rank===s.rank,()=>"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(s.rank,")")),pI(4===s.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")),pI(4===l.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,".")),qD("maxPoolGrad",i,o);const u={dy:s,input:l,output:c},h={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return x_.runKernel(RC,u,h)}}),rW={kernelName:MC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:i,strides:o,pad:s}=n;return{x:()=>nW(e,r,a,i,o,s)}}},aW={kernelName:BC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,i=a.map(e=>e[0]);return{x:()=>eF(e,i,r.shape)}}},iW={kernelName:QC,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return dz(e,r).map(e=>()=>e)}},oW={kernelName:JC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,i=a.map(e=>e[0]);return{x:()=>eF(e,i,r.shape)}}},sW={kernelName:$C,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,a]=t,i=n,o=r,s=kR(i.shape,o.shape);return{a:()=>{const t=YM(o,"float32");let n=tR(e,tR(t,gR(i,yR(t,oR(1)))));const r=wR(i.shape,s);return r.length>0&&(n=JF(n,r)),XD(n,i.shape)},b:()=>{const t=cP(i,0),n=FF(t,xP(i),aR(i));let r=tR(e,tR(a,n));const l=wR(o.shape,s);return l.length>0&&(r=JF(r,l)),XD(r,o.shape)}}}},lW={kernelName:eA,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,a=cP(n,0);return{x:()=>FF(a,e,tR(e,r)),alpha:()=>{let t=FF(a,aR(e),tR(e,n));const i=wR(r.shape,e.shape);return i.length>0&&(t=JF(t,i)),XD(t,r.shape)}}}};function cW(e,t,n){const r=e.shape.length,a=r-n.length,i=qF(n,r);let o=e;null!=i&&(o=vz(e,i));const s=o.shape.slice(),l=s.splice(r-n.length,n.length).reduce((e,t)=>e*t,1);s.push(l);let c=function(e,t,n){const r=e.shape.slice();r[n]=1;const a=XD(t,r),i=EF(e,n,!0,!1),o=EF(e,n,!0,!0),s=tR(i,o);return tR(a,s)}(o.reshape(s),t,a);if(c=c.reshape(o.shape),null!=i){const e=XF(i);c=vz(c,e)}return c}const uW={kernelName:kA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=cP(n,oR(0)),r=oR(oB),a=oR(sB),i=tR(e,a),o=tR(tR(e,r),nP(YM(n,"float32")));return FF(t,i,o)}}}},hW={kernelName:_A,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>rF(e,r,a)}}},dW={kernelName:MA,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>QD(e,r)}}},pW={kernelName:YA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:a}=n;return{x:()=>{let t=aR(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=JM(t,eF(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)t=JM(t,eF(e,[n*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)for(let o=0;o<a[2];++o)t=JM(t,eF(e,[n*r.shape[0],i*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)for(let o=0;o<a[2];++o)for(let s=0;s<a[3];++s)t=JM(t,eF(e,[n*r.shape[0],i*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}};const fW=[ZB,QB,JB,$B,eU,tU,nU,rU,aU,iU,oU,sU,cU,hU,dU,pU,fU,mU,gU,yU,vU,bU,wU,xU,SU,NU,TU,IU,EU,CU,{kernelName:XE,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=kR(n.shape,r.shape);return{a:()=>{const t=eR(e,YM(r,"float32")),i=wR(n.shape,a);return i.length>0?XD(JF(t,i),n.shape):t},b:()=>{let t=tR(e,YM(n,"float32"));const i=wR(r.shape,a);i.length>0&&(t=XD(JF(t,i),r.shape));const o=rR(r);return kP(eR(t,YM(o,"float32")))}}}},AU,OU,_U,MU,RU,FU,DU,PU,LU,BU,UU,WU,VU,GU,HU,KU,qU,XU,ZU,JU,JU,$U,tW,rW,{kernelName:LC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n,i=SI(a,r.shape),o=gI(GF(r.shape,i)[1]);return{x:()=>{const t=r.shape.slice();i.forEach(e=>{t[e]=1});const n=XD(e,t);return eR(tR(n,jP(r.shape,"float32")),o)}}}},{kernelName:zC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:a}=r,[i,o]=t,s=QU(e,o,i,SI(a,i.shape));return{x:()=>s.x()}}},{kernelName:jC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>tR(e,YM(yP(n,r),"float32")),b:()=>tR(e,YM(cP(n,r),"float32"))}}},aW,{kernelName:UC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=kR(n.shape,r.shape);return{a:()=>{const t=wR(n.shape,a);return t.length>0?XD(JF(e,t),n.shape):e},b:()=>{const t=tR(e,kP(sP(eR(n,r)))),i=wR(r.shape,a);return i.length>0?XD(JF(t,i),r.shape):t}}}},{kernelName:VC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=kR(n.shape,r.shape);return{a:()=>{const t=tR(e,YM(r,"float32")),i=wR(n.shape,a);return i.length>0?XD(JF(t,i),n.shape):t},b:()=>{const t=tR(e,YM(n,"float32")),i=wR(r.shape,a);return i.length>0?XD(JF(t,i),r.shape):t}}}},{kernelName:GC,gradFunc:e=>({x:()=>kP(e)})},{kernelName:ZC,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>zP(n.shape,"float32")}}},{kernelName:YC,gradFunc:e=>({x:()=>aR(e)})},iW,oW,oW,sW,lW,{kernelName:tA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;let i=[];return i=void 0===a||null===a?r.shape.map((e,t)=>t):"number"===typeof a?[a]:a,{x:()=>cW(r,e,i)}}},{kernelName:sA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eR(e,kP(rR(n)))}}},{kernelName:fA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=tR(yP(n,6),ZL(n));return{x:()=>tR(e,YM(r,"float32"))}}},{kernelName:lA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(e,YM(ZL(n),"float32"))}}},{kernelName:cA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>XD(e,n.shape)}}},{kernelName:dA,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>x_.runKernel(pA,a,n)}}},{kernelName:uA,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>x_.runKernel(hA,a,n)}}},{kernelName:mA,gradFunc:(e,t,n)=>{const{dims:r}=n,a=SI(r,e.shape);return{x:()=>NL(e,a)}}},{kernelName:gA,gradFunc:e=>({x:()=>aR(e)})},{kernelName:yA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>kP(eR(e,tR(gR(n,1.5),2)))}}},{kernelName:wA,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>YM(aR(n),"float32"),t:()=>tR(e,YM(n,e.dtype)),e:()=>tR(e,YM(CP(n),e.dtype))}}},uW,{kernelName:EA,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(e,tR(n,yR(oR(1),n)))}}},{kernelName:IA,gradFunc:e=>({x:()=>aR(e)})},{kernelName:NA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(TF(YM(n,"float32")),e)}}},{kernelName:TA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(IF(YM(n,"float32")),e)}}},{kernelName:SA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:a,size:i}=n,o=r.shape,[s,l]=vD(r,a,i),c=[];for(let u=0;u<e.rank;u++)c.push([s[u],o[u]-s[u]-l[u]]);return{x:()=>QP(e,c)}}},{kernelName:RA,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:a}=n,i=tR(e,r);return{logits:()=>yR(i,tR(JF(i,[a],true),r))}}},{kernelName:CA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(e,$D(n))}}},hW,hW,dW,dW,{kernelName:AA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eR(e,tR(nR(YM(n,"float32")),2))}}},{kernelName:jA,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=oR(2);return{a:()=>tR(e,tR(a,yR(n,r))),b:()=>tR(e,tR(a,yR(r,n)))}}},{kernelName:BA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(e,tR(YM(n,"float32"),2))}}},{kernelName:rO,gradFunc:e=>({x:()=>aR(e)})},{kernelName:KA,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=kR(n.shape,r.shape);return{a:()=>{let t=e;const r=wR(n.shape,a);return r.length>0&&(t=JF(t,r)),XD(t,n.shape)},b:()=>{let t=e;const n=wR(r.shape,a);return n.length>0&&(t=JF(t,n)),XD(kP(t),r.shape)}}}},{kernelName:OA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,a=r.shape.slice(),{axis:i}=n;SI(i,r.shape).forEach(e=>{a[e]=1});const o=XD(e,a),s=tR(o,jP(r.shape,"float32"));return{x:()=>s}}},{kernelName:qA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>eR(e,rR(TF(n)))}}},{kernelName:XA,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tR(yR(oR(1),rR(n)),e)}}},pW,{kernelName:JA,gradFunc:(e,t,n)=>{const r=n,{perm:a}=r,i=XF(a);return{x:()=>vz(e,i)}}},{kernelName:eO,gradFunc:(e,t,n)=>{const r=n,{axis:a}=r;return{value:()=>YL(e,a)}}},{kernelName:tO,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=SR(t,aR(t)),r=lP(e,n);let a=uP(t,oR(0,"int32"));const i=r.rank-a.rank;for(let s=0;s<i;++s)a=rP(a,s+1);a=EP(a,jP(r.shape,"bool"));const o=aR(r);return FF(a,r,o)}(e,n)}}},{kernelName:nO,gradFunc:e=>({x:()=>aR(e)})}];for(const n of fW)yO(n);e_().prototype.abs=function(){return this.throwIfDisposed(),bR(this)},e_().prototype.acos=function(){return this.throwIfDisposed(),wD(this)},e_().prototype.acosh=function(){return this.throwIfDisposed(),kD(this)},e_().prototype.add=function(e){return this.throwIfDisposed(),JM(this,e)},e_().prototype.all=function(e,t){return this.throwIfDisposed(),ND(this,e,t)},e_().prototype.any=function(e,t){return this.throwIfDisposed(),TD(this,e,t)},e_().prototype.argMax=function(e){return this.throwIfDisposed(),ID(this,e)},e_().prototype.argMin=function(e){return this.throwIfDisposed(),ED(this,e)},e_().prototype.asScalar=function(){return this.throwIfDisposed(),pI(1===this.size,()=>"The array must have only 1 element."),XD(this,[])},e_().prototype.asType=function(e){return this.throwIfDisposed(),YM(this,e)},e_().prototype.as1D=function(){return this.throwIfDisposed(),XD(this,[this.size])},e_().prototype.as2D=function(e,t){return this.throwIfDisposed(),XD(this,[e,t])},e_().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),XD(this,[e,t,n])},e_().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),XD(this,[e,t,n,r])},e_().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),XD(this,[e,t,n,r,a])},e_().prototype.asin=function(){return this.throwIfDisposed(),CD(this)},e_().prototype.asinh=function(){return this.throwIfDisposed(),AD(this)},e_().prototype.atan=function(){return this.throwIfDisposed(),OD(this)},e_().prototype.atan2=function(e){return this.throwIfDisposed(),_D(this,e)},e_().prototype.atanh=function(){return this.throwIfDisposed(),MD(this)},e_().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),YD(this,e,t,n,r)},e_().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),rF(this,e,t)},e_().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),aF(this,e,t,n,r,a)},e_().prototype.broadcastTo=function(e){return this.throwIfDisposed(),hF(this,e)},e_().prototype.cast=function(e){return this.throwIfDisposed(),YM(this,e)},e_().prototype.ceil=function(){return this.throwIfDisposed(),dF(this)},e_().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),pF(this,e,t)},e_().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof $O&&(e=[e]),QD([this,...e],t)},e_().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),bF(this,e,t,n,r,a,i)},e_().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),wF(this,e,t,n,r,a)},e_().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),vF(this,e,t,n,r,a,i)},e_().prototype.cos=function(){return this.throwIfDisposed(),TF(this)},e_().prototype.cosh=function(){return this.throwIfDisposed(),IF(this)},e_().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),EF(this,e,t,n)},e_().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),CF(this,e,t,n)},e_().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),OF(this,e,t)},e_().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),_F(this,e,t,n,r,a,i)},e_().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),RF(this,e,t,n,r,a)},e_().prototype.divNoNan=function(e){return this.throwIfDisposed(),PF(this,e)},e_().prototype.div=function(e){return this.throwIfDisposed(),eR(this,e)},e_().prototype.dot=function(e){return this.throwIfDisposed(),LF(this,e)},e_().prototype.elu=function(){return this.throwIfDisposed(),jF(this)},e_().prototype.equal=function(e){return this.throwIfDisposed(),DF(this,e)},e_().prototype.erf=function(){return this.throwIfDisposed(),UF(this)},e_().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),tP(this,e,t)},e_().prototype.exp=function(){return this.throwIfDisposed(),nP(this)},e_().prototype.expandDims=function(e){return this.throwIfDisposed(),rP(this,e)},e_().prototype.expm1=function(){return this.throwIfDisposed(),aP(this)},e_().prototype.fft=function(){return this.throwIfDisposed(),WL(this)},e_().prototype.flatten=function(){return this.throwIfDisposed(),XD(this,[this.size])},e_().prototype.floor=function(){return this.throwIfDisposed(),sP(this)},e_().prototype.floorDiv=function(e){return this.throwIfDisposed(),$M(this,e)},e_().prototype.gather=function(e,t,n){return this.throwIfDisposed(),lP(this,e,t,n)},e_().prototype.greaterEqual=function(e){return this.throwIfDisposed(),uP(this,e)},e_().prototype.greater=function(e){return this.throwIfDisposed(),cP(this,e)},e_().prototype.ifft=function(){return this.throwIfDisposed(),VL(this)},e_().prototype.irfft=function(){return this.throwIfDisposed(),GL(this)},e_().prototype.isFinite=function(){return this.throwIfDisposed(),dP(this)},e_().prototype.isInf=function(){return this.throwIfDisposed(),pP(this)},e_().prototype.isNaN=function(){return this.throwIfDisposed(),fP(this)},e_().prototype.leakyRelu=function(e){return this.throwIfDisposed(),mP(this,e)},e_().prototype.lessEqual=function(e){return this.throwIfDisposed(),yP(this,e)},e_().prototype.less=function(e){return this.throwIfDisposed(),gP(this,e)},e_().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),bP(this,e,t,n,r)},e_().prototype.logSigmoid=function(){return this.throwIfDisposed(),NP(this)},e_().prototype.logSoftmax=function(e){return this.throwIfDisposed(),TP(this,e)},e_().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),IP(this,e,t)},e_().prototype.log=function(){return this.throwIfDisposed(),xP(this)},e_().prototype.log1p=function(){return this.throwIfDisposed(),wP(this)},e_().prototype.logicalAnd=function(e){return this.throwIfDisposed(),EP(this,e)},e_().prototype.logicalNot=function(){return this.throwIfDisposed(),CP(this)},e_().prototype.logicalOr=function(e){return this.throwIfDisposed(),AP(this,e)},e_().prototype.logicalXor=function(e){return this.throwIfDisposed(),OP(this,e)},e_().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),JD(this,e,t,n)},e_().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),DP(this,e,t,n,r)},e_().prototype.max=function(e,t){return this.throwIfDisposed(),ZF(this,e,t)},e_().prototype.maximum=function(e){return this.throwIfDisposed(),SR(this,e)},e_().prototype.mean=function(e,t){return this.throwIfDisposed(),LP(this,e,t)},e_().prototype.min=function(e,t){return this.throwIfDisposed(),QF(this,e,t)},e_().prototype.minimum=function(e){return this.throwIfDisposed(),UP(this,e)},e_().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),WP(this,e,t)},e_().prototype.mod=function(e){return this.throwIfDisposed(),VP(this,e)},e_().prototype.mul=function(e){return this.throwIfDisposed(),tR(this,e)},e_().prototype.neg=function(){return this.throwIfDisposed(),kP(this)},e_().prototype.norm=function(e,t,n){return this.throwIfDisposed(),eP(this,e,t,n)},e_().prototype.notEqual=function(e){return this.throwIfDisposed(),qP(this,e)},e_().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),XP(this,e,t,n)},e_().prototype.onesLike=function(){return this.throwIfDisposed(),YP(this)},e_().prototype.pad=function(e,t){return this.throwIfDisposed(),QP(this,e,t)},e_().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),rL(this,e,t,n,r,a,i)},e_().prototype.pow=function(e){return this.throwIfDisposed(),gR(this,e)},e_().prototype.prelu=function(e){return this.throwIfDisposed(),aL(this,e)},e_().prototype.prod=function(e,t){return this.throwIfDisposed(),iL(this,e,t)},e_().prototype.reciprocal=function(){return this.throwIfDisposed(),wL(this)},e_().prototype.relu=function(){return this.throwIfDisposed(),kL(this)},e_().prototype.relu6=function(){return this.throwIfDisposed(),SL(this)},e_().prototype.reshapeAs=function(e){return this.throwIfDisposed(),XD(this,e.shape)},e_().prototype.reshape=function(e){return this.throwIfDisposed(),XD(this,e)},e_().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),lj(this,e,t,n)},e_().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),cj(this,e,t,n)},e_().prototype.reverse=function(e){return this.throwIfDisposed(),NL(this,e)},e_().prototype.rfft=function(){return this.throwIfDisposed(),KL(this)},e_().prototype.round=function(){return this.throwIfDisposed(),AL(this)},e_().prototype.rsqrt=function(){return this.throwIfDisposed(),OL(this)},e_().prototype.selu=function(){return this.throwIfDisposed(),_L(this)},e_().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),ML(this,e,t,n,r,a,i)},e_().prototype.sigmoid=function(){return this.throwIfDisposed(),$D(this)},e_().prototype.sign=function(){return this.throwIfDisposed(),DL(this)},e_().prototype.sin=function(){return this.throwIfDisposed(),FL(this)},e_().prototype.sinh=function(){return this.throwIfDisposed(),PL(this)},e_().prototype.slice=function(e,t){return this.throwIfDisposed(),eF(this,e,t)},e_().prototype.softmax=function(e){return this.throwIfDisposed(),UL(this,e)},e_().prototype.softplus=function(){return this.throwIfDisposed(),SP(this)},e_().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),nL(this,e,t)},e_().prototype.split=function(e,t){return this.throwIfDisposed(),HL(this,e,t)},e_().prototype.sqrt=function(){return this.throwIfDisposed(),nR(this)},e_().prototype.square=function(){return this.throwIfDisposed(),rR(this)},e_().prototype.squaredDifference=function(e){return this.throwIfDisposed(),qL(this,e)},e_().prototype.squeeze=function(e){return this.throwIfDisposed(),XL(this,e)},e_().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof $O?[this,e]:[this,...e];return YL(n,t)},e_().prototype.step=function(e){return this.throwIfDisposed(),ZL(this,e)},e_().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),QL(this,e,t,n,r,a,i,o,s)},e_().prototype.sub=function(e){return this.throwIfDisposed(),yR(this,e)},e_().prototype.sum=function(e,t){return this.throwIfDisposed(),JF(this,e,t)},e_().prototype.tan=function(){return this.throwIfDisposed(),JL(this)},e_().prototype.tanh=function(){return this.throwIfDisposed(),tF(this)},e_().prototype.tile=function(e){return this.throwIfDisposed(),iP(this,e)},e_().prototype.toBool=function(){return this.throwIfDisposed(),YM(this,"bool")},e_().prototype.toFloat=function(){return this.throwIfDisposed(),YM(this,"float32")},e_().prototype.toInt=function(){return this.throwIfDisposed(),YM(this,"int32")},e_().prototype.topk=function(e,t){return this.throwIfDisposed(),lz(this,e,t)},e_().prototype.transpose=function(e){return this.throwIfDisposed(),vz(this,e)},e_().prototype.unique=function(e){return this.throwIfDisposed(),uz(this,e)},e_().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),hz(this,e,t)},e_().prototype.unstack=function(e){return this.throwIfDisposed(),dz(this,e)},e_().prototype.where=function(e,t){return this.throwIfDisposed(),FF(e,this,t)},e_().prototype.zerosLike=function(){return this.throwIfDisposed(),aR(this)};class mW extends Error{constructor(e){super(e),Object.setPrototypeOf(this,mW.prototype)}}class gW extends Error{constructor(e){super(e),Object.setPrototypeOf(this,gW.prototype)}}class yW extends Error{constructor(e){super(e),Object.setPrototypeOf(this,yW.prototype)}}class vW extends Error{constructor(e){super(e),Object.setPrototypeOf(this,vW.prototype)}}class bW extends Error{constructor(e){super(e),Object.setPrototypeOf(this,bW.prototype)}}Error;class xW{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function wW(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function kW(e,t){if(!e)throw new bW(t)}function SW(e,t){let n=0;for(const r of e)r===t&&n++;return n}function NW(e){return 1===e.length?e[0]:e}function TW(e){return Array.isArray(e)?e:[e]}function IW(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function EW(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let CW={};function AW(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function OW(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach(e=>OW(e));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?OW(t):e[n]=t.value)}}}function _W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const a=e;let i;if(a in n)i=n[a];else if(a in CW)i=CW[a];else if(i=t[a],null==i)throw new yW("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}{const i=e;if(null==i.className||null==i.config)throw new yW("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(i),".\n")+"'className' and 'config' must set.");const o=i.className;let s,l;if(o in n?[s,l]=n[o]:o in CW?[s,l]=CW.className:o in t&&([s,l]=t[o]),null==s)throw new yW("Unknown ".concat(r,": ").concat(o,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){const e={};for(const n of Object.keys(CW))e[n]=CW[n];for(const a of Object.keys(n))e[a]=n[a];i.config.customObjects=e;const t=Object.assign({},CW);for(const a of Object.keys(n))CW[a]=n[a];OW(i.config);const r=l(s,i.config,n,a);return CW=Object.assign({},t),r}{const e=Object.assign({},CW);for(const r of Object.keys(n))CW[r]=n[r];const t=new s(i.config);return CW=Object.assign({},e),t}}}function MW(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function RW(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function DW(e){if(null==e)throw new yW("Invalid value in obj: ".concat(JSON.stringify(e)));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function FW(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new yW("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function PW(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return kW(n>=0),kW(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function LW(e,t){Array.isArray(e)?(pI(e.length>0,()=>"".concat(t," is unexpectedly an empty array.")),e.forEach((e,n)=>LW(e,"element ".concat(n+1," of ").concat(t)))):pI(Number.isInteger(e)&&e>0,()=>"Expected ".concat(t," to be a positive integer, but got ")+"".concat(zW(e),"."))}function zW(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>zW(e)).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function jW(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let BW=0;function UW(){return BW++}const WW={};function VW(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in WW||(WW[e]=0),WW[e]+=1,e+WW[e].toString()}const GW=["channelsFirst","channelsLast"],HW=["nearest","bilinear"],KW=["valid","same","causal"],qW=["max","avg"],XW=["sum","mul","concat","ave"],YW=new Map;function ZW(e){FW(GW,"DataFormat",e)}function QW(e){FW(KW,"PaddingMode",e)}function JW(e){FW(qW,"PoolMode",e)}const $W=[];function eV(e,t){$W.push(e);try{const e=t();return $W.pop(),e}catch(n){throw $W.pop(),n}}function tV(e){if(!aV(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===$W.length?"":$W.join("/")+"/")+e}function nV(e){if(!aV(e))throw new Error("Not a valid tensor name: '"+e+"'");YW.has(e)||YW.set(e,0);const t=YW.get(e);if(YW.set(e,YW.get(e)+1),t>0){const n="".concat(e,"_").concat(t);return YW.set(n,1),n}return e}const rV=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function aV(e){return!!e.match(rV)}function iV(e){return e===parseInt(e.toString(),10)}function oV(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function sV(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function lV(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function cV(e,t){if(t<e)throw new yW("end (".concat(t,") < begin (").concat(e,") is forbidden."));const n=[];for(let r=e;r<t;++r)n.push(r);return n}let uV;function hV(){return null==uV&&(uV=H_().epsilon()),uV}function dV(e,t){return YM(e,t)}function pV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),XD(e,n)}function fV(e,t,n){return B_(()=>{switch(e.rank){case 1:return LL(e,t,n);case 2:return zL(e,[t,0],[n,e.shape[1]]);case 3:return jL(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return BL(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return eF(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return eF(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new yW("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function mV(e,t,n){return B_(()=>{switch(e.rank){case 1:return LL(e,t,n);case 2:return zL(e,[0,t],[e.shape[0],n]);case 3:return jL(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return BL(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new yW("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function gV(e,t,n,r){return B_(()=>{switch(e.rank){case 1:return LL(e,t,n);case 2:switch(r){case 1:return fV(e,t,n);case 2:return mV(e,t,n);default:throw new yW("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return fV(e,t,n);case 2:return jL(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return mV(e,t,n);default:throw new yW("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return fV(e,t,n);case 2:return BL(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return BL(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return mV(e,t,n);default:throw new yW("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new yW("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function yV(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),QD(e,n)}function vV(e,t){switch(e.rank){case 1:return fF([e,t]);case 2:return mF([e,t],0);case 3:return gF([e,t],0);case 4:return yF([e,t],0);default:throw new yW("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function bV(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new yW("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return iP(e,t)}function xV(e){return mL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function wV(e,t,n,r){if(e.rank<2||t.rank<2)throw new vW("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new vW("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(2===e.rank&&2===t.rank){return Pz({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?NV(e.rank,r,"channelsLast"):null,activation:n})}{const a=e.shape.slice(),i=a.pop();e=XD(e,[-1,i]);const o=t.shape.slice(),s=o.pop(),l=o.pop(),c=[...o,s],u=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=XD(vz(t,u),[l,-1]);const h=[...a,...c];return XD(Pz({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?NV(e.rank,r,"channelsLast"):null,activation:n}),h)}}function kV(e,t,n){return B_(()=>(t=Array.isArray(t)?$L(t,"int32"):YM(t,"int32"),lP(e,t,n)))}function SV(e){return tR(e,e)}function NV(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new yW("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?XD(t,[1,r[0],1,1,1]):XD(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?XD(t,[1,1,1,1,r[0]]):XD(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?XD(t,[1,r[0],1,1]):XD(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?XD(t,[1,1,1,r[0]]):XD(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?XD(t,[1,r[0],1]):XD(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?XD(t,[1,1,r[0]]):XD(t,[1].concat(r))}else if(e<3)return t;throw new yW("Unsupported input rank by biasAdd: ".concat(t.rank))}function TV(e,t,n){return B_(()=>(null==n&&(n="channelsLast"),ZW(n),JM(e,NV(e.rank,t,n))))}function IV(e,t,n,r){return B_(()=>Sz(e,t,n,r))}function EV(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const CV=["fanIn","fanOut","fanAvg"],AV=["normal","uniform","truncatedNormal"];class OV extends cR{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class _V extends OV{apply(e,t){return zP(e,t)}}_V.className="Zeros",hR(_V);class MV extends OV{apply(e,t){return jP(e,t)}}MV.className="Ones",hR(MV);class RV extends OV{constructor(e){if(super(),"object"!==typeof e)throw new yW("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new yW("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return B_(()=>tR(oR(this.value),jP(e,t)))}getConfig(){return{value:this.value}}}RV.className="Constant",hR(RV);class DV extends OV{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return yL(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}DV.className="RandomUniform",hR(DV);class FV extends OV{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new vW("randomNormal does not support dType ".concat(t,"."));return xV(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}FV.className="RandomNormal",hR(FV);class PV extends OV{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new vW("truncatedNormal does not support dType ".concat(t,"."));return cz(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}PV.className="TruncatedNormal",hR(PV);class LV extends OV{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return B_(()=>{if(2!==e.length||e[0]!==e[1])throw new yW("Identity matrix initializer can only be used for 2D square matrices.");return tR(this.gain,oP(e[0]))})}getConfig(){return{gain:this.gain}}}LV.className="Identity",hR(LV);class zV extends OV{constructor(e){if(super(),e.scale<0)throw new yW("scale must be a positive float. Got: ".concat(e.scale));this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){FW(CV,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){FW(AV,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(ZW(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=oV(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=oV(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=oV(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],a=n[1];let i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){const n=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new vW("".concat(this.getClassName()," does not support dType ").concat(t,"."));return cz(e,0,n,t,this.seed)}{const n=Math.sqrt(3*i);return yL(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}zV.className="VarianceScaling",hR(zV);class jV extends zV{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return zV.className}}jV.className="GlorotUniform",hR(jV);class BV extends zV{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return zV.className}}BV.className="GlorotNormal",hR(BV);class UV extends zV{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return zV.className}}UV.className="HeNormal",hR(UV);class WV extends zV{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return zV.className}}WV.className="HeUniform",hR(WV);class VV extends zV{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return zV.className}}VV.className="LeCunNormal",hR(VV);class GV extends zV{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return zV.className}}GV.className="LeCunUniform",hR(GV);class HV extends OV{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return B_(()=>{if(e.length<2)throw new vW("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));const n=gI(e.slice(0,-1)),r=e[e.length-1],a=n*r;a>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(a,") elements: ")+"Slowness may result.");const i=xV([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),o=Lj.qr(i,!1);let s=o[0];const l=o[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=tR(s,l.sign()),n<r&&(s=s.transpose()),tR(oR(this.gain),s.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}HV.className="Orthogonal",hR(HV);const KV={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function qV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _W(e,uR.getMap().classNameMap,t,"initializer")}function XV(e){return AW(e)}function YV(e){if("string"===typeof e){const t=e in KV?KV[e]:e;if("GlorotNormal"===t)return new BV;if("GlorotUniform"===t)return new jV;if("HeNormal"===t)return new UV;if("HeUniform"===t)return new WV;if("LeCunNormal"===t)return new VV;if("LeCunUniform"===t)return new GV;{const e={};return e.className=t,e.config={},qV(e)}}return e instanceof OV?e:qV(e)}function ZV(e){return Array.isArray(e)&&Array.isArray(e[0])}function QV(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function JV(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new yW("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function $V(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new yW("Expected exactly 1 Shape; got ".concat(e.length))}return e}function eG(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}const tG="Variable";class nG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tG,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=UW(),n=null==n?tG:n,this.originalName=tV(n),this.name=nV(this.originalName),this.trainable_=r,this.constraint=a,this.val=fz(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function rG(e){return e.map(e=>e.read())}function aG(e){e.forEach(e=>{e[0].write(e[1])})}class iG{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class oG{constructor(e,t,n,r,a,i,o){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=o,this.id=UW(),null!=i&&(this.originalName=tV(i),this.name=nV(this.originalName)),this.rank=t.length}}let sG=0;class lG{constructor(e,t){this.callArgs=t,this.id=sG++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let cG=0;class uG extends cR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=cG++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=IW(e)+"_"+VW(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new gW("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new yW("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return NW(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return NW(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new mW("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new mW("Layer ".concat(this.name)+" is not connected, no input to return.");return NW(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new mW("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new mW("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return NW(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=TW(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=TW(this.inputSpec);if(t.length!==n.length)throw new yW("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(let r=0;r<t.length;r++){const e=t[r],a=n[r];if(null==a)continue;const i=e.rank;if(null!=a.ndim&&i!==a.ndim)throw new yW("Input ".concat(r," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new yW("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new yW("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&e.dtype!==a.dtype)throw new yW("Input ".concat(r," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(e.dtype,"."));if(a.axes){const t=e.shape;for(const e in a.axes){const n=Number(e),i=a.axes[e],o=n>=0?t[n]:t[t.length+n];if(null!=i&&-1===[i,null].indexOf(o))throw new yW("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(n," of input shape to ")+"have value ".concat(i," but got shape ").concat(t,"."))}}if(null!=a.shape)for(let t=0;t<a.shape.length;++t){const n=a.shape[t],i=e.shape[t];if(null!=n&&null!=i&&n!==i)throw new yW("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=TW(e),r=function(e){let t=!0;for(const n of TW(e))if(!(n instanceof oG)){t=!1;break}return t}(e),a=function(e){let t=!0;for(const n of TW(e))if(n instanceof oG){t=!1;break}return t}(e);if(r===a)throw new yW("Arguments to apply() must be all SymbolicTensors or all Tensors");return eV(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of TW(e))t.push(n.shape);this.build(NW(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const a=TW(r),i=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),i.push(e);if(r=NW(i),null!=this.activityRegularizer)throw new vW("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=TW(e);const t=[];for(const n of e)t.push(n.shape);return NW(t)}(e),r=this.computeOutputShape(n);let a;const i="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),a=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new oG(i,n,this,TW(e),t,this.name,r)):new oG(i,r,this,TW(e),t,this.name),this.addInboundNode(e,a,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new vW("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new mW("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new mW("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new gW("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return eG(this.weights)}build(e){this.built=!0}getWeights(){return rG(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){B_(()=>{const t=this.weights;if(t.length!==e.length)throw new yW('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(t.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0===t.length)return;const n=[],r=rG(t);for(let a=0;a<r.length;++a){const i=r[a],o=t[a],s=e[a];if(!yI(i.shape,s.shape))throw new yW("Layer weight shape ".concat(i.shape," ")+"not compatible with provided weight shape ".concat(s.shape));n.push([o,s])}aG(n)})}addWeight(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new yW("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():YV("zeros"));const l=r.apply(t,n),c=new nG(l,n,e,i,o);return l.dispose(),null!=a&&this.addLoss(()=>a.apply(c.read())),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=TW(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach(e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")})}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),a=TW(t),i=TW(r);if(a.length!==i.length)throw new Error("".concat(this.name," outputs ").concat(a.length," tensors ")+"but ".concat(a.length," masks for those tensors"));for(let o=0;o<a.length;o++)a[o].kerasMask=i[o]}addInboundNode(e,t,n,r,a,i){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const s=TW(e);t=TW(t),n=TW(n),r=TW(r),a=QV(a),i=QV(i);const l=[],c=[],u=[];for(const h of s)l.push(h.sourceLayer),c.push(h.nodeIndex),u.push(h.tensorIndex);new lG({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(let h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function hG(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=hG(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class dG extends uG{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:VW("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new yW("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new yW("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new yW("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new oG(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new lG({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new yW("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}dG.className="InputLayer",hR(dG);class pG{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof pG)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new yW("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return YM(t,e.dtype)}catch(uoe){throw new yW("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof oG){if(null==this.id2Value[e.id])throw new yW("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new yW("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof oG){if(null==this.id2Value[e.id])throw new yW("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new yW("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&U_(this.id2Mask)}}const fG=new xW,mG=new xW;function gG(e,t,n,r){const a=null!=n&&n.training,i=Array.isArray(e),o=i?e:[e],s=o.map(e=>e.name),l=[],c=t.names();for(const f of s)-1!==c.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=s.join(",")+"|"+t.names().sort().join(",");let h,d=fG.get(u);if(null==d){const e=function(e,t){pI(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===e.length){const a=vG(e[0],t);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const i of e){const{sorted:e,recipientMap:o}=vG(i,t);for(const t of e)a.has(t.name)||(n.push(t),a.add(t.name));for(const t in o)null==r[t]&&(r[t]=new Set),o[t].forEach(e=>r[t].add(e))}}return{sorted:n,recipientCounts:yG(r)}}(o,t);d=e.sorted,h=e.recipientCounts,fG.put(u,d),mG.put(u,h)}h={},a||Object.assign(h,mG.get(u));const p=new pG(t);for(let f=0;f<d.length;++f){if(null!=r){const e=j_().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=d[f],i=e.sourceLayer;if(i instanceof dG)continue;const o=[],c=[],u=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);o.push(e),c.push(r),null!=r&&(m=!0),a||(h[n.name]--,0!==h[n.name]||t.hasKey(n)||-1!==s.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||u.push(e))}m&&((n=n||{}).mask=c[0]);const g=TW(i.apply(o,n));let y=null;i.supportsMasking&&(y=i.computeMask(o,c));const v=bG(e),b=Array.isArray(v)?v:[v];for(let t=0;t<b.length;++t){p.hasKey(b[t])||p.add(b[t],g[t],Array.isArray(y)?y[0]:y);const e=s.indexOf(b[t].name);-1!==e&&(l[e]=g[t])}a||U_(u)}return p.disposeMasks(),i?l:l[0]}function yG(e){const t={};for(const n in e)t[n]=e[n].size;return t}function vG(e,t){const n=new Set,r=[],a={};for(const s of t.names())n.add(s);const i=[],o=[];for(i.push(e);i.length>0;){const e=i[i.length-1];if(n.has(e.name)){i.pop();continue}const t=o[o.length-1]===i.length-1;if(0===e.inputs.length||t)i.pop(),r.push(e),n.add(e.name),t&&o.pop();else{o.push(i.length-1);for(const t of e.inputs)null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),n.has(t.name)||i.push(t)}}return{sorted:r,recipientMap:a}}function bG(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function xG(e,t){return B_(()=>nR(JF(tR(e,e),t,!0)))}qI().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,function(e){null!=fG&&fG.setMaxEntries(e),null!=mG&&mG.setMaxEntries(e)});class wG extends cR{getConfig(){return{}}}class kG extends wG{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return B_(()=>{const t=xG(e,this.axis),n=pF(t,0,this.maxValue);return tR(e,eR(n,JM(hV(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}kG.className="MaxNorm",hR(kG);class SG extends wG{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return B_(()=>eR(e,JM(hV(),xG(e,this.axis))))}getConfig(){return{axis:this.axis}}}SG.className="UnitNorm",hR(SG);class NG extends wG{apply(e){return kL(e)}}NG.className="NonNeg",hR(NG);class TG extends wG{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return B_(()=>{const t=xG(e,this.axis),n=JM(tR(this.rate,pF(t,this.minValue,this.maxValue)),tR(1-this.rate,t));return tR(e,eR(n,JM(hV(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}TG.className="MinMaxNorm",hR(TG);const IG={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function EG(e){return AW(e)}function CG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _W(e,uR.getMap().classNameMap,t,"constraint")}function AG(e){if(null==e)return null;if("string"===typeof e){return CG({className:e in IG?IG[e]:e,config:{}})}return e instanceof wG?e:CG(e)}async function OG(e){if(null==e)return;const t=[],n=[],r=[];for(const a in e){const i=e[a];if("number"!==typeof i){const e=i;t.push(e.data()),n.push(a),r.push(e)}}if(t.length>0){const a=await Promise.all(t);for(let t=0;t<a.length;++t)e[n[t]]=a[t][0];U_(r)}}function _G(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var MG;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(MG||(MG={}));class RG{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class DG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class FG extends RG{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const a=B_(()=>JM(this.totals[r],tR(e,n)));this.totals[r]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:B_(()=>{const e=tR(eR(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),W_(t[n])}))}}class PG extends RG{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const a in this.history){const r=this.history[a];for(let i=0;i<r.length;++i)if("number"!==typeof r[i]){const o=r[i];e.push(o.data()),t.push(a),n.push(i)}}const r=await Promise.all(e);for(let a=0;a<r.length;++a){this.history[t[a]][n[a]].dispose(),this.history[t[a]][n[a]]=r[a][0]}}}class LG extends RG{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Vj,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");OI(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,a=null!=n?n():PO();return function(){const i=null!=n?n():PO();return i-a<t||(a=i,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await OG(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await OG(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await OG(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await OG(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await OG(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):OI(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await OG(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await OG(e),await this.trainEnd(e))}}function zG(e,t){if(null==e&&(e={}),e instanceof RG)return[e];if(Array.isArray(e)&&e[0]instanceof RG)return e;return TW(e).map(e=>new LG(e,t))}class jG{constructor(){}static registerCallbackConstructor(e,t){pI(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e)),jG.checkForDuplicate(t),null==jG.constructors[e]&&(jG.constructors[e]=[]),jG.constructors[e].push(t)}static checkForDuplicate(e){for(const t in jG.constructors){jG.constructors[+t].forEach(t=>{if(t===e)throw new yW("Duplicate callback constructor.")})}}static clear(){jG.constructors={}}static createCallbacks(e){const t=[];for(const n in jG.constructors){const r=+n;e>=r&&t.push(...jG.constructors[r])}return t.map(e=>new e)}}function BG(e,t,n,r,a,i,o,s,l){const c=new PG,u=[new FG,...jG.createCallbacks(t)];null!=e&&u.push(...e),u.push(c);const h=new DG(u);return h.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:l}),{callbackList:h,history:c}}function UG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _W(e,uR.getMap().classNameMap,t,"layer",n)}function WG(e,t){return B_(()=>{"float32"!==e.dtype&&(e=YM(e,"float32"));const n=JF(SV(e),t,!0),r=fR(n.shape,hV()),a=nR(SR(n,r));return eR(e,a)})}function VG(e,t){return B_(()=>LP(SV(yR(t,e)),-1))}function GG(e,t){return B_(()=>LP(bR(yR(t,e)),-1))}function HG(e,t){return B_(()=>{const n=yR(e,t),r=pF(bR(e),hV(),Number.MAX_VALUE),a=bR(eR(n,r));return tR(100,LP(a,-1))})}function KG(e,t){return B_(()=>{const n=pF(t,hV(),Number.MAX_VALUE),r=xP(JM(1,n)),a=pF(e,hV(),Number.MAX_VALUE),i=xP(JM(1,a));return LP(SV(yR(r,i)),-1)})}function qG(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return B_(()=>{if(n)t=UL(t);else{const e=JF(t,t.shape.length-1,!0);t=eR(t,e)}return t=pF(t,hV(),1-hV()),kP(JF(tR(YM(e,"float32"),xP(t)),t.shape.length-1))})}function XG(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return B_(()=>{const r=YM(sP(function(e){const t=[oV(e.shape)];return XD(e,t)}(e)),"int32"),a=(t=pF(t,hV(),1-hV())).shape;return qG(XD(XP(r,a[a.length-1]),a),t,n)})}function YG(e,t){return B_(()=>{let n;return n=pF(t,hV(),1-hV()),n=xP(eR(n,yR(1,n))),LP(function(e,t){if(!yI(e.shape,t.shape))throw new yW("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return B_(()=>{const n=kL(t),r=kP(bR(t));return JM(yR(n,tR(t,e)),wP(nP(r)))})}(e,n),-1)})}function ZG(e,t){return B_(()=>{const n=pF(e,hV(),1),r=pF(t,hV(),1);return JF(tR(e,xP(eR(n,r))),-1)})}function QG(e,t){return B_(()=>{const n=WG(e,-1),r=WG(t,-1),a=tR(n,r);return kP(JF(a,-1))})}jG.constructors={};const JG={meanSquaredError:VG,meanAbsoluteError:GG,meanAbsolutePercentageError:HG,meanSquaredLogarithmicError:KG,squaredHinge:function(e,t){return B_(()=>{const n=SR(0,yR(1,tR(e,t)));return LP(SV(n),-1)})},hinge:function(e,t){return B_(()=>{const n=SR(0,yR(1,tR(e,t)));return LP(n,-1)})},categoricalHinge:function(e,t){return B_(()=>{const n=JF(tR(e,t),-1),r=ZF(tR(yR(1,e),t),-1);return SR(0,JM(1,yR(r,n)))})},logcosh:function(e,t){return B_(()=>{const n=Math.log(2),r=yR(t,e),a=yR(JM(r,SP(tR(-2,r))),n);return LP(a,-1)})},categoricalCrossentropy:qG,sparseCategoricalCrossentropy:XG,binaryCrossentropy:YG,kullbackLeiblerDivergence:ZG,poisson:function(e,t){return B_(()=>{const n=xP(JM(hV(),t));return LP(yR(t,tR(e,n)),-1)})},cosineProximity:QG};function $G(e){if("string"===typeof e){if(e in JG)return JG[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new yW(t)}return e}function eH(e,t){return B_(()=>{const n=tR(.5,YP(t)),r=dV(cP(t,n),e.dtype);return LP(DF(e,r),-1)})}function tH(e,t){return B_(()=>dV(DF(ID(e,-1),ID(t,-1)),"float32"))}function nH(e,t){return B_(()=>YM(JF(EP(DF(e,1),DF(t,1))),"float32"))}function rH(e,t){return YG(e,t)}function aH(e,t){return e.rank===t.rank&&(e=XL(e,[e.rank-1])),(t=ID(t,-1)).dtype!==e.dtype&&(t=YM(t,e.dtype)),YM(DF(e,t),"float32")}const iH=qG,oH=XG,sH={binaryAccuracy:eH,categoricalAccuracy:tH,precision:function(e,t){return B_(()=>{const n=nH(e,t),r=function(e,t){return B_(()=>YM(JF(EP(DF(e,0),DF(t,1))),"float32"))}(e,t),a=JM(n,r);return YM(FF(cP(a,0),eR(n,a),0),"float32")})},categoricalCrossentropy:iH,sparseCategoricalCrossentropy:oH,mse:VG,MSE:VG,mae:GG,MAE:GG,mape:HG,MAPE:HG,cosine:QG};function lH(e){if("string"===typeof e&&e in sH)return sH[e];if("string"!==typeof e&&null!=e)return e;throw new yW("Unknown metric ".concat(e))}function cH(e){if(kW(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;{let t;for(const n of Object.keys(JG))if(JG[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(sH))if(sH[n]===e){t=n;break}return void 0!==t?t:e.name}}const uH=1048576;function hH(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!dH(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>uH&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(n.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(uH,"."))}}function dH(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!dH(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!dH(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function pH(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const a=function(e){let t=!0;const n=[],r=[];for(const a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(const a of n){if(a.length>1||1===a.length&&a[0].inboundLayers.length>1){t=!1;break}r.push(...a)}if(t)for(const a of e.layers){let e=!1;for(const n of a.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),i=["Layer (type)","Input Shape","Output shape","Param #"];let o;if(a?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!a){i.push("Receives inputs"),o=[];for(const t in e.nodesByDepth)o.push(...e.nodesByDepth[t])}r("_".repeat(t)),fH(i,n,r),r("=".repeat(t));const s=e.layers;for(let u=0;u<s.length;++u)a?mH(s[u],n,r):gH(s[u],n,o,r),r((u===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?eG(e.collectedTrainableWeights):eG(e.trainableWeights);return t}(e),c=eG(e.nonTrainableWeights);r("Total params: ".concat(l+c)),r("Trainable params: ".concat(l)),r("Non-trainable params: ".concat(c)),r("_".repeat(t))}function fH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function mH(e,t,n){let r,a;try{a=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(uoe){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(uoe){r="multiple"}const i=e.name,o=e.getClassName();fH(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function gH(e,t,n,r){let a,i;try{i=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(uoe){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(uoe){a="multiple"}const o=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){const t=u.inboundLayers[e].name,n=u.nodeIndices[e],r=u.tensorIndices[e];o.push("".concat(t,"[").concat(n,"][").concat(r,"]"))}const s=e.name,l=e.getClassName(),c=0===o.length?"":o[0];fH(["".concat(s," (").concat(l,")"),i,a,e.countParams().toString(),c],t,r);for(let u=1;u<o.length;++u)fH(["","","","",o[u]],t,r)}function yH(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function vH(e,t){if(null===e)return null;if("string"===typeof e)return EW(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];yH(t,a,r)?n.push(r):n.push(vH(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=EW(n);t[e]=vH(r,e)}}return t}}function bH(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return IW(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];yH(t,a,r)?n.push(r):n.push(bH(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],a=IW(n);t[a]="name"!==n&&"className"!==n||"string"!==typeof r?bH(r,n):r}return t}}const xH="4.22.0";class wH extends uG{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=VW(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],RW(this.inputs).length!==this.inputs.length)throw new yW("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map(e=>e.name)));RW(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map(e=>e.name))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;kW(0===t,"input layer has >1 nodes"),kW(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof dG))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(y," (0-based) originates ")+"from layer type ".concat(t.getClassName(),"."));this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);const t={},n={},r={},a={},i={},o=[],s=(e,t,n,r,a,l)=>{null!=r&&null!=a&&null!=l||(r=e.sourceLayer,a=e.nodeIndex,l=e.tensorIndex);const c=r.inboundNodes[a];if(-1!==n.indexOf(c))throw new gW("The tensor ".concat(e.name,' at layer "').concat(r.name,'" ')+"is part of a cycle.");if(-1!==t.indexOf(c))return;this.containerNodes.add(wH.nodeKey(r,a)),r.id in i||(i[r.id]=Object.keys(i).length),-1===n.indexOf(c)&&n.push(c);const u=c.inboundLayers.length;for(let i=0;i<u;i++){const e=c.inputTensors[i],r=c.inboundLayers[i],a=c.nodeIndices[i],o=c.tensorIndices[i];s(e,t,n,r,a,o)}for(t.push(c);n.indexOf(c)>=0;)n.splice(n.indexOf(c),1);o.push(c)},l=[],c=[];for(const y of this.outputs)s(y,l,c);const u=o.slice().reverse();for(const y of u){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];const i=null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id];e=Math.max(e,i),r[y.outboundLayer.id]=e,a[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){const a=y.inboundLayers[r],i=y.nodeIndices[r],o=a.inboundNodes[i],s=null==t[o.id]?0:t[o.id];t[o.id]=Math.max(e+1,s),n[o.id]=o}}const h={};for(const y in t){const e=t[y];e in h||(h[e]=[]),h[e].push(n[y])}const d={};for(const y in r){const e=r[y];e in d||(d[e]=[]),d[e].push(a[y])}let p=Object.keys(d).map(e=>parseInt(e,10)).sort(MW);this.layers=[];for(const y of p){const e=d[y];e.sort((e,t)=>{const n=i[e.id],r=i[t.id];return n<r?-1:n>r?1:0});for(const t of e)t instanceof wH&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(h).map(e=>parseInt(e,10)).sort(MW);const f=this.inputs.slice(),m=[];for(const y of p)for(const e of h[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new gW("Graph disconnected: cannot obtain value for tensor ".concat(n)+' at layer "'.concat(t.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(m));for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=h;const g=this.layers.map(e=>e.name);for(const y of g){const e=g.filter(e=>e===y).length;if(1!==e)throw new gW('The name "'.concat(y,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new lG({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new yW("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const a=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);a&&this.parseWeights(e);for(const o of this.layers)for(const[e,t]of o.weights.entries()){const i=a?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[i])throw new yW("Duplicate weight name: ".concat(i));n[i]=t,r++}const i=[];for(const o in e){let r=o;if(null==n[o]){const e=o.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])i.push([n[r],e[o]]);else if(t)throw new yW("Provided weight data has no target variable: ".concat(o));delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new yW("".concat(e.length," of ").concat(r," weights are not set: ")+"".concat(e))}aG(i)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],a=n.map(e=>e.startsWith("_")?e.slice(1):e).filter(e=>!r.includes(e)).join("/");a!==t&&(e[a]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(xH),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=bH(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return B_(()=>{e=TW(e);const n=new pG;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return gG(this.outputs,n,t)})}computeMask(e,t){return B_(()=>{let n;return e=TW(e),n=null==t?wW(null,e.length):TW(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){const t=QV(e);if(t.length!==this.inputLayers.length)throw new yW("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const n={};for(let o=0;o<t.length;o++){const e=this.inputLayers[o],r=t[o];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(MW);if(r.length>1)for(const o of r){const e=this.nodesByDepth[o];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(e.id))continue;const r=[];for(let o=0;o<t.inboundLayers.length;o++){const e=t.inboundLayers[o],a=t.nodeIndices[o],i=t.tensorIndices[o],s=n["".concat(e.name,"_").concat(a,"_").concat(i)];r.push(s)}const a=QV(e.computeOutputShape(NW(r))),i=e.inboundNodes.indexOf(t);for(let t=0;t<a.length;t++){n["".concat(e.name,"_").concat(i,"_").concat(t)]=a[t]}}}const a=[],i=[];for(let o=0;o<this.outputLayers.length;o++){const e=this.outputLayers[o],t=this.outputLayersNodeIndices[o],n=this.outputLayersTensorIndices[o],r="".concat(e.name,"_").concat(t,"_").concat(n);i.push(r)}for(let o=0;o<i.length;o++){const e=i[o];kW(e in n),a.push(n[e])}return NW(a)}runInternalGraph(e,t){null==t&&(t=wW(null,e.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],a=e[s],i=t[s];n[r.id]=[a,i]}const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(MW);for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,a=t.outputTensors,i=new Array;for(const t of r)t.id in n&&i.push(n[t.id]);if(i.length===r.length){let r,o,s,l,c={};if(null!=t.callArgs&&(c=t.callArgs),1===i.length){const[t,n]=i[0];null==c.mask&&(c.mask=n),s=TW(e.call(t,c)),l=TW(e.computeMask(t,n)),r=[t],o=[n]}else r=i.map(e=>e[0]),o=i.map(e=>e[1]),null==c.mask&&(c.mask=o),s=TW(e.call(r,c)),l=TW(e.computeMask(r,o));if(e.activityRegularizer)throw new vW("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<a.length;++e){const t=a[e],r=s[e],i=l[e];n[t.id]=[r,i]}}}}const a=[],i=[],o=[];for(const s of this.outputs){kW(s.id in n,"Could not compute output ".concat(s.name," : ").concat(s.id));const[e,t]=n[s.id];o.push(e.shape),a.push(e),i.push(t)}return[a,i,o]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof wH?1:0;for(let e=0;e<r.inboundNodes.length;e++){const a=wH.nodeKey(r,e);this.containerNodes.has(a)&&(t[a]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new yW("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new yW("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new yW("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return B_(()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=wH.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const i of this.layers){const e=i.getClassName(),r=i.getConfig(),a=[];for(let n=0;n<i.inboundNodes.length;n++){const e=i.inboundNodes[n],r=wH.nodeKey(i,n);let o={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),o=e.callArgs}catch(uoe){console.warn("Layer ".concat(i.name," was passed ")+"non-serializable keyword arguments: "+"".concat(e.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),o={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const a=e.inboundLayers[r],i=e.nodeIndices[r],s=e.tensorIndices[r];let l=t[wH.nodeKey(a,i)];null==l&&(l=0),n.push([a.name,l,s,o])}a.push(n)}}}const o={};o.name=i.name,o.className=e,o.config=r,o.inboundNodes=a,n.push(o)}e.layers=n;const r=[];for(let i=0;i<this.inputLayers.length;i++){const e=this.inputLayers[i],n=this.inputLayersNodeIndices[i],a=wH.nodeKey(e,n);if(!this.containerNodes.has(a))continue;let o=t[a];null!==o&&void 0!==o||(o=0);const s=this.inputLayersTensorIndices[i];r.push([e.name,o,s])}e.inputLayers=r;const a=[];for(let i=0;i<this.outputLayers.length;i++){const e=this.outputLayers[i],n=this.outputLayersNodeIndices[i],r=wH.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let o=t[r];null!==o&&void 0!==o||(o=0);const s=this.outputLayersTensorIndices[i];a.push([e.name,o,s])}return e.outputLayers=a,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){const n=[];let a;for(const o of t){const s=o[0],l=o[1],c=o[2];if(a=null==o[3]?{}:o[3],!(s in r))return void i(e,t);const u=r[s];if(u.inboundNodes.length<=l)return void i(e,t);const h=u.inboundNodes[l];n.push(h.outputTensors[c])}n.length>0&&e.apply(NW(n),a)}function s(e){const a=e.name,o=UG(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o;e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new yW("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)})}const l=t.name,c=t.layers;for(const f of c)s(f);for(;!DW(a);)for(const e of c){const t=r[e.name];if(t.name in a){const e=a[t.name];delete a[t.name];for(const n of e)o(t,n)}}const u=[],h=[],d=t.inputLayers;for(const f of d){const e=f[0],t=f[1],n=f[2];kW(e in r);const a=r[e].inboundNodes[t].outputTensors;u.push(a[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];kW(e in r);const a=r[e].inboundNodes[t].outputTensors;h.push(a[n])}return new e({inputs:u,outputs:h,name:l})}get stateful(){if(this._stateful)throw new yW("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){B_(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}function kH(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function SH(e,t){return kH(e,t,"classWeight")}async function NH(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=B_(()=>{if(1===e.shape.length)return ZM(e);if(2===e.shape.length){if(e.shape[1]>1){return ID(e,1)}if(1===e.shape[1])return XD(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")}),r=Array.from(await t.data());U_(t);const a=[];return r.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");a.push(n[e])}),$L(a,"float32")}return null}function TH(e,t){return tR(e,t)}function IH(e,t){let n,r;const a=t;n=a.xs,r=a.ys,pI(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t));const i=EH("input",e.inputNames,n),o=EH("output",e.outputNames,r),s=i[0].shape[0];pI(i.length===e.inputs.length,()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")),pI(o.length===e.outputs.length,()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")"));for(let l=0;l<i.length;l++)pI(i[l].shape[0]===s,()=>"Batch size mismatch: input "+"".concat(e.inputNames[l]," has ").concat(i[l].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],"."));for(let l=0;l<o.length;l++)pI(o[l].shape[0]===s,()=>"Batch size mismatch: output "+"".concat(e.outputNames[l]," has ").concat(o[l].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],"."));return{xs:i,ys:o}}function EH(e,t,n){if(n instanceof $O)return[n];if(Array.isArray(n))return pI(n.length===t.length,()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")),n;{const r=[];for(const a of t){if(null==n[a])throw new yW("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(a,"'."));r.push(n[a])}return r}}async function CH(e,t,n){const r=null!=n.batchesPerEpoch;if(pI(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),pI(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),pI(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs)),pI(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch)),pI(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const a=null!=n.validationData;let i,o;if(a)if(AH(n.validationData))pI(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches));else{const e=function(e){if(3===e.length)throw new vW("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);i=e.xs,o=e.ys}const s=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let c;c=a?l.slice().concat(l.map(e=>"val_"+e)):l.slice();const u=zG(n.callbacks,n.yieldEvery),h=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=BG(u,h,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,a,c);d.setModel(e),e.history=p,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const c={};await d.onEpochBegin(f);let u=0,h=0;for(r||(m=await t.iterator());!r||u<n.batchesPerEpoch;){const t=await m.next();if(r&&t.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(u," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:a}=IH(e,t.value),i={};i.batch=h,i.size=r[0].shape[0],await d.onBatchBegin(h,i);const o=[];if(null!=n.classWeight){const t=SH(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)o.push(await NH(a[e],null,t[e]))}const c=r.concat(a).concat(o),p=s(c);U_(c);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];i[t]=n,W_(n)}await d.onBatchEnd(h,i),_G(i),h++,u++}if(r?u>=n.batchesPerEpoch:t.done){if(a){let t;t=AH(n.validationData)?TW(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):TW(e.evaluate(i,o,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)c["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,c),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function AH(e){return"function"===typeof e.iterator}function OH(e){pI(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got ".concat(e))}function _H(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>fV(e,t,n-t)):fV(e,t,n-t)}function MH(e,t){return B_(()=>null==e?null:Array.isArray(e)?e.map(e=>MH(e,t)):kV(e,"int32"===t.dtype?t:YM(t,"int32")))}function RH(e,t){const n=[];let r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function DH(e){const t=[];e instanceof $O&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(pV(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function FH(e,t){if(null==e)return;const n=[];if(t instanceof $O)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(const a in t){const e=t[a];n.push(e.id)}const r=[];if(e instanceof $O)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&r.push(e)});else if(null!=e)for(const a in e){const t=e[a];-1===n.indexOf(t.id)&&r.push(t)}r.forEach(e=>{e.isDisposed||e.dispose()})}function PH(e){return Array.isArray(e)}function LH(e){return!function(e){return e instanceof $O}(e)&&!PH(e)}function zH(e,t,n){let r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(PH(e)&&e.length>0)t=!0;else if(LH(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new yW("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map(e=>null);if(LH(e)){r=[];for(const n of t){if(null==e[n])throw new yW('No data provided for "'.concat(n,'". Need data for each key in: ')+"".concat(t));r.push(e[n])}}else if(PH(e)){if(e.length!==t.length)throw new yW("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new yW("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=DH(r),null!=n)for(let o=0;o<t.length;++o){if(null==n[o])continue;const e=r[o];if(e.shape.length!==n[o].length)throw new yW("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s). but got array with ")+"shape ".concat(e.shape));for(let t=0;t<n[o].length;++t){if(0===t&&!a)continue;const r=e.shape[t],s=n[o][t];if(null!=s&&s>=0&&r!==s)throw new yW("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[o].slice(1,n[o].length),"] ")+"(i.e.,tensor shape [*,".concat(n[o].slice(1,n[o].length),"])")+" but the ".concat(i," received an input with ").concat(e.shape[0])+" examples, each with shape [".concat(e.shape.slice(1,e.shape.length),"]")+" (tensor shape [".concat(e.shape,"])"))}}return r}function jH(e,t,n){let r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new yW("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new yW("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(let o=0;o<t.length;++o){if(null==n[o])continue;const e=r[o];if(e.shape.length!==n[o].length)throw new yW("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(e.shape)));for(let r=0;r<n[o].length;++r){if(0===r&&!a)continue;const s=e.shape[r],l=n[o][r];if(null!=l&&l!==s)throw new yW("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(e.shape),"."))}}}class BH extends wH{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new yW("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");pH(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>Uj.adagrad(.01),Adadelta:()=>Uj.adadelta(1,.95,hV()),Adam:()=>Uj.adam(.001,.9,.999,hV()),Adamax:()=>Uj.adamax(.002,.9,.999,hV(),0),RMSProp:()=>Uj.rmsprop(.001,.9,0,hV()),SGD:()=>Uj.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new yW("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof dR))throw new yW("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new yW("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));const n=e.loss;t=n.map(e=>$G(e))}else{const n=$G(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new yW('Unknown entry in loss dictionary: "'.concat(t,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(n," during training")),t.push($G(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const e=this.internalOutputShapes[i],t=this.outputNames[i];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[i])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],eV("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map(e=>n);{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),a=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};eV("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=t=>{let n,r,i;for(const o of t){if("string"===typeof o&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(o)){const t=this.internalOutputShapes[e];let a;1===t[t.length-1]||this.lossFunctions[e]===YG?-1!==["accuracy","acc"].indexOf(o)?r=eH:-1!==["crossentropy","ce"].indexOf(o)&&(r=rH):this.lossFunctions[e]===XG?-1!==["accuracy","acc"].indexOf(o)?r=aH:-1!==["crossentropy","ce"].indexOf(o)&&(r=oH):-1!==["accuracy","acc"].indexOf(o)?r=tH:-1!==["crossentropy","ce"].indexOf(o)&&(r=iH),-1!==["accuracy","acc"].indexOf(o)?a="acc":-1!==["crossentropy","ce"].indexOf(o)&&(a="ce"),i=r,n=""+a}else{const e=lH(o);i=e,n=""+cH(o)}let t;eV(n,()=>{t=i}),a(e,n,t)}};t(r[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;OH(r);const a=this.standardizeUserDataXY(e,t,!0,r);try{const e=a[0].concat(a[1]);this.makeTestFunction();const t=this.testFunction;return NW(this.testLoop(t,e,r,n.verbose,n.steps))}finally{FH(a[0],e),FH(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,a=e.testFunction;let i=[];if(n.verbose>0)throw new vW("Verbose mode is not implemented yet.");pI(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches)));const o="function"===typeof t.next?t:await t.iterator();let s=0,l=0;for(;!r||l<n.batches;){const t=await o.next();if(i=B_(()=>{if(t.value){const{xs:n,ys:r}=IH(e,t.value),o=n.concat(r),c=B_(()=>a(o));if(U_(o),0===l)for(let e=0;e<c.length;++e)i.push(oR(0));const u=o[0].shape[0];for(let e=0;e<c.length;++e){const t=c[e],n=i[e];i[e]=B_(()=>JM(i[e],tR(u,t))),l>0&&U_(n)}U_(c),s+=u,++l}return i}),t.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let c=0;c<i.length;++c){const e=i[c];i[c]=eR(i[c],s),U_(e)}return NW(i)}(this,e,t)}checkNumSamples(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new yW("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new yW("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new yW("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new pG;if(e instanceof $O&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new yW("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)i.add(this.inputs[t],e[t])}else for(const s of this.inputs){const t=e[s.name];if(null==t)throw new yW("No value is provided for the model's input ".concat(s.name));i.add(s,t)}const o=gG(a,i);return n?o:o[0]}retrieveSymbolicTensors(e){const t=wW(null,e.length);let n=e.length;for(const r of this.layers){const a=Array.isArray(r.output)?r.output:[r.output],i=a.map(e=>e.name);for(let r=0;r<e.length;++r){const o=i.indexOf(e[r]);if(-1!==o&&(t[r]=a[o],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach((t,r)=>{null==t&&n.push(e[r])}),new yW("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return B_(()=>{const r=this.checkNumSamples(e);if(n)throw new vW("Verbose predictLoop() is not implemented yet.");const a=RH(r,t),i=this.outputs.map(e=>[]);for(let t=0;t<a.length;++t){B_(()=>{const n=a[t][0],r=a[t][1],i=_H(e,n,r),o=[];if(Array.isArray(i))for(let e=0;e<i.length;++e)o.push({key:this.inputs[e],value:i[e]});else o.push({key:this.inputs[0],value:i});const s=new pG(o);return gG(this.outputs,s)}).forEach((e,t)=>i[t].push(e))}return NW(i.map(e=>QD(e,0)))})}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=DH(e);jH(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return OH(e),this.predictLoop(n,e)}finally{FH(n,e)}}predictOnBatch(e){jH(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new gW("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let a=0;a<this.feedOutputShapes.length;++a){const e=this.feedOutputShapes[a];this.feedLossFns[a]===XG?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t){const n=RW(e.map(e=>e.shape[0]));n.sort();const r=RW(t.map(e=>e.shape[0]));if(r.sort(),n.length>1)throw new yW("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map(e=>e.shape))));if(r.length>1)throw new yW("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map(e=>e.shape))));if(n.length>0&&r.length>0&&!yI(n,r))throw new yW("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(n[0]," input sample(s) and ").concat(r[0]," target ")+"sample(s).")}(e=zH(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=zH(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[VG,YG,qG];for(let a=0;a<e.length;++a){const i=e[a],o=t[a],s=n[a];if(null!=o){if(o===qG&&1===i.shape[i.shape.length-1])throw new yW("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o)){const e=i.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],a=t[n];if(null!=a&&r!==a)throw new yW("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new yW("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0;const[o,s]=this.standardizeUserDataXY(e,t,a,i);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=SH(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await NH(s[t],null,e[t]))}return[o,s,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0;return B_(()=>{const i=this.checkNumSamples(t,n,a,"steps"),o=[];if(r>0)throw new vW("Verbose mode is not implemented yet.");if(null!=a)throw new vW("steps mode in testLoop() is not implemented yet");{const r=RH(i,n),a=$L(cV(0,i));for(let n=0;n<r.length;++n){const i=r[n][0],s=r[n][1],l=fV(a,i,s-i),c=MH(t,l),u=e(c);if(0===n)for(let e=0;e<u.length;++e)o.push(oR(0));for(let e=0;e<u.length;++e){const t=u[e];o[e]=JM(o[e],tR(s-i,t))}}for(let e=0;e<o.length;++e)o[e]=eR(o[e],i)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let a=r;if(SW(e,r)>1){const t=SW(e.slice(0,n),r);a+="_".concat(t)}t.push(a)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),i=[],o=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const o=new pG(e),s=gG(this.outputs,o,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],s[n]);null!=a[n]&&(e=TH(e,a[n]));const i=LP(e);t.push(i),l=0===n?e:JM(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],a=this.metricsTensors[n][1];e=LP(t(r[a],s[a]))}W_(e),i.push(e)}return l=LP(l),this.calculateLosses().forEach(e=>{l=JM(l,e)}),l},!0,o)].concat(i)}}makeTestFunction(){this.testFunction=e=>B_(()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let e=0;e<this.inputs.length;++e)i.push({key:this.inputs[e],value:r[e]});const o=new pG(i),s=gG(this.outputs,o);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],i=LP(r(a[e],s[e]));n=0===e?i:JM(n,i),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],i=LP(n(a[r],s[r]));t.push(i)}return t})}async fit(e,t){let n,r,a,i,o,s,l,c,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const d=null==h.batchSize?32:h.batchSize;OH(d);const p=!1,f=await this.standardizeUserData(e,t,h.sampleWeight,h.classWeight,p,d);n=f[0],r=f[1],u=f[2];let m,g=!1;if(null!=h.validationData&&h.validationData.length>0){if(g=!0,2!==h.validationData.length)throw 3===h.validationData.length?new vW("validationData including sample weights is not supported yet."):new yW("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(h.validationData," is invalid."));o=h.validationData[0],s=h.validationData[1];const e=!0,t=await this.standardizeUserData(o,s,null,null,e,d);l=t[0],c=t[1],m=l.concat(c)}else if(null!=h.validationSplit&&h.validationSplit>0&&h.validationSplit<1){g=!0;const e=Math.floor(n[0].shape[0]*(1-h.validationSplit)),t=n[0].shape[0];l=_H(n,e,t),a=n,n=_H(n,0,e),c=_H(r,e,t),i=r,r=_H(r,0,e),m=l.concat(c)}else null!=h.validationSteps&&(g=!0);const y=n.concat(r).concat(u);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let x,w;g?(this.makeTestFunction(),x=this.testFunction,w=b.slice().concat(b.map(e=>"val_"+e))):(x=null,m=[],w=b.slice());const k=zG(h.callbacks,h.yieldEvery);return await this.fitLoop(v,y,b,d,h.epochs,h.verbose,k,x,m,h.shuffle,w,h.initialEpoch,null,null)}finally{this.isTraining=!1,FH(n,e),FH(r,t),FH(a,e),FH(i,t),FH(l,o),FH(c,s),null!=u&&U_(u)}}async fitLoop(e,t,n,r,a,i,o,s,l,c,u,h,d,p){null==r&&(r=32),null==a&&(a=1),null==c&&(c=!0),null==h&&(h=0);let f=!1;if(null!=s&&null!=l&&(f=!0),null!=p&&(f=!0,null==d))throw new yW("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(t,r,d,"steps_per_epoch");let g;null!=m&&(g=cV(0,m)),null==i&&(i=1);const{callbackList:y,history:v}=BG(o,i,a,h,m,d,r,f,u);y.setModel(this),this.history=v,await y.onTrainBegin(),this.stopTraining_=!1;for(let b=h;b<a;++b){await y.onEpochBegin(b);const a={};if(null!=d)throw new vW("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new vW("batch shuffling is not implemneted yet");c&&cI(g);const i=$L(g),o=RH(m,r);for(let c=0;c<o.length;++c){const u={};if(await y.onBatchBegin(c,u),B_(()=>{const h=o[c][0],d=o[c][1],p=fV(i,h,d-h);u.batch=c,u.size=d-h;const m=MH(t,p),g=e(m);for(let e=0;e<n.length;++e){const t=n[e],r=g[e];u[t]=r,W_(r)}if(c===o.length-1&&f){const e=this.testLoop(s,l,r);for(let t=0;t<n.length;++t){const r=n[t],i=e[t];W_(i),a["val_"+r]=i}}}),await y.onBatchEnd(c,u),_G(u),this.stopTraining_)break}i.dispose()}if(await y.onEpochEnd(b,a),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return CH(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],a=n[1],i=this.makeTrainFunction()(r.concat(a)),o=[];for(const s of i){const e=await s.data();o.push(e[0])}return U_(i),FH(n[0],e),FH(n[1],t),NW(o)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=j_().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-j_().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=IW(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>IW(e))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=IW(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[IW(cH(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>IW(cH(e)));{const e={};for(const t in this.metrics)e[t]=IW(cH(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=UG(vH(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=EW(e.loss);else if(Array.isArray(e.loss))n=e.loss.map(e=>EW(e));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=EW(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map(e=>EW(e));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=EW(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=pM(e);if(0===t.length)throw new yW("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new yW("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new yW("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await q_(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(xH),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:a}=await q_(await this.optimizer.getWeights(),e);n.specs.push(...a),n.data=rM([n.data,t])}if(null!=this.userDefinedMetadata){const e=!0;hH(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){hH(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}BH.className="Model",hR(BH);class UH extends BH{}UH.className="Functional",hR(UH);class WH extends BH{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:VW("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new yW("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const t=e instanceof WH||e instanceof BH;let n;if(t){if(n=e,1!==n.outputs.length)throw new yW("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new yW("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new yW("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new yW("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new dG({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new yW("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new yW("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=hG(this.outputs[0])}this.inboundNodes=[],new lG({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:wW(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if($V(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new BH({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new gW("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new gW("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new gW("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new gW("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new yW("Legacy serialization format not supported yet.");n=t}else pI(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),n=t.layers,delete t.layers,a=t;const i=new e(a);if(!(i instanceof WH))throw new vW("Sequential.fromConfig called on non-Sequential input: ".concat(i));for(const o of n){const e=UG(o,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),i.add(e)}return i}set stopTraining(e){if(null==this.model)throw new yW("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new yW("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}WH.className="Sequential",hR(WH);class VH extends cR{getConfig(){return{}}}class GH extends VH{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new vW("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return jF(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}GH.className="elu",hR(GH);class HH extends VH{apply(e){return _L(e)}}HH.className="selu",hR(HH);class KH extends VH{apply(e){return kL(e)}}KH.className="relu",hR(KH);class qH extends VH{apply(e){return B_(()=>UP(6,kL(e)))}}qH.className="relu6",hR(qH);class XH extends VH{apply(e){return e}}XH.className="linear",hR(XH);class YH extends VH{apply(e){return $D(e)}}YH.className="sigmoid",hR(YH);class ZH extends VH{apply(e){return function(e){return B_(()=>{const t=JM(.5,tR(.2,e));return pF(t,0,1)})}(e)}}ZH.className="hardSigmoid",hR(ZH);class QH extends VH{apply(e){return SP(e)}}QH.className="softplus",hR(QH);class JH extends VH{apply(e){return function(e){return B_(()=>eR(e,JM(bR(e),1)))}(e)}}JH.className="softsign",hR(JH);class $H extends VH{apply(e){return tF(e)}}$H.className="tanh",hR($H);class eK extends VH{apply(e){return UL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}eK.className="softmax",hR(eK);class tK extends VH{apply(e){return TP(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}tK.className="logSoftmax",hR(tK);class nK extends VH{apply(e){return B_(()=>B_(()=>{const t=Math.sqrt(2),n=tR(.5,JM(1,UF(eR(e,t))));return tR(e,n)}))}}nK.className="gelu",hR(nK);class rK extends VH{apply(e){return B_(()=>tR(.5,tR(e,JM(1,tF(tR(nR(eR(2,Math.PI)),JM(e,tR(.044715,gR(e,3)))))))))}}rK.className="gelu_new",hR(rK);class aK extends VH{apply(e){return B_(()=>tR(e,tF(SP(e))))}}aK.className="mish",hR(aK);class iK extends VH{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return B_(()=>tR($D(tR(e,t)),e))}}function oK(e){return e.getClassName()}function sK(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _W(e,uR.getMap().classNameMap,t,"activation")}function lK(e){if(null==e){const e={className:"linear",config:{}};return sK(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},sK(t)}return e instanceof VH?e:sK(e)}function cK(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}iK.className="swish",hR(iK);class uK extends cR{}class hK extends uK{constructor(e){super(),cK(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return B_(()=>{let t=zP([1]);return this.hasL1&&(t=JM(t,JF(tR(this.l1,bR(e))))),this.hasL2&&(t=JM(t,JF(tR(this.l2,SV(e))))),XD(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}hK.className="L1L2",hR(hK);const dK={l1l2:"L1L2"};function pK(e){return AW(e)}function fK(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _W(e,uR.getMap().classNameMap,t,"regularizer")}function mK(e){if(null==e)return null;if("string"===typeof e){return fK({className:e in dK?dK[e]:e,config:{}})}return e instanceof uK?e:fK(e)}class gK extends uG{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=JV(e);let n=kL(e);return null!=this.maxValue&&(n=pF(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}gK.className="ReLU",hR(gK);class yK extends uG{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=JV(e);return mP(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}yK.className="LeakyReLU",hR(yK);class vK extends uG{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=YV(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=mK(e.alphaRegularizer),this.alphaConstraint=AG(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new yW("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=$V(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new iG({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=JV(e),aL(e,this.alpha.read())}getConfig(){const e={alphaInitializer:XV(this.alphaInitializer),alphaRegularizer:pK(this.alphaRegularizer),alphaConstraint:EG(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}vK.className="PReLU",hR(vK);class bK extends uG{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new vW("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=JV(e);return jF(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}bK.className="ELU",hR(bK);class xK extends uG{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=JV(e);return tR(n,YM(cP(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}xK.className="ThresholdedReLU",hR(xK);class wK extends uG{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new eK).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return B_(()=>{let n=JV(e);const r=t.mask;if(null!=r){const e=tR(yR(jP(n.shape),YM(r,n.dtype)),oR(-1e9));n=JM(n,e)}return this.axis instanceof Array?this.axis.length>1?nP(yR(n,IP(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function kK(e,t,n){if("number"===typeof e)return wW(e,t);if(e.length!==t)throw new yW("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(let r=0;r<t;++r){const a=e[r];if(!iV(a))throw new yW("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function SK(e,t,n,r){if(null==e)return e;let a;return a="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r)}function NK(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+lV([n-t,0]);else{if("same"!==r)throw new yW("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function TK(e,t){return B_(()=>(ZW(t),"channelsFirst"===t?vz(e,[0,2,3,1]):e))}function IK(e,t){return B_(()=>(ZW(t),"channelsFirst"===t?vz(e,[0,2,3,4,1]):e))}function EK(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return B_(()=>{if(null==i&&(i="channelsLast"),ZW(i),3!==e.shape.length)throw new yW("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new yW("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new yW("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(n.shape.length," instead"));if("channelsFirst"===i&&(e=vz(e,[0,2,1])),"causal"===a)throw new vW("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=bF(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=TV(s,n)),s})}function CK(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return B_(()=>{if(null==i&&(i="channelsLast"),ZW(i),3!==e.rank&&4!==e.rank)throw new yW("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new yW("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));let l=TK(e,i);if("causal"===a)throw new vW("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Mz({x:l,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(l=vz(l,[0,3,1,2])),l})}function AK(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return B_(()=>{if(null==i&&(i="channelsLast"),ZW(i),4!==e.rank&&5!==e.rank)throw new yW("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new yW("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));let s=IK(e,i);if("causal"===a)throw new vW("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=kF(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=TV(s,n)),"channelsFirst"===i&&(s=vz(s,[0,4,1,2,3])),s})}wK.className="Softmax",hR(wK);class OK extends uG{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",OK.verifyArgs(t),this.rank=e,LW(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new vW("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=kK(t.kernelSize,e,"kernelSize"),this.strides=kK(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,QW(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,ZW(this.dataFormat),this.activation=lK(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=YV(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=AG(t.biasConstraint),this.biasRegularizer=mK(t.biasRegularizer),this.activityRegularizer=mK(t.activityRegularizer),this.dilationRate=kK(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new yW("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new yW("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new yW("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if(kW("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!PW(e.kernelSize,"number",1,3))throw new yW("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:oK(this.activation),useBias:this.useBias,biasInitializer:XV(this.biasInitializer),biasRegularizer:pK(this.biasRegularizer),activityRegularizer:pK(this.activityRegularizer),biasConstraint:EG(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class _K extends OK{constructor(e,t){super(e,t),this.kernel=null,_K.verifyArgs(t),this.filters=t.filters,LW(this.filters,"filters"),this.kernelInitializer=YV(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=AG(t.kernelConstraint),this.kernelRegularizer=mK(t.kernelRegularizer)}build(e){e=$V(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new yW("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return B_(()=>{let t;e=JV(e);const n=null==this.bias?null:this.bias.read(),r=jW(this.activation.getClassName());if(null!=r&&2===this.rank)t=CK(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=EK(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=CK(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new vW("convolutions greater than 3D are not implemented yet.");t=AK(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=$V(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<n.length;++a){const e=SK(n[a],this.kernelSize[a],this.padding,this.strides[a],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[a]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:XV(this.kernelInitializer),kernelRegularizer:pK(this.kernelRegularizer),kernelConstraint:EG(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new yW("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class MK extends _K{constructor(e){super(2,e),MK.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!PW(e.kernelSize,"number",1,2))throw new yW("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}MK.className="Conv2D",hR(MK);class RK extends _K{constructor(e){super(3,e),RK.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new yW("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}RK.className="Conv3D",hR(RK);class DK extends MK{constructor(e){if(super(e),this.inputSpec=[new iG({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new yW("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=$V(e)).length)throw new yW("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new yW("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new iG({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return B_(()=>{let t=JV(e);if(4!==t.shape.length)throw new yW("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let a,i;"channelsFirst"===this.dataFormat?(a=2,i=3):(a=1,i=2);const o=n[a],s=n[i],l=this.kernelSize[0],c=this.kernelSize[1],u=this.strides[0],h=this.strides[1],d=[r,NK(o,u,l,this.padding),NK(s,h,c,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=vz(t,[0,2,3,1]));let p=wF(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=vz(p,[0,3,1,2])),null!=this.bias&&(p=TV(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p})}computeOutputShape(e){const t=(e=$V(e)).slice();let n,r,a;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3):(n=3,r=1,a=2);const i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=NK(t[r],s,i,this.padding),t[a]=NK(t[a],l,o,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}DK.className="Conv2DTranspose",hR(DK);class FK extends RK{constructor(e){if(super(e),this.inputSpec=[new iG({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new yW("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=$V(e)).length)throw new yW("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new yW("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new iG({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return B_(()=>{let t=JV(e);if(5!==t.shape.length)throw new yW("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let a,i,o;"channelsFirst"===this.dataFormat?(o=2,a=3,i=4):(o=1,a=2,i=3);const s=n[o],l=n[a],c=n[i],u=this.kernelSize[0],h=this.kernelSize[1],d=this.kernelSize[2],p=this.strides[0],f=this.strides[1],m=this.strides[2],g=[r,NK(s,p,u,this.padding),NK(l,f,h,this.padding),NK(c,m,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=vz(t,[0,2,3,4,1]));let y=NF(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(y=vz(y,[0,4,1,2,3])),null!==this.bias&&(y=TV(y,this.bias.read(),this.dataFormat)),null!==this.activation&&(y=this.activation.apply(y)),y})}computeOutputShape(e){const t=(e=$V(e)).slice();let n,r,a,i;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3,i=4):(n=4,r=1,a=2,i=3);const o=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],h=this.strides[2];return t[n]=this.filters,t[r]=NK(t[r],c,o,this.padding),t[a]=NK(t[a],u,s,this.padding),t[i]=NK(t[i],h,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}FK.className="Conv3DTranspose",hR(FK);class PK extends _K{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new yW("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new yW("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new yW("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=YV(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=mK(t.depthwiseRegularizer),this.depthwiseConstraint=AG(t.depthwiseConstraint),this.pointwiseInitializer=YV(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=mK(t.pointwiseRegularizer),this.pointwiseConstraint=AG(t.pointwiseConstraint)}build(e){if((e=$V(e)).length<this.rank+2)throw new yW("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new yW("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let o=0;o<this.rank;++o)a.push(1);a.push(n*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new iG({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return B_(()=>{let t;if(e=JV(e),1===this.rank)throw new vW("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=vz(e,[0,2,3,1])),t=ML(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=TV(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=vz(t,[0,3,1,2])),t})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=XV(this.depthwiseInitializer),e.pointwiseInitializer=XV(this.pointwiseInitializer),e.depthwiseRegularizer=pK(this.depthwiseRegularizer),e.pointwiseRegularizer=pK(this.pointwiseRegularizer),e.depthwiseConstraint=EG(this.depthwiseConstraint),e.pointwiseConstraint=EG(this.pointwiseConstraint),e}}PK.className="SeparableConv";class LK extends PK{constructor(e){super(2,e)}}LK.className="SeparableConv2D",hR(LK);class zK extends _K{constructor(e){super(1,e),zK.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!PW(e.kernelSize,"number",1,1))throw new yW("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}zK.className="Conv1D",hR(zK);class jK extends uG{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return B_(()=>{if(e=JV(e),"channelsLast"===this.dataFormat){const t=gV(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return gV(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=gV(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return gV(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}jK.className="Cropping2D",hR(jK);class BK extends uG{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,ZW(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){FW(HW,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return B_(()=>{let t=JV(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=vz(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],a="nearest"===this.interpolation?Pj.resizeNearestNeighbor(t,[e,r]):Pj.resizeBilinear(t,[e,r]);return vz(a,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?Pj.resizeNearestNeighbor(t,[e,r]):Pj.resizeBilinear(t,[e,r])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}BK.className="UpSampling2D",hR(BK);class UK extends OK{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=YV(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=AG(e.depthwiseConstraint),this.depthwiseRegularizer=mK(e.depthwiseRegularizer)}build(e){if((e=$V(e)).length<4)throw new yW("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new yW("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return B_(()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return B_(()=>{null==a&&(a="channelsLast"),ZW(a);let o=TK(e,a);if(4!==e.rank)throw new yW("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new yW("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=_F(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=vz(o,[0,3,1,2])),o})}(e=JV(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=TV(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=$V(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=SK(t,this.kernelSize[0],this.padding,this.strides[0]),i=SK(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=XV(this.depthwiseInitializer),e.depthwiseRegularizer=pK(this.depthwiseRegularizer),e.depthwiseConstraint=EG(this.depthwiseRegularizer),e}}function WK(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new yW("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function VK(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return B_(()=>{const l=t.shape.length;if(l<3)throw new yW("Input should be at least 3D, but is ".concat(l,"D."));const c=[1,0].concat(cV(2,l));if(t=vz(t,c),null!=i)throw new vW("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&(a=YM(YM(a,"bool"),"float32"),a.rank===l-1&&(a=rP(a,-1)),a=vz(a,c)),r&&(t=NL(t,0),null!=a&&(a=NL(a,0)));const u=[];let h,d=n;const p=t.shape[0],f=dz(t);let m,g;null!=a&&(m=dz(a));for(let t=0;t<p;++t){const n=f[t],r=B_(()=>e(n,d));if(null==a)h=r[0],d=r[1];else{const e=B_(()=>{const e=m[t],n=yR(YP(e),e);return{output:JM(tR(r[0],e),tR(d[0],n)),newStates:d.map((t,a)=>JM(tR(r[1][a],e),tR(t,n)))}});h=e.output,d=e.newStates}s&&u.push(h)}if(s){g=YL(u,1)}return[h,g,d]})}UK.className="DepthwiseConv2D",hR(UK);class GK extends uG{constructor(e){let t;if(super(e),null==e.cell)throw new yW("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new JK({cells:e.cell}):e.cell,null==t.stateSize)throw new yW("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new iG({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return cV(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null)}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){ZV(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return B_(()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new vW("Constants support is not implemented in RNN yet.");ZV(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new iG({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let a;if(this.cell.build(r),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!yI(this.stateSpec.map(e=>e.shape[e.shape.length-1]),a))throw new yW("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=a.map(e=>new iG({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];B_(()=>{if(!this.stateful)throw new mW("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new yW("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>zP([n,e])):this.states_=[zP([n,this.cell.stateSize])];else if(null==e)U_(this.states_),null!=this.keptStates&&(U_(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>zP([n,e])):this.states_[0]=zP([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new yW("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===t?this.keptStates.push(this.states_.slice()):U_(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,i=[n,a];if(!yI(r.shape,i))throw new yW("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(i,", received shape=").concat(r.shape));this.states_[t]=r}}this.states_=this.states_.map(e=>W_(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=WK(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let i=[],o=[];if(null!=n){t.initialState=n,i=i.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new iG({shape:e.shape}));o=o.concat(this.stateSpec)}null!=r&&(t.constants=r,i=i.concat(r),this.numConstants=r.length);if(i[0]instanceof oG){const n=[e].concat(i),r=this.inputSpec.concat(o),a=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=a,s}return super.apply(e,t)}call(e,t){return B_(()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let a=null==t?null:t.initialState;e=JV(e),null==a&&(a=this.stateful?this.states_:this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==i)throw new yW("RNN Layer has ".concat(i," state(s) but was passed ")+"".concat(a.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:r},s=VK((e,t)=>{const n=this.cell.call([e].concat(t),o);return[n[0],n.slice(1)]},e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),l=s[0],c=s[1],u=s[2];this.stateful&&this.resetStates(u,r);const h=this.returnSequences?c:l;return this.returnState?[h].concat(u):h})}getInitialState(e){return B_(()=>{let t=zP(e.shape);return t=JF(t,[1,2]),t=pV(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?bV(t,[1,e]):t):this.cell.stateSize>1?[bV(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===GK.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=UG(t.cell,n);return new e(Object.assign(t,{cell:r}))}}GK.className="RNN",hR(GK);class HK extends uG{}class KK extends HK{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,LW(this.units,"units"),this.activation=lK(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=YV(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=YV(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=YV(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mK(e.kernelRegularizer),this.recurrentRegularizer=mK(e.recurrentRegularizer),this.biasRegularizer=mK(e.biasRegularizer),this.kernelConstraint=AG(e.kernelConstraint),this.recurrentConstraint=AG(e.recurrentConstraint),this.biasConstraint=AG(e.biasConstraint),this.dropout=sV([1,lV([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=sV([1,lV([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=$V(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return B_(()=>{if(2!==e.length)throw new yW("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];const r=null!=t.training&&t.training;let a;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=$K({ones:()=>YP(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=$K({ones:()=>YP(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;a=wV(null!=i?tR(e,i):e,this.kernel.read()),null!=this.bias&&(a=TV(a,this.bias.read())),null!=o&&(n=tR(n,o));let s=JM(a,wV(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:oK(this.activation),useBias:this.useBias,kernelInitializer:XV(this.kernelInitializer),recurrentInitializer:XV(this.recurrentInitializer),biasInitializer:XV(this.biasInitializer),kernelRegularizer:pK(this.kernelRegularizer),recurrentRegularizer:pK(this.recurrentRegularizer),biasRegularizer:pK(this.biasRegularizer),activityRegularizer:pK(this.activityRegularizer),kernelConstraint:EG(this.kernelConstraint),recurrentConstraint:EG(this.recurrentConstraint),biasConstraint:EG(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}KK.className="SimpleRNNCell",hR(KK);class qK extends GK{constructor(e){e.cell=new KK(e),super(e)}call(e,t){return B_(()=>{null!=this.cell.dropoutMask&&(U_(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(U_(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return new e(t)}}qK.className="SimpleRNN",hR(qK);class XK extends HK{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new yW("GRUCell does not support reset_after parameter set to true.");this.units=e.units,LW(this.units,"units"),this.activation=lK(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=lK(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=YV(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=YV(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=YV(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mK(e.kernelRegularizer),this.recurrentRegularizer=mK(e.recurrentRegularizer),this.biasRegularizer=mK(e.biasRegularizer),this.kernelConstraint=AG(e.kernelConstraint),this.recurrentConstraint=AG(e.recurrentConstraint),this.biasConstraint=AG(e.biasConstraint),this.dropout=sV([1,lV([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=sV([1,lV([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=$V(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return B_(()=>{if(2!==e.length)throw new yW("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=$K({ones:()=>YP(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=$K({ones:()=>YP(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let o,s,l;0<this.dropout&&this.dropout<1&&(e=tR(e,a[0]));let c=wV(e,this.kernel.read());this.useBias&&(c=TV(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=tR(r,i[0]));const u=this.recurrentKernel.read(),[h,d]=HL(u,[2*this.units,this.units],u.rank-1),p=wV(r,h),[f,m,g]=HL(c,3,c.rank-1),[y,v]=HL(p,2,p.rank-1);o=this.recurrentActivation.apply(JM(f,y)),s=this.recurrentActivation.apply(JM(m,v));const b=wV(tR(s,r),d);l=this.activation.apply(JM(g,b));const x=JM(tR(o,r),tR(JM(1,kP(o)),l));return[x,x]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:oK(this.activation),recurrentActivation:oK(this.recurrentActivation),useBias:this.useBias,kernelInitializer:XV(this.kernelInitializer),recurrentInitializer:XV(this.recurrentInitializer),biasInitializer:XV(this.biasInitializer),kernelRegularizer:pK(this.kernelRegularizer),recurrentRegularizer:pK(this.recurrentRegularizer),biasRegularizer:pK(this.biasRegularizer),activityRegularizer:pK(this.activityRegularizer),kernelConstraint:EG(this.kernelConstraint),recurrentConstraint:EG(this.recurrentConstraint),biasConstraint:EG(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}XK.className="GRUCell",hR(XK);class YK extends GK{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new XK(e),super(e)}call(e,t){return B_(()=>{null!=this.cell.dropoutMask&&(U_(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(U_(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}YK.className="GRU",hR(YK);class ZK extends HK{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,LW(this.units,"units"),this.activation=lK(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=lK(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=YV(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=YV(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=YV(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=mK(e.kernelRegularizer),this.recurrentRegularizer=mK(e.recurrentRegularizer),this.biasRegularizer=mK(e.biasRegularizer),this.kernelConstraint=AG(e.kernelConstraint),this.recurrentConstraint=AG(e.recurrentConstraint),this.biasConstraint=AG(e.biasConstraint),this.dropout=sV([1,lV([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=sV([1,lV([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=$V(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends OV{apply(t,r){const a=e.apply([n]),i=(new MV).apply([n]),o=e.apply([2*n]);return vV(vV(a,i),o)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return B_(()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new yW("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let r=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=$K({ones:()=>YP(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=$K({ones:()=>YP(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let s,l,c,u;0<this.dropout&&this.dropout<1&&(e=tR(e,i[0]));let h=wV(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=tR(r,o[0])),h=JM(h,wV(r,this.recurrentKernel.read())),this.useBias&&(h=TV(h,this.bias.read()));const[d,p,f,m]=HL(h,4,h.rank-1);s=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(p),c=JM(tR(l,a),tR(s,this.activation.apply(f))),u=this.recurrentActivation.apply(m);const g=tR(u,this.activation.apply(c));return[g,g,c]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:oK(this.activation),recurrentActivation:oK(this.recurrentActivation),useBias:this.useBias,kernelInitializer:XV(this.kernelInitializer),recurrentInitializer:XV(this.recurrentInitializer),biasInitializer:XV(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:pK(this.kernelRegularizer),recurrentRegularizer:pK(this.recurrentRegularizer),biasRegularizer:pK(this.biasRegularizer),activityRegularizer:pK(this.activityRegularizer),kernelConstraint:EG(this.kernelConstraint),recurrentConstraint:EG(this.recurrentConstraint),biasConstraint:EG(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}ZK.className="LSTMCell",hR(ZK);class QK extends GK{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new ZK(e),super(e)}call(e,t){return B_(()=>{null!=this.cell.dropoutMask&&(U_(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(U_(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}QK.className="LSTM",hR(QK);class JK extends HK{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return B_(()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const a=[];let i;for(let o=0;o<this.cells.length;++o){const s=this.cells[o];n=r[o],i=0===o?[e[0]].concat(n):[i[0]].concat(n),i=s.call(i,t),a.push(i.slice(1))}n=[];for(const e of a.slice().reverse())n.push(...e);return[i[0]].concat(n)})}build(e){let t;ZV(e)&&(e=e[0]),this.cells.forEach((n,r)=>{eV("RNNCell_".concat(r),()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const a of t.cells)r.push(UG(a,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return rG(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,a=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],a[e]])}aG(t)}}function $K(e){const{ones:t,rate:n,training:r=!1,count:a=1,dropoutFunc:i}=e,o=()=>null!=i?i(t(),n):IV(t(),n),s=()=>EV(o,t,r);if(!a||a<=1)return W_(s().clone());return Array(a).fill(void 0).map(s).map(e=>W_(e.clone()))}JK.className="StackedRNNCells",hR(JK);var eq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};class tq extends GK{constructor(e){if(e.unroll)throw new vW("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new vW("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new iG({ndim:5})]}call(e,t){return B_(()=>{if(null!=this.cell.dropoutMask&&(U_(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(U_(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new yW("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return B_(()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),a=zP([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(a):[a]})}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];B_(()=>{if(!this.stateful)throw new mW("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(null==n[0])throw new yW("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zP(a)):this.states_=[zP(a)];else if(null==e)U_(this.states_),null!=this.keptStates&&(U_(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zP(a)):this.states_[0]=zP(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new yW("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));t?this.keptStates.push(this.states_.slice()):U_(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=a;if(!yI(n.shape,r))throw new yW("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(r,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map(e=>W_(e.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:i,dilationRate:o}=this.cell,s="channelsFirst"===t,l=e[s?3:2],c=e[s?4:3],u=SK(l,r[0],a,i[0],o[0]),h=SK(c,r[1],a,i[1],o[1]);return[...e.slice(0,2),...s?[n,u,h]:[u,h,n]]}}tq.className="ConvRNN2D";class nq extends ZK{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:i,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,LW(this.filters,"filters"),this.kernelSize=kK(n,2,"kernelSize"),this.kernelSize.forEach(e=>LW(e,"kernelSize")),this.strides=kK(r||1,2,"strides"),this.strides.forEach(e=>LW(e,"strides")),this.padding=a||"valid",QW(this.padding),this.dataFormat=i||"channelsLast",ZW(this.dataFormat),this.dilationRate=kK(o||1,2,"dilationRate"),this.dilationRate.forEach(e=>LW(e,"dilationRate"))}build(e){var t;e=$V(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new yW("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends OV{apply(e,t){return yV([n.apply([r]),jP([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return B_(()=>{if(3!==e.length)throw new yW("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=t.training||!1,r=e[0],a=e[1],i=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=$K({ones:()=>YP(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=(e,t,n)=>t&&t[n]?tR(t[n],e):e;let l=s(r,o,0),c=s(r,o,1),u=s(r,o,2),h=s(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=$K({ones:()=>YP(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const d=this.recurrentDropoutMask;let p=s(a,d,0),f=s(a,d,1),m=s(a,d,2),g=s(a,d,3);const[y,v,b,x]=HL(this.kernel.read(),4,3),[w,k,S,N]=this.useBias?HL(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,y,w,this.padding),c=this.inputConv(c,v,k,this.padding),u=this.inputConv(u,b,S,this.padding),h=this.inputConv(h,x,N,this.padding);const[T,I,E,C]=HL(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,T),f=this.recurrentConv(f,I),m=this.recurrentConv(m,E),g=this.recurrentConv(g,C);const A=this.recurrentActivation.apply(JM(l,p)),O=this.recurrentActivation.apply(JM(c,f)),_=JM(tR(O,i),tR(A,this.activation.apply(JM(u,m)))),M=tR(this.recurrentActivation.apply(JM(h,g)),this.activation.apply(_));return[M,M,_]})}getConfig(){const e=super.getConfig(),{units:t}=e,n=eq(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const a=vF(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?TV(a,n,this.dataFormat):a}recurrentConv(e,t){return vF(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}nq.className="ConvLSTM2DCell",hR(nq);class rq extends tq{constructor(e){const t=new nq(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}rq.className="ConvLSTM2D",hR(rq);class aq extends uG{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return B_(()=>{this.invokeCallHook(e,t);const n=JV(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return EV(()=>IV(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}aq.className="Dropout",hR(aq);class iq extends aq{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}iq.className="SpatialDropout1D",hR(iq);class oq extends uG{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,LW(this.units,"units"),this.activation=lK(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=YV(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=YV(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=AG(e.kernelConstraint),this.biasConstraint=AG(e.biasConstraint),this.kernelRegularizer=mK(e.kernelRegularizer),this.biasRegularizer=mK(e.biasRegularizer),this.activityRegularizer=mK(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=$V(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=$V(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return B_(()=>{this.invokeCallHook(e,t);const n=JV(e),r=jW(this.activation.getClassName());let a;return null!=r?a=wV(n,this.kernel.read(),r,this.bias?this.bias.read():null):(a=wV(n,this.kernel.read()),null!=this.bias&&(a=TV(a,this.bias.read())),null!=this.activation&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:oK(this.activation),useBias:this.useBias,kernelInitializer:XV(this.kernelInitializer),biasInitializer:XV(this.biasInitializer),kernelRegularizer:pK(this.kernelRegularizer),biasRegularizer:pK(this.biasRegularizer),activityRegularizer:pK(this.activityRegularizer),kernelConstraint:EG(this.kernelConstraint),biasConstraint:EG(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}oq.className="Dense",hR(oq);class sq extends uG{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=$V(e);for(const t of e.slice(1))if(null==t)throw new yW('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],oV(e,1)]}call(e,t){return B_(()=>{this.invokeCallHook(e,t);let n=JV(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=vz(n,e)}return function(e){if(e.rank<=1)throw new yW("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));const t=[e.shape[0],oV(e.shape,1)];return XD(e,t)}(n)})}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}sq.className="Flatten",hR(sq);class lq extends uG{constructor(e){super(e),this.supportsMasking=!0,this.activation=lK(e.activation)}call(e,t){return B_(()=>{this.invokeCallHook(e,t);const n=JV(e);return this.activation.apply(n)})}getConfig(){const e={activation:oK(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}lq.className="Activation",hR(lq);class cq extends uG{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return B_(()=>{return e=JV(e),t=e,n=this.n,B_(()=>{if(2!==t.shape.length)throw new yW("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return bV(pV(t,1),[1,n,1])});var t,n})}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}cq.className="RepeatVector",hR(cq);class uq extends uG{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let a=1,i=null;for(let s=0;s<r.length;++s){const e=r[s];if(this.isUnknown(e)){if(null!==i)throw new yW("Can only specifiy one unknown dimension.");i=s}else a*=e}const o=oV(e);if(null!==i){if(0===a||o%a!==0)throw new yW(n);r[i]=o/a}else if(o!==a)throw new yW(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return B_(()=>{this.invokeCallHook(e,t);const n=JV(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return XD(n,a)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}uq.className="Reshape",hR(uq);class hq extends uG{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const t=cV(1,e.dims.length+1);if(!yI(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new iG({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=$V(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return vz(JV(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}hq.className="Permute",hR(hq);class dq extends uG{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=JV(e);return TD(qP(n,this.maskValue),-1)}call(e,t){return B_(()=>{this.invokeCallHook(e,t);const n=JV(e),r=TD(qP(n,this.maskValue),-1,!0);return tR(n,YM(r,n.dtype))})}}dq.className="Masking",hR(dq);class pq extends uG{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(TW(e.inputLength))}this.inputDim=e.inputDim,LW(this.inputDim,"inputDim"),this.outputDim=e.outputDim,LW(this.outputDim,"outputDim"),this.embeddingsInitializer=YV(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=mK(e.embeddingsRegularizer),this.activityRegularizer=mK(e.activityRegularizer),this.embeddingsConstraint=AG(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return B_(()=>this.maskZero?(e=JV(e),qP(e,aR(e))):null)}computeOutputShape(e){if(e=$V(e),null==this.inputLength)return[...e,this.outputDim];const t=TW(this.inputLength);if(t.length!==e.length-1)throw new yW('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let n=0;for(let r=0;r<t.length;++r){const a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new yW('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}}return[e[0],...t,this.outputDim]}call(e,t){return B_(()=>{this.invokeCallHook(e,t);let n=JV(e);"int32"!==n.dtype&&(n=dV(n,"int32"));const r=kV(this.embeddings.read(),XD(n,[n.size]));return XD(r,$V(this.computeOutputShape(n.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:XV(this.embeddingsInitializer),embeddingsRegularizer:pK(this.embeddingsRegularizer),activityRegularizer:pK(this.activityRegularizer),embeddingsConstraint:EG(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}pq.className="Embedding",hR(pq);class fq extends uG{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new vW}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new yW("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[$V(e)]),e.length<2)throw new yW("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let t=[];for(const a of e)null!=a&&null!==a[0]&&t.push(a[0]);if(t=RW(t),t.length>1)throw new yW("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let a=1;a<e.length;++a){const t=null==e[a]?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map(e=>e.length);-1===e.indexOf(null)&&1===RW(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return B_(()=>{if(this.reshapeRequired){const t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){const r=lV(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=pV(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const i of e){const e=i.rank;if(null==e){const e=i.shape,r=e[0],a=e.slice(1).concat([r]);let o=XD(i,[r].concat(oV(e.slice(1))));o=vz(o,[1,0]),o=XD(o,a),t.push(o),n=!0}else if(e>1){const r=cV(1,e).concat([0]);t.push(vz(i,r)),n=!0}else t.push(i)}let r=this.mergeFunction(t);const a=r.rank;if(n)if(null==a){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=XD(vz(XD(r,[-1,t]),[1,0]),n)}else if(a>1){const e=[a-1].concat(cV(0,a-1));r=vz(r,e)}return r}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=RW(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return B_(()=>{if(null==t)return null;if(!Array.isArray(t))throw new yW("`mask` should be an Array");if(!Array.isArray(e))throw new yW("`inputs` should be an Array");if(t.length!==e.length)throw new yW("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:rP(e,0)))[0];for(let e=1;e<t.length-1;++e)n=EP(n,t[e]);return n})}}class mq extends fq{constructor(e){super(e)}mergeFunction(e){return B_(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=JM(t,e[n]);return t})}}mq.className="Add",hR(mq);class gq extends fq{constructor(e){super(e)}mergeFunction(e){return B_(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=tR(t,e[n]);return t})}}gq.className="Multiply",hR(gq);class yq extends fq{constructor(e){super(e)}mergeFunction(e){return B_(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=JM(t,e[n]);return tR(1/e.length,t)})}}yq.className="Average",hR(yq);class vq extends fq{constructor(e){super(e)}mergeFunction(e){return B_(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=SR(t,e[n]);return t})}}vq.className="Maximum",hR(vq);class bq extends fq{constructor(e){super(e)}mergeFunction(e){return B_(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=UP(t,e[n]);return t})}}bq.className="Minimum",hR(bq);class xq extends fq{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new yW("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let a=!1;for(const e of n)if(yI(e,t)){a=!0;break}a||n.push(t)}if(n.length>1)throw new yW("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return B_(()=>yV(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new yW("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const a of t.slice(1)){if(null==n[r]||null==a[r]){n[r]=null;break}n[r]+=a[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new yW("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new yW("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new yW("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return B_(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;const r=[];for(let i=0;i<e.length;++i)null==t[i]?r.push(YM(YP(e[i]),"bool")):t[i].rank<e[i].rank?r.push(rP(t[i],-1)):r.push(t[i]);const a=QD(r,this.axis);return ND(a,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function wq(e,t){for(;e<0;)e+=t;return e}xq.className="Concatenate",hR(xq);class kq extends fq{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){pI(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new vW("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new yW("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(2!==e.length)throw new yW("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>wq(t,e[n].shape.length)):[wq(this.axes,n.shape.length),wq(this.axes,r.shape.length)],this.normalize&&(n=WG(n,t[0]),r=WG(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new vW("batchDot is not implemented for tensors of 4D or higher rank yet");if(pI(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)),pI(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new vW("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);const i=n;return B_(()=>{let n,o;if(r>a){n=r-a;const e=[];for(let t=0;t<n;++t)e.push(1);t=XD(t,t.shape.concat(e))}else if(a>r){n=a-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=XD(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?JF(tR(e,t),i[0]):JF(tR(vz(e,[1,0]),t),i[1]);else{const n=i[0]!==e.shape.length-1,r=i[1]===t.shape.length-1;o=JD(e,t,n,r)}if(n>0){let e;e=r>a?r+a-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);o=XL(o,t)}return 1===o.shape.length&&(o=rP(o,1)),o})}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[wq(this.axes,e.length),wq(this.axes,t.length)],n}computeOutputShape(e){pI(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new vW("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}kq.className="Dot",hR(kq);class Sq extends uG{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return B_(()=>{this.invokeCallHook(e,t);const n=JV(e);return EV(()=>JM(xV(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}}Sq.className="GaussianNoise",hR(Sq);class Nq extends uG{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return B_(()=>{this.invokeCallHook(e,t);const n=JV(e);if(this.rate>0&&this.rate<1){return EV(()=>{const e=Math.sqrt(this.rate/(1-this.rate));return tR(n,xV(n.shape,1,e))},()=>n,t.training||!1)}return n})}}Nq.className="GaussianDropout",hR(Nq);class Tq extends uG{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||JV(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return B_(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=JV(e),r=-1.7580993408473766;let a=uP(yL(n),this.rate);a=dV(a,"float32");const i=((1-this.rate)*(1+this.rate*r**2))**-.5,o=-i*r*this.rate,s=JM(tR(t,a),tR(JM(a,-1),r));return JM(tR(s,i),o)};return EV(r,()=>JV(e),t.training||!1)}return e})}}function Iq(e,t,n,r,a){let i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=iF(e,t,n,r,a,o);else if(3===e.rank)i=oF(e,t,n,r,a,o);else{if(4!==e.rank)throw new vW("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=sF(e,t,n,r,a,o)}return i}function Eq(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return yI(r.slice().sort(),cV(0,e.rank-1))?function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return B_(()=>{const i=GP(e,r),o=i.mean,s=i.variance;return[Iq(e,o,s,n,t,a),o,s]})}(e,t,n,r,a):function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return B_(()=>{const i=GP(e,r),o=i.mean,s=i.variance,l=[];for(const t of cV(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const c=XD(o,l),u=XD(s,l),h=null==t?null:XD(t,l),d=null==n?null:XD(n,l);return[Iq(e,c,u,d,h,a),o,s]})}(e,t,n,r,a)}Tq.className="AlphaDropout",hR(Tq);class Cq extends uG{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=YV(e.betaInitializer||"zeros"),this.gammaInitializer=YV(e.gammaInitializer||"ones"),this.movingMeanInitializer=YV(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=YV(e.movingVarianceInitializer||"ones"),this.betaConstraint=AG(e.betaConstraint),this.gammaConstraint=AG(e.gammaConstraint),this.betaRegularizer=mK(e.betaRegularizer),this.gammaRegularizer=mK(e.gammaRegularizer)}build(e){e=$V(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new yW("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new iG({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return B_(()=>{const n=null!=t.training&&t.training,r=JV(e),a=r.shape,i=a.length,o=cV(0,i),s=this.axis>=0?this.axis:this.axis+i;o.splice(s,1);const l=wW(1,i);l[s]=a[s];const c=o.slice();c.sort();const u=!yI(c,cV(0,i).slice(0,i-1));if(!n)return(()=>{if(u){const e=XD(this.movingMean.read(),l),t=XD(this.movingVariance.read(),l),n=this.center?XD(this.beta.read(),l):null,a=this.scale?XD(this.gamma.read(),l):null;return Iq(r,e,t,n,a,this.epsilon)}return Iq(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[h,d,p]=Eq(r,this.gamma.read(),this.beta.read(),o,this.epsilon),f=(e,t,n)=>{B_(()=>{const r=1-n,a=e.read(),i=tR(yR(a,t),r);e.write(yR(a,i))})};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,p,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:XV(this.betaInitializer),gammaInitializer:XV(this.gammaInitializer),movingMeanInitializer:XV(this.movingMeanInitializer),movingVarianceInitializer:XV(this.movingVarianceInitializer),betaRegularizer:pK(this.betaRegularizer),gammaRegularizer:pK(this.gammaRegularizer),betaConstraint:EG(this.betaConstraint),gammaConstraint:EG(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Cq.className="BatchNormalization",hR(Cq);class Aq extends uG{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=YV(e.betaInitializer||"zeros"),this.gammaInitializer=YV(e.gammaInitializer||"ones"),this.betaRegularizer=mK(e.betaRegularizer),this.gammaRegularizer=mK(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=$V(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=t);for(const a of this.axis)if(a<0||a>=t)throw new Error("Invalid axis: ".concat(a));if(this.axis.length!==RW(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const n=this.axis.map(t=>e[t]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=JV(e),r=n.shape,a=r.length;return B_(()=>{let{mean:e,variance:t}=GP(n,this.axis,!0);const i=wW(1,a);for(const n of this.axis)i[n]=r[n];const o=e=>null!=e&&e.shape.length!==a?XD(e,i):e;let s=this.scale?o(this.gamma.read()):null,l=this.center?o(this.beta.read()):null;const c=[],u=[];for(let n=0;n<a;++n)-1!==this.axis.indexOf(n)?(c.push(r[n]),u.push(1)):(c.push(1),u.push(r[n]));return e=iP(e,c),t=iP(t,c),null!=s&&(s=iP(s,u)),null!=l&&(l=iP(l,u)),Iq(n,e,t,l,s,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:XV(this.betaInitializer),gammaInitializer:XV(this.gammaInitializer),betaRegularizer:pK(this.betaRegularizer),gammaRegularizer:pK(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}Aq.className="LayerNormalization",hR(Aq);class Oq extends uG{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new yW("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new yW("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new yW("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new iG({ndim:4})]}computeOutputShape(e){let t,n;return e=$V(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return B_(()=>{return t=JV(e),n=this.padding,r=this.dataFormat,B_(()=>{if(4!==t.rank)throw new yW("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new yW("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new yW("Unknown data format: ".concat(r,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let e;return e="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],QP(t,e)});var t,n,r})}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function _q(e,t,n,r,a,i){return B_(()=>{let o;ZW(a),JW(i),QW(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=TK(e,a);const s="same"===r?"same":"valid";return o="max"===i?DP(e,t,n,s):YD(e,t,n,s),"channelsFirst"===a&&(o=vz(o,[0,3,1,2])),o})}function Mq(e,t,n,r,a,i){return B_(()=>{let o;ZW(a),JW(i),QW(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=IK(e,a);const s="same"===r?"same":"valid";return o="max"===i?FP(e,t,n,s):ZD(e,t,n,s),"channelsFirst"===a&&(o=vz(o,[0,4,1,2,3])),o})}Oq.className="ZeroPadding2D",hR(Oq);class Rq extends uG{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new yW("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(LW(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new yW("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));this.strides=e.strides}LW(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,QW(this.padding),this.inputSpec=[new iG({ndim:3})]}computeOutputShape(e){const t=SK((e=$V(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return B_(()=>{this.invokeCallHook(e,t),e=pV(JV(e),2);const n=this.poolingFunction(JV(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return XL(n,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class Dq extends Rq{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return ZW(a),QW(r),_q(e,t,n,r,a,"max")}}Dq.className="MaxPooling1D",hR(Dq);class Fq extends Rq{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return ZW(a),QW(r),_q(e,t,n,r,a,"avg")}}Fq.className="AveragePooling1D",hR(Fq);class Pq extends uG{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new yW("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];LW(this.poolSize,"poolSize"),LW(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,ZW(this.dataFormat),QW(this.padding),this.inputSpec=[new iG({ndim:4})]}computeOutputShape(e){e=$V(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=SK(t,this.poolSize[0],this.padding,this.strides[0]),n=SK(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return B_(()=>(this.invokeCallHook(e,t),this.poolingFunction(JV(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Lq extends Pq{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return ZW(a),QW(r),_q(e,t,n,r,a,"max")}}Lq.className="MaxPooling2D",hR(Lq);class zq extends Pq{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return ZW(a),QW(r),_q(e,t,n,r,a,"avg")}}zq.className="AveragePooling2D",hR(zq);class jq extends uG{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new yW("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];LW(this.poolSize,"poolSize"),LW(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,ZW(this.dataFormat),QW(this.padding),this.inputSpec=[new iG({ndim:5})]}computeOutputShape(e){e=$V(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=SK(t,this.poolSize[0],this.padding,this.strides[0]),n=SK(n,this.poolSize[1],this.padding,this.strides[1]),r=SK(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return B_(()=>(this.invokeCallHook(e,t),this.poolingFunction(JV(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Bq extends jq{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return ZW(a),QW(r),Mq(e,t,n,r,a,"max")}}Bq.className="MaxPooling3D",hR(Bq);class Uq extends jq{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return ZW(a),QW(r),Mq(e,t,n,r,a,"avg")}}Uq.className="AveragePooling3D",hR(Uq);class Wq extends uG{constructor(e){super(e),this.inputSpec=[new iG({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new vW}}class Vq extends Wq{constructor(e){super(e||{})}call(e,t){return B_(()=>{const t=JV(e);return LP(t,1)})}}Vq.className="GlobalAveragePooling1D",hR(Vq);class Gq extends Wq{constructor(e){super(e||{})}call(e,t){return B_(()=>{const t=JV(e);return ZF(t,1)})}}Gq.className="GlobalMaxPooling1D",hR(Gq);class Hq extends uG{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,ZW(this.dataFormat),this.inputSpec=[new iG({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new vW}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Kq extends Hq{call(e,t){return B_(()=>{const t=JV(e);return"channelsLast"===this.dataFormat?LP(t,[1,2]):LP(t,[2,3])})}}Kq.className="GlobalAveragePooling2D",hR(Kq);class qq extends Hq{call(e,t){return B_(()=>{const t=JV(e);return"channelsLast"===this.dataFormat?ZF(t,[1,2]):ZF(t,[2,3])})}}qq.className="GlobalMaxPooling2D",hR(qq);class Xq extends uG{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=UG(t.layer,n);delete t.layer;const a={layer:r};return Object.assign(a,t),new e(a)}}class Yq extends Xq{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=$V(e)).length<3)throw new yW("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=$V(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return B_(()=>VK((e,n)=>[JV(this.layer.call(e,t)),[]],e=JV(e),[],!1,null,null,!1,!0)[1])}}Yq.className="TimeDistributed",hR(Yq);class Zq extends Xq{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=UG(n),t.goBackwards=!0!==t.goBackwards;const r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=UG(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){FW(XW,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new vW("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):NW(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=WK(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const i=[],o=[];if(null!=n){const e=n.length;if(e%2>0)throw new yW("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,i.push(...n);const r=n.map(e=>new iG({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),o.push(...r)}if(null!=r)throw new vW("Support for constants in Bidirectional layers is not implemented yet.");const s=i[0]instanceof oG;for(const l of i)if(l instanceof oG!==s)throw new yW("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(i),r=this.inputSpec.concat(o),a=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=a,s}return super.apply(e,t)}call(e,t){return B_(()=>{const n=t.initialState;let r,a,i,o;if(null==n)r=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{const i=n.slice(0,n.length/2),o=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:i})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:o}))}return this.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),this.returnSequences&&(a=NL(a,1)),"concat"===this.mergeMode?o=yV([r,a]):"sum"===this.mergeMode?o=JM(r,a):"ave"===this.mergeMode?o=tR(.5,JM(r,a)):"mul"===this.mergeMode?o=tR(r,a):null==this.mergeMode&&(o=[r,a]),this.returnState?null==this.mergeMode?o.concat(i):[o].concat(i):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){eV(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),eV(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=UG(t.layer);if(delete t.layer,null!=t.numConstants)throw new vW("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}Zq.className="Bidirectional",hR(Zq);class Qq extends uG{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return B_(()=>("float32"!==(e=JV(e)).dtype&&(e=dV(e,"float32")),JM(tR(e,this.scale),this.offset)))}}Qq.className="Rescaling",hR(Qq);const{resizeBilinear:Jq,cropAndResize:$q}=Pj;class eX extends uG{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,a,i,o,s){return B_(()=>{let l,c=!1;const u=[t/i,n/o,(r+t)/i,(a+n)/o],h=[];3===e.rank?(c=!0,l=YL([e])):l=e;for(let e=0;e<l.shape[0];e++)h.push(u);const d=F_(h,[h.length,4]),p=bL(0,h.length,1,"int32"),f=$q(l,d,p,[r,a],"nearest");return dV(c?JV(dz(f)):f,s)})}upsize(e,t,n,r){return B_(()=>dV(Jq(e,[t,n]),r))}call(e,t){return B_(()=>{const t=JV(e),n=t.dtype,r=t.shape,a=r[r.length-3],i=r[r.length-2];let o=0;a!==this.height&&(o=Math.floor((a-this.height)/2));let s=0;return i!==this.width&&(s=Math.floor((i-this.width)/2),0===s&&(s=1)),o>=0&&s>=0?this.centerCrop(t,o,s,this.height,this.width,a,i,n):this.upsize(e,this.height,this.width,n)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=$V(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}eX.className="CenterCrop",hR(eX);class tX extends uG{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=$V(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return B_(()=>{let n;if("int32"!==(e=JV(e)).dtype&&(e=dV(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new yW("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=JV(t.countWeights)}const r=ZF(e),a=QF(e),i=cP(this.numTokens,r).bufferSync().get(0),o=uP(a,0).bufferSync().get(0);if(!i||!o)throw new yW("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,r){let a=JV(e);if("int32"!==a.dtype&&(a=dV(a,"int32")),"int"===t)return a;const i=a.shape;if(0===a.rank&&(a=rP(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=rP(a,-1)),a.rank>2)throw new yW("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(i)+" which would result in output rank ".concat(a.rank,"."));const o=["multiHot","oneHot"].includes(t),s=a;let l;if(l=AF(s,"undefined"!==typeof r&&"count"===t?r:[],n,o),"tfIdf"!==t)return l;if(r)return tR(l,r);throw new yW("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)})}}tX.className="CategoryEncoding",hR(tX);const nX=new Set(["bilinear","nearest"]);class rX extends uG{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!nX.has(e.interpolation))throw new yW("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=$V(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return B_(()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return Pj.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return Pj.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...nX]," are supported"))})}}rX.className="Resizing",hR(rX);class aX{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}aX.className="RandomSeed";class iX extends uG{constructor(e){super(e),this.randomGenerator=new aX(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}iX.className="BaseRandomLayer";const oX=new Set(["bilinear","nearest"]);class sX extends iX{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new yW("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new yW("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new yW("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!oX.has(n))throw new yW("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=$V(e))[2];return[this.imgHeight,-1,t]}call(e,t){return B_(()=>{const t=JV(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=yL([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const a=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return Pj.resizeBilinear(e,a);case"nearest":return Pj.resizeNearestNeighbor(e,a);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...oX]," are supported"))}})}}sX.className="RandomWidth",hR(sX);var lX,cX;qI().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(lX||(lX={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(cX||(cX={}));const uX={};function hX(e){return uX[e]}function dX(e,t,n,r,a){const i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){const e=i.inputIndexStart,o=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd,s=e<0?t.inputNames.length+e:e;if("tensor"===i.type)return pX(t.inputNames[s],n,r,a);if("tensors"===i.type){const i=t.inputs.slice(e,o);return t.inputNames.slice(e,o).filter((e,t)=>{var n;return"NoOp"!==(null===(n=i[t])||void 0===n?void 0:n.op)}).map(e=>pX(e,n,r,a))}const l=pX(t.inputNames[s],n,r,a),c=l.dataSync();return"number"===i.type?c[0]:PI(l.shape,c)}const o=t.attrParams[e];return o&&o.value}function pX(e,t,n,r){const[a,i]=yX(e,n);if(null!=r){const e=r.getHashTableHandleByName(a);if(null!=e)return e}const o=n.currentContextIds.find(e=>!!t[gX(a,e)]);return void 0!==o?t[gX(a,o)][i]:void 0}function fX(e,t,n){return t[gX(e,n.currentContextId)]}function mX(e,t){const[n,r,a]=yX(e,t);return[gX(n,t&&t.currentContextId),r,a]}function gX(e,t){return t?"".concat(e,"-").concat(t):e}function yX(e,t){if(""===e)return["",0,void 0];const n=null!=t&&null!=t.parseNodeNameCache;if(n){const n=t.parseNodeNameCache.get(e);if(null!=n)return n}const r=e.split(":");let a;if(1===r.length)a=[e,0,void 0];else{const e=r[0],t=3===r.length?r[1]:void 0;a=[e,Number(r[r.length-1]),t]}return n&&t.parseNodeNameCache.set(e,a),a}function vX(e,t,n){let r=dX("pad",e,t,n);if("explicit"===r){r=dX("explicitPaddings",e,t,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}return r}function bX(e){return e.kept?e:ZM(e)}const xX=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],wX=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],kX=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],SX=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],NX=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],TX=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],IX=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],EX=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],CX=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],AX=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],OX=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],_X=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],MX=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],RX=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],DX=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],FX=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],PX=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],LX=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],zX=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class jX{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[s,l,c,u,h,d,p,f,m,g,y,v,b,x,w,k,S,N,T].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.node,r=[],a=[],i=[],o=n.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):null!=t.input&&0!==t.input.length||i.push(e[t.name]),e),{});let s=[];const l=[];let c={},u={};null!=t&&(c=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const h=Object.keys(o);h.forEach(e=>{const t=o[e];t.inputNames.forEach((e,n)=>{const[r,,a]=mX(e),i=o[r];if(null!=i.outputs){const e=i.outputs.indexOf(a);if(-1!==e){const a="".concat(r,":").concat(e);t.inputNames[n]=a}}t.inputs.push(i),i.children.push(t)})}),0===Object.keys(u).length?h.forEach(e=>{const t=o[e];0===t.children.length&&l.push(t)}):Object.keys(u).forEach(e=>{const[t]=mX(e),n=o[t];null!=n&&(n.signatureKey=u[e],l.push(n))}),Object.keys(c).length>0?Object.keys(c).forEach(e=>{const[t]=mX(e),n=o[t];n&&(n.signatureKey=c[e],s.push(n))}):s=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const p={nodes:o,inputs:s,outputs:l,weights:a,placeholders:r,signature:t,functions:d};return i.length>0&&(p.initNodes=i),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){const t=hX(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.slice(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{const r=n.type;let a;switch(n.type){case"string":a=UX(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=UX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":a=QX(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=QX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":a=VX(e.attr,n.tfName,n.defaultValue||0),void 0===a&&n.tfDeprecatedName&&(a=VX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":a=ZX(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=ZX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":a=WX(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=WX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":a=$X(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=$X(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":a=YX(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=YX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":a=JX(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=JX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":a=KX(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=KX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":a=qX(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=qX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":a=HX(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=HX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t},{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));const a=[],i=[];e.signature.inputArg.forEach(e=>{const[t]=mX(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:GX(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n});Object.keys(r).forEach(e=>{const t=r[e];t.inputNames.forEach((e,n)=>{const[a,,i]=mX(e),o=r[a];if(null!=o.outputs){const e=o.outputs.indexOf(i);if(-1!==e){const r="".concat(a,":").concat(e);t.inputNames[n]=r}}t.inputs.push(o),o.children.push(t)})});const o=e.ret;e.signature.outputArg.forEach(e=>{const[t,n]=mX(o[e.name]),a=r[t];null!=a&&(a.defaultOutput=n,i.push(a))});const s=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:i,weights:n,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function BX(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=qI().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function UX(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=e[t];return null!=a?BX(a.s,r):n}function WX(e,t,n){const r=e[t];return r?r.b:n}function VX(e,t,n){const r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function GX(e){switch("string"===typeof e&&(e=lX[e]),e){case lX.DT_FLOAT:case lX.DT_HALF:return"float32";case lX.DT_INT32:case lX.DT_INT64:case lX.DT_INT8:case lX.DT_UINT8:return"int32";case lX.DT_BOOL:return"bool";case lX.DT_DOUBLE:return"float32";case lX.DT_STRING:return"string";case lX.DT_COMPLEX64:case lX.DT_COMPLEX128:return"complex64";default:return null}}function HX(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function KX(e,t,n){const r=e[t];return r&&r.type?GX(r.type):n}function qX(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>GX(e)):n}function XX(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"===typeof e.size?e.size:parseInt(e.size,10)):[]}function YX(e,t,n){const r=e[t];return r&&r.shape?XX(r.shape):n}function ZX(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"===typeof e?e:parseInt(e,10)):n}function QX(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=e[t];return a&&a.list&&a.list.s?a.list.s.map(e=>BX(e,r)):n}function JX(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>XX(e)):n}function $X(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class eY{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return pX(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return pX(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return VX(this.node.rawAttrs,e,t);if(null!=n.s)return UX(this.node.rawAttrs,e,t);if(null!=n.b)return WX(this.node.rawAttrs,e,t);if(null!=n.shape)return YX(this.node.rawAttrs,e,t);if(null!=n.type)return KX(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return ZX(this.node.rawAttrs,e,t);if(null!=n.list.s)return QX(this.node.rawAttrs,e,t);if(null!=n.list.shape)return JX(this.node.rawAttrs,e,t);if(null!=n.list.b)return $X(this.node.rawAttrs,e,t);if(null!=n.list.type)return qX(this.node.rawAttrs,e,t)}return t}}function tY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){pI(e.length===t.length,()=>n+" Shapes ".concat(e," and ").concat(t," must match"));for(let r=0;r<e.length;r++){const a=e[r],i=t[r];pI(a<0||i<0||a===i,()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}}}function nY(e){return"number"!==typeof e&&!e.some(e=>e<0)}function rY(e,t,n){let r=aY(e,n);const a=!nY(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach(e=>{r=aY(e.shape,r)}),!nY(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function aY(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));const n=[];for(let r=0;r<e.length;++r){const a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}class iY{constructor(e,t,n,r,a,i,o){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=oR(0),W_(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));const t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),tY(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,W_(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return F_([],[0].concat(this.elementShape));const n=this.readMany(e);return tY(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),YL(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return F_([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const n=this.readMany(t);return tY(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),QD(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,dz(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));let n=0;const r=e.map(e=>(n+=e,n));if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");const a=0===n?0:t.size/n,i=[];B_(()=>{t=XD(t,[1,n,a]);for(let n=0;n<e.length;++n){const o=[0,0===n?0:r[n-1],0],s=[1,e[n],a];i[n]=XD(eF(t,o,s),this.elementShape)}return i});const o=[];for(let s=0;s<e.length;s++)o[s]=s;this.writeMany(o,i)}}class oY{get id(){return this.idTensor.id}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(e.dtype));tY(t,e.shape,"TensorList shape mismatch: "),W_(e)}),this.idTensor=oR(0),this.maxNumElements=r,W_(this.idTensor)}copy(){return new oY([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==n&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));tY(e,this.elementShape,"TensorList shape mismatch: ");const r=rY(this.elementShape,this.tensors,e);return B_(()=>{const e=this.tensors.map(e=>XD(e,r));return YL(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=rY(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,tY(r.shape,e,"TensorList shape mismatch: "),XD(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(tY(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");W_(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));const t=new oY([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));tY(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=rY(this.elementShape,this.tensors,t);return XD(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));tY(this.elementShape,t.shape,"TensorList shape mismatch: "),W_(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));tY(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=rY(this.elementShape,this.tensors,n);return 0===e.length?F_([],[0].concat(r)):B_(()=>{const t=e.map(e=>XD(this.tensors[e],r));return YL(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));tY(this.elementShape,t,"TensorList shape mismatch: ");const n=rY(this.elementShape,this.tensors,t);return 0===this.size()?F_([],[0].concat(n)):B_(()=>{const e=this.tensors.map(e=>XD(e,n));return QD(e,0)})}}const sY=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=dX("thenBranch",e,t,n),a=dX("elseBranch",e,t,n),i=dX("cond",e,t,n),o=dX("args",e,t,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=dX("body",e,t,n),a=dX("cond",e,t,n),i=dX("args",e,t,n),o=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),s=i.map(e=>e.id);let l=await o[0].data();o.forEach(e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()});let c=i;for(;l[0];){const e=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const t=c.map(e=>e.id);e.forEach(e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()});const i=await n.functionMap[a].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await i[0].data(),i.forEach(e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()})}return c}case"LoopCond":return[bX(dX("pred",e,t,n))];case"Switch":{const r=dX("pred",e,t,n);let a=dX("data",e,t,n);return a.kept||(a=bX(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=e.inputNames.find(e=>void 0!==pX(e,t,n));if(r){return[bX(pX(r,t,n))]}return}case"Enter":{const r=dX("frameName",e,t,n),a=dX("tensor",e,t,n);return n.enterFrame(r),[bX(a)]}case"Exit":{const r=dX("tensor",e,t,n);return n.exitFrame(),[bX(r)]}case"NextIteration":{const r=dX("tensor",e,t,n);return n.nextIteration(),[bX(r)]}case"TensorArrayV3":{const r=dX("size",e,t,n),a=dX("dtype",e,t,n),i=dX("elementShape",e,t,n),o=dX("dynamicSize",e,t,n),s=dX("clearAfterRead",e,t,n),l=dX("identicalElementShapes",e,t,n),c=dX("name",e,t,n),u=new iY(c,a,r,i,l,o,s);return n.addTensorArray(u),[u.idTensor,oR(1)]}case"TensorArrayWriteV3":{const r=dX("tensorArrayId",e,t,n),a=dX("index",e,t,n),i=dX("tensor",e,t,n),o=n.getTensorArray(r.id);return o.write(a,i),[o.idTensor]}case"TensorArrayReadV3":{const r=dX("tensorArrayId",e,t,n),a=dX("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=dX("tensorArrayId",e,t,n),a=dX("indices",e,t,n),i=dX("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{const r=dX("tensorArrayId",e,t,n),a=dX("indices",e,t,n),i=dX("tensor",e,t,n),o=n.getTensorArray(r.id);return o.scatter(a,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=dX("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),i=dX("dtype",e,t,n);return[a.concat(i)]}case"TensorArraySplitV3":{const r=dX("tensorArrayId",e,t,n),a=dX("tensor",e,t,n),i=dX("lengths",e,t,n),o=n.getTensorArray(r.id);return o.split(i,a),[o.idTensor]}case"TensorArraySizeV3":{const r=dX("tensorArrayId",e,t,n);return[oR(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=dX("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=dX("tensorListId",e,t,n),a=dX("index",e,t,n),i=dX("tensor",e,t,n),o=n.getTensorList(r.id);return o.setItem(a,i),[o.idTensor]}case"TensorListGetItem":{const r=dX("tensorListId",e,t,n),a=dX("index",e,t,n),i=dX("elementShape",e,t,n),o=dX("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=dX("indices",e,t,n),a=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));const a=Math.max(...t);if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));const i=new oY([],n,e.dtype,r),o=dz(e,0);return t.forEach((e,t)=>{i.setItem(e,o[t])}),i}(dX("tensor",e,t,n),r,dX("elementShape",e,t,n),dX("numElements",e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=dX("elementShape",e,t,n),a=dX("elementDType",e,t,n);let i;i="TensorListReserve"===e.op?"numElements":"maxNumElements";const o=dX(i,e,t,n),s=function(e,t,n,r){return new oY([],e,t,r)}(r,a,0,"TensorListReserve"===e.op?-1:o);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const r=dX("tensorListId",e,t,n),a=dX("indices",e,t,n),i=dX("elementShape",e,t,n),o=dX("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,o,i)]}case"TensorListStack":{const r=dX("tensorListId",e,t,n),a=dX("elementShape",e,t,n),i=dX("elementDType",e,t,n),o=dX("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,i,o)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));tY(e.shape.slice(1),t,"TensorList shape mismatch: ");const a=dz(e);return new oY(a,t,r)}(dX("tensor",e,t,n),dX("elementShape",e,t,n),dX("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=dX("tensorListId",e,t,n),a=n.getTensorList(r.id),i=dX("dtype",e,t,n),o=dX("elementShape",e,t,n);return[a.concat(i,o)]}case"TensorListPushBack":{const r=dX("tensorListId",e,t,n),a=dX("tensor",e,t,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{const r=dX("tensorListId",e,t,n),a=dX("elementShape",e,t,n),i=dX("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{const r=dX("tensor",e,t,n),a=dX("elementShape",e,t,n),i=function(e,t,n){let r=0;const a=t.map(e=>(r+=e,r));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));const i=aY(e.shape.slice(1),n),o=0===r?0:e.size/r,s=B_(()=>{const n=[];e=XD(e,[1,r,o]);for(let r=0;r<t.length;++r){const s=[0,0===r?0:a[r-1],0],l=[1,t[r],o];n[r]=XD(eF(e,s,l),i)}return e.dispose(),n}),l=new oY([],n,e.dtype,t.length);for(let c=0;c<s.length;c++)l.setItem(c,s[c]);return l}(r,dX("lengths",e,t,n),a);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{const r=dX("tensorListId",e,t,n);return[oR(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{const r=dX("tensorListId",e,t,n),a=dX("size",e,t,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function lY(e,t,n){const[r,a]=dX("fusedOps",e,t,n),i="biasadd"===r,o=!i,s="prelu"===a,l="fusedbatchnorm"===r,c=dX("numArgs",e,t,n);if(i){if(s&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&i&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=dX("strides",e,t,n),h=vX(e,t,n),d=dX("dataFormat",e,t,n).toUpperCase(),p=dX("dilations",e,t,n);let[f,m]=dX("args",e,t,n);o&&(m=f,f=void 0);return{stride:u,pad:h,dataFormat:d,dilations:p,biasArg:f,preluArg:m,activationFunc:a,leakyreluAlpha:dX("leakyreluAlpha",e,t,n)}}function cY(e,t,n){return{boxes:dX("boxes",e,t,n),scores:dX("scores",e,t,n),maxOutputSize:dX("maxOutputSize",e,t,n),iouThreshold:dX("iouThreshold",e,t,n),scoreThreshold:dX("scoreThreshold",e,t,n),softNmsSigma:dX("softNmsSigma",e,t,n)}}class uY{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=oR(0),this.tensorMap=new Map,W_(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return oR(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),B_(()=>{const e=dz(t),r=n.length,a=e.length;pI(r===a,()=>"The number of elements doesn't match, keys has "+"".concat(r," elements, the values has ").concat(a," ")+"elements.");for(let t=0;t<r;t++){const r=n[t],a=e[t];W_(a),this.tensorMap.set(r,a)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return B_(()=>{const e=[];for(let r=0;r<n.length;r++){const a=n[r],i=this.findWithDefault(a,t);e.push(i)}return YL(e)})}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}function hY(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:B_;const i=((e,t,n)=>{switch(e.category){case"arithmetic":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(dX("a",e,t,n),dX("b",e,t,n))];case"AddN":return[r.addN(dX("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(dX("a",e,t,n),dX("b",e,t,n))];case"Mul":return[r.mul(dX("a",e,t,n),dX("b",e,t,n))];case"RealDiv":case"Div":return[r.div(dX("a",e,t,n),dX("b",e,t,n))];case"DivNoNan":return[r.divNoNan(dX("a",e,t,n),dX("b",e,t,n))];case"FloorDiv":return[r.floorDiv(dX("a",e,t,n),dX("b",e,t,n))];case"Sub":return[r.sub(dX("a",e,t,n),dX("b",e,t,n))];case"Minimum":return[r.minimum(dX("a",e,t,n),dX("b",e,t,n))];case"Maximum":return[r.maximum(dX("a",e,t,n),dX("b",e,t,n))];case"Pow":return[r.pow(dX("a",e,t,n),dX("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(dX("a",e,t,n),dX("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"basic_math":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(dX("x",e,t,n))];case"Acos":return[r.acos(dX("x",e,t,n))];case"Acosh":return[r.acosh(dX("x",e,t,n))];case"Asin":return[r.asin(dX("x",e,t,n))];case"Asinh":return[r.asinh(dX("x",e,t,n))];case"Atan":return[r.atan(dX("x",e,t,n))];case"Atan2":return[r.atan2(dX("x",e,t,n),dX("y",e,t,n))];case"Atanh":return[r.atanh(dX("x",e,t,n))];case"Ceil":return[r.ceil(dX("x",e,t,n))];case"Complex":return[r.complex(dX("real",e,t,n),dX("imag",e,t,n))];case"Cos":return[r.cos(dX("x",e,t,n))];case"Cosh":return[r.cosh(dX("x",e,t,n))];case"Elu":return[r.elu(dX("x",e,t,n))];case"Erf":return[r.erf(dX("x",e,t,n))];case"Exp":return[r.exp(dX("x",e,t,n))];case"Expm1":return[r.expm1(dX("x",e,t,n))];case"Floor":return[r.floor(dX("x",e,t,n))];case"Log":return[r.log(dX("x",e,t,n))];case"Log1p":return[r.log1p(dX("x",e,t,n))];case"Imag":return[r.imag(dX("x",e,t,n))];case"Neg":return[r.neg(dX("x",e,t,n))];case"Reciprocal":return[r.reciprocal(dX("x",e,t,n))];case"Real":return[r.real(dX("x",e,t,n))];case"Relu":return[r.relu(dX("x",e,t,n))];case"Round":return[r.round(dX("x",e,t,n))];case"Selu":return[r.selu(dX("x",e,t,n))];case"Sigmoid":return[r.sigmoid(dX("x",e,t,n))];case"Sin":return[r.sin(dX("x",e,t,n))];case"Sign":return[r.sign(dX("x",e,t,n))];case"Sinh":return[r.sinh(dX("x",e,t,n))];case"Softplus":return[r.softplus(dX("x",e,t,n))];case"Sqrt":return[r.sqrt(dX("x",e,t,n))];case"Square":return[r.square(dX("x",e,t,n))];case"Tanh":return[r.tanh(dX("x",e,t,n))];case"Tan":return[r.tan(dX("x",e,t,n))];case"ClipByValue":return[r.clipByValue(dX("x",e,t,n),dX("clipValueMin",e,t,n),dX("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(dX("x",e,t,n))];case"Rsqrt":return[r.rsqrt(pX(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(dX("x",e,t,n),dX("alpha",e,t,n))];case"Prelu":return[r.prelu(dX("x",e,t,n),dX("alpha",e,t,n))];case"IsNan":return[r.isNaN(pX(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(pX(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(pX(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"control":return sY(e,t,n);case"convolution":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"Conv1D":{const a=dX("stride",e,t,n),i=dX("pad",e,t,n),o=dX("dataFormat",e,t,n).toUpperCase(),s=dX("dilation",e,t,n);return[r.conv1d(dX("x",e,t,n),dX("filter",e,t,n),a,i,o,s)]}case"Conv2D":{const a=dX("strides",e,t,n),i=vX(e,t,n),o=dX("dataFormat",e,t,n).toUpperCase(),s=dX("dilations",e,t,n);return[r.conv2d(dX("x",e,t,n),dX("filter",e,t,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=lY(e,t,n);return[r.fused.conv2d({x:dX("x",e,t,n),filter:dX("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=lY(e,t,n);return[r.fused.depthwiseConv2d({x:dX("x",e,t,n),filter:dX("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=dX("outputShape",e,t,n),i=dX("strides",e,t,n),o=vX(e,t,n);return[r.conv2dTranspose(dX("x",e,t,n),dX("filter",e,t,n),a,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=dX("strides",e,t,n),i=vX(e,t,n),o=dX("dilations",e,t,n),s=dX("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(dX("input",e,t,n),dX("filter",e,t,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"Conv3D":{const a=dX("strides",e,t,n),i=dX("pad",e,t,n),o=dX("dataFormat",e,t,n).toUpperCase(),s=dX("dilations",e,t,n);return[r.conv3d(dX("x",e,t,n),dX("filter",e,t,n),[a[1],a[2],a[3]],i,o,[s[1],s[2],s[3]])]}case"AvgPool":{const a=dX("strides",e,t,n),i=dX("pad",e,t,n),o=dX("kernelSize",e,t,n);return[r.avgPool(dX("x",e,t,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPool":{const a=dX("strides",e,t,n),i=dX("pad",e,t,n),o=dX("kernelSize",e,t,n);return[r.maxPool(dX("x",e,t,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{const a=dX("strides",e,t,n),i=dX("pad",e,t,n),o=dX("kernelSize",e,t,n),s=dX("includeBatchInIndex",e,t,n),{result:l,indexes:c}=r.maxPoolWithArgmax(dX("x",e,t,n),[o[1],o[2]],[a[1],a[2]],i,s);return[l,c]}case"AvgPool3D":{const a=dX("strides",e,t,n),i=dX("pad",e,t,n),o=dX("kernelSize",e,t,n);return[r.avgPool3d(dX("x",e,t,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{const a=dX("strides",e,t,n),i=dX("pad",e,t,n),o=dX("kernelSize",e,t,n);return[r.maxPool3d(dX("x",e,t,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{const a=dX("strides",e,t,n),i=dX("pad",e,t,n),o=dX("dilations",e,t,n),s=a[1],l=a[2],c=o[1],u=o[2];return[r.dilation2d(dX("x",e,t,n),dX("filter",e,t,n),[s,l],i,[c,u],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"creation":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"Fill":{const a=dX("shape",e,t,n),i=dX("dtype",e,t,n),o=dX("value",e,t,n);return[r.fill(a,o,i)]}case"LinSpace":{const a=dX("start",e,t,n),i=dX("stop",e,t,n),o=dX("num",e,t,n);return[r.linspace(a,i,o)]}case"Multinomial":{const a=dX("logits",e,t,n),i=dX("numSamples",e,t,n),o=dX("seed",e,t,n);return[r.multinomial(a,i,o)]}case"OneHot":{const a=dX("indices",e,t,n),i=dX("depth",e,t,n),o=dX("onValue",e,t,n),s=dX("offValue",e,t,n),l=dX("dtype",e,t,n);return[r.oneHot(a,i,o,s,l)]}case"Ones":return[r.ones(dX("shape",e,t,n),dX("dtype",e,t,n))];case"OnesLike":return[r.onesLike(dX("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(dX("shape",e,t,n),dX("dtype",e,t,n),dX("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(dX("shape",e,t,n),dX("minval",e,t,n),dX("maxval",e,t,n),dX("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(dX("shape",e,t,n),dX("minval",e,t,n),dX("maxval",e,t,n),dX("seed",e,t,n))];case"Range":{const a=dX("start",e,t,n),i=dX("stop",e,t,n),o=dX("step",e,t,n);return[r.range(a,i,o,dX("dtype",e,t,n))]}case"TruncatedNormal":{const a=dX("shape",e,t,n),i=dX("mean",e,t,n),o=dX("stdDev",e,t,n),s=dX("seed",e,t,n);return[r.truncatedNormal(a,i,o,dX("dtype",e,t,n),s)]}case"Zeros":return[r.zeros(dX("shape",e,t,n),dX("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(dX("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"dynamic":return async function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:I;switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:i,maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=cY(e,t,n),u=await a.image.nonMaxSuppressionWithScoreAsync(r,i,o,s,l,c);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:i,maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=cY(e,t,n),c=dX("padToMaxOutputSize",e,t,n),u=await a.image.nonMaxSuppressionPaddedAsync(r,i,o,s,l,c);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:i,maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=cY(e,t,n);return[await a.image.nonMaxSuppressionAsync(r,i,o,s,l)]}case"Where":{const r=a.cast(dX("condition",e,t,n),"bool"),i=[await a.whereAsync(r)];return r.dispose(),i}case"ListDiff":return a.setdiff1dAsync(dX("x",e,t,n),dX("y",e,t,n));default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n);case"evaluation":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"LowerBound":{const a=dX("sortedSequence",e,t,n),i=dX("values",e,t,n);return[r.lowerBound(a,i)]}case"TopKV2":{const a=dX("x",e,t,n),i=dX("k",e,t,n),o=dX("sorted",e,t,n),s=r.topk(a,i,o);return[s.values,s.indices]}case"UpperBound":{const a=dX("sortedSequence",e,t,n),i=dX("values",e,t,n);return[r.upperBound(a,i)]}case"Unique":{const a=dX("x",e,t,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{const a=dX("x",e,t,n),i=dX("axis",e,t,n),o=r.unique(a,i);return[o.values,o.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"image":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"ResizeBilinear":{const a=dX("images",e,t,n),i=dX("size",e,t,n),o=dX("alignCorners",e,t,n),s=dX("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)]}case"ResizeNearestNeighbor":{const a=dX("images",e,t,n),i=dX("size",e,t,n),o=dX("alignCorners",e,t,n),s=dX("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],o,s)]}case"CropAndResize":{const a=dX("image",e,t,n),i=dX("boxes",e,t,n),o=dX("boxInd",e,t,n),s=dX("cropSize",e,t,n),l=dX("method",e,t,n),c=dX("extrapolationValue",e,t,n);return[r.image.cropAndResize(a,i,o,s,l,c)]}case"ImageProjectiveTransformV3":{const a=dX("images",e,t,n),i=dX("transforms",e,t,n),o=dX("outputShape",e,t,n),s=dX("fillValue",e,t,n),l=dX("interpolation",e,t,n),c=dX("fillMode",e,t,n);return[r.image.transform(a,i,l.toLowerCase(),c.toLowerCase(),s,o)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"graph":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const a=dX("default",e,t,n);return[pX(e.name,t,n)||a];case"Placeholder":return[pX(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[bX(dX("x",e,t,n))];case"IdentityN":return dX("x",e,t,n).map(e=>bX(e));case"Shape":return[r.tensor1d(dX("x",e,t,n).shape,"int32")];case"ShapeN":return dX("x",e,t,n).map(e=>r.tensor1d(e.shape));case"Size":return[r.scalar(dX("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(dX("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const i=dX("x",e,t,n),o=dX("data",e,t,n),s=dX("message",e,t,n),l=dX("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<o.length;e++)console.log(Array.prototype.slice.call(o[e].dataSync()).slice(0,l));return[i];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"logical":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"Equal":return[r.equal(dX("a",e,t,n),dX("b",e,t,n))];case"NotEqual":return[r.notEqual(dX("a",e,t,n),dX("b",e,t,n))];case"Greater":return[r.greater(dX("a",e,t,n),dX("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(dX("a",e,t,n),dX("b",e,t,n))];case"Less":return[r.less(dX("a",e,t,n),dX("b",e,t,n))];case"LessEqual":return[r.lessEqual(dX("a",e,t,n),dX("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(dX("a",e,t,n),dX("b",e,t,n))];case"LogicalNot":return[r.logicalNot(dX("a",e,t,n))];case"LogicalOr":return[r.logicalOr(dX("a",e,t,n),dX("b",e,t,n))];case"Select":case"SelectV2":return[r.where(dX("condition",e,t,n),dX("a",e,t,n),dX("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(dX("a",e,t,n),dX("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"matrices":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(dX("a",e,t,n),dX("b",e,t,n),dX("transposeA",e,t,n),dX("transposeB",e,t,n))];case"Einsum":return[r.einsum(dX("equation",e,t,n),...dX("tensors",e,t,n))];case"Transpose":return[r.transpose(dX("x",e,t,n),dX("perm",e,t,n))];case"_FusedMatMul":const[a,i]=dX("fusedOps",e,t,n),o="biasadd"===a,s="prelu"===i,l=dX("numArgs",e,t,n),c=dX("leakyreluAlpha",e,t,n);if(o){if(s&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,h]=dX("args",e,t,n);return[r.fused.matMul({a:dX("a",e,t,n),b:dX("b",e,t,n),transposeA:dX("transposeA",e,t,n),transposeB:dX("transposeB",e,t,n),bias:u,activation:i,preluActivationWeights:h,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(dX("a",e,t,n),dX("numLower",e,t,n),dX("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"normalization":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(dX("x",e,t,n),dX("axis",e,t,n),dX("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(dX("x",e,t,n),dX("mean",e,t,n),dX("variance",e,t,n),dX("offset",e,t,n),dX("scale",e,t,n),dX("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(dX("x",e,t,n),dX("radius",e,t,n),dX("bias",e,t,n),dX("alpha",e,t,n),dX("beta",e,t,n))];case"Softmax":return[r.softmax(dX("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(dX("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"ragged":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"RaggedGather":{const{outputNestedSplits:a,outputDenseValues:i}=r.raggedGather(dX("paramsNestedSplits",e,t,n),dX("paramsDenseValues",e,t,n),dX("indices",e,t,n),dX("outputRaggedRank",e,t,n));return a.concat(i)}case"RaggedRange":{const{rtNestedSplits:a,rtDenseValues:i}=r.raggedRange(dX("starts",e,t,n),dX("limits",e,t,n),dX("splits",e,t,n));return[a,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(dX("shape",e,t,n),dX("values",e,t,n),dX("defaultValue",e,t,n),dX("rowPartitionTensors",e,t,n),dX("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"reduction":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"Max":{const a=dX("axis",e,t,n),i=dX("keepDims",e,t,n);return[r.max(dX("x",e,t,n),a,i)]}case"Mean":{const a=dX("axis",e,t,n),i=dX("keepDims",e,t,n);return[r.mean(dX("x",e,t,n),a,i)]}case"Min":{const a=dX("axis",e,t,n),i=dX("keepDims",e,t,n);return[r.min(dX("x",e,t,n),a,i)]}case"Sum":{const a=dX("axis",e,t,n),i=dX("keepDims",e,t,n);return[r.sum(dX("x",e,t,n),a,i)]}case"All":{const a=dX("axis",e,t,n),i=dX("keepDims",e,t,n);return[r.all(dX("x",e,t,n),a,i)]}case"Any":{const a=dX("axis",e,t,n),i=dX("keepDims",e,t,n);return[r.any(dX("x",e,t,n),a,i)]}case"ArgMax":{const a=dX("axis",e,t,n);return[r.argMax(dX("x",e,t,n),a)]}case"ArgMin":{const a=dX("axis",e,t,n);return[r.argMin(dX("x",e,t,n),a)]}case"Prod":{const a=dX("axis",e,t,n),i=dX("keepDims",e,t,n);return[r.prod(dX("x",e,t,n),a,i)]}case"Cumprod":{const a=dX("axis",e,t,n),i=dX("exclusive",e,t,n),o=dX("reverse",e,t,n);return[r.cumprod(dX("x",e,t,n),a,i,o)]}case"Cumsum":{const a=dX("axis",e,t,n),i=dX("exclusive",e,t,n),o=dX("reverse",e,t,n);return[r.cumsum(dX("x",e,t,n),a,i,o)]}case"Bincount":const a=dX("x",e,t,n),i=dX("weights",e,t,n),o=dX("size",e,t,n);return[r.bincount(a,i,o)];case"DenseBincount":{const a=dX("x",e,t,n),i=dX("weights",e,t,n),o=dX("size",e,t,n),s=dX("binaryOutput",e,t,n);return[r.denseBincount(a,i,o,s)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"slice_join":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"ConcatV2":case"Concat":{const a=dX("n",e,t,n),i=dX("axis",e,t,n);let o=dX("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)]}case"Gather":{const a=dX("x",e,t,n),i=dX("indices",e,t,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{const a=dX("axis",e,t,n),i=dX("batchDims",e,t,n),o=dX("x",e,t,n),s=dX("indices",e,t,n);return[r.gather(o,r.cast(s,"int32"),a,i)]}case"Reverse":{const a=dX("dims",e,t,n),i=[];for(let e=0;e<a.length;e++)a[e]&&i.push(e);const o=dX("x",e,t,n);return[r.reverse(o,i)]}case"ReverseV2":{const a=dX("axis",e,t,n),i=dX("x",e,t,n);return[r.reverse(i,a)]}case"Slice":{const a=dX("begin",e,t,n),i=dX("size",e,t,n);return[r.slice(dX("x",e,t,n),a,i)]}case"StridedSlice":{const a=dX("begin",e,t,n),i=dX("end",e,t,n),o=dX("strides",e,t,n),s=dX("beginMask",e,t,n),l=dX("endMask",e,t,n),c=dX("ellipsisMask",e,t,n),u=dX("newAxisMask",e,t,n),h=dX("shrinkAxisMask",e,t,n),d=dX("x",e,t,n);return[r.stridedSlice(d,a,i,o,s,l,c,u,h)]}case"Pack":return B_(()=>{const a=dX("axis",e,t,n),i=dX("tensors",e,t,n),o=i[0].shape,s=r.squeeze(i[0]).shape,l=i.map(e=>{const t=yI(e.shape,o);if(!t&&!yI(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,o)});return[r.stack(l,a)]});case"Unpack":{const a=dX("axis",e,t,n),i=dX("tensor",e,t,n);return r.unstack(i,a)}case"Tile":{const a=dX("reps",e,t,n);return[r.tile(dX("x",e,t,n),a)]}case"Split":case"SplitV":{const a=dX("axis",e,t,n),i=dX("numOrSizeSplits",e,t,n),o=dX("x",e,t,n);return r.split(o,i,a)}case"ScatterNd":{const a=dX("indices",e,t,n),i=dX("values",e,t,n),o=dX("shape",e,t,n);return[r.scatterND(a,i,o)]}case"GatherNd":{const a=dX("x",e,t,n),i=dX("indices",e,t,n);return[r.gatherND(a,i)]}case"SparseToDense":{const a=dX("sparseIndices",e,t,n),i=dX("outputShape",e,t,n),o=dX("sparseValues",e,t,n),s=dX("defaultValue",e,t,n);return[r.sparseToDense(a,o,i,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}case"TensorScatterUpdate":{const a=dX("indices",e,t,n),i=dX("values",e,t,n),o=dX("tensor",e,t,n);return[r.tensorScatterUpdate(o,a,i)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"sparse":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:i,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(dX("indices",e,t,n),dX("values",e,t,n),dX("denseShape",e,t,n),dX("defaultValue",e,t,n));return[a,i,o,s]}case"SparseReshape":{const{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(dX("inputIndices",e,t,n),dX("inputShape",e,t,n),dX("newShape",e,t,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(dX("data",e,t,n),dX("indices",e,t,n),dX("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(dX("data",e,t,n),dX("indices",e,t,n),dX("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"spectral":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"FFT":return[r.fft(dX("x",e,t,n))];case"IFFT":return[r.ifft(dX("x",e,t,n))];case"RFFT":return[r.rfft(dX("x",e,t,n))];case"IRFFT":return[r.irfft(dX("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"string":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(dX("input",e,t,n),dX("pattern",e,t,n),dX("rewrite",e,t,n),dX("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(dX("data",e,t,n),dX("dataSplits",e,t,n),dX("separator",e,t,n),dX("nGramWidths",e,t,n),dX("leftPad",e,t,n),dX("rightPad",e,t,n),dX("padWidth",e,t,n),dX("preserveShortSequences",e,t,n));return[a,i]}case"StringSplit":{const{indices:a,values:i,shape:o}=r.string.stringSplit(dX("input",e,t,n),dX("delimiter",e,t,n),dX("skipEmpty",e,t,n));return[a,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(dX("input",e,t,n),dX("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"transformation":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;switch(e.op){case"Cast":return[r.cast(dX("x",e,t,n),dX("dtype",e,t,n))];case"ExpandDims":{const a=dX("axis",e,t,n);return[r.expandDims(dX("x",e,t,n),a)]}case"Squeeze":{const a=dX("axis",e,t,n);return[r.squeeze(dX("x",e,t,n),a)]}case"Reshape":return[r.reshape(dX("x",e,t,n),dX("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(dX("x",e,t,n),dX("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(dX("x",e,t,n),dX("padding",e,t,n),dX("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(dX("x",e,t,n),dX("padding",e,t,n),dX("constantValue",e,t,n))];case"SpaceToBatchND":{const a=dX("blockShape",e,t,n),i=dX("paddings",e,t,n);return[r.spaceToBatchND(dX("x",e,t,n),a,i)]}case"BatchToSpaceND":{const a=dX("blockShape",e,t,n),i=dX("crops",e,t,n);return[r.batchToSpaceND(dX("x",e,t,n),a,i)]}case"DepthToSpace":{const a=dX("blockSize",e,t,n),i=dX("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(dX("x",e,t,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(dX("x",e,t,n),dX("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(dX("s0",e,t,n),dX("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const a=r.getHashTableHandleByName(e.name);if(null!=a)return[a];{const a=dX("keyDType",e,t,n),i=dX("valueDType",e,t,n),o=new uY(a,i);return r.addHashTable(e.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const a=dX("tableHandle",e,t,n,r),i=dX("keys",e,t,n),o=dX("values",e,t,n),s=r.getHashTableById(a.id);return[await s.import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=dX("tableHandle",e,t,n,r),i=dX("keys",e,t,n),o=dX("defaultValue",e,t,n),s=r.getHashTableById(a.id);return[await s.find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=dX("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}})(e,t,n,r);case"custom":const i=hX(e.op);if(i&&i.customExecutor)return i.customExecutor(new eY(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(e,t,n);return VI(i)?i.then(e=>[].concat(e)):[].concat(i)}class dY{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0;this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function pY(e,t,n,r){const a=new Set,i=[];let o=null,s=null;const l=new Set,c=new Set(Object.keys(e).map(e=>yX(e)[0]));r=r||[];const u=new Set(r.map(e=>yX(e.name)[0])),h=[...t];for(;h.length>0;){const e=h.pop();(bY(e)||xY(e)||wY(e))&&null==o&&(o=e,s=o.children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),null==n[e.name]&&(c.has(e.name)||u.has(e.name)||(0!==e.inputs.length?e.inputs.forEach(e=>{l.has(e.name)||(l.add(e.name),h.push(e))}):i.push(e.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function fY(e,t){const{usedNodes:n,inputs:r}=t,a=Object.keys(r).map(e=>yX(e)[0]).map(t=>e.nodes[t]),i=e.initNodes||[],o=e=>n.has("string"===typeof e?e:e.name);function s(e){return[...new Map(e.map(e=>[e.name,e])).values()]}const l=s([...a,...e.weights,...i]).filter(o),c=s([...l,...Object.values(e.nodes)]).filter(o),u=new Map(c.map(e=>[e.name,e])),h={};for(const m of c){h[m.name]=h[m.name]||0;for(const e of m.children)o(e)||(h[e.name]=Number.POSITIVE_INFINITY),h[e.name]=(h[e.name]||0)+1}const d=Object.entries(h).filter(e=>{let[,t]=e;return 0===t}).map(e=>{let[t]=e;return t}),p=[...d];for(;d.length>0;){const e=d.pop(),t=u.get(e);for(const n of t.children.filter(o))0===--h[n.name]&&(p.push(n.name),d.push(n.name))}const f=function(e,t){const n=new Map(e.map(e=>[e.name,e])),r=t.map(e=>e.name),a=new Set(r);for(;r.length>0;){const e=r.pop(),t=n.get(e);for(const i of t.children)n.has(i.name)&&!a.has(i.name)&&(a.add(i.name),r.push(i.name))}const i=e.filter(e=>a.has(e.name));return i}(p.map(e=>u.get(e)),l);return function(e,t){const n=new Map(e.map((e,t)=>[e.name,t])),r=new Set(t.map(e=>e.name)),a=e=>r.has("string"===typeof e?e:e.name),i=new Set(e.map(e=>e.name)),o=e=>i.has("string"===typeof e?e:e.name);for(const s of e){for(const e of s.children.filter(o)){if(!n.has(e.name))throw new mY("Child ".concat(e.name," of node ").concat(s.name," is unreachable."));if(n.get(s.name)>n.get(e.name))throw new mY("Node ".concat(s.name," is scheduled to run after its child ").concat(e.name,"."))}if(!a(s))for(const e of s.inputs){if(!n.has(e.name))throw new mY("Input ".concat(e.name," of node ").concat(s.name," is unreachable."));if(n.get(e.name)>n.get(s.name))throw new mY("Node ".concat(s.name," is scheduled to run before its input ").concat(e.name,"."))}}}(f,l),f}class mY extends Error{constructor(e){super("NodesExecutionOrderError: ".concat(e))}}const gY=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),yY=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),vY=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function bY(e){return gY.has(e.op)}function xY(e){return yY.has(e.op)}function wY(e){return vY.has(e.op)}class kY{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new kY(e.functions[t],this)})}getCompilationKey(e,t){const n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const n=pY(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:i}=n;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){const n=t.map(e=>e.name),a=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(n,"] from the provided inputs ")+"[".concat(a,"]. Missing the following inputs: [").concat(r,"]"))}const o=fY(this.graph,n),s=function(e){const t=new Map(e.map((e,t)=>[e.name,t])),n=Number.MAX_SAFE_INTEGER,r=e.map((e,t)=>bY(e)?n:t),a=e=>{const n=r[t.get(e.name)];return null==n?-1:n},i=e.map((e,t)=>e.children.map(a).reduce((e,t)=>Math.max(e,t),r[t])),o=new Map;for(let s=0;s<e.length;++s){const t=i[s];if(t===n)continue;const r=e[s],a=e[t];o.has(a.name)||o.set(a.name,[]),o.get(a.name).push(r)}return o}(o);return{orderedNodes:o,nodeLiveUntilMap:s}}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return W_(t),t}cloneTensorList(e){if(!e)return null;const t=e.map(e=>this.cloneAndKeepTensor(e));return t}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,this.cloneTensorList(n)]}))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map(e=>this.graph.nodes[yX(e)[0]]),a=t.map(e=>yX(e)[0]),i=new Set(a);let o=a.map(e=>this.graph.nodes[e]);0===o.length&&(o=this._outputs);const s=this.getCompilationKey(r,o);let l=this.compiledMap.get(s);null==l&&(l=this.compile(e,o),this.compiledMap.set(s,l));try{this.keepIntermediateTensors=qI().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const c={},u={};return B_(()=>{const n=new dY(this.weightMap,c,u,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(t=>{const[a,i]=yX(t,n),o=[];o[i]=e[t],r[a]=o,this.keepIntermediateTensors&&(this.clonedTensorsMap[a]=this.cloneTensorList(o))});const a=this.getFrozenTensorIds(r),{orderedNodes:o,nodeLiveUntilMap:s}=l;for(const e of o){if(r[e.name])continue;const t=hY(e,r,n,this._resourceManager);if(VI(t))throw new Error("The execution of the op '".concat(e.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,a,i,s.get(e.name))}return null==this.parent&&n.dispose(a),t.map(e=>pX(e,r,n))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,i,o){if(!bY(t)&&!i.has(e)){for(const r of n[e])null!=r&&(o[r.id]=(o[r.id]||0)+t.children.length);for(const e of t.inputs){if(bY(e))continue;const t=fX(e.name,n,r);if(null!=t)for(const e of t){if(!e||e.kept||a.has(e.id))continue;const t=o[e.id];1===t?(e.dispose(),delete o[e.id]):null!=t&&o[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,a,i){function o(e){return bY(e)||a.has(e.name)}if(!bY(e)&&null!=i)for(const s of i){if(o(s))continue;const e=fX(s.name,t,n);for(const t of e)!t||t.kept||r.has(t.id)||t.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=qI().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const i=new dY(this.weightMap,r,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,i,t,n),s=t.map(e=>pX(e,o,i)),l=s.map(e=>e.id),c=Object.keys(e).map(t=>e[t].id),u=new Set([...l,...c,...this.weightIds]);return Object.values(o).forEach(e=>{e.forEach(e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()})}),null==this.parent&&i.dispose(u),s}async executeFunctionAsync(e,t,n){const r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const a=Object.keys(e),i=a.map(e=>this.graph.nodes[yX(e)[0]]),o=n.map(e=>yX(e)[0]),s=new Set(o);let l=o.map(e=>this.graph.nodes[e]);0===l.length&&(l=this._outputs);const{usedNodes:c,missingInputs:u,dynamicNode:h,syncInputs:d}=pY(e,l,this.weightMap,this._initNodes),p=[...i,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),f=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{const[n,r]=yX(t),a=[];a[r]=e[t],f[n]=a});const m={},g=this.getFrozenTensorIds(f),y={};for(;p.length>0;){const e=this.processStack(i,p,t,f,y,g,s,m,c);await Promise.all(e)}null!=h||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=l.filter(e=>!bY(e)&&!pX(e.name,f,t)).map(e=>e.name);if(v.length>0){let e="";throw null!=h&&(e="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(d,"]")),new Error("Cannot compute the outputs [".concat(v,"] from the provided ")+"inputs [".concat(a,"]. Consider providing the following inputs: ")+"[".concat(u,"]. ").concat(e))}return f}processStack(e,t,n,r,a,i,o,s,l){const c=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&dX("isConstant",e.node,r,n)&&([u]=mX(e.node.name,n)),null==r[e.node.name]){const h=hY(e.node,r,n,this._resourceManager);u||([u]=mX(e.node.name,n));const d=n.currentContext;VI(h)?c.push(h.then(c=>(r[u]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(c)),n.currentContext=d,this.checkTensorForDisposal(u,e.node,r,n,i,o,s),this.processChildNodes(e.node,t,n,r,a,l),c))):(r[u]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(h)),this.checkTensorForDisposal(u,e.node,r,n,i,o,s),this.processChildNodes(e.node,t,n,r,a,l))}else this.processChildNodes(e.node,t,n,r,a,l)}return c}processChildNodes(e,t,n,r,a,i){e.children.forEach(e=>{const[o]=mX(e.name,n);!a[o]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!pX(e,r,n))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!pX(e,r,n))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const n=e[t],[r]=yX(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){const e=a.attrParams.shape.value;pI(e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t),()=>"The shape of dict['".concat(a.name,"'] provided in ")+"model.execute(dict) must be [".concat(e,"], but was ")+"[".concat(n.shape,"]"))}a.attrParams.dtype&&a.attrParams.dtype.value&&pI(n.dtype===a.attrParams.dtype.value,()=>"The dtype of dict['".concat(a.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(a.attrParams.dtype.value,", but was ").concat(n.dtype))})}mapInputs(e){var t,n;const r={};for(const a in e){const i=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[a];null!=i?r[i.name]=e[a]:r[a]=e[a]}return r}checkInputs(e){const t=Object.keys(e).filter(e=>{const[t]=yX(e);return null==this.graph.nodes[t]});if(t.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(t,"] that are not part of graph"))}mapOutputs(e){return e.map(e=>{var t,n;const r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e},{})}checkOutputs(e){e.forEach(e=>{const[t]=yX(e);if(!this.graph.nodes[t])throw new Error("The output '".concat(e,"' is not found in the graph"))})}}class SY{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const NY="?tfjs-format=file",TY="model.json";class IY{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new SY}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return VI(e)?e.then(e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const t=await $_(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer),this.executor=new kY(jX.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=jX.Instance.transformGraph(e.modelInitializer);this.initializer=new kY(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"===typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new Error("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t={};return(e instanceof $O?[e]:e).forEach((e,n)=>t[this.structuredOutputKeys[n]]=e),t}return e}predict(e,t){const n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){const n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof $O)&&!Array.isArray(e)){const n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(const t in n){const r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];const n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-n," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));let r=0;return this.inputNodes.reduce((t,n)=>{var a,i,o;const s=null===(o=null===(i=null===(a=this.signature)||void 0===a?void 0:a.inputs)||void 0===i?void 0:i[n])||void 0===o?void 0:o.resourceId;return t[n]=null!=s?this.resourceIdToCapturedInput[s]:e[r++],t},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){const a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&U_(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function EY(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==n&&(n={}),n.fromTFHub&&"string"===typeof e&&(e=function(e){e.endsWith("/")||(e+="/");return"".concat(e).concat(TY).concat(NY)}(e));const a=new IY(e,n,r);return await a.load(),a}function CY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(MY(e)){const a=Array.isArray(e)?[]:{};r.add(e);for(const i in e){const o=CY(e[i],t,n,r);a[i]=o}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function AY(e){return OY(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:_Y)}function OY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(MY(r)){const a=Array.isArray(r)?[]:{};n.add(r);for(const i in r){const r=OY(e.map(e=>e[i]),t,n);a[i]=r}return n.delete(r),a}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function _Y(e){return null===e?null:MY(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function MY(e){let t=!1;if(qI().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(551);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof $O)&&!(e instanceof Promise)&&!t)}function RY(e){return function(e,t){return CY(e,t)}(e,DY)}function DY(e){return e instanceof $O?{value:e.clone(),recurse:!1}:MY(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class FY{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class PY extends FY{constructor(){super(PY.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function LY(e){return new UY(e)}function zY(e,t){return new JY(e,t)}PY.INITIAL_CAPACITY=32;class jY{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new XY(this,e)}filter(e){return new KY(this,e)}map(e){return new qY(this,e)}mapAsync(e){return new YY(this,e)}serialMapAsync(e){return new YY(this,e).serial()}flatmap(e){return new QY(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e){return new HY(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_Y;return this.rowMajorBatch(e,t).map(e=>AY(e,n))}concatenate(e,t){return new JY(new BY([this,e]),t)}take(e){return e<0||null==e?this:new GY(this,e)}skip(e){return e<0||null==e?this:new VY(this,e)}prefetch(e){return new eZ(this,e)}shuffle(e,t){return new tZ(this,e,t)}serial(){return new WY(this)}}class BY extends jY{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:RY(e),done:!1}}}class UY extends jY{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message="Error thrown while iterating through a dataset: ".concat(e.message),e}}}class WY extends jY{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class VY extends jY{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;U_(e.value)}return this.upstream.next()}}class GY extends jY{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class HY extends jY{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class KY extends jY{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;U_(e.value)}}}class qY extends jY{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=f_(e.value),n=this.transform(e.value),r=f_(n);for(const a of t)p_(a,r)||a.dispose();return{value:n,done:!1}}}class XY extends jY{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class YY extends jY{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=f_(e.value),n=await this.transform(e.value),r=f_(n);for(const a of t)p_(a,r)||a.dispose();return{value:n,done:!1}}}class ZY extends jY{constructor(){super(),this.outputQueue=new PY,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class QY extends ZY{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=f_(e.value),n=this.transform(e.value),r=f_(n);this.outputQueue.pushAll(n);for(const a of t)p_(a,r)||a.dispose();return!0}}class JY extends jY{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var $Y;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}($Y||($Y={}));class eZ extends jY{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new FY(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class tZ extends eZ{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=uL.alea(n||PO().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class nZ{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return pI(e>0,()=>"batchSize needs to be positive, but it is\n      ".concat(e)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),rZ(async()=>(await n.iterator()).columnMajorBatch(e,t,aZ),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,rZ(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,rZ(async()=>(await t.iterator()).filter(t=>B_(()=>e(t))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return rZ(async()=>(await t.iterator()).map(t=>B_(()=>e(t))),this.size)}mapAsync(e){const t=this;return rZ(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return rZ(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,rZ(async()=>zY(LY(async()=>({value:await t.iterator(),done:!1})).take(e)),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,rZ(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));const r=this,a=uL.alea(t||PO().toString());return rZ(async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,rZ(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function rZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends nZ{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function aZ(e){if(null===e)return null;const t=e[0];if(null==(n=t)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(n)||Array.isArray(n)||"object"===typeof n&&n instanceof $O||jO(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof $O?YL(e):F_(e)}(e),recurse:!1}}var n;return{value:null,recurse:!0}}nZ.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function iZ(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&pI("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors in the CPU backend."))})}const oZ=mz;class sZ extends sI{nextDataId(){return sZ.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new oI(this,z_())}write(e,t,n){this.firstUse&&(this.firstUse=!1,qI().get("IS_NODE")&&cO("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&AI(n[0])){const a=n.map(e=>LO(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return fB(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>zO(e));return XM(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return XM(e.shape,e.dtype,t)}makeOutput(e,t,n){return z_().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=PO();e();return{kernelMs:PO()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){iZ([e],"where");const t=this.readSync(e.dataId);return oZ(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}sZ.nextDataId=0;function lZ(e){return(t,n,r)=>{const a=II(n,t.length);for(let i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function cZ(e,t,n){return uZ(e,lZ(t),n)}function uZ(e,t,n){return r=>{let{inputs:a,attrs:i,backend:o}=r;const{x:s}=a;iZ(s,e);const l=o,c=l.data.get(s.dataId).values;let u;if("string"===s.dtype){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=XB(c)}else u=c;const h=n||s.dtype,d=t(u,h,i);return l.makeTensorInfo(s.shape,h,d)}}G_("cpu",()=>new sZ,1);const hZ=cZ(ZE,e=>e>=0?e:Math.exp(e)-1),dZ={kernelName:ZE,backendName:"cpu",kernelFunc:hZ};function pZ(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const fZ={kernelName:pC,backendName:"cpu",kernelFunc:pZ};function mZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r;iZ([a],"leakyRelu");const o=gI(a.shape),s=n.data.get(a.dataId).values,l=TI("float32",o);for(let c=0;c<s.length;c++)l[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",l)}const gZ={kernelName:bC,backendName:"cpu",kernelFunc:mZ};function yZ(e){return(t,n,r,a,i)=>{const o=kR(t,n),s=o.length,l=DI(o),c=TI(i,gI(o)),u=t.length,h=n.length,d=DI(t),p=DI(n),f=xR(t,o),m=xR(n,o);if(f.length+m.length===0)for(let g=0;g<c.length;++g)c[g]=e(r[g%r.length],a[g%a.length]);else for(let g=0;g<c.length;++g){const t=WI(g,s,l),n=t.slice(-u);f.forEach(e=>n[e]=0);const i=UI(n,u,d),o=t.slice(-h);m.forEach(e=>o[e]=0);const y=UI(o,h,p);c[g]=e(r[i],a[y])}return[c,o]}}const vZ=yZ((e,t)=>e<0?t*e:e);function bZ(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t;iZ([r,a],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[s,l]=vZ(r.shape,a.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",s)}const xZ={kernelName:eA,backendName:"cpu",kernelFunc:bZ},wZ=cZ(lA,e=>Math.max(0,e)),kZ={kernelName:lA,backendName:"cpu",kernelFunc:wZ},SZ=cZ(fA,e=>Math.min(Math.max(0,e),6)),NZ={kernelName:fA,backendName:"cpu",kernelFunc:SZ},TZ=lZ(e=>1/(1+Math.exp(-e))),IZ=cZ(EA,e=>1/(1+Math.exp(-e))),EZ={kernelName:EA,backendName:"cpu",kernelFunc:IZ};function CZ(e,t,n,r,a){if("linear"===n)return pZ({inputs:{x:t},backend:e});if("relu"===n)return wZ({inputs:{x:t},backend:e});if("elu"===n)return hZ({inputs:{x:t},backend:e});if("relu6"===n)return SZ({inputs:{x:t},backend:e});if("prelu"===n)return bZ({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return mZ({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return IZ({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function AZ(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}const OZ={kernelName:NE,backendName:"cpu",kernelFunc:AZ};function _Z(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return AZ({inputs:{real:_Z(e,t,"float32"),imag:_Z(e,t,"float32")},backend:e})}const r=zI(gI(t),n);return e.makeTensorInfo(t,n,r)}function MZ(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const RZ={kernelName:oA,backendName:"cpu",kernelFunc:MZ};function DZ(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=FO([0],n),[a,i]=yZ((e,t)=>e!==t?1:0)(t,[],e,r,"bool");return[i,"bool",a]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function FZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:i}=r;if("complex64"===i){if("complex64"===a.dtype)return pZ({inputs:{x:a},backend:n});const e=_Z(n,a.shape,a.dtype),t=FZ({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=AZ({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){const e=MZ({inputs:{input:a},backend:n}),t=FZ({inputs:{x:e},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(e),t}if(!EI(a.dtype,i)){const e=pZ({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:i}}const o=n.data.get(a.dataId).values,[s,l,c]=DZ(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,c)}const PZ={kernelName:wE,backendName:"cpu",kernelFunc:FZ};function LZ(e,t,n,r){return null==n?n=>{let{inputs:a,backend:i}=n;const{a:o,b:s}=a,l=i;iZ([o,s],e);const c=l.data.get(o.dataId).values,u=l.data.get(s.dataId).values,h="string"===o.dtype?XB(c):c,d="string"===o.dtype?XB(u):u,p=r||o.dtype,[f,m]=t(o.shape,s.shape,h,d,p);return l.makeTensorInfo(m,p,f)}:e=>{let{inputs:a,backend:i}=e;const{a:o,b:s}=a,l=i;if("complex64"===o.dtype||"complex64"===s.dtype){const e=FZ({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,a=t.complexTensorInfos.imag,i=l.data.get(r.dataId).values,c=l.data.get(a.dataId).values,u=FZ({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(u.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,f=l.data.get(d.dataId).values,m=l.data.get(p.dataId).values,[g,y,v]=n(o.shape,s.shape,i,c,f,m),b=l.makeTensorInfo(v,"float32",g),x=l.makeTensorInfo(v,"float32",y),w=AZ({inputs:{real:b,imag:x},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(b),l.disposeIntermediateTensorInfo(x),w}{const e=l.data.get(o.dataId).values,n=l.data.get(s.dataId).values,a=r||o.dtype,[i,c]=t(o.shape,s.shape,e,n,a);return l.makeTensorInfo(c,a,i)}}}function zZ(e){return(t,n,r,a,i,o)=>{const s=kR(t,n),l=gI(s),c=s.length,u=DI(s),h=TI("float32",l),d=TI("float32",l),p=xR(t,s),f=xR(n,s),m=fB(r,a),g=fB(i,o),y=t.length,v=DI(t),b=n.length,x=DI(n);if(p.length+f.length===0)for(let w=0;w<h.length;w++){const t=w%m.length,n=w%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);h[w]=r.real,d[w]=r.imag}else for(let w=0;w<h.length;w++){const t=WI(w,c,u),n=t.slice(-y);p.forEach(e=>n[e]=0);const r=UI(n,y,v),a=t.slice(-b);f.forEach(e=>a[e]=0);const i=UI(a,b,x),o=e(m[2*r],m[2*r+1],g[2*i],g[2*i+1]);h[w]=o.real,d[w]=o.imag}return[h,d,s]}}const jZ=yZ((e,t)=>e+t),BZ=zZ((e,t,n,r)=>({real:e+n,imag:t+r})),UZ=LZ(tE,jZ,BZ),WZ={kernelName:tE,backendName:"cpu",kernelFunc:UZ};function VZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,o=gI(a.shape),s=kI(i,o),l=gI(s);pI(o===l,()=>"The new shape (".concat(s,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."),n.incRef(a.dataId);const c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){const e=c.complexTensorInfos.real,t=c.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}const GZ={kernelName:cA,backendName:"cpu",kernelFunc:VZ};function HZ(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:i}=t,{transposeA:o,transposeB:s}=r;iZ([a,i],"matMul");const l=a.shape.length,c=i.shape.length,u=o?a.shape[l-2]:a.shape[l-1],h=s?i.shape[c-1]:i.shape[c-2],d=o?a.shape[l-1]:a.shape[l-2],p=s?i.shape[c-2]:i.shape[c-1],f=a.shape.slice(0,-2),m=i.shape.slice(0,-2),g=gI(f),y=gI(m),v=kR(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,p]);pI(u===h,()=>"Error in matMul: inner shapes (".concat(u,") and (")+"".concat(h,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match."));const b=s?[y,p,h]:[y,h,p],x=VZ({inputs:{x:a},backend:n,attrs:{shape:o?[g,u,d]:[g,d,u]}}),w=VZ({inputs:{x:i},backend:n,attrs:{shape:b}}),k=o?x.shape[1]:x.shape[2],S=o?x.shape[2]:x.shape[1],N=s?w.shape[1]:w.shape[2],T=Math.max(g,y),I=n.data.get(x.dataId).values,E=n.data.get(w.dataId).values,C=DI(x.shape),A=DI(w.shape),[O,_,M]=o?[C[0],1,C[1]]:[C[0],C[1],1],[R,D,F]=s?[1,A[1],A[0]]:[A[1],1,A[0]],P=S*N,L=XM([T,S,N],x.dtype),z=L.values,j=n.blockSize;for(let B=0;B<T;B++){const e=B%g,t=B%y;for(let n=0;n<S;n+=j){const r=Math.min(n+j,S);for(let a=0;a<N;a+=j){const i=Math.min(a+j,N);for(let o=0;o<k;o+=j){const s=Math.min(o+j,k);for(let l=n;l<r;l++)for(let n=a;n<i;n++){let r=0;for(let a=o;a<s;a++){r+=I[e*O+l*_+a*M]*E[a*R+n*D+t*F]}z[B*P+(l*N+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,L.dtype,L.values)}const KZ={kernelName:gE,backendName:"cpu",kernelFunc:HZ};const qZ={kernelName:oO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:i,bias:o,preluActivationWeights:s}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;let d,p,f;const m=[];d=HZ({inputs:{a:a,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(p=UZ({inputs:{a:d,b:o},backend:n}),m.push(d),d=p),u&&(f=CZ(n,d,u,s,h),m.push(d),d=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return d}};function XZ(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const YZ={kernelName:JI,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;iZ(t,"abs");let r=new Float32Array(gI(t.shape));return r=XZ(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},ZZ=cZ($I,e=>Math.acos(e)),QZ={kernelName:$I,backendName:"cpu",kernelFunc:ZZ},JZ=cZ(eE,e=>Math.acosh(e)),$Z={kernelName:eE,backendName:"cpu",kernelFunc:JZ};const eQ={kernelName:nE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;iZ(t,"addN");const a=r.map(e=>n.data.get(e.dataId).values),i=XM(r[0].shape,r[0].dtype),o=i.values;for(let s=0;s<r.length;s++){const e=a[s];for(let t=0;t<o.length;t++)o[t]+=e[t]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function tQ(e,t,n,r,a){const i=t.length,o=gI(t),s=DI(t),l=DI(a),c=TI(n,gI(a));for(let u=0;u<o;++u){const t=WI(u,i,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];c[UI(n,i,l)]=e[u]}return c}function nQ(e){const{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:i}=n;iZ(a,"transpose");const o=a.shape.length,s=new Array(o);for(let c=0;c<s.length;c++)s[c]=a.shape[i[c]];const l=tQ(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(l,s,a.dtype),shape:s,dtype:a.dtype}}const rQ={kernelName:JA,backendName:"cpu",kernelFunc:nQ};const aQ={kernelName:rE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;iZ(a,"all");const s=SI(i,a.shape);let l=s;const c=qF(l,a.shape.length);let u=a;null!=c&&(u=nQ({inputs:{x:a},backend:n,attrs:{perm:c}}),l=YF(l.length,a.shape.length)),KF("all",l,u.shape.length);const[h,d]=GF(u.shape,l),p=gI(d),f=zI(gI(h),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t&&r}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(h,u.dtype,f);if(o){const e=VZ({inputs:{x:g},backend:n,attrs:{shape:HF(h,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const iQ={kernelName:aE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;iZ(a,"any");const s=SI(i,a.shape);let l=s;const c=qF(l,a.shape.length);let u=a;null!=c&&(u=nQ({inputs:{x:a},backend:n,attrs:{perm:c}}),l=YF(l.length,a.shape.length)),KF("any",l,u.shape.length);const[h,d]=GF(u.shape,l),p=gI(d),f=zI(gI(h),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t||r}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(h,u.dtype,f);if(o){const e=VZ({inputs:{x:g},backend:n,attrs:{shape:HF(h,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const oQ={kernelName:iE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;iZ(a,"argMax");let o=SI(i,a.shape);const s=qF(o,a.shape.length);let l=a;const c=[];null!=s&&(l=nQ({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(l),o=YF(o.length,l.shape.length)),o=[o[0]],KF("argMax",o,l.shape.length);const[u,h]=GF(l.shape,o),d=zI(gI(u),"int32"),p=gI(h),f=n.data.get(l.dataId).values;for(let m=0;m<d.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const a=f[e+r];a>t&&(t=a,n=r)}d[m]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",d)}};const sQ={kernelName:oE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;iZ(a,"argMin");let o=SI(i,a.shape);const s=qF(o,a.shape.length);let l=a;const c=[];null!=s&&(l=nQ({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(l),o=YF(o.length,l.shape.length)),o=[o[0]],KF("argMin",o,l.shape.length);const[u,h]=GF(l.shape,o),d=zI(gI(u),"int32"),p=gI(h),f=n.data.get(l.dataId).values;for(let m=0;m<d.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const a=f[e+r];a<t&&(t=a,n=r)}d[m]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",d)}},lQ=cZ(sE,e=>Math.asin(e)),cQ={kernelName:sE,backendName:"cpu",kernelFunc:lQ},uQ=cZ(lE,e=>Math.asinh(e)),hQ={kernelName:lE,backendName:"cpu",kernelFunc:uQ},dQ=cZ(cE,e=>Math.atan(e)),pQ={kernelName:cE,backendName:"cpu",kernelFunc:dQ},fQ=yZ((e,t)=>Math.atan2(e,t)),mQ=LZ(hE,fQ),gQ={kernelName:hE,backendName:"cpu",kernelFunc:mQ},yQ=cZ(uE,e=>Math.atanh(e)),vQ={kernelName:uE,backendName:"cpu",kernelFunc:yQ};function bQ(e,t,n,r,a,i){const o=a.strideHeight,s=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,u=a.effectiveFilterHeight,h=a.effectiveFilterWidth,d=a.padInfo.top,p=a.padInfo.left,f="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=XM(a.outShape,n),g=m.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],v=a.outShape[2]*a.outShape[3],b=a.outShape[3];for(let x=0;x<a.batchSize;++x){const t=x*y,n=x*r[0];for(let m=0;m<a.inChannels;++m)for(let y=0;y<a.outHeight;++y){const x=y*o-d,w=Math.max(0,x),k=Math.min(a.inHeight,u+x),S=t+y*v;for(let t=0;t<a.outWidth;++t){const o=t*s-p,u=Math.max(0,o),d=Math.min(a.inWidth,h+o);let y=f,v=0,x=0;for(let t=w;t<k;t+=l){const a=n+t*r[1];for(let t=u;t<d;t+=c){const n=e[a+t*r[2]+m];"max"===i&&n>y?y=n:"avg"===i&&(v+=n,x++)}if(isNaN(y))break}g[S+t*b+m]="avg"===i?v/x:y}}}return m}function xQ(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=XM(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=XM(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*s-p;let y=n;for(;y<0;)y+=c;const v=Math.min(r.inHeight,h+n);for(let s=0;s<r.outWidth;++s){const h=s*l-f;let p=h;for(;p<0;)p+=u;const b=Math.min(r.inWidth,d+h);let x=Number.NEGATIVE_INFINITY,w=-1;for(let t=y;t<v;t+=c){const o=t-n;for(let n=p;n<b;n+=u){const s=n-h,l=m.get(g,t,n,e);l>x&&(x=l,w=a?i?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:o*d+s)}}o.set(w,g,t,s,e)}}return o}function wQ(e,t,n,r,a,i){const o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,u=a.dilationHeight,h=a.dilationWidth,d=a.effectiveFilterDepth,p=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,y=a.padInfo.left,v="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=XM(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],N=a.outShape[4];for(let T=0;T<a.batchSize;++T){const t=T*w,n=T*r[0];for(let b=0;b<a.inChannels;++b)for(let w=0;w<a.outDepth;++w){const T=w*o-m;let I=T;for(;I<0;)I+=c;const E=Math.min(a.inDepth,d+T),C=t+w*k;for(let t=0;t<a.outHeight;++t){const o=t*s-g;let d=o;for(;d<0;)d+=u;const m=Math.min(a.inHeight,p+o),w=C+t*S;for(let t=0;t<a.outWidth;++t){const o=t*l-y;let s=o;for(;s<0;)s+=h;const p=Math.min(a.inWidth,f+o),g=w+t*N;let k=v,S=0,T=0;for(let t=I;t<E;t+=c){const a=n+t*r[1];for(let t=d;t<m;t+=u){const n=a+t*r[2];for(let t=s;t<p;t+=h){const a=e[n+t*r[3]+b];if("max"===i&&a>k?k=a:"avg"===i&&(S+=a,T++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}x[g+b]="avg"===i?S/Math.max(T,1):k}}}}return b}const kQ={kernelName:dE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;iZ(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r;pI(GD(o,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'"));const c=DD(a.shape,i,o,1,s,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&yI(c.inShape,c.outShape))u=pZ({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=DI(a.shape),r=bQ(e,a.shape,a.dtype,t,c,"avg");u=n.makeTensorInfo(c.outShape,a.dtype,r.values)}return u}};const SQ={kernelName:fE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:c}=r;iZ(a,"avgPool3d");const u=FD(a.shape,i,o,1,s,l,c),h=wQ(n.data.get(a.dataId).values,a.shape,a.dtype,DI(a.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};const NQ={kernelName:mE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:o,strides:s,pad:l,dimRoundingMode:c}=r;iZ([a,i],"avgPool3DGrad");const u=FD(i.shape,o,s,1,l,c),h=u.strideDepth,d=u.strideHeight,p=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,y=u.dilationDepth,v=u.dilationHeight,b=u.dilationWidth,x=u.effectiveFilterDepth,w=u.effectiveFilterHeight,k=u.effectiveFilterWidth,S=x-1-u.padInfo.front,N=k-1-u.padInfo.left,T=w-1-u.padInfo.top,I=XM(i.shape,"float32"),E=1/(f*m*g),C=n.bufferSync(a);for(let A=0;A<u.batchSize;++A)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const a=t-S,i=n-T,o=r-N;let s=0;for(let t=0;t<x;t+=y){const n=(a+t)/h;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=v){const r=(i+t)/d;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let t=0;t<k;t+=b){const a=(o+t)/p;if(a<0||a>=u.outWidth||Math.floor(a)!==a)continue;s+=C.get(A,n,r,a,e)}}}I.set(s*E,A,t,n,r,e)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}};const TQ={kernelName:pE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,o=i;iZ([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,u=DD(o.shape,s,l,1,c),h=u.strideHeight,d=u.strideWidth,p=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterHeight,v=u.effectiveFilterWidth,b=v-1-u.padInfo.left,x=y-1-u.padInfo.top,w=XM(o.shape,"float32"),k=1/(p*f),S=n.data.get(a.dataId).values,N=XM(a.shape,"float32",S);for(let T=0;T<u.batchSize;++T)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){const r=t-x,a=n-b;let i=0;for(let t=0;t<y;t+=m){const n=(r+t)/h;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<v;t+=g){const r=(a+t)/d;if(r<0||r>=u.outWidth||Math.floor(r)!==r)continue;i+=N.get(T,n,r,e)}}w.set(i*k,T,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const IQ={kernelName:lC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,scale:i,offset:o,mean:s,variance:l}=t;pI(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),pI(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),pI(null==i||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),iZ([a,s,l,i,o],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=n.data.get(a.dataId).values,h=n.data.get(s.dataId).values,d=n.data.get(l.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),f=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,y=p.length,v=d.length,b=h.length;let x=0,w=0,k=0,S=0;for(let N=0;N<u.length;++N)m[N]=f[x++]+(u[N]-h[w++])*p[k++]/Math.sqrt(d[S++]+c),x>=g&&(x=0),w>=b&&(w=0),k>=y&&(k=0),S>=v&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};function EQ(e,t,n,r,a){const i=gD(r,t,n),o=gI(n),s=DI(r);if(i){const n=yD(t,s);return"string"===a?e.slice(n,n+o):e.subarray(n,n+o)}const l=XM(r,a,"string"===a?XB(e):e),c=XM(n,a);for(let u=0;u<c.size;++u){const e=c.indexToLoc(u),n=e.map((e,n)=>e+t[n]);c.set(l.get(...n),...e)}return"string"===a?YB(c.values):c.values}function CQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:o}=r;iZ(a,"slice");const[s,l]=vD(a,i,o);aD(a,s,l);const c=EQ(n.data.get(a.dataId).values,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}const AQ={kernelName:SA,backendName:"cpu",kernelFunc:CQ};const OQ={kernelName:yE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:o}=r;iZ([a],"batchToSpaceND");const s=i.reduce((e,t)=>e*t),l=eB(a.shape,i,s),c=tB(l.length,i.length),u=nB(a.shape,i,s),h=rB(o,i.length),d=aB(u,o,i.length),p=VZ({inputs:{x:a},backend:n,attrs:{shape:l}}),f=nQ({inputs:{x:p},backend:n,attrs:{perm:c}}),m=VZ({inputs:{x:f},backend:n,attrs:{shape:u}}),g=CQ({inputs:{x:m},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function _Q(e,t,n,r,a){const i=gI(r),o=zI(a,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=a||(o[n]+=i>0?t[s]:1)}return o}function MQ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=e.shape[0],i=e.shape[1],o=XM([a,n],t.dtype);for(let s=0;s<a;s++)for(let a=0;a<i;a++){const i=e.get(s,a);if(i<0)throw new Error("Input x must be non-negative!");i>=n||(r?o.set(1,s,i):t.size>0?o.set(o.get(s,i)+t.get(s,a),s,i):o.set(o.get(s,i)+1,s,i))}return o}const RQ={kernelName:vE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:o}=r,s=_Q(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}},DQ=yZ((e,t)=>e&t),FQ=LZ(bE,DQ),PQ={kernelName:bE,backendName:"cpu",kernelFunc:FQ};const LQ={kernelName:xE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=kR(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},zQ=lZ(e=>Math.ceil(e)),jQ=uZ(kE,zQ),BQ={kernelName:kE,backendName:"cpu",kernelFunc:jQ},UQ=cZ(SE,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),WQ={kernelName:SE,backendName:"cpu",kernelFunc:UQ},VQ={kernelName:TE,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(gI(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<s.length;c++){const e=s[c],t=l[c];r[c]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function GQ(e,t,n,r){const a=II(n,gI(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{const n=gI(e.shape);a.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{const i="string"===n?XB(e.vals):e.vals;let o=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[s+t]=i[o++]}r+=e.shape[1]})}return a}function HQ(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const KQ={kernelName:mC,backendName:"cpu",kernelFunc:HQ};function qQ(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=SI(a,t[0].shape)[0];Gj(t.map(e=>e.shape),i);let o=Hj(t.map(e=>e.shape),i);if(0===gI(o))return n.makeTensorInfo(o,t[0].dtype,[]);const s=t.filter(e=>gI(e.shape)>0);if(1===s.length)return pZ({inputs:{x:s[0]},backend:n});if("complex64"===s[0].dtype){const e=s.map(e=>MZ({inputs:{input:e},backend:n})),t=s.map(e=>HQ({inputs:{input:e},backend:n})),r=qQ({inputs:e,backend:n,attrs:{axis:i}}),a=qQ({inputs:t,backend:n,attrs:{axis:i}}),o=AZ({inputs:{real:r,imag:a},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),o}const l=s.map(e=>{const t=gI(e.shape.slice(i));return VZ({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),c=l.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));o=Hj(l.map(e=>e.shape),1);const u=1===l[0].shape[0],h=GQ(c,o,t[0].dtype,u),d=Hj(s.map(e=>e.shape),i),p=n.makeTensorInfo(d,t[0].dtype,h);return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}const XQ={kernelName:IE,backendName:"cpu",kernelFunc:qQ};function YQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dataFormat:l,dilations:c,dimRoundingMode:u}=r;iZ([a,i],"conv2d");const h=KD(l),d=PD(a.shape,i.shape,o,c,s,u,!1,h),p=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,v=d.padInfo.top,b="channelsLast"===d.dataFormat,x=new YO(d.outShape,a.dtype),w=DI(a.shape),k=DI(i.shape),S=w[0],N=b?w[1]:w[2],T=b?w[2]:1,I=b?1:w[1],E=x.strides[0],C=b?x.strides[1]:x.strides[2],A=b?x.strides[2]:1,O=b?1:x.strides[1],_=n.data.get(a.dataId).values,M=n.data.get(i.dataId).values,R=x.values;for(let D=0;D<d.batchSize;++D){const e=D*S,t=D*E;for(let n=0;n<d.outHeight;++n){const r=t+n*C,a=n*d.strideHeight-v;for(let t=0;t<p;++t){const n=a+t*m;if(n<0||n>=d.inHeight)continue;const i=t*k[0],o=e+n*N;for(let e=0;e<d.outWidth;++e){const t=r+e*A,n=e*d.strideWidth-y;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=d.inWidth)continue;const a=o+r*T;let s=i+e*k[1];for(let e=0;e<d.inChannels;++e){const n=_[a+e*I];for(let e=0;e<d.outChannels;++e)R[t+e*O]+=n*M[s+e];s+=d.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,R)}const ZQ={kernelName:EE,backendName:"cpu",kernelFunc:YQ};const QQ={kernelName:CE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;iZ([a,i],"conv2dBackpropFilter");const h=KD(l),d=PD(a.shape,u,o,1,s,c,!1,h),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=d,y="channelsLast"===d.dataFormat,v=new YO(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=new YO(a.shape,a.dtype,w),N=new YO(i.shape,i.dtype,k);for(let T=0;T<m;++T){const e=Math.max(0,Math.ceil((x-T)/p)),t=Math.min(d.outHeight,(d.inHeight+x-T)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((b-n)/f)),a=Math.min(d.outWidth,(d.inWidth+b-n)/f);for(let i=0;i<d.inChannels;++i)for(let o=0;o<d.outChannels;++o){let s=0;for(let l=0;l<d.batchSize;++l)for(let c=e;c<t;++c){const e=T+c*p-x;for(let t=r;t<a;++t){const r=n+t*f-b;s+=y?S.get(l,e,r,i)*N.get(l,c,t,o):S.get(l,i,e,r)*N.get(l,o,c,t)}}v.set(s,T,n,i,o)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const JQ={kernelName:AE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:o,strides:s,pad:l,dataFormat:c,dimRoundingMode:u}=r;iZ([a,i],"conv2dBackpropInput");const h=DI(i.shape),d=DI(a.shape);let p=KD(c);const f=PD(o,i.shape,s,1,l,u,!1,p),m=new YO(f.inShape,"float32"),g=m.values,y=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,[b,x,w]=h,{batchSize:k,filterHeight:S,filterWidth:N,inChannels:T,inHeight:I,inWidth:E,outChannels:C,outHeight:A,outWidth:O,strideHeight:_,strideWidth:M}=f;p=f.dataFormat;const R=S-1-f.padInfo.top,D=N-1-f.padInfo.left,F="channelsLast"===p,P=m.strides[0],L=F?m.strides[1]:m.strides[2],z=F?m.strides[2]:1,j=F?1:m.strides[1],B=d[0],U=F?d[1]:d[2],W=F?d[2]:1,V=F?1:d[1];for(let G=0;G<k;++G)for(let e=0;e<T;++e)for(let t=0;t<I;++t){const n=t-R,r=Math.max(0,Math.ceil(n/_)),a=Math.min(A,(S+n)/_);for(let i=0;i<E;++i){const o=i-D,s=Math.max(0,Math.ceil(o/M)),l=Math.min(O,(N+o)/M);let c=0;for(let t=r;t<a;++t){const r=t*_-n;for(let n=s;n<l;++n){const a=B*G+U*t+W*n,i=b*(S-1-r)+x*(N-1-(n*M-o))+w*e;for(let e=0;e<C;++e){c+=y[a+V*e]*v[i+e]}}}g[P*G+L*t+z*i+j*e]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const $Q={kernelName:OE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dilations:l}=r;iZ([a,i],"conv3d");const c=LD(a.shape,i.shape,o,l,s),{filterDepth:u,filterHeight:h,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=c,y=g.front,v=g.left,b=g.top,x=new YO(c.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=x.values,N=DI(a.shape),T=DI(i.shape);for(let I=0;I<c.batchSize;++I){const e=I*N[0],t=I*x.strides[0];for(let n=0;n<c.outDepth;++n){const r=t+n*x.strides[1],a=n*c.strideDepth-y;for(let t=0;t<u;++t){const n=a+t*p;if(n<0||n>=c.inDepth)continue;const i=t*T[0],o=e+n*N[1];for(let e=0;e<c.outHeight;++e){const t=r+e*x.strides[2],n=e*c.strideHeight-b;for(let e=0;e<h;++e){const r=n+e*f;if(r<0||r>=c.inHeight)continue;const a=i+e*T[1],s=o+r*N[2];for(let e=0;e<c.outWidth;++e){const n=t+e*c.outChannels,r=e*c.strideWidth-v;for(let e=0;e<d;++e){const t=r+e*m;if(t<0||t>=c.inWidth)continue;const i=a+e*T[2],o=s+t*c.inChannels;let l=i;for(let e=0;e<c.inChannels;++e){const t=w[o+e];for(let e=0;e<c.outChannels;++e)S[n+e]+=t*k[l+e];l+=c.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const eJ={kernelName:_E,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,pad:s,filterShape:l}=r;iZ([a,i],"conv3dBackpropFilterV2");const c=DI(a.shape),u=DI(i.shape),h=LD(a.shape,l,o,1,s),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,m=h.filterDepth,g=h.filterHeight,y=h.filterWidth,v=new YO(h.filterShape,"float32"),b=v.values,[x,w,k,S]=v.strides,N=n.data.get(i.dataId).values,[T,I,E,C]=u,A=n.data.get(a.dataId).values,[O,_,M,R]=c,D=h.padInfo.front,F=h.padInfo.left,P=h.padInfo.top;for(let L=0;L<m;++L){const e=Math.max(0,Math.ceil((D-L)/d)),t=Math.min(h.outDepth,(h.inDepth+D-L)/d),n=L*x;for(let r=0;r<g;++r){const a=Math.max(0,Math.ceil((P-r)/p)),i=Math.min(h.outHeight,(h.inHeight+P-r)/p),o=r*w+n;for(let n=0;n<y;++n){const s=Math.max(0,Math.ceil((F-n)/f)),l=Math.min(h.outWidth,(h.inWidth+F-n)/f),c=n*k+o;for(let o=0;o<h.inChannels;++o){const u=o*S+c;for(let c=0;c<h.outChannels;++c){let m=0;for(let u=0;u<h.batchSize;++u){const h=u*O,g=u*T;for(let u=e;u<t;++u){const e=(L+u*d-D)*_+h,t=u*I+g;for(let u=a;u<i;++u){const a=(r+u*p-P)*M+e,i=u*E+t;for(let e=s;e<l;++e){const t=e*C+i;m+=A[(n+e*f-F)*R+a+o]*N[t+c]}}}}b[u+c]=m}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const tJ={kernelName:ME,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:o,strides:s,inputShape:l}=r;iZ([a],"conv3dBackpropInputV2");const c=DI(a.shape),u=DI(i.shape),h=LD(l,i.shape,s,1,o),d=new YO(h.inShape,"float32"),p=d.values,[f,m,g,y]=d.strides,v=n.data.get(a.dataId).values,[b,x,w,k]=c,S=n.data.get(i.dataId).values,[N,T,I,E]=u,{batchSize:C,filterDepth:A,filterHeight:O,filterWidth:_,inChannels:M,inDepth:R,inHeight:D,inWidth:F,outChannels:P,outDepth:L,outHeight:z,outWidth:j,strideDepth:B,strideHeight:U,strideWidth:W}=h,V=A-1-h.padInfo.front,G=O-1-h.padInfo.top,H=_-1-h.padInfo.left;for(let K=0;K<C;++K)for(let e=0;e<M;++e)for(let t=0;t<R;++t){const n=t-V,r=Math.max(0,Math.ceil(n/B)),a=Math.min(L,(A+n)/B);for(let i=0;i<D;++i){const o=i-G,s=Math.max(0,Math.ceil(o/U)),l=Math.min(z,(O+o)/U);for(let c=0;c<F;++c){const u=c-H,h=Math.max(0,Math.ceil(u/W)),d=Math.min(j,(_+u)/W);let C=0;for(let t=r;t<a;++t){const r=t*B-n;for(let n=s;n<l;++n){const a=n*U-o;for(let i=h;i<d;++i){const o=b*K+x*t+w*n+k*i,s=N*(A-1-r)+T*(O-1-a)+I*(_-1-(i*W-u))+E*e;for(let e=0;e<P;++e){C+=v[o+e]*S[s+e]}}}}p[f*K+m*t+g*i+y*c+e]=C}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},nJ=cZ(RE,e=>Math.cos(e)),rJ={kernelName:RE,backendName:"cpu",kernelFunc:nJ},aJ=cZ(DE,e=>Math.cosh(e)),iJ={kernelName:DE,backendName:"cpu",kernelFunc:aJ};const oJ={kernelName:LE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:o}=t,{cropSize:s,method:l,extrapolationValue:c}=r,[u,h,d,p]=a.shape,f=i.shape[0],[m,g]=s,y=XM([f,m,g,p],"float32"),v=n.data.get(i.dataId).values,b=n.data.get(o.dataId).values,x=n.data.get(a.dataId).values,w=DI(a.shape),k=DI(y.shape);for(let S=0;S<f;S++){const e=4*S,t=v[e],n=v[e+1],r=v[e+2],a=v[e+3],i=b[S];if(i>=u)continue;const o=m>1?(r-t)*(h-1)/(m-1):0,s=g>1?(a-n)*(d-1)/(g-1):0;for(let u=0;u<m;u++){const e=m>1?t*(h-1)+u*o:.5*(t+r)*(h-1);if(e<0||e>h-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+S*k[0];y.values[n]=c}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),o=e-t;for(let e=0;e<g;e++){const l=g>1?n*(d-1)+e*s:.5*(n+a)*(d-1);if(l<0||l>d-1){for(let t=0;t<p;t++){const n=t+e*k[2]+u*k[1]+S*k[0];y.values[n]=c}continue}const h=Math.floor(l),f=Math.ceil(l),m=l-h;for(let n=0;n<p;n++){let a=n+h*w[2]+t*w[1]+i*w[0];const s=x[a];a=n+f*w[2]+t*w[1]+i*w[0];const l=x[a];a=n+h*w[2]+r*w[1]+i*w[0];const c=x[a];a=n+f*w[2]+r*w[1]+i*w[0];const d=s+(l-s)*m,p=c+(x[a]-c)*m;a=n+e*k[2]+u*k[1]+S*k[0],y.values[a]=d+(p-d)*o}}}else for(let t=0;t<g;++t){const r=g>1?n*(d-1)+t*s:.5*(n+a)*(d-1);if(r<0||r>d-1){for(let e=0;e<p;e++){const n=e+t*k[2]+u*k[1]+S*k[0];y.values[n]=c}continue}const o=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++){const n=e+o*w[2]+l*w[1]+i*w[0],r=e+t*k[2]+u*k[1]+S*k[0];y.values[r]=x[n]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const sJ={kernelName:FE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:o,reverse:s}=r;iZ(a,"cumprod");const l=qF([i],a.shape.length);let c=a;null!=l&&(c=nQ({inputs:{x:a},backend:n,attrs:{perm:l}}));const u=YF(1,a.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const h=l_(c.dtype,"int32"),d=LI(gI(c.shape),h),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)d[t]=o?1:p[t];else{const n=m(y,e-1);d[t]=o?p[n]*d[n]:p[t]*d[n]}}const g=n.makeTensorInfo(c.shape,h,d);if(null!=l){const e=nQ({inputs:{x:g},backend:n,attrs:{perm:XF(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const lJ={kernelName:PE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:o,reverse:s}=r;iZ(a,"cumsum");const l=qF([i],a.shape.length);let c=a;null!=l&&(c=nQ({inputs:{x:a},backend:n,attrs:{perm:l}}));const u=YF(1,a.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const h=l_(c.dtype,"int32"),d=zI(gI(c.shape),h),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)d[t]=o?0:p[t];else{const n=m(y,e-1);d[t]=o?p[n]+d[n]:p[t]+d[n]}}const g=n.makeTensorInfo(c.shape,h,d);if(null!=l){const e=nQ({inputs:{x:g},backend:n,attrs:{perm:XF(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),e}return g}};const cJ={kernelName:zE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:o,binaryOutput:s}=r;if(1===a.shape.length){const e=_Q(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,e)}if(2===a.shape.length){const e=MQ(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(e.shape,i.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};const uJ={kernelName:jE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:o}=r;pI("NHWC"===o,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o));const s=a.shape[0],l=a.shape[1],c=a.shape[2],u=a.shape[3],h=l*i,d=c*i,p=u/(i*i),f=n.data.get(a.dataId).values,m=new Float32Array(s*h*d*p);let g=0;for(let y=0;y<s;++y)for(let e=0;e<h;++e){const t=Math.floor(e/i),n=e%i;for(let e=0;e<d;++e){const r=Math.floor(e/i),a=(n*i+e%i)*p;for(let e=0;e<p;++e){const n=e+a+u*(r+c*(t+l*y));m[g++]=f[n]}}}return n.makeTensorInfo([s,h,d,p],a.dtype,m)}};function hJ(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dilations:l,dimRoundingMode:c}=r;iZ([a,i],"depthwiseConv2DNative");const u=DI(a.shape),h=DI(i.shape);let d=l;null==d&&(d=[1,1]),pI(GD(o,d),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(d,"'"));const p=PD(a.shape,i.shape,o,d,s,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=p,b=v.left,x=v.top,w=p.outChannels/p.inChannels,k=new YO(p.outShape,a.dtype),S=n.data.get(a.dataId).values,N=n.data.get(i.dataId).values,T=k.values;for(let I=0;I<p.batchSize;++I){const e=I*u[0],t=I*k.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*k.strides[1],a=n*p.strideHeight-x;for(let t=0;t<f;++t){const n=a+t*g;if(n<0||n>=p.inHeight)continue;const i=t*h[0],o=e+n*u[1];for(let e=0;e<p.outWidth;++e){const t=r+e*k.strides[2],n=e*p.strideWidth-b;for(let e=0;e<m;++e){const r=n+e*y;if(r<0||r>=p.inWidth)continue;const a=i+e*h[1],s=o+r*p.inChannels;let l=t,c=a;for(let e=0;e<p.inChannels;++e){const t=S[s+e];for(let e=0;e<w;++e)T[l+e]+=t*N[c+e];l+=w,c+=w}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const dJ={kernelName:BE,backendName:"cpu",kernelFunc:hJ};const pJ={kernelName:UE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,dilations:s,pad:l,dimRoundingMode:c,filterShape:u}=r;iZ([a,i],"depthwiseConv2dNativeBackpropFilter");const h=PD(a.shape,u,o,s,l,c,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=h,g=new YO(h.filterShape,"float32"),y=h.padInfo.left,v=h.padInfo.top,b=h.outChannels/h.inChannels,x=n.data.get(a.dataId).values,w=new YO(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,S=new YO(i.shape,i.dtype,k);for(let N=0;N<f;++N){const e=Math.max(0,Math.ceil((v-N)/d)),t=Math.min(h.outHeight,(h.inHeight+v-N)/d);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((y-n)/p)),a=Math.min(h.outWidth,(h.inWidth+y-n)/p);for(let i=0;i<h.outChannels;++i){const o=Math.trunc(i/b),s=i%b;let l=0;for(let c=0;c<h.batchSize;++c)for(let s=e;s<t;++s){const e=N+s*d-v;for(let t=r;t<a;++t){const r=n+t*p-y;l+=w.get(c,e,r,o)*S.get(c,s,t,i)}}g.set(l,N,n,o,s)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const fJ={kernelName:WE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:o,dilations:s,pad:l,dimRoundingMode:c,inputShape:u}=r;iZ([a,i],"depthwiseConv2DNativeBackpropInput");const h=DI(a.shape),d=DI(i.shape),p=PD(u,i.shape,o,s,l,c,!0),f=new YO(p.inShape,"float32"),m=f.values,[g,y,v]=f.strides,b=n.data.get(a.dataId).values,[x,w,k]=h,S=n.data.get(i.dataId).values,[N,T,I]=d,{batchSize:E,filterHeight:C,filterWidth:A,inChannels:O,inHeight:_,inWidth:M,outChannels:R,outHeight:D,outWidth:F,strideHeight:P,strideWidth:L}=p,z=C-1-p.padInfo.top,j=A-1-p.padInfo.left,B=R/O;for(let U=0;U<E;++U)for(let e=0;e<O;++e)for(let t=0;t<_;++t){const n=t-z,r=Math.max(0,Math.ceil(n/P)),a=Math.min(D,(C+n)/P);for(let i=0;i<M;++i){const o=i-j,s=Math.max(0,Math.ceil(o/L)),l=Math.min(F,(A+o)/L);let c=0;for(let t=r;t<a;++t){const r=t*P-n;for(let n=s;n<l;++n){const a=x*U+w*t+k*n,i=N*(C-1-r)+T*(A-1-(n*L-o))+I*e;for(let t=0;t<B;++t){c+=b[a+(e*B+t)]*S[i+t]}}}m[g*U+y*t+v*i+e]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const mJ={kernelName:VE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=gI(r.shape),i=n.data.get(r.dataId).values,o=XM([a,a],r.dtype),s=o.values;for(let c=0;c<i.length;c++)s[c*a+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}},gJ={kernelName:GE,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,filter:i}=t,{strides:o,pad:s,dilations:l}=r,c=n,u=c.data.get(a.dataId).values,h=a.shape.length,d=c.data.get(i.dataId).values,p=i.shape.length,{batchSize:f,inHeight:m,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:k,filterHeight:S,filterWidth:N,dilationHeight:T,dilationWidth:I,outShape:E}=RD(a.shape,i.shape,o,s,"NHWC",l),C=gI(E),A=E.length,O=II(a.dtype,C);for(let _=0;_<f;++_)for(let e=0;e<v;++e){const t=e*w-x.top;for(let n=0;n<b;++n){const r=n*k-x.left;for(let o=0;o<y;++o){let s=Number.MIN_SAFE_INTEGER;for(let e=0;e<S;++e){const n=t+e*T;if(n>=0&&n<m)for(let t=0;t<N;++t){const l=r+t*I;if(l>=0&&l<g){const r=UI([_,n,l,o],h,DI(a.shape)),c=UI([e,t,o],p,DI(i.shape)),f=u[r]+d[c];f>s&&(s=f)}}}O[UI([_,e,n,o],A,DI(E))]=s}}}return{dataId:c.write(FO(O,a.dtype),E,a.dtype),shape:E,dtype:a.dtype}}},yJ={kernelName:KE,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,filter:i,dy:o}=t,{strides:s,pad:l,dilations:c}=r,u=n,h=PI(a.shape,u.data.get(a.dataId).values),d=PI(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:S,dilationHeight:N,dilationWidth:T,outShape:I}=RD(a.shape,i.shape,s,l,"NHWC",c);pI(o.rank===I.length,()=>"Error in ".concat(KE,", dy ")+"must have the same rank as output ".concat(I.length,", but got ")+"".concat(o.rank));const E=PI(I,u.data.get(o.dataId).values),C=jI(i.shape,i.dtype);for(let A=0;A<p;++A)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let a=0;a<g;++a){let i=Number.MIN_SAFE_INTEGER,o=0,s=0;for(let e=0;e<k;++e){const n=t+e*N;if(n>=0&&n<f)for(let t=0;t<S;++t){const l=r+t*T;if(l>=0&&l<m){const r=h[A][n][l][a]+d[e][t][a];r>i&&(i=r,o=e,s=t)}}}C[o][s][a]+=E[A][e][n][a]}}}return{dataId:u.write(FO(C,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},vJ={kernelName:HE,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,filter:i,dy:o}=t,{strides:s,pad:l,dilations:c}=r,u=n,h=PI(a.shape,u.data.get(a.dataId).values),d=PI(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:S,dilationHeight:N,dilationWidth:T,outShape:I}=RD(a.shape,i.shape,s,l,"NHWC",c);pI(o.rank===I.length,()=>"Error in ".concat(HE,", dy ")+"must have the same rank as output ".concat(I.length,", but got ")+"".concat(o.rank));const E=PI(I,u.data.get(o.dataId).values),C=jI(a.shape,a.dtype);for(let A=0;A<p;++A)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let a=0;a<g;++a){let i=Number.MIN_SAFE_INTEGER,o=t<0?0:t,s=r<0?0:r;for(let e=0;e<k;++e){const n=t+e*N;if(n>=0&&n<f)for(let t=0;t<S;++t){const l=r+t*T;if(l>=0&&l<m){const r=h[A][n][l][a]+d[e][t][a];r>i&&(i=r,o=n,s=l)}}}C[A][o][s][a]+=E[A][e][n][a]}}}return{dataId:u.write(FO(C,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};const bJ={kernelName:qE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{canvas:i,options:o}=r,{contextOptions:s,imageOptions:l}=o||{},c=(null===l||void 0===l?void 0:l.alpha)||1,u=(null===s||void 0===s?void 0:s.contextType)||"2d";if("2d"!==u)throw new Error("Context type ".concat(s.contextType," is not supported by the CPU backend."));const h=i.getContext(u,(null===s||void 0===s?void 0:s.contextAttributes)||{});if(null==h)throw new Error("Could not get the context with ".concat(u," type."));const[d,p]=a.shape.slice(0,2),f=2===a.shape.length?1:a.shape[2],m=n.data.get(a.dataId).values,g="float32"===a.dtype?255:1,y=new Uint8ClampedArray(p*d*4);for(let b=0;b<d*p;++b){const e=[0,0,0,255*c];for(let n=0;n<f;n++){const t=m[b*f+n];if("float32"===a.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===a.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===f?(e[0]=t*g,e[1]=t*g,e[2]=t*g):e[n]=t*g}const t=4*b;y[t+0]=Math.round(e[0]),y[t+1]=Math.round(e[1]),y[t+2]=Math.round(e[2]),y[t+3]=Math.round(e[3])}i.width=p,i.height=d;const v=new ImageData(y,p,d);return h.putImageData(v,0,0),a}},xJ=yZ((e,t)=>e*t),wJ=zZ((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),kJ=LZ(VC,xJ,wJ),SJ={kernelName:VC,backendName:"cpu",kernelFunc:kJ};function NJ(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;let s;iZ(a,"sum"),s="bool"===a.dtype?FZ({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):pZ({inputs:{x:a},backend:n});const l=s.shape.length,c=SI(i,s.shape),u=qF(c,l);let h=c,d=s;null!=u&&(d=nQ({inputs:{x:s},backend:n,attrs:{perm:u}}),h=YF(h.length,l)),KF("sum",h,d.shape.length);const[p,f]=GF(d.shape,h);let m=_Z(n,p,l_(d.dtype,"int32"));const g=gI(f),y=n.data.get(m.dataId).values,v=n.data.get(d.dataId).values;for(let b=0;b<y.length;++b){const e=b*g;let t=0;for(let n=0;n<g;++n)t+=v[e+n];y[b]=t}if(o){const e=m;m=VZ({inputs:{x:m},backend:n,attrs:{shape:HF(m.shape,c)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=u&&n.disposeIntermediateTensorInfo(d),m}const TJ={kernelName:OA,backendName:"cpu",kernelFunc:NJ};const IJ={kernelName:YE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:o,summedDims:s,idDims:l}=IB(a,i.length);CB(o.length,l,i);const{path:c,steps:u}=AB(s,l),h=u.length;let d=null,p=o.length;const f=[];for(let m=0;m<h;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:r}=EB(p,l[e]);let a;OB(t)?a=i[e]:(a=nQ({inputs:{x:i[e]},backend:n,attrs:{perm:t}}),f.push(a));const o=a.shape.slice();for(let e=0;e<r.length;++e)o.splice(r[e],0,1);yI(a.shape,o)||(a=VZ({inputs:{x:a},backend:n,attrs:{shape:o}}),f.push(a)),null===d?d=a:(d=kJ({inputs:{a:a,b:d},backend:n}),f.push(d))}m<h-1&&(c[m]>=0&&(d=NJ({inputs:{x:d},backend:n,attrs:{axis:c[m]-(o.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}};const EJ={kernelName:QE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:a}=t;iZ([r,a],"eluGrad");const i=new Float32Array(gI(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const e=o[l];i[l]=e>=0?s[l]:s[l]*(e+1)}return n.makeTensorInfo(a.shape,"float32",i)}},CJ=yZ((e,t)=>e===t?1:0),AJ=LZ($E,CJ,null,"bool"),OJ={kernelName:$E,backendName:"cpu",kernelFunc:AJ},_J=lB,MJ=cB,RJ=uB,DJ=hB,FJ=dB,PJ=pB,LJ=cZ(JE,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+_J*n);return t*(1-((((PJ*r+FJ)*r+DJ)*r+RJ)*r+MJ)*r*Math.exp(-n*n))}),zJ={kernelName:JE,backendName:"cpu",kernelFunc:LJ},jJ=lZ(e=>Math.exp(e)),BJ=uZ(eC,jJ,"float32"),UJ={kernelName:eC,backendName:"cpu",kernelFunc:BJ};function WJ(e){const{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:i}=r,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(pI(-(o+1)<=i,()=>"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")),l=o+i+1),s.splice(l,0,1),VZ({inputs:{x:a},backend:n,attrs:{shape:s}})}const VJ={kernelName:tC,backendName:"cpu",kernelFunc:WJ},GJ=lZ(e=>Math.expm1(e)),HJ=uZ(nC,GJ),KJ={kernelName:nC,backendName:"cpu",kernelFunc:HJ},qJ=yZ((e,t)=>e/t),XJ=LZ(XE,qJ),YJ={kernelName:XE,backendName:"cpu",kernelFunc:XJ},ZJ=yZ((e,t)=>e-t),QJ=zZ((e,t,n,r)=>({real:e-n,imag:t-r})),JJ=LZ(KA,ZJ,QJ),$J={kernelName:KA,backendName:"cpu",kernelFunc:JJ};function e$(e,t,n){const r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[a,i],u=gI(c),h=TI("float32",u),d=TI("float32",u);for(let g=0;g<a;g++){const e=CQ({inputs:{x:s},backend:n,attrs:{begin:[g,0],size:[1,i]}}),r=CQ({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),a=AZ({inputs:{real:e,imag:r},backend:n}),{real:o,imag:c}=t$(a,t,n),u=fB(o,c);for(let t=0;t<i;t++){const e=vB(u,t);h[g*i+t]=e.real,d[g*i+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a)}const p=n.makeTensorInfo(c,"float32",h),f=n.makeTensorInfo(c,"float32",d),m=AZ({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function t$(e,t,n){const r=gI(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((s=r)&s-1)){const a=n$(i,o,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",a.real),t=n.makeTensorInfo(s,"float32",a.imag),i=n.makeTensorInfo([],"float32",DO(r,"float32")),o=pZ({inputs:{x:i},backend:n}),l=YJ.kernelFunc({inputs:{a:e,b:i},backend:n}),c=YJ.kernelFunc({inputs:{a:t,b:o},backend:n}),u=n.data.get(l.dataId).values,h=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),{real:u,imag:h}}return a}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let a=0;a<t;a++){let i=0,o=0;for(let r=0;r<t;r++){const s=wB(a*r,t,n),l=vB(e,r);i+=l.real*s.real-l.imag*s.imag,o+=l.real*s.imag+l.imag*s.real}n&&(i/=t,o/=t),bB(r,i,o,a)}return r}(fB(i,o),r,t);return mB(e)}var s}function n$(e,t,n,r,a){if(1===n)return{real:e,imag:t};const i=fB(e,t),o=n/2,s=gB(i),l=s.real,c=s.imag,u=[l.length],h=a.makeTensorInfo(u,"float32",l),d=a.makeTensorInfo(u,"float32",c),p=AZ({inputs:{real:h,imag:d},backend:a}),f=yB(i),m=f.real,g=f.imag,y=[m.length],v=a.makeTensorInfo(y,"float32",m),b=a.makeTensorInfo(y,"float32",g),x=AZ({inputs:{real:v,imag:b},backend:a}),w=n$(l,c,o,r,a),k=w.real,S=w.imag,N=[k.length],T=a.makeTensorInfo(N,"float32",k),I=a.makeTensorInfo(N,"float32",S),E=AZ({inputs:{real:T,imag:I},backend:a}),C=n$(m,g,o,r,a),A=C.real,O=C.imag,_=[A.length],M=a.makeTensorInfo(_,"float32",A),R=a.makeTensorInfo(_,"float32",O),D=AZ({inputs:{real:M,imag:R},backend:a}),F=xB(n,r),P=[F.real.length],L=a.makeTensorInfo(P,"float32",F.real),z=a.makeTensorInfo(P,"float32",F.imag),j=AZ({inputs:{real:L,imag:z},backend:a}),B=kJ({inputs:{a:j,b:D},backend:a}),U=UZ({inputs:{a:E,b:B},backend:a}),W=JJ({inputs:{a:E,b:B},backend:a}),V=MZ({inputs:{input:U},backend:a}),G=MZ({inputs:{input:W},backend:a}),H=HQ({inputs:{input:U},backend:a}),K=HQ({inputs:{input:W},backend:a}),q=qQ({inputs:[V,G],backend:a,attrs:{axis:0}}),X=qQ({inputs:[H,K],backend:a,attrs:{axis:0}}),Y=a.data.get(q.dataId).values,Z=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:Y,imag:Z}}const r$={kernelName:rC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=gI(r.shape),i=r.shape[r.shape.length-1],o=VZ({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=e$(o,!1,n),l=VZ({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}};function a$(e){const{backend:t,attrs:n}=e,{shape:r,value:a,dtype:i}=n,o=i||_I(a),s=II(o,gI(r));return function(e,t){e.fill(t)}(s,a),t.makeTensorInfo(r,o,s)}const i$={kernelName:aC,backendName:"cpu",kernelFunc:a$};const o$={kernelName:iC,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:a}=t,i=r,o=TI(a.dtype,gI(a.shape)),[s,l,c,u]=a.shape,h=i.data.get(a.dataId).values;for(let d=0;d<s;d++){const e=d*c*l*u;for(let t=0;t<l;t++){const n=t*(c*u);for(let t=0;t<c;t++){const r=t*u;for(let a=0;a<u;a++){const i=Math.round(c-t-1),s=e+n+r+a;let l=h[s];if(i>=0&&i<c){l=h[e+n+i*u+a]}o[s]=l}}}}return{dataId:i.write(o,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},s$=lZ(e=>Math.floor(e)),l$=uZ(oC,s$),c$={kernelName:oC,backendName:"cpu",kernelFunc:l$},u$=yZ((e,t)=>Math.floor(e/t)),h$=LZ(sC,u$,null,"int32"),d$={kernelName:sC,backendName:"cpu",kernelFunc:h$};const p$={kernelName:sO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:o,preluActivationWeights:s}=t,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=YQ({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(o){const e=m;if("NCHW"===u&&1===o.shape.length&&1!==o.shape[0]){const e=VZ({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=UZ({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=UZ({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=m;if("NCHW"===u&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){const e=VZ({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=CZ(n,m,p,e,f),n.disposeIntermediateTensorInfo(e)}else m=CZ(n,m,p,s,f);n.disposeIntermediateTensorInfo(e)}return m}};const f$={kernelName:lO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:o,preluActivationWeights:s}=t,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=hJ({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(o){const e=m;m=UZ({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=CZ(n,m,p,s,f),n.disposeIntermediateTensorInfo(e)}return m}};function m$(e,t,n,r,a,i,o,s,l){const c=XM([r,i],n);for(let u=0;u<r;u++){const n=[];let r=0;for(let t=0;t<a;t++){const i=e[u*a+t];r+=i*o[t],n.push(i)}if(r<0||r>=l/i)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(s));for(let e=0;e<i;e++)c.values[u*i+e]=t.get(...t.indexToLoc(r*i+e))}return c}const g$={kernelName:uC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=gI(r.shape),o=a.shape,s=o[o.length-1],[l,c,u,h]=iB(r,a);if(0===c)return n.makeTensorInfo(l,r.dtype,[]);const d=m$(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,c,s,u,h,r.shape,i);return n.makeTensorInfo(l,r.dtype,d.values)}};function y$(e,t,n){const r=XM(n,e.dtype);for(let a=0;a<r.size;++a){const n=r.indexToLoc(a).slice(),i=n[0],o=n[2],s=t.locToIndex([i,o]);n[2]=t.values[s];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[a]=e.values[l])}return r}const v$={kernelName:cC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:o,batchDims:s}=r;iZ([a,i],"gatherV2");const l=SI(o,a.shape)[0],c=n.data.get(i.dataId).values,u=a.shape[l];for(let b=0;b<c.length;++b){const e=c[b];pI(e<=u-1&&e>=0,()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]"))}let h=s;null==s&&(h=0);const d=gI(i.shape),p=qB(a,i,l,h),f=VZ({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=VZ({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,d/p.batchSize]}}),g=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize],y=n.bufferSync(m),v=y$(n.bufferSync(f),y,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}},b$=yZ((e,t)=>e>t?1:0),x$=LZ(hC,b$,null,"bool"),w$={kernelName:hC,backendName:"cpu",kernelFunc:x$},k$=yZ((e,t)=>e>=t?1:0),S$=LZ(dC,k$,null,"bool"),N$={kernelName:dC,backendName:"cpu",kernelFunc:S$};const T$={kernelName:fC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=gI(r.shape),i=r.shape[r.shape.length-1],o=VZ({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=e$(o,!0,n),l=VZ({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}},I$=cZ(gC,e=>Number.isFinite(e)?1:0,"bool"),E$={kernelName:gC,backendName:"cpu",kernelFunc:I$},C$=cZ(yC,e=>Math.abs(e)===1/0?1:0,"bool"),A$={kernelName:yC,backendName:"cpu",kernelFunc:C$},O$=cZ(vC,e=>Number.isNaN(e)?1:0,"bool"),_$={kernelName:vC,backendName:"cpu",kernelFunc:O$},M$=yZ((e,t)=>e<t?1:0),R$=LZ(xC,M$,null,"bool"),D$={kernelName:xC,backendName:"cpu",kernelFunc:R$},F$=yZ((e,t)=>e<=t?1:0),P$=LZ(wC,F$,null,"bool"),L$={kernelName:wC,backendName:"cpu",kernelFunc:P$};function z$(e,t,n){const r=(t-e)/(n-1),a=zI(n,"float32");a[0]=e;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}const j$={kernelName:kC,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,o=z$(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},B$=lZ(e=>Math.log(e)),U$=uZ(SC,B$),W$={kernelName:SC,backendName:"cpu",kernelFunc:U$},V$=cZ(NC,e=>Math.log1p(e)),G$={kernelName:NC,backendName:"cpu",kernelFunc:V$},H$=yZ((e,t)=>e&&t),K$=LZ(TC,H$,null,"bool"),q$={kernelName:TC,backendName:"cpu",kernelFunc:K$},X$=cZ(IC,e=>e?0:1,"bool"),Y$={kernelName:IC,backendName:"cpu",kernelFunc:X$},Z$=yZ((e,t)=>e||t),Q$=LZ(EC,Z$,null,"bool"),J$={kernelName:EC,backendName:"cpu",kernelFunc:Q$};const $$={kernelName:CC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:o,alpha:s,beta:l}=r;iZ(a,"LRN");const c=a.shape[3],u=c-1,h=n.data.get(a.dataId).values,d=gI(a.shape),p=new Float32Array(d);function f(e){const t=e%c;let n=e-t+Math.max(0,t-i);const r=e-t+Math.min(t+i,u);let a=0;for(;n<=r;n++){const e=h[n];a+=e*e}return a}for(let m=0;m<d;m++){const e=f(m),t=h[m]*Math.pow(o+s*e,-l);p[m]=t}return n.makeTensorInfo(a.shape,a.dtype,p)}};const e1={kernelName:AC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:o}=t,{depthRadius:s,bias:l,alpha:c,beta:u}=r;iZ(o,"LRNGrad");const h=gI(o.shape),d=o.shape[3],p=n.data.get(o.dataId).values,f=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(h),y=h;for(let v=0;v<y;v++){const e=v%d,t=v-e+Math.max(0,e-s),n=v-e+Math.min(d,e+s+1);let r=0;for(let a=t;a<n;a++)r+=Math.pow(f[a],2);r=c*r+l;for(let a=t;a<n;a++){let e=-2*c*u*f[a]*m[v]/r;v===a&&(e+=Math.pow(r,-u)),e*=p[v],g[a]+=e}}return n.makeTensorInfo(o.shape,a.dtype,g)}};function t1(e,t,n,r){const a=TI(r,gI(n));for(let i=0;i<a.length;++i){const n=i*t;let r=e[n];for(let a=0;a<t;++a){const t=e[n+a];(Number.isNaN(t)||t>r)&&(r=t)}a[i]=r}return a}function n1(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:o}=r,s=n;let l=a.shape;const c=l.length,u=SI(i,l);let h=u;const d=qF(h,c);let p=s.data.get(a.dataId).values;if(null!=d){const e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[d[t]];p=tQ(p,l,a.dtype,d,e),h=YF(h.length,c),l=e}iZ(a,"max"),KF("max",h,c);const[f,m]=GF(l,h),g=t1(p,gI(m),f,a.dtype),y=s.write(g,f,a.dtype);let v=f;if(o){v=HF(f,u)}return{dataId:y,shape:v,dtype:a.dtype}}const r1={kernelName:OC,backendName:"cpu",kernelFunc:n1},a1=yZ((e,t)=>Math.max(e,t)),i1=LZ(_C,a1),o1={kernelName:_C,backendName:"cpu",kernelFunc:i1};const s1={kernelName:MC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;iZ(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r;pI(GD(o,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'"));const c=DD(a.shape,i,o,1,s,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&yI(c.inShape,c.outShape))u=pZ({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=DI(a.shape),r=bQ(e,a.shape,a.dtype,t,c,"max");u=n.makeTensorInfo(c.outShape,a.dtype,r.values)}return u}};const l1={kernelName:DC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:c}=r;iZ(a,"maxPool3d");const u=FD(a.shape,i,o,1,s,l,c),h=wQ(n.data.get(a.dataId).values,a.shape,a.dtype,DI(a.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};const c1={kernelName:FC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:o,strides:s,pad:l,dimRoundingMode:c}=r;iZ([a,i],"maxPool3DGrad");const u=FD(i.shape,o,s,1,l,c),h=function(e,t){const n=XM(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){const v=y*r-d;let b=v;for(;b<0;)b+=o;const x=Math.min(t.inDepth,c+v);for(let r=0;r<t.outHeight;++r){const c=r*a-p;let d=c;for(;d<0;)d+=s;const w=Math.min(t.inHeight,u+c);for(let a=0;a<t.outWidth;++a){const p=a*i-f;let k=p;for(;k<0;)k+=l;const S=Math.min(t.inWidth,h+p);let N=Number.NEGATIVE_INFINITY,T=-1;for(let t=b;t<x;t+=o){const n=t-v;for(let r=d;r<w;r+=s){const a=r-c;for(let i=k;i<S;i+=l){const o=i-p,s=e.get(m,t,r,i,g);s>=N&&(N=s,T=n*u*h+a*u+o)}}}n.set(T,m,y,r,a,g)}}}return n}(n.bufferSync(i),u),d=u.strideDepth,p=u.strideHeight,f=u.strideWidth,m=u.dilationDepth,g=u.dilationHeight,y=u.dilationWidth,v=u.effectiveFilterDepth,b=u.effectiveFilterHeight,x=u.effectiveFilterWidth,w=v-1-u.padInfo.front,k=x-1-u.padInfo.left,S=b-1-u.padInfo.top,N=XM(i.shape,"float32"),T=n.bufferSync(a);for(let I=0;I<u.batchSize;++I)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const a=t-w,i=n-S,o=r-k;let s=0;for(let t=0;t<v;t+=m){const n=(a+t)/d;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let r=0;r<b;r+=g){const a=(i+r)/p;if(!(a<0||a>=u.outHeight||Math.floor(a)!==a))for(let i=0;i<x;i+=y){const l=(o+i)/f;if(l<0||l>=u.outWidth||Math.floor(l)!==l)continue;const c=v*b*x-1-h.get(I,n,a,l,e)===t*b*x+r*x+i?1:0;if(0===c)continue;s+=T.get(I,n,a,l,e)*c}}}N.set(s,I,t,n,r,e)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}};const u1={kernelName:RC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:o}=t,s=i;iZ([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=DD(s.shape,l,c,1,u,h),p=n.data.get(s.dataId).values,f=XM(d.outShape,s.dtype,xQ(p,s.shape,s.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,v=d.dilationWidth,b=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,k=b-1-d.padInfo.top,S=XM(s.shape,"float32"),N=n.data.get(a.dataId).values,T=XM(a.shape,"float32",N);for(let I=0;I<d.batchSize;++I)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){const r=t-k,a=n-w;let i=0;for(let t=0;t<b;t+=y){const n=(r+t)/m;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<x;r+=v){const o=(a+r)/g;if(o<0||o>=d.outWidth||Math.floor(o)!==o)continue;const s=b*x-1-f.get(I,n,o,e)===t*x+r?1:0;if(0===s)continue;i+=T.get(I,n,o,e)*s}}S.set(i,I,t,n,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const h1={kernelName:PC,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,{filterSize:i,strides:o,pad:s,includeBatchInIndex:l}=n,c=r;iZ(a,"MaxPoolWithArgmax");const u=c.data.get(a.dataId).values,h=DD(a.shape,i,o,[1,1],s),[d,p]=function(e,t,n,r,a){const i=bQ(e,0,n,DI(t),a,"max"),o=xQ(e,t,n,a,!0,r);return[i.values,o.values]}(u,a.shape,a.dtype,l,h),f=c.write(d,h.outShape,a.dtype),m=c.write(p,h.outShape,a.dtype);return[{dataId:f,shape:h.outShape,dtype:a.dtype},{dataId:m,shape:h.outShape,dtype:"int32"}]}};const d1={kernelName:LC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r,s=SI(i,a.shape),l=gI(GF(a.shape,s)[1]),c=[],u=n.makeTensorInfo([],"float32",new Float32Array([l]));c.push(u);const h=FZ({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(h);const d=XJ({inputs:{a:h,b:u},backend:n});c.push(d);const p=NJ({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}};const p1={kernelName:zC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;iZ(a,"min");const s=SI(i,a.shape);let l=s;const c=qF(l,a.shape.length);let u=a;null!=c&&(u=nQ({inputs:{x:a},backend:n,attrs:{perm:c}}),l=YF(l.length,a.shape.length)),KF("min",l,u.shape.length);const[h,d]=GF(u.shape,l),p=gI(d),f=zI(gI(h),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(h,u.dtype,f);if(o){const e=VZ({inputs:{x:g},backend:n,attrs:{shape:HF(h,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}},f1=yZ((e,t)=>Math.min(e,t)),m1=LZ(jC,f1),g1={kernelName:jC,backendName:"cpu",kernelFunc:m1};const y1={kernelName:BC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,mode:o}=r;iZ(a,"mirrorPad");const s=i.map((e,t)=>e[0]+a.shape[t]+e[1]),l=i.map(e=>e[0]),c=i.map((e,t)=>e[0]+a.shape[t]),u="reflect"===o?0:1,h=n.data.get(a.dataId).values,d=a.shape.length,p=DI(a.shape),f=gI(s),m=s.length,g=DI(s),y=TI(a.dtype,f);for(let v=0;v<f;v++){let e=WI(v,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-u:e[n]>=c[n]&&(e[n]=2*(c[n]-1)-e[n]+u);e=e.map((e,t)=>e-l[t]);const t=UI(e,d,p);y[v]=h[t]}return{dataId:n.write(y,s,a.dtype),shape:s,dtype:a.dtype}}},v1=yZ((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),b1=LZ(UC,v1),x1={kernelName:UC,backendName:"cpu",kernelFunc:b1};function w1(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,o=a.shape.length;let s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));const l=SI([s],a.shape),c=n1({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=HF(c.shape,l),h=VZ({inputs:{x:c},backend:n,attrs:{shape:u}}),d=JJ({inputs:{a:a,b:h},backend:n}),p=BJ({inputs:{x:d},backend:n}),f=NJ({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=VZ({inputs:{x:f},backend:n,attrs:{shape:u}}),g=XJ({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const k1={kernelName:RA,backendName:"cpu",kernelFunc:w1};const S1={kernelName:WC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:o,normalized:s}=r;iZ(a,"multinomial");const l=s?a:w1({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],h=n.data.get(l.dataId).values,d=[c,i],p=zI(gI(d),"int32");for(let f=0;f<c;++f){const e=f*u,t=new Float32Array(u-1);t[0]=h[e];for(let a=1;a<t.length;++a)t[a]=t[a-1]+h[e+a];const n=uL.alea(o.toString()),r=f*i;for(let a=0;a<i;++a){const e=n();p[r+a]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+a]=n;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",p)}};function N1(e,t,n){const r=DO(-1,n);return xJ([],t,r,e,n)}const T1={kernelName:GC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;iZ(r,"neg");const a=n.data.get(r.dataId).values,[i,o]=N1(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}},I1=Zz;const E1={kernelName:KC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;iZ(a,"NonMaxSuppression");const c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:h}=I1(c,u,o,s,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},C1=Qz;const A1={kernelName:qC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r;iZ(a,"NonMaxSuppressionPadded");const u=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,{selectedIndices:d,validOutputs:p}=C1(u,h,o,s,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},O1=Jz;const _1={kernelName:XC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r;iZ(a,"NonMaxSuppressionWithScore");const u=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,d=o,p=s,f=l,m=c,{selectedIndices:g,selectedScores:y}=O1(u,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},M1=yZ((e,t)=>e!==t?1:0),R1=LZ(HC,M1,null,"bool"),D1={kernelName:HC,backendName:"cpu",kernelFunc:R1};const F1={kernelName:ZC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:o,onValue:s,offValue:l}=r;iZ(a,"oneHot");const c=gI(a.shape),u=new Float32Array(c*o);u.fill(l);const h=n.data.get(a.dataId).values;for(let d=0;d<c;++d)h[d]>=0&&h[d]<o&&(u[d*o+h[d]]=s);return n.makeTensorInfo([...a.shape,o],i,u)}};function P1(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=MZ({inputs:{input:r},backend:n}),t=P1({inputs:{x:e},backend:n}),a=HQ({inputs:{input:r},backend:n}),i=P1({inputs:{x:a},backend:n}),o=AZ({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),o}return a$({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const L1={kernelName:nO,backendName:"cpu",kernelFunc:P1};const z1={kernelName:YC,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){const t=MZ({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),i=HQ({inputs:{input:a},backend:r}),o=P1({inputs:{x:i},backend:r}),s=AZ({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}return a$({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function j1(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return WJ({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const i=t[0].shape,o=t[0].dtype;t.forEach(e=>{fI(i,e.shape,"All tensors passed to stack must have matching shapes"),pI(o===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=qQ({inputs:t.map(e=>{const t=WJ({inputs:{input:e},backend:n,attrs:{dim:a}});return s.push(t),t}),backend:n,attrs:{axis:a}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}const B1={kernelName:QC,backendName:"cpu",kernelFunc:j1};const U1={kernelName:JC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:o}=r;iZ(a,"pad");const s=i.map((e,t)=>e[0]+a.shape[t]+e[1]),l=i.map(e=>e[0]),c=n.data.get(a.dataId).values,u=gI(a.shape),h=a.shape.length,d=DI(a.shape),p=gI(s),f=s.length,m=DI(s),g=TI(a.dtype,p);0!==o&&g.fill(o);for(let y=0;y<u;y++){g[UI(WI(y,h,d).map((e,t)=>e+l[t]),f,m)]=c[y]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},W1=yZ((e,t)=>Math.pow(e,t)),V1=LZ($C,W1),G1={kernelName:$C,backendName:"cpu",kernelFunc:V1};function H1(e,t,n,r){const[a,i]=GF(e,r),o=l_(t,"int32"),s=zI(gI(a),o),l=gI(i);for(let c=0;c<s.length;++c){const e=c*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];s[c]=t}return{outVals:s,outShape:a,outDtype:o}}const K1={kernelName:tA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;iZ(a,"prod");const s=a.shape.length,l=SI(i,a.shape),c=qF(l,s);let u=l,h=a;const d=[];null!=c&&(h=nQ({inputs:{x:a},backend:n,attrs:{perm:c}}),d.push(h),u=YF(u.length,s));const p=n.data.get(h.dataId).values,{outVals:f,outShape:m,outDtype:g}=H1(h.shape,h.dtype,p,u);let y=m;return o&&(y=HF(m,l)),d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(y,g,f)}};function q1(e,t,n,r){const a=[];let i=0;const o=t.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];const e=t[c+1];for(let t=1;t<l+1;++t)s[c].push(t*e)}for(let c=0;c<e.length;++c){let r=e[c],o=e[c]+1;for(let e=0;e<n.length;++e){const a=n[e],i=e+t.length-1;if(i>=0){const e=s[i],t=e[e.length-1]-a[r];for(let n=r;n<o;++n)s[i].push(a[n+1]+t)}r=a[r],o=a[o]}o!==r&&(a.push([r,o]),i+=o-r)}return{outSplits:s,valueSlices:a,numValues:i}}function X1(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function Y1(e,t,n,r,a){const i=t.slice();i[0]=a;const o=II(n,gI(i)),s=e.length;return function(e,t,n,r,a,i){const o=X1(t,2)[1],s=X1(i,2)[1];let l=0;for(const c of n)for(let t=c[0];t<c[1];++t){for(let n=0;n<r;++n)a[l*s+n]=e[t*o+n];++l}}(e,t,r,0===s?0:s/t[0],o,i),[o,i]}function Z1(e,t,n,r,a,i,o,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((e,r)=>{if(e<0||e>=n){const a=WI(r,t.length,DI(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}})}(i,o,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:u,numValues:h}=q1(i,o,e,l),d=function(e){const t=[];for(let n=0;n<e.length;++n){const r=II("int32",e[n].length);t.push(r),e[n].forEach((e,t)=>r[t]=e)}return t}(c),p=Y1(n,r,a,u,h);return[d,p[0],p[1]]}const Q1={kernelName:nA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=t,{outputRaggedRank:s}=r,l=a.map(e=>n.data.get(e.dataId).values),c=a.map(e=>e.shape),u=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,[d,p,f]=Z1(l,c,u,i.shape,i.dtype,h,o.shape),m=d.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(f,i.dtype,p);return m.concat([g])}},J1=2147483647;function $1(e,t,n,r,a,i,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,l=0===a.length,c=0===o.length,u=[];s||u.push(t[0]),l||u.push(a[0]),c||u.push(o[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const h=0===u.length?1:u[0],d=II("int32",h+1);d[0]=0;for(let m=0;m<h;++m){const t=s?e[0]:e[m],n=l?r[0]:r[m],a=c?i[0]:i[m];if(0===a)throw new Error("Requires delta != 0");let o;if(a>0&&n<t||a<0&&n>t)o=0;else if(o=Math.ceil(Math.abs((n-t)/a)),o>J1)throw new Error("Requires ((limit - start) / delta) <= ".concat(J1));d[m+1]=d[m]+o}const p=II(n,d[h]);let f=0;for(let m=0;m<h;++m){const t=d[m+1]-d[m];let n=s?e[0]:e[m];const r=c?i[0]:i[m];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[d,p]}const e0={kernelName:rA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=$1(o,r.shape,r.dtype,s,a.shape,l,i.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};var t0=Kj;class n0{constructor(e,t,n,r,a,i,o,s,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=o,this.rowPartitionValues=s,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=Xj(c),this.raggedRank=Yj(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===t0.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===t0.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case t0.VALUE_ROWIDS:return n0.getMaxWidthValueRowID(t);case t0.ROW_SPLITS:return n0.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(t0[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],a=0;for(let i=1;i<t;++i){const t=e[i];t!==r&&(r=t,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return a0(e,n)}calculateOutputSize(e){const t=this.valuesShape;Zj(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=qj(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let a=1;a<=this.raggedRank;++a)r[a]<0&&(r[a]=this.getMaxWidth(a));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),a=[];let i=0;for(let o=0;o<r;++o,i+=t)a.push(i);for(let o=r;o<e;++o)a.push(-1);return pI(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,n,r){const a=e.length,i=[];for(let o=0;o<a-1;++o){const a=e[o+1]-e[o];let s=Math.min(r,a),l=t[o];-1===l&&(s=0);for(let e=0;e<s;++e)i.push(l),l+=n;for(let e=0;e<a-s;++e)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,t,n,r){const a=e.length,i=[];if(0===a)return[];let o=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));let l=t[s];i.push(l);for(let c=1;c<a;++c){const a=e[c];if(a===s)l>=0&&(++o,o<r?l+=n:l=-1);else{if(o=0,s=a,a>=t.length)throw new Error("Got nextValueRowId=".concat(a," which is not less than ").concat(t.length));l=t[a]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,t,n,r){const a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case t0.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case t0.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(t0[i]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case t0.FIRST_DIM_SIZE:return e[0];case t0.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case t0.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(t0[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let i=n.length-2;i>=0;--i)n[i]=n[i+1]*t[i+1];const r=a0(t,!1),a=II(this.valuesDType,gI(r));if(n[0]*t[0]>0){let i=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){i=this.calculateOutputIndex(e-1,i,n[e],t[e])}this.setOutput(this.raggedRank,i,a,r)}return[r,a]}setOutput(e,t,n,r){if(0===n.length)return;const a=this.values,i=n;let o=r.slice();o=o.slice(e+1);const s=gI(o),l=t.length;let c=this.defaultValue;if(c.length!==s&&1!==c.length){const e=this.defaultValueShape;B_(()=>{const t=XD(c,e),n=hF(t,o);c=n.dataSync()})}let u=0,h=0,d=0;for(let p=0;p<=l;++p){let e=p<l?t[p]:-1;if(e!==d){if(h<d){const e=a.subarray(u*s);r0(i.subarray(h*s),e,(d-h)*s)}if(p>=l){const t=n.length;e=Math.floor(t/s)}if(e>d)if(1===this.defaultValue.length)i.subarray(d*s,e*s).fill(this.defaultValue[0]),d=e;else for(;e>d;){r0(i.slice(d*s),c,s),++d}e<0?(u=p+1,h=d):(u=p,h=d,d=h+1)}else++d}}}function r0(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function a0(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function i0(e,t,n,r,a,i,o,s,l,c){return new n0(e,t,n,r,a,i,o,s,l,c).compute()}const o0={kernelName:aA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,d=s.map(e=>n.data.get(e.dataId).values),p=s.map(e=>e.shape),[f,m]=i0(c,a.shape,u,i.shape,i.dtype,h,o.shape,d,p,l);return n.makeTensorInfo(f,i.dtype,m)}};function s0(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return zI(0,r);const a=zI(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(let i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}const l0={kernelName:iA,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,dtype:i,step:o}=n,s=s0(r,a,o,i);return t.makeTensorInfo([s.length],i,s)}},c0=cZ(sA,e=>1/e),u0={kernelName:sA,backendName:"cpu",kernelFunc:c0};const h0={kernelName:dA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:o,size:s}=r;iZ(a,"resizeBilinear");const l=DI(a.shape),[c,u]=s,[h,d,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(gI([h,c,u,f])),y=[i&&c>1?d-1:d,i&&u>1?p-1:p],v=[i&&c>1?c-1:c,i&&u>1?u-1:u];let b=0;const x=y[0]/v[0],w=y[1]/v[1];for(let k=0;k<h;k++)for(let e=0;e<c;e++){let t;t=o?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),r=t-n,a=Math.min(d-1,Math.ceil(t)),i=k*l[0]+n*l[1],s=k*l[0]+a*l[1];for(let e=0;e<u;e++){let t;t=o?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),a=t-n,c=Math.min(p-1,Math.ceil(t)),u=i+n*l[2],h=s+n*l[2],d=i+c*l[2],y=s+c*l[2];for(let e=0;e<f;e++){const t=m[u+e],n=m[h+e],i=t+(m[d+e]-t)*a,o=i+(n+(m[y+e]-n)*a-i)*r;g[b++]=o}}}return n.makeTensorInfo([h,c,u,f],"float32",g)}};const d0={kernelName:pA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:o}=r;iZ([i,a],"resizeBilinearGrad");const s=DI(a.shape),[l,c,u,h]=a.shape,[,d,p]=i.shape,f=new Float32Array(l*c*u*h),m=[o&&d>1?c-1:c,o&&p>1?u-1:u],g=[o&&d>1?d-1:d,o&&p>1?p-1:p],y=m[0]/g[0],v=m[1]/g[1],b=n.data.get(i.dataId).values;let x=0;for(let w=0;w<l;w++){const e=w*s[0];for(let t=0;t<d;t++){const n=t*y,r=Math.floor(n),a=Math.min(Math.ceil(n),c-1),i=e+r*s[1],o=e+a*s[1],l=n-r,d=1-l;for(let e=0;e<p;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),u-1),a=t-n,c=1-a,p=i+n*s[2],m=i+r*s[2],g=o+n*s[2],y=o+r*s[2],w=d*c,k=d*a,S=l*c,N=l*a;for(let e=0;e<h;e++){const t=b[x++];f[p+e]+=t*w,f[m+e]+=t*k,f[g+e]+=t*S,f[y+e]+=t*N}}}}return n.makeTensorInfo([l,u,c,h],"float32",f)}};const p0={kernelName:uA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:o,size:s}=r;iZ(a,"resizeNearestNeighbor");const l=DI(a.shape),[c,u]=s,[h,d,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(h*c*u*f),y=[i&&c>1?d-1:d,i&&u>1?p-1:p],v=[i&&c>1?c-1:c,i&&u>1?u-1:u],b=y[0]/v[0],x=y[1]/v[1];let w=0;for(let k=0;k<h;k++){const e=k*l[0];for(let t=0;t<c;t++){const n=o?b*(t+.5):b*t;let r=Math.min(d-1,i?Math.round(n):Math.floor(n));o&&(r=Math.max(0,r));const a=e+r*l[1];for(let e=0;e<u;e++){const t=o?x*(e+.5):x*e;let n=Math.min(p-1,i?Math.round(t):Math.floor(t));o&&(n=Math.max(0,n));const r=a+n*l[2];for(let e=0;e<f;e++){const t=m[r+e];g[w++]=t}}}}return n.makeTensorInfo([h,c,u,f],a.dtype,g)}};const f0={kernelName:hA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:o}=r;iZ([i,a],"resizeNearestNeighborGrad");const s=DI(a.shape),l=DI(i.shape),[c,u,h,d]=a.shape,[,p,f]=i.shape,m=new Float32Array(c*u*h*d),g=n.data.get(i.dataId).values,y=[o&&p>1?u-1:u,o&&f>1?h-1:h],v=[o&&p>1?p-1:p,o&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=1/b,k=1/x,S=2*Math.ceil(w)+2,N=2*Math.ceil(k)+2;for(let T=0;T<c;T++){const e=T*s[0];for(let t=0;t<u;t++){const n=e+t*s[1],r=Math.floor(t*w),a=Math.floor(r-S/2);for(let i=0;i<h;i++){const r=n+i*s[2],c=Math.floor(i*k),y=Math.floor(c-N/2);for(let n=0;n<d;n++){let s=0;for(let r=0;r<S;r++){const c=r+a;if(c<0||c>=p)continue;const d=e+c*l[1],m=c*b;if(t===Math.min(u-1,o?Math.round(m):Math.floor(m)))for(let e=0;e<N;e++){const t=e+y;if(t<0||t>=f)continue;const r=d+t*l[2],a=t*x;i===Math.min(h-1,o?Math.round(a):Math.floor(a))&&(s+=g[r+n])}}m[r+n]=s}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}};const m0={kernelName:mA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r;iZ(a,"reverse");const o=a.shape.length,s=SI(i,a.shape);if(0===o)return pZ({inputs:{x:a},backend:n});const l=new YO(a.shape,a.dtype),c=n.bufferSync(a);for(let u=0;u<l.size;u++){const e=l.indexToLoc(u),t=e.slice();s.forEach(e=>t[e]=a.shape[e]-1-t[e]),l.set(c.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},g0={kernelName:iO,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:a}=t,{radians:i,fillValue:o,center:s}=n,l=r,c=TI(a.dtype,gI(a.shape)),[u,h,d,p]=a.shape,[f,m]=$j(s,h,d),g=Math.sin(i),y=Math.cos(i),v=l.data.get(a.dataId).values;for(let b=0;b<u;b++){const e=b*d*h*p;for(let t=0;t<h;t++){const n=t*(d*p);for(let r=0;r<d;r++){const a=r*p;for(let i=0;i<p;i++){const s=[u,t,r,i],l=s[2],b=s[1];let x=(l-f)*y-(b-m)*g,w=(l-f)*g+(b-m)*y;x=Math.round(x+f),w=Math.round(w+m);let k=o;if("number"!==typeof o&&(k=3===i?255:o[i]),x>=0&&x<d&&w>=0&&w<h){k=v[e+w*(d*p)+x*p+i]}c[e+n+a+i]=k}}}}return{dataId:l.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},y0=cZ(gA,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),v0={kernelName:gA,backendName:"cpu",kernelFunc:y0},b0=lZ(e=>1/Math.sqrt(e)),x0=uZ(yA,b0),w0={kernelName:yA,backendName:"cpu",kernelFunc:x0};function k0(e,t,n,r,a,i,o,s,l,c){const u=[r/a,a],h=e.values,d=t.values;if(0===r)return XM(n,t.dtype);const p=l instanceof YO?l:XM(u,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<i;f++){const e=[];let i=0;for(let t=0;t<o;t++){const n=h[f*o+t];e.push(n),i+=n*s[t]}if(i<0||i>=r/a)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<a;n++)c?p.values[i*a+n]+=d[f*a+n]:p.values[i*a+n]=0===t.rank?d[0]:d[f*a+n]}return p}const S0={kernelName:vA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=oz(0,a,o),d=k0(n.bufferSync(a),n.bufferSync(i),o,h,c,l,s,u,0,!0);return n.makeTensorInfo(o,d.dtype,d.values)}};function N0(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<t?n=a+1:r=a;return r}function T0(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<=t?n=a+1:r=a;return r}const I0={kernelName:xA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:o}=r,s=function(e,t,n,r,a,i){const o=II("int32",n*a);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),l=s*a;for(let e=0;e<a;++e)o[l+e]="left"===i?N0(n,t[e+l]):T0(n,t[e+l])}return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};const E0={kernelName:wA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t;iZ([r,a,i],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,u=l_(a.dtype,i.dtype),h=zI(gI(a.shape),u);let d=0;const p=0===o||o>1||1===a.shape.length?1:gI(a.shape.slice(1));for(let f=0;f<s.length;f++)for(let e=0;e<p;e++)1===s[f]?h[d++]=l[f]:h[d++]=c[f];return n.makeTensorInfo(a.shape,u,h)}},C0=oB,A0=sB,O0=cZ(kA,e=>e>=0?A0*e:C0*(Math.exp(e)-1)),_0={kernelName:kA,backendName:"cpu",kernelFunc:O0},M0=cZ(IA,e=>e<0?-1:e>0?1:0),R0={kernelName:IA,backendName:"cpu",kernelFunc:M0},D0=cZ(NA,e=>Math.sin(e)),F0={kernelName:NA,backendName:"cpu",kernelFunc:D0},P0=cZ(TA,e=>Math.sinh(e)),L0={kernelName:TA,backendName:"cpu",kernelFunc:P0},z0=Math.log(1.1920928955078125e-7)+2,j0=cZ(CA,e=>{const t=e>-z0,n=e<z0,r=Math.exp(e);let a;return a=n?r:t?e:Math.log(1+r),a}),B0={kernelName:CA,backendName:"cpu",kernelFunc:j0};const U0={kernelName:_A,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:o}=r;iZ([a],"spaceToBatchND");const s=gI(i),l=[[0,0]];l.push(...o);for(let g=1+i.length;g<a.shape.length;++g)l.push([0,0]);const c=U1.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),u=eB(c.shape,i,s,!1),h=tB(u.length,i.length,!1),d=nB(c.shape,i,s,!1),p=VZ({inputs:{x:c},backend:n,attrs:{shape:u}}),f=nQ({inputs:{x:p},backend:n,attrs:{perm:h}}),m=VZ({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};function W0(e,t,n,r,a,i,o){const s=t[0],l=i[0],c=new Array(l),u=new Array(s),h=t[1];if(0===l){if(0!==s)throw new Error(RB(s));return[II(n,0),[0,h],II(a,0),c,u]}let d=!0,p=0;const f=new Array(l).fill(0);for(let g=0;g<s;++g){const t=e[g*h];if(t<0)throw new Error(DB(g,t));if(t>=l)throw new Error(FB(g,t,l));++f[t],d=d&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){const e=0===f[g];c[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){const t=e,n=r;for(let e=0;e<s;++e)u[e]=e;return[t,[s,h],n,c,u]}{const t=f[l-1],i=II(n,t*h),d=II(a,t),p=new Array(l).fill(0);for(let n=0;n<s;++n){const t=e[n*h],a=p[t],o=(0===t?0:f[t-1])+a;p[t]++;for(let r=0;r<h;++r)i[o*h+r]=e[n*h+r];d[o]=r[n],u[n]=o}for(let e=0;e<l;++e){if(0===p[e]){const t=0===e?0:f[e-1];i[t*h+0]=e;for(let e=1;e<h;++e)i[t*h+e]=0;d[t]=o}}return[i,[t,h],d,c,u]}}const V0={kernelName:DA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:o}=t;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));const s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values[0],[h,d,p,f,m]=W0(s,r.shape,r.dtype,l,a.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function G0(e,t,n,r,a){const i=gI(r),o=t[0],s=a.length,l=[];let c=1,u=-1;for(let m=0;m<s;++m){const e=a[m];if(-1===e){if(-1!==u)throw new Error(PB(u,m));u=m,l.push(1)}else{if(e<0)throw new Error(LB(m,e));c*=e,l.push(e)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(i/c);if(c*e!==i)throw new Error(jB(r,l));l[u]=e}if(gI(l)!==i)throw new Error(BB(r,l));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let e=h-2;e>=0;--e)d[e]=d[e+1]*r[e+1]}const p=[];if(s>0){p[s-1]=1;for(let e=s-2;e>=0;--e)p[e]=p[e+1]*l[e+1]}const f=II(n,o*s);for(let m=0;m<o;++m){let t=0;for(let n=0;n<h;++n)t+=e[m*h+n]*d[n];for(let e=0;e<s;++e)f[m*s+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[o,s],l]}const H0={kernelName:FA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));const o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,h]=G0(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};function K0(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=r.length,l=[t[0],e.length/t[0]],c=l[1],u=s>0?a[s-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const h=t.slice();h[0]=u;const d=h.reduce((e,t)=>e*t,1),p=II(n,d);if(0===s)return u>0&&p.fill(o),[p,h];if(u<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,y=a[f];for(;;){let t=0;if(m<s){if(t=a[m],y===t){++m;continue}if(y>=t)throw new Error(WB())}if(y<0||y>=u)throw new Error(VB(y,u));y>g&&p.fill(o,g*c,y*c);for(let n=f;n<m;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(GB(n,r[n],l[0]));for(let n=0;n<c;n++)p[y*c+n]+=e[t*c+n]}if(i)for(let e=0;e<c;e++)p[y*c+e]/=m-f;if(f=m,++m,g=y+1,y=t,m>s)break}return g<u&&p.fill(o,g*c,u*c),[p,h]}const q0={kernelName:PA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=K0(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const X0={kernelName:LA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=K0(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(u,r.dtype,c)}};const Y0={kernelName:zA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:o}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=oz(0,a,s),p=!1,f=n.bufferSync(a);let m;switch(i.dtype){case"bool":m=k0(f,n.bufferSync(i),s,d,u,c,l,h,Boolean(n.data.get(o.dataId).values[0]),p);break;case"float32":m=k0(f,n.bufferSync(i),s,d,u,c,l,h,n.data.get(o.dataId).values[0],p);break;case"int32":m=k0(f,n.bufferSync(i),s,d,u,c,l,h,n.data.get(o.dataId).values[0],p);break;case"string":m=k0(f,n.bufferSync(i),s,d,u,c,l,h,zO(n.data.get(o.dataId).values[0]),p);break;default:throw new Error("Unsupported type ".concat(i.dtype))}return n.makeTensorInfo(s,m.dtype,m.values)}};const Z0={kernelName:MA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:o}=r,s=SI(o,a.shape)[0],l=MB(a,i,s),c=new Array(a.shape.length).fill(0),u=a.shape.slice();return l.map(e=>{const t=[...u];t[s]=e;const r=CQ({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r})}},Q0=lZ(e=>Math.sqrt(e)),J0=cZ(AA,e=>Math.sqrt(e)),$0={kernelName:AA,backendName:"cpu",kernelFunc:J0},e2={kernelName:BA,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,a=n;iZ(r,"square");const i=a.data.get(r.dataId).values,o=new Float32Array(i.length);for(let s=0;s<i.length;++s){const e=i[s];o[s]=e*e}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},t2=yZ((e,t)=>{const n=e-t;return n*n}),n2=LZ(jA,t2),r2={kernelName:jA,backendName:"cpu",kernelFunc:n2},a2=lZ((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:a}=t;return e.replace(new RegExp(n,r?"g":""),a)}),i2=uZ(UA,a2),o2={kernelName:UA,backendName:"cpu",kernelFunc:i2},s2=cZ(rO,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),l2={kernelName:rO,backendName:"cpu",kernelFunc:s2};function c2(e,t,n,r){const a=XM(e,t.dtype);for(let i=0;i<a.size;i++){const e=a.indexToLoc(i),o=new Array(e.length);for(let t=0;t<o.length;t++)o[t]=e[t]*n[t]+r[t];a.set(t.get(...o),...e)}return a}const u2={kernelName:WA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,end:o,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r;iZ(a,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=bD(a.shape,i,o,s,l,c,u,h,d);let w;if(m)w=VZ({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||y){pI(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));const e=oD(v,b,x),t=CQ({inputs:{x:a},backend:n,attrs:{begin:v,size:e}});w=VZ({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=c2(p,n.bufferSync(a),x,v);w=n.makeTensorInfo(f,e.dtype,e.values)}return w}};class h2{constructor(e,t,n,r,a,i){this.separator=LO(e),this.nGramWidths=t,this.leftPad=LO(n),this.rightPad=LO(r),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,i){for(let o=0;o<a;++o){const s=this.getPadWidth(i),l=Math.max(0,s-o),c=Math.max(0,s-(a-(o+1))),u=i-(l+c),h=t+(l>0?0:o-s);let d=0;d+=l*this.leftPad.length;for(let t=0;t<u;++t)d+=e[h+t].length;d+=c*this.rightPad.length;d+=(l+c+u-1)*this.separator.length,n[r+o]=new Uint8Array(d);const p=n[r+o];let f=0;const m=e=>e.forEach(e=>p[f++]=e);for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<u-1;++t)m(e[h+t]),m(this.separator);if(u>0){m(e[h+u-1]);for(let e=0;e<c;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<c-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error("Invalid split value ".concat(t[a],", must be in [").concat(e,", ").concat(n,"]"));e=t[a]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const a=r-1,i=II("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=a;++t)i[t]=0;return[e,i]}i[0]=0;for(let s=1;s<=a;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach(t=>{n+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===n&&(n=1),i[s]=i[s-1]+n}const o=new Array(i[a]);for(let s=0;s<a;++s){const n=t[s];let r=i[s];if(this.nGramWidths.forEach(a=>{const i=t[s+1]-t[s],l=this.getNumNGrams(i,a);this.createNGrams(e,n,o,r,l,a),r+=l}),this.preserveShort&&r===i[s]){const a=t[s+1]-t[s];if(0===a)continue;const i=a+2*this.padWidth,l=1;this.createNGrams(e,n,o,r,l,i)}}return[o,i]}}function d2(e,t,n,r,a,i,o,s){return new h2(n,r,a,i,o,s).compute(e,t)}const p2={kernelName:VA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=t,d=n.data.get(u.dataId).values,p=n.data.get(h.dataId).values,[f,m]=d2(d,p,a,i,o,s,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};function f2(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const a=t[0];let i=e.indexOf(a);for(;-1!==i;){const t=e.subarray(0,i);n&&0===t.length||r.push(t),i=(e=e.subarray(i+1)).indexOf(a)}return void(n&&0===e.length||r.push(e))}let a=0;for(let i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){const t=e.subarray(a,i);n&&0===t.length||r.push(t),a=i+1}}function m2(e,t,n){const r=e.length,a=[];let i=0,o=0;const s=new Array(r);for(let d=0;d<r;++d){const r=a.length;f2(e[d],t,n,a);const l=a.length-r;s[d]=l,i+=l,o=Math.max(o,l)}const l=II("int32",2*i),c=new Array(i),u=[r,o];let h=0;for(let d=0;d<r;++d)for(let e=0;e<s[d];++e)l[2*h]=d,l[2*h+1]=e,c[h]=a[h],++h;return[l,c,u]}const g2={kernelName:GA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:o}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));const s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,h]=m2(s,l,a),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};function y2(e,t){const n=II("int32",e.length);for(let r=0;r<e.length;++r)n[r]=RO(e[r]).modulo(t).getLowBitsUnsigned();return n}const v2={kernelName:HA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=y2(n.data.get(i.dataId).values,a);return n.makeTensorInfo(i.shape,"int32",o)}},b2=cZ(qA,e=>Math.tan(e)),x2={kernelName:qA,backendName:"cpu",kernelFunc:b2},w2=cZ(XA,e=>Math.tanh(e));const k2={kernelName:bA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:a,updates:i}=t,{sliceRank:o,numUpdates:s,sliceSize:l,strides:c,outputSize:u}=oz(0,a,r.shape),h=n.bufferSync(a),d=n.bufferSync(i),p=n.bufferSync(r),f=k0(h,d,r.shape,u,l,s,o,c,p,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function S2(e,t){const n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];const r=XM(n,e.dtype);for(let a=0;a<r.values.length;++a){const t=r.indexToLoc(a),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const i=e.locToIndex(n);r.values[a]=e.values[i]}return r}const N2={kernelName:YA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;iZ(a,"tile");const o=S2(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},T2=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function I2(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2);I2(e,t,Math.max(n,Math.floor(t-i*s/a+l)),Math.min(r,Math.floor(t+(a-i)*s/a+l)))}const a=e[t];let i=n,o=r;for(dI(e,n,t),T2(e[r],a)>0&&dI(e,n,r);i<o;){for(dI(e,i,o),i++,o--;T2(e[i],a)<0;)i+=1;for(;T2(e[o],a)>0;)o-=1}0===T2(e[n],a)?dI(e,n,o):(o+=1,dI(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}}function E2(e,t,n,r,a){const i=t[t.length-1],[o,s]=[e.length/i,i],l=TI(n,o*r),c=TI("int32",o*r);for(let h=0;h<o;h++){const t=h*s,n=e.subarray(t,t+s);let i=new Array(n.length);n.forEach((e,t)=>i[t]={value:e,index:t}),r<i.length&&(I2(i,r),i=i.slice(0,r)),a&&i.sort(T2);const o=h*r,u=l.subarray(o,o+r),d=c.subarray(o,o+r);for(let e=0;e<r;e++)u[e]=i[e].value,d[e]=i[e].index}const u=t.slice();return u[u.length-1]=r,[XM(u,n,l),XM(u,"int32",c)]}const C2={kernelName:ZA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:o}=r;iZ(a,"topk");const s=n.data.get(a.dataId).values,[l,c]=E2(s,a.shape,a.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};const A2={kernelName:QA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:i}=t,{interpolation:o,fillMode:s,fillValue:l,outputShape:c}=n,[u,h,d,p]=a.shape,[f,m]=null!=c?c:[h,d],g=[u,f,m,p],y=DI(a.shape),v=y[0],b=y[1],x=y[2],w=DI(g),k=w[0],S=w[1],N=w[2],T=TI(a.dtype,gI(g));T.fill(l);const I=r.data.get(a.dataId).values,E=r.data.get(i.dataId).values;for(let C=0;C<u;++C){const e=1===i.shape[0]?E:E.subarray(8*C,8*C+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let r=0;r<p;++r){let a;const i=e[6]*n+e[7]*t+1;if(0===i)continue;const c=(e[0]*n+e[1]*t+e[2])/i,u=(e[3]*n+e[4]*t+e[5])/i,p=O2(c,d,s),f=O2(u,h,s);switch(o){case"nearest":a=M2(I,h,d,v,b,x,C,f,p,r,l);break;case"bilinear":a=R2(I,h,d,v,b,x,C,f,p,r,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}T[C*k+t*S+n*N+r]=a}return r.makeTensorInfo(g,a.dtype,T)}return{dataId:r.write(T,g,a.dtype),shape:a.shape,dtype:a.dtype}}};function O2(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return uI(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return uI(0,n,t-1)}(e,t);case"nearest":return function(e,t){return uI(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function _2(e,t,n,r,a,i,o,s,l,c,u){return 0<=s&&s<t&&0<=l&&l<n?e[o*r+s*a+l*i+c]:u}function M2(e,t,n,r,a,i,o,s,l,c,u){return _2(e,t,n,r,a,i,o,Math.round(s),Math.round(l),c,u)}function R2(e,t,n,r,a,i,o,s,l,c,u){const h=Math.floor(s),d=Math.floor(l),p=h+1,f=d+1;return(p-s)*((f-l)*_2(e,t,n,r,a,i,o,h,d,c,u)+(l-d)*_2(e,t,n,r,a,i,o,h,f,c,u))+(s-h)*((f-l)*_2(e,t,n,r,a,i,o,p,d,c,u)+(l-d)*_2(e,t,n,r,a,i,o,p,f,c,u))}function D2(e,t,n,r){const a=SI(t,n)[0],i=[1,n[0],1];for(let f=0;f<a;f++)i[0]*=n[f];i[1]=n[a];for(let f=a+1;f<n.length;f++)i[2]*=n[f];const o=new Map,s=new Int32Array(n[a]),l=new YO(i,r,e),c=[],u=1===i[0]&&1===i[2];for(let f=0;f<n[a];f++){let t;if(u)t=e[f].toString();else{const e=[];for(let t=0;t<i[0];t++)for(let n=0;n<i[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=o.get(t);if(null!=n)s[f]=n;else{const e=o.size;o.set(t,e),s[f]=e,c.push(f)}}const h=i.slice();h[1]=o.size;const d=new YO(h,r);c.forEach((e,t)=>{for(let n=0;n<i[0];n++)for(let r=0;r<i[2];r++)d.set(l.get(n,e,r),n,t,r)});const p=n.slice();return p[a]=h[1],{outputValues:d.values,outputShape:p,indices:s}}const F2={kernelName:$A,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;iZ(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:s,outputShape:l,indices:c}=D2(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};const P2={kernelName:eO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a.shape.length,s=a.shape[i],l=new Array(o-1);let c=0;for(let p=0;p<o;p++)p!==i&&(l[c++]=a.shape[p]);const u=new Array(o).fill(0),h=a.shape.slice();h[i]=1;const d=new Array(s);for(let p=0;p<d.length;p++){u[i]=p;const e=CQ({inputs:{x:a},backend:n,attrs:{begin:u,size:h}});d[p]=VZ({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return d}};const L2={kernelName:tO,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:o}=r;iZ(a,"unsortedSegmentSum");const s=[],l=[],c=a.shape.length-i.shape.length;let u=i;for(let d=0;d<c;++d){const e=WJ({inputs:{input:u},backend:n,attrs:{dim:d+1}});u=e,l.push(e)}for(let d=0;d<o;++d){const e=DO(d,"int32"),t=n.makeTensorInfo([],"int32",e),r=AJ({inputs:{a:t,b:u},backend:n}),i=FZ({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),o=kJ({inputs:{a:i,b:a},backend:n}),c=NJ({inputs:{x:o},backend:n,attrs:{axis:0,keepDims:!1}});s.push(c),l.push(t),l.push(r),l.push(i),l.push(o),l.push(c)}const h=j1({inputs:s,backend:n,attrs:{axis:0}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}},z2=[qZ,YZ,QZ,$Z,WZ,eQ,aQ,iQ,oQ,sQ,cQ,hQ,pQ,gQ,vQ,kQ,SQ,NQ,TQ,KZ,IQ,OQ,RQ,PQ,LQ,PZ,BQ,WQ,OZ,VQ,XQ,ZQ,QQ,JQ,$Q,eJ,tJ,rJ,iJ,oJ,sJ,lJ,cJ,uJ,dJ,pJ,fJ,mJ,gJ,yJ,vJ,bJ,IJ,dZ,EJ,OJ,zJ,UJ,VJ,KJ,r$,i$,o$,c$,d$,p$,f$,g$,v$,w$,N$,fZ,T$,KQ,E$,A$,_$,gZ,D$,L$,j$,W$,G$,q$,Y$,J$,$$,e1,r1,o1,s1,l1,c1,u1,h1,d1,p1,g1,y1,x1,S1,SJ,T1,E1,A1,_1,D1,F1,z1,B1,U1,G1,xZ,K1,Q1,e0,o0,l0,RZ,YJ,u0,kZ,NZ,GZ,h0,d0,p0,f0,m0,g0,v0,w0,S0,I0,E0,_0,EZ,R0,F0,L0,AQ,k1,B0,U0,V0,H0,q0,X0,Y0,Z0,$0,e2,r2,o2,l2,u2,p2,g2,v2,$J,TJ,x2,{kernelName:XA,backendName:"cpu",kernelFunc:w2},k2,N2,C2,A2,rQ,F2,P2,L2,L1];for(const n of z2)gO(n);const j2={},B2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function U2(e,t){if(!(e in j2)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(qI().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete j2[e]},!1),qI().getBool("SOFTWARE_WEBGL_ENABLED")&&(B2.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",B2)||n.getContext("experimental-webgl",B2);return n.getContext("webgl2",B2)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;j2[e]=n}const n=j2[e];return null==n||n.isContextLost()?(delete j2[e],U2(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),j2[e])}var W2,V2,G2;function H2(e,t){return[t,e]}function K2(e){const t=gI(e);return bI(Math.ceil(t/4))}function q2(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function X2(e,t){const n=e;let r,a,i,o,s,l,c,u,h,d;return 2===qI().getNumber("WEBGL_VERSION")?(r=n.R32F,a=n.R16F,i=n.RGBA16F,o=n.RGBA32F,s=n.RED,c=4,u=1,h=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=e.RGBA,a=e.RGBA,i=e.RGBA,o=n.RGBA,s=e.RGBA,c=4,u=4,h=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:d}}function Y2(e,t){const n=t();return qI().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(W2||(W2={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(V2||(V2={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(G2||(G2={}));function Z2(e){return!!(qI().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function Q2(e,t){return o3(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}const J2=/ERROR: [0-9]+:([0-9]+):/g;function $2(e,t){const n=J2.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((e,t)=>xI((t+1).toString(),i)+e);let s=0;for(let h=0;h<o.length;h++)s=Math.max(o[h].length,s);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(xI(c[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function e3(e,t){if(Y2(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function t3(e,t,n,r,a,i,o){const s=e.getAttribLocation(t,n);return-1!==s&&(Y2(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),Y2(e,()=>e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)),Y2(e,()=>e.enableVertexAttribArray(s)),!0)}function n3(e,t,n,r){Y2(e,()=>function(e,t,n){s3(e,n),Y2(e,()=>e.activeTexture(e.TEXTURE0+n)),Y2(e,()=>e.bindTexture(e.TEXTURE_2D,t))}(e,t,r)),Y2(e,()=>e.uniform1i(n,r))}function r3(e,t,n){Y2(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),Y2(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function a3(e,t){Y2(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Y2(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function i3(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function o3(e,t,n){const r=Y2(e,()=>t());if(null==r)throw new Error(n);return r}function s3(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function l3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return gI(e.slice(0,e.length-t))}function c3(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function u3(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[l3(e),...c3(e)]),t}function h3(e){return e%2===0}function d3(e,t){if(yI(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(h3(n)&&h3(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&h3(e[0])&&h3(t[0])}let p3,f3;function m3(e,t){return null!=e.getExtension(t)}function g3(e){try{if(null!=U2(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function y3(e){if(0===e)return!1;const t=U2(e);if(1!==e){if(m3(t,"EXT_color_buffer_float"))return v3(t);const e="EXT_color_buffer_half_float";if(m3(t,e)){const n=t.getExtension(e);return function(e,t){const n=X2(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,n)}return!1}if(!m3(t,"OES_texture_float"))return!1;if(!m3(t,"WEBGL_color_buffer_float"))return!1;return v3(t)}function v3(e){const t=X2(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function b3(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&pI("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend.")})}const x3=qI();function w3(){let e,t,n,r,a,i,o,s,l,c;return 2===qI().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=qI().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:c}}function k3(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=DI(t);return r.map((t,a)=>{const i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")}).join("")}function S3(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=DI(t);return r.map((t,a)=>{const i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")}).join("")}function N3(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=function(e,t){const n=e.length,r=e.map(e=>"".concat(t,"[").concat(e,"]")),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}(e.map((e,t)=>t),t);return r.map((t,a)=>{const i="int ".concat(e[a]," = ").concat(n," / ").concat(r[a]),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(r[a]):"index -= ".concat(e[a]," * ").concat(r[a]);return"".concat(i,"; ").concat(o,";")}).join("")}function T3(e){const t=DI(e).map(e=>e.toString());return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}x3.registerFlag("HAS_WEBGL",()=>x3.getNumber("WEBGL_VERSION")>0),x3.registerFlag("WEBGL_VERSION",()=>g3(2)?2:g3(1)?1:0),x3.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),x3.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===x3.get("WEBGL_VERSION")),x3.registerFlag("WEBGL_CPU_FORWARD",()=>!0),x3.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),x3.registerFlag("WEBGL_PACK",()=>x3.getBool("HAS_WEBGL")),x3.registerFlag("WEBGL_PACK_NORMALIZATION",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_PACK_CLIP",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_PACK_REDUCE",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_LAZILY_UNPACK",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_CONV_IM2COL",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>x3.getBool("WEBGL_PACK")),x3.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(e){if(null==p3){const t=U2(e);p3=t.getParameter(t.MAX_TEXTURE_SIZE)}return p3}(x3.getNumber("WEBGL_VERSION"))),x3.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(e){if(null==f3){const t=U2(e);f3=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,f3)}(x3.getNumber("WEBGL_VERSION"))),x3.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=x3.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=U2(e);return t=m3(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:m3(n,"EXT_disjoint_timer_query")?1:0,t}(e)}),x3.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>x3.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!S_()),x3.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(e){if(0===e)return!1;const t=U2(e);if(1===e){if(!m3(t,"OES_texture_float"))return!1}else if(!m3(t,"EXT_color_buffer_float"))return!1;return v3(t)}(x3.getNumber("WEBGL_VERSION"))),x3.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!x3.getBool("WEBGL_FORCE_F16_TEXTURES")&&x3.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),x3.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>y3(x3.getNumber("WEBGL_VERSION"))),x3.registerFlag("WEBGL_FENCE_API_ENABLED",()=>{return 2===(e=x3.getNumber("WEBGL_VERSION"))&&null!=U2(e).fenceSync;var e}),x3.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>x3.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),x3.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))}),x3.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>S_()?1:-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))}),x3.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),x3.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),x3.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),x3.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),x3.registerFlag("WEBGL_EXP_CONV",()=>!1),x3.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>x3.getBool("IS_TEST")),x3.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),x3.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),x3.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),x3.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);const I3="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:E3}=o;function C3(e,t,n){const r=[];if(e.forEach(e=>{const t=gI(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=z3(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(e=>{r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))});const a=r.join("\n"),i=e.map(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?O3(e,r):A3(e,r);const i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,s=E3(e.shapeInfo.logicalShape,t.logicalShape),l=L3(o),c=o-i;let u;const h=["x","y","z","w","u","v"];u=0===i?"":o<2&&s.length>=1?"coords = 0;":s.map(e=>"coords.".concat(h[e+c]," = 0;")).join("\n");let d="";d=o<2&&i>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(h[t+c])).join(", ");let p="return outputValue;";const f=1===gI(e.shapeInfo.logicalShape),m=gI(t.logicalShape),g=1===m;if(1!==i||f||g){if(f&&!g)p=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=i-2,t=i-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?p="return vec4(outputValue.x);":s.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(r,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&yI(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const c=L3(l),u=E3(e.shapeInfo.logicalShape,t.logicalShape),h=l-s;let d;const p=["x","y","z","w","u","v"];d=0===s?"":l<2&&u.length>=1?"coords = 0;":u.map(e=>"coords.".concat(p[e+h]," = 0;")).join("\n");let f="";f=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(p[t+h])).join(", ");return"\n    float ".concat(a,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(d,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)).join("\n"),o=t.texShape,s=w3(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(s);let c,u,h=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(_3,"\n    ").concat(M3,"\n    ").concat(R3,"\n  ");return t}(s);t.isPacked?(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(yI(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");const a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2);let o=i,s="",l="b, r, c";for(let c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,l="b".concat(c,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,o,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(s)):(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(yI(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=S3(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const r=k3(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=S3(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const r=k3(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=k3(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=k3(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,o,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(s)),n.packedInputs&&(h+=D3);return[h,l,u,a,c,i,n.userCode].join("\n")}function A3(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");const[a,i]=e.shapeInfo.texShape;if(1===a&&1===i)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const o=F3(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[s,l]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(l,", ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(P3(e),"\n      }\n    ");const a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=F3(n);if(1===o)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&yI(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const e=i[0],n=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}const{newShape:o,keptDims:s}=NI(n),l=o;if(l.length<n.length){const n=j3(e,l),r=["row","col"];return"\n      ".concat(A3(n,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(B3(r,s),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(P3(e),"\n      }\n    ");const c=i[0],u=i[1],h=F3(r);if(1===u)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(c,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===c)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(h,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(h,";\n    vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=NI(n),c=s;if(c.length<n.length){const n=j3(e,c),r=["row","col","depth"];return"\n        ".concat(A3(n,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(B3(r,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(P3(e),"\n      }\n    ");const u=e.shapeInfo.texShape,h=u[0],d=u[1],p=e.shapeInfo.flatOffset;if(d===i&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(d,".0, ").concat(h,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(d===o&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(d,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");const f=F3(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(h,", ").concat(d,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,{newShape:l,keptDims:c}=NI(n);if(l.length<n.length){const n=j3(e,l),r=["row","col","depth","depth2"];return"\n      ".concat(A3(n,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(B3(r,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(P3(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1],f="int stride2 = ".concat(r,"Shape[3];"),m="int stride1 = ".concat(r,"Shape[2] * stride2;"),g="int stride0 = ".concat(r,"Shape[1] * stride1;");if(p===s&&null==u)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(p===i&&null==u)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const y=F3(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(m,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,{newShape:l,keptDims:c}=NI(t);if(l.length<t.length){const t=j3(e,l),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(A3(t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(B3(n,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(P3(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];if(p===s&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===a&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=F3(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=NI(t);if(a.length<t.length){const t=j3(e,a),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(A3(t),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(B3(n,i),");\n      }\n    ")}const o=t[5],s=t[4]*o,l=t[3]*s,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(c,", ").concat(l,", ").concat(s,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(o,", 1)));\n        ").concat(P3(e),"\n      }\n    ");const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===u&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(c,", ").concat(l,", ").concat(s,", ").concat(o,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===o&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const m=F3(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(l," +\n          depth2 * ").concat(s," + depth3 * ").concat(o," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function O3(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=w3();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=w3();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");const o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],l=w3();if(null!=i&&yI(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){const r=[1,2],i=j3(e,n.slice(1)),o=["b","row","col"];return"\n        ".concat(O3(i,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(B3(o,r),");\n        }\n      ")}const s=w3();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ");const l=o[0],c=o[1],u=Math.ceil(n[2]/2),h=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(c,", ").concat(h,", ").concat(u,", b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=w3();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");const i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=l[0],u=l[1],h=Math.ceil(i[o-1]/2);let d=h*Math.ceil(i[o-2]/2),p="int b, int row, int col",f="b * ".concat(d," + (row / 2) * ").concat(h," + (col / 2)");for(let m=2;m<o-1;m++)p="int b".concat(m,", ")+p,d*=i[o-m-1],f="b".concat(m," * ").concat(d," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const _3="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",M3="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",R3="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",D3="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function F3(e){return"offset".concat(e)}function P3(e){const t=e.name,n=gI(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function L3(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function z3(e,t,n){const{newShape:r,keptDims:a}=NI(t),i=t.length,o=e&&3===i&&1===t[0],s=o?t.slice(1):r,l=!e&&i>1&&!yI(t,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?s:t,keptDims:a}}function j3(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function B3(e,t){return t.map(t=>e[t]).join(", ")}function U3(e,t,n,r){const a=n.map((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),i=a.map(e=>e.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=C3(a,o,t),l=function(e,t){const n=o3(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Y2(e,()=>e.shaderSource(n,t)),Y2(e,()=>e.compileShader(n)),qI().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw $2(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(l);return qI().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},W3(e,t,c)))}function W3(e,t,n){const r=[],a=[];let i,o,s,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),1===qI().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const h of t.variableNames){const a={name:h,uniform:e.getUniformLocation(n,h,u),offset:e.getUniformLocation(n,"offset".concat(h),u)};t.enableShapeUniforms&&(a.shape=e.getUniformLocation(n,"".concat(h,"Shape"),u),a.texShape=e.getUniformLocation(n,"".concat(h,"TexShape"),u)),r.push(a)}if(t.enableShapeUniforms&&(i=e.getUniformLocation(n,"outShape",u),s=e.getUniformLocation(n,"outShapeStrides",u),o=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const h of t.customUniforms)a.push(e.getUniformLocation(n,h.name,u));return{variablesLocations:r,customUniformLocations:a,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:s,outTexShapeLocation:o}}function V3(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((e,n)=>{const r=e.logicalShape,a=t[n],i=a.shape;if(!yI(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(e.isUniform&&a.isUniform)return;const o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!yI(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))})}function G3(e){return qI().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class H3{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=W2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=w3();this.outputShape=e,this.enableShapeUniforms=G3(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?S3(["r","c","d"],e):k3(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class K3{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=W2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=w3();this.outputShape=e,this.enableShapeUniforms=G3(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?S3(["r","c","d"],e):k3(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class q3{constructor(e){this.variableNames=["A"],this.outTexUsage=V2.DOWNLOAD;const t=w3();this.outputShape=e,this.userCode="\n      ".concat(I3,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class X3{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=V2.DOWNLOAD;const t=w3();this.outputShape=e,this.userCode="\n      ".concat(I3,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const Y3={R:0,G:1,B:2,A:3};class Z3{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=w3();this.outputShape=e,this.enableShapeUniforms=G3(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let i="";for(let o=0;o<n.length;o++){const e=n[o];i+="\n          if(offset == ".concat(o,") {\n            result = values[").concat(Y3[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":T3(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(i,"\n        }\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")}}class Q3{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=w3();this.outputShape=e,this.enableShapeUniforms=G3(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let t=0;t<=1;t++){const a=2*i+t;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(a,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(a,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(a,"] = values[2];\n            } else {\n              result[").concat(a,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":T3(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(a,";\n        }\n    ")}}function J3(e){const t=w3();return function(e,t){const n=o3(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Y2(e,()=>e.shaderSource(n,t)),Y2(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function $3(e){return function(e,t){const n=o3(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Y2(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),Y2(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function e4(e){return function(e,t){const n=o3(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Y2(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),Y2(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Uint16Array([0,1,2,2,1,3]))}function t4(e,t,n,r,a,i){!function(e,t){const n=qI().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const r="[".concat(e,"x").concat(t,"]"),a="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}(t,n);const o=function(e){return o3(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return Y2(e,()=>e.bindTexture(s,o)),Y2(e,()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Y2(e,()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Y2(e,()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)),Y2(e,()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===qI().getNumber("WEBGL_VERSION")?Y2(e,()=>e.texImage2D(s,0,r,t,n,0,a,i,null)):Y2(e,()=>e.texStorage2D(s,1,r,t,n)),Y2(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:o,texShape:[n,t]}}function n4(e){return e.internalFormatFloat}function r4(e){return e.internalFormatHalfFloat}function a4(e){return e.downloadTextureFormat}function i4(e){return e.internalFormatPackedFloat}function o4(e){return e.internalFormatPackedHalfFloat}function s4(e,t,n,r,a,i,o,s){const l=e,c=new Float32Array(function(e,t){const[n,r]=q2(e,t);return n*r*4}(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}class l4{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=qI().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){j2[e]=t}(t,e)):this.gl=U2(t),e=this.gl,2===qI().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>Y2(t,()=>t.createVertexArray()),this.bindVertexArray=e=>Y2(t,()=>t.bindVertexArray(e)),this.deleteVertexArray=e=>Y2(t,()=>t.deleteVertexArray(e)),this.getVertexArray=()=>Y2(t,()=>t.getParameter(t.VERTEX_ARRAY_BINDING))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Y2(e,()=>t.createVertexArrayOES()),this.bindVertexArray=n=>Y2(e,()=>t.bindVertexArrayOES(n)),this.deleteVertexArray=n=>Y2(e,()=>t.deleteVertexArrayOES(n)),this.getVertexArray=()=>Y2(e,()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===qI().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=Q2(this.gl,e),m3(this.gl,t))this.textureHalfFloatExtension=Q2(this.gl,t);else if(qI().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),m3(this.gl,r))this.colorBufferHalfFloatExtension=Q2(this.gl,r);else if(qI().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",m3(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!m3(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=$3(this.gl),this.indexBuffer=e4(this.gl),this.framebuffer=function(e){return o3(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=X2(this.gl,this.textureHalfFloatExtension)}get debug(){return qI().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Y2(e,()=>e.finish()),Y2(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Y2(e,()=>e.deleteFramebuffer(this.framebuffer)),Y2(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Y2(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Y2(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=H2(t,n);return t4(e,a,i,n4(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=H2(t,n);return t4(e,a,i,r4(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=H2(t,n);return t4(e,a,i,a4(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){Y2(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?2===qI().getNumber("WEBGL_VERSION")?Y2(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):Y2(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):2===qI().getNumber("WEBGL_VERSION")?Y2(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):Y2(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),Y2(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){let o,s,l;Y2(e,()=>e.bindTexture(e.TEXTURE_2D,t)),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,l=i.internalFormatPackedFloat),o.set(a),2===qI().getNumber("WEBGL_VERSION")?Y2(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)):Y2(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,o)),Y2(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=q2(t,n);return t4(e,a,i,o4(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,i]=q2(t,n);return t4(e,a,i,i4(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(a3(this.gl,this.framebuffer),this.outputTexture=null),Y2(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n,r){const[a,i]=H2(t,n),o=new Uint8Array(t*n*4);return Y2(e,()=>e.readPixels(0,0,a,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,i){return s4(this.gl,e,0,0,0,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();Y2(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r));const a=16*t*n;return Y2(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),Y2(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),Y2(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(qI().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n){const r=new Float32Array(t*n*4);return Y2(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}(this.gl,t,n))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=J3(t));const n=function(e){return o3(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}(t);Y2(t,()=>t.attachShader(n,this.vertexShader)),Y2(t,()=>t.attachShader(n,e)),function(e,t){if(Y2(e,()=>e.linkProgram(t)),!qI().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&e3(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;Y2(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),function(e,t,n){Y2(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),t3(e,t,"clipSpacePos",n,3,20,0)&&t3(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(Y2(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&e3(this.gl,this.program),Y2(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return o3(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),Y2(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),n3(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,a]=q2(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&e3(this.gl,this.program),i3(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Y2(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Y2(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Q2(this.gl,2===qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await wI(()=>this.disposed||this.isQueryAvailable(e,qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in qI().platform&&(n=qI().platform.setTimeoutCustom.bind(qI().platform)),wI(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),r3(this.gl,e,this.framebuffer),this.debug&&i3(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(r3(this.gl,this.outputTexture,this.framebuffer),this.debug&&i3(this.gl)):a3(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;r3(r,e,this.framebuffer),this.debug&&i3(r),this.outputTexture=e,Y2(r,()=>r.viewport(0,0,t,n)),Y2(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),Y2(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:c4,XI:u4,Nk:h4,f6:d4,ct:p4,YG:f4,hH:m4,z3:g4,sG:y4,uM:v4,vS:b4,qB:x4,GG:w4,rq:k4,lg:S4,WR:N4,cu:T4,GE:I4,px:E4,jC:C4,He:A4,hE:O4,BF:_4,Dk:M4,cl:R4,_B:D4,ub:F4,_f:P4,Ku:L4,qy:z4,Zy:j4,bu:B4,zv:U4,dH:W4,HS:V4,yH:G4,l3:H4,z9:K4,x6:q4,_m:X4,eW:Y4,GK:Z4,SP:Q4,yr:J4,dl:$4,Dw:e5,xT:t5,_X:n5,wz:r5}=E;function a5(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>"".concat(e,".").concat(t))}function i5(e,t){return 1===t?[e]:a5(e,t)}class o5{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=G3(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=i5("rc",this.rank),t=L3(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),a=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(a,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1");for(let t=2;t<this.rank;t++)a="".concat(e[e.length-1-t],",")+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class s5{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=G3(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?N3(["r","c","d"],"inputShape"):k3(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":T3(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class l5{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=u5(t,n),a=h5(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const i=c5(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const e=this.freeTextures[a].pop();return this.usedTextures[a].push(e),e}let o;return r===G2.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===G2.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===G2.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===G2.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===G2.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const a=u5(n,r),i=h5(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);const o=c5(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=qI().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const l=this.usedTextures[i],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function c5(e,t,n,r,a){const i=function(e,t){switch(e){case G2.PACKED_2X2_FLOAT32:return i4(t);case G2.PACKED_2X2_FLOAT16:return o4(t);case G2.UNPACKED_FLOAT32:return n4(t);case G2.UNPACKED_FLOAT16:return r4(t);case G2.PACKED_4X1_UNSIGNED_BYTE:return a4(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);let o;if(a){const[t,n]=q2(e[0],e[1]);o=t*n}else{const[t,n]=H2(e[0],e[1]);o=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,i);return o*s}function u5(e,t){if(e===V2.UPLOAD)return G2.PACKED_2X2_FLOAT32;if(e===V2.RENDER||null==e)return function(e){return qI().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?G2.PACKED_2X2_FLOAT32:G2.UNPACKED_FLOAT32:e?G2.PACKED_2X2_FLOAT16:G2.UNPACKED_FLOAT16}(t);if(e===V2.DOWNLOAD||e===V2.PIXELS)return G2.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function h5(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class d5{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=G3(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const p5="if (isnan(x)) return x;",f5="return abs(x);";const m5=p5+"\n  return (x < 0.0) ? 0.0 : x;\n",g5=p5+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",y5="return x;";class v5{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=G3(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class b5{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=G3(this.outputShape.length);const t=e.length,n=i5("rc",t),r=L3(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),o=t<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(a,");\n\n        setOutput(getChannel(packedInput, ").concat(o,"));\n      }\n    ")}}const x5=mz,w5={};const k5=qI().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class S5 extends sI{nextDataId(){return S5.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!qI().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof l4)t=e;else{const n=U2(qI().getNumber("WEBGL_VERSION"),e);t=new l4(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=U2(qI().getNumber("WEBGL_VERSION"));t=new l4(e),this.binaryCache=((n=qI().getNumber("WEBGL_VERSION"))in w5||(w5[n]={}),w5[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new l5(this.gpgpu),this.numMBBeforeWarning=null==qI().global.screen?1024:qI().global.screen.height*qI().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new oI(this,z_())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,a,i){const o=this.makeTensorInfo(t,n),s=this.texData.get(o.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,a]},s.texShape=[r,a];const l=u3(t),c=new Z3(l,!1,i),u=this.runWebGLProgram(c,[o],n,[[r,a]]);return u.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(o),u.dataId}write(e,t,n){if((qI().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||qI().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:V2.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,a){if(qI().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:V2.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:i,shape:o,isPacked:s}=t;if(null!=i){let t;t=s?new v5(o,y5):new d5(o,y5);const n=this.runWebGLProgram(t,[{dataId:e,shape:o,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let c,u;if(l&&(c=PO()),"complex64"===r){u=fB(this.readSync(a.real.dataId),this.readSync(a.imag.dataId))}else u=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=PO()-c),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}const t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:i,complexTensorInfos:o,isPacked:s}=t;if(null!=a){let t;t=s?new v5(r,y5):new d5(r,y5);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:i}],i),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(qI().getBool("DEBUG")&&!qI().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===qI().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,u=null;if("complex64"!==i&&qI().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...K2(r))}if(this.pendingRead.set(e,[]),"complex64"!==i&&await this.gpgpu.createAndWaitForFence(),"complex64"===i){const e=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]);c=fB(e[0],e[1])}else if(null==u)c=this.getValuesFromTexture(e);else{const e=gI(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){const e=this.gpgpu.gl;Y2(e,()=>e.deleteBuffer(u))}const h=this.convertAndCacheOnCPU(e,c),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(e=>e(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&z_().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:o,isPacked:s,texture:l}=n;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){let n;n=s?new v5(a,y5):new d5(a,y5);const r=this.runWebGLProgram(n,[{dataId:e,shape:a,dtype:o}],o),i=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),i}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,t.customTexShape),u=z_().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:u},h.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>zO(e));return XM(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return XM(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!Z2(n)){if(qI().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=gI(t);if(qI().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...K2(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(n),i}const i=qI().getBool("WEBGL_PACK")&&!0===r,o=i?u3(t):t,s=i?new X3(o):new q3(o),l=this.runWebGLProgram(s,[{shape:o,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const a=BO(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),i=BO(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(a);o.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),o.getExtraProfileInfo=()=>e.map((e,t)=>({name:i[t],ms:e})).map(e=>"".concat(e.name,": ").concat(e.ms)).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:PO(),endMs:null}}endTimer(e){return qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=PO(),e)}async getQueryTime(e){if(qI().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:i,slice:o}=this.texData.get(e),s=o&&o.origDataId||e,l=this.dataRefCount.get(s);l>1?this.dataRefCount.set(s,l-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k5;return qI().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&gI(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){cO("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return x5(e.shape,t)}packedUnaryOp(e,t,n){const r=new v5(e.shape,t),a=this.compileAndRun(r,[e],n);return z_().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=W4(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(qI().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,f5,e.dtype);const t=new d5(e.shape,f5),n=this.compileAndRun(t,[e]);return z_().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&AI(n[0])){const a=n.map(e=>LO(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return z_().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new b5(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new o5(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[l3(e.shape),...c3(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[l3(t),...c3(t)],i=new s5(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:a,dtype:i}=n;if(null!=t){pI(gI(a)<=t[0]*t[1]*4,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=u3(a);let s;s=r?new K3(o):new H3(o);const l=[null!=t?t:K2(o)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(s,[{shape:o,dtype:i,dataId:e}],i,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;const o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===W2.DENSE){const t=null!=i?i:K2(e.outputShape);s.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===gI(o.shape))return s.values=TI(o.dtype,0),o;const l=[],c=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&gI(t.shape)<=qI().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!d3(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(o.dataId);const u={shape:o.shape,texData:s,isUniform:!1},h=function(e,t,n){let r="";t.concat(n).forEach(t=>{const a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const i=t.texData.texShape,{useSqueezeShape:o,uniformShape:s,keptDims:l}=z3(e.packedInputs,t.shape,i);let c="",u="",h="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];c="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=DI(s);h="".concat(e[0]===i[1],"_").concat(e[e.length-1]===i[1])}}else u="".concat(s[0]>1,"_").concat(s[1]>1);const d=t.shape.length,p=2===s.length&&yI(t.shape,i),f=1===gI(t.shape),m=xR(t.shape,n.shape),g=!e.packedInputs&&d===n.shape.length&&yI(i,n.texData.texShape),y=e.packedInputs||s.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(d,"_").concat(g,"_").concat(o?l:"","_").concat(s.length,"_").concat(f,"_").concat(m,"_").concat(p,"_").concat(c,"_").concat(u,"_").concat(h,"_").concat(y,"_").concat(a)}else{const e=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(e,"_").concat(a)}});const a=e.userCode;let i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(qI().getNumber("WEBGL_VERSION")),i}(e,c,u),d=this.getAndSaveBinary(h,()=>U3(this.gpgpu,e,c,u)),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),qI().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(V3(t.inShapeInfos,n),V3([t.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===qI().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const r=n[l],{uniform:a,offset:i,shape:o,texShape:s}=t.variablesLocations[l];if(o){const{uniformShape:n}=z3(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(o,new Int32Array(n));break;case 2:e.gl.uniform2iv(o,new Int32Array(n));break;case 3:e.gl.uniform3iv(o,new Int32Array(n));break;case 4:e.gl.uniform4iv(o,new Int32Array(n))}}if(s&&e.gl.uniform2i(s,r.texData.texShape[0],r.texData.texShape[1]),null!=a)if(r.isUniform)if(gI(r.shape)<2)e.gl.uniform1f(a,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(a,t)}else null!=r.texData.slice&&null!=i&&e.gl.uniform1i(i,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,a,l)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=DI(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],r=t.customUniformLocations[l],i=a[l];if("float"===n.type)e.gl.uniform1fv(r,i);else if("vec2"===n.type)e.gl.uniform2fv(r,i);else if("vec3"===n.type)e.gl.uniform3fv(r,i);else if("vec4"===n.type)e.gl.uniform4fv(r,i);else if("int"===n.type)e.gl.uniform1iv(r,i);else if("ivec2"===n.type)e.gl.uniform2iv(r,i);else if("ivec3"===n.type)e.gl.uniform3iv(r,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(r,i)}}e.executeProgram()}(this.gpgpu,d,c,u,r),l.forEach(e=>this.disposeIntermediateTensorInfo(e)),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=qI().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=PO();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!qI().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===a){const e=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),e}return o}compileAndRun(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!qI().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=B_(()=>{if(!qI().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=qI().getBool("DEBUG");qI().set("DEBUG",!1);const t=this.abs(oR(1e-8)).dataSync()[0];if(qI().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:i,usage:o,isPacked:s}=t;if(null!=i)return;const l=null!=this.activeTimers;let c;l&&(c=PO());let u=t.texShape;if(null==u&&(u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=qI().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=qI().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&qI().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((t,n)=>n>=e.length-2?hI(e[n]):e[n])).length&&(e=[2,e[0]])),2!==e.length){const t=NI(e);e=t.newShape}let a=gI(e),i=null;e.length<=1&&a<=n?i=[1,a]:2===e.length&&e[0]<=n&&e[1]<=n?i=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);const o=null!=i&&Math.max(...i)>r&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(null==i||o)if(t){const t=l3(e);let n=2,r=2;e.length&&([n,r]=c3(e)),a=t*(n/2)*(r/2),i=bI(a).map(e=>2*e)}else i=bI(a);return i}(n,s),t.texShape=u),null!=a){const e=u3(n);let i,o=u[1],h=u[0];const d=a instanceof Uint8Array||a instanceof Uint8ClampedArray;!s&&d||([o,h]=q2(u[0],u[1])),i=s?new Q3(e,d):new Z3(e,d);const p=d?[h,o]:u,f=this.makeTensorInfo(p,r),m=this.texData.get(f.dataId);m.usage=d?V2.PIXELS:V2.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),o,h,a);const g=[[h,o]],y=!0,v=this.runWebGLProgram(i,[f],r,g,y),b=this.texData.get(v.dataId);t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,qI().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=b.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=PO()-c)}else{const e=this.acquireTexture(u,o,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*CI(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise(e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}});e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Vj(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw $2(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:a,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:s}=W3(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=a,e.outShapeLocation=i,e.outShapeStridesLocation=o,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:a,width:i,channels:o}=e,s=z_().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=s.writeTexture(r,t,n,a,i,o);return z_().makeTensorFromDataId(l,t,n,s)}}S5.nextDataId=0;N_()&&G_("webgl",()=>new S5,2);const N5="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class T5{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=kR(t,n),this.enableShapeUniforms=G3(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const I5="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class E5{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=kR(t,n);const a=this.outputShape.length;this.enableShapeUniforms=G3(a);let i="";if(r)if(0===a||1===gI(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=L3(a);if(i="\n          ".concat(e," coords = getOutputCoords();\n        "),1===a)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=i5("coords",a);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(e[a-2]," + 1) >= outShape[").concat(a," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[a-1]," + 1) >= outShape[").concat(a," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(e[a-2]," + 1) >= ").concat(this.outputShape[a-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[a-1]," + 1) >= ").concat(this.outputShape[a-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}}function C5(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const A5={kernelName:pC,backendName:"webgl",kernelFunc:C5};function O5(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=C5({inputs:{x:r},backend:n}),l=C5({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:l},i}const _5={kernelName:NE,backendName:"webgl",kernelFunc:O5},M5="return (a < 0.) ? b * a : a;",R5="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const D5={kernelName:bC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r,o=n.makeTensorInfo([],"float32",DO(i,"float32")),s=qI().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new E5(R5,a.shape,o.shape):new T5(M5,a.shape,o.shape),l=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),l}},F5="return (a < 0.) ? b * a : a;",P5="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const L5={kernelName:eA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t,i=qI().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new E5(P5,r.shape,a.shape):new T5(F5,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}},z5="if (isnan(x)) return x;";function j5(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:a}=e;return e=>{let{inputs:i,backend:o}=e;const{x:s}=i,l=o,c=a||s.dtype;if(l.shouldExecuteOnCPU([s])&&null!=r){const e=l.texData.get(s.dataId),t=r(e.values,c);return l.makeTensorInfo(s.shape,c,t)}let u;return u=qI().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new v5(s.shape,n):new d5(s.shape,t),l.runWebGLProgram(u,[s],c)}}function B5(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:a=!1,cpuKernelImpl:i,dtype:o}=e;return e=>{let{inputs:s,backend:l}=e;const{a:c,b:u}=s,h=l;if(a&&"complex64"===c.dtype){const e=h.texData.get(c.dataId),n=h.texData.get(u.dataId),[r,a]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(e=>{const[n,r]=e,a={dataId:n.dataId,dtype:n.dtype,shape:c.shape},i={dataId:r.dataId,dtype:r.dtype,shape:u.shape},o=new T5(t,c.shape,u.shape);return h.runWebGLProgram(o,[a,i],l_(n.dtype,r.dtype))}),i=O5({inputs:{real:r,imag:a},backend:h});return h.disposeIntermediateTensorInfo(r),h.disposeIntermediateTensorInfo(a),i}const d=o||l_(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||h.shouldExecuteOnCPU([c,u]))&&null!=i){const e=h.texData.get(c.dataId).values,t=h.texData.get(u.dataId).values,n="string"===c.dtype?XB(e):e,r="string"===c.dtype?XB(t):t,[a,o]=i(c.shape,u.shape,n,r,d),s=h.makeTensorInfo(o,d);return h.texData.get(s.dataId).values=a,s}let p;return p=qI().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new E5(n,c.shape,u.shape,r):new T5(t,c.shape,u.shape),h.runWebGLProgram(p,[c,u],d)}}function U5(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":m5;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":g5;if("prelu"===e)return t?P5:F5;if("leakyrelu"===e)return t?R5:M5;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class W5{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=G3(this.outputShape.length);const c=r?e[1]:e[2],u=Math.ceil(c/2),h=r?"i * 2, rc.y":"rc.y, i * 2",d=a?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";o&&(m=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(o,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(o,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(o,"\n        }"),g="result = activation(result);");const y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";e[0]<t[0]?v="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(b="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(v,";\n        int batchB = ").concat(b,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}const V5="return areal * breal - aimag * bimag;",G5="return areal * bimag + aimag * breal;";class H5{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=kR(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const K5="return a * b;";function q5(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,i=l_(r.dtype,a.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),i=new H5(V5,r.shape,a.shape),o=new H5(G5,r.shape,a.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:a.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:a.shape}],l=n.runWebGLProgram(i,s,"float32"),c=n.runWebGLProgram(o,s,"float32"),u=O5({inputs:{real:l,imag:c},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}if(n.shouldExecuteOnCPU([r,a])){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),[o,s]=_4(r.shape,a.shape,e.values,t.values,i),l=n.makeTensorInfo(s,i);return n.texData.get(l.dataId).values=o,l}let o;return o=qI().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new E5(K5,r.shape,a.shape):new T5(K5,r.shape,a.shape),n.runWebGLProgram(o,[r,a],i)}const X5={kernelName:VC,backendName:"webgl",kernelFunc:q5};function Y5(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,o=n,s=gI(a.shape),l=kI(i,s),c=gI(l);pI(s===c,()=>"The new shape (".concat(l,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements.");const u=o.texData.get(a.dataId);return!u.isPacked||d3(a.shape,l)||null!==u.texture&&d3(u.shape,l)?(o.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype}):function(e,t,n){const r=[l3(e.shape),...c3(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[l3(t),...c3(t)],o=new s5(i,r),s=[r],l=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(a,l,o)}const Z5={kernelName:cA,backendName:"webgl",kernelFunc:Y5};class Q5{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];const o=4*Math.floor(n/4),s=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l="sumValue += dot(values * ".concat(vI(e)?e.toPrecision(2):e,", ones);")}let c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(o,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(o,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class J5{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");let l="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const c=4*Math.floor(n/4),u=n%4;let h="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(s,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===t?(o="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(o="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";a%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(o,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(o,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}}function $5(e,t,n,r){const a=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=Jj(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let i=e;for(let o=0;o<a.length;o++){const{inSize:s,windowSize:l,outSize:c}=a[o];let u,h;u="mean"===n?0===o?new Q5({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c},s):new Q5({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c}):new J5({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c},n),h=i,i=r.runWebGLProgram(u,[i],t),h.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(h)}return i}class e6{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[t[i]];this.outputShape=n,this.rank=n.length;const r=L3(this.rank),a=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(a,"));\n    }\n    ")}}class t6{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const r=L3(this.rank),a=a5("rc",this.rank),i=new Array(this.rank);for(let c=0;c<t.length;c++)i[t[c]]=a[c];const o="vec2(".concat(i.slice(-2).join(),")"),s="++".concat(a[this.rank-1]," < ").concat(n[this.rank-1]),l="getChannel(getA(".concat(i.join(),"), ").concat(o,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(s,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(a[this.rank-1],";\n      if(++").concat(a[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(s,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function n6(e,t,n){const r=qI().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t6(e.shape,t):new e6(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function r6(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;return function(e,t,n,r){const a=t,i=e.shape.length,o=SI(a,e.shape);let s=o;const l=qF(s,i),c=null!=l;let u=e;c&&(u=n6(e,l,r),s=YF(s.length,i)),KF("sum",s,i);const[h,d]=GF(u.shape,s);let p=h;n&&(p=HF(h,o));const f=gI(d),m=Y5({inputs:{x:u},attrs:{shape:[gI(e.shape)/f,f]},backend:r}),g=$5(m,c_(e.dtype),"sum",r),y=Y5({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(u),y}(a,i,o,n)}const a6={kernelName:OA,backendName:"webgl",kernelFunc:r6};function i6(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:i}=r,o=n,s=a.shape.length,l=new Array(s);for(let u=0;u<l.length;u++)l[u]=a.shape[i[u]];let c;if(o.shouldExecuteOnCPU([a])){const e=o.texData.get(a.dataId).values,t=n5(e,a.shape,a.dtype,i,l);c=o.makeTensorInfo(l,a.dtype);o.texData.get(c.dataId).values=t}else c=n6(a,i,o);return c}const o6={kernelName:JA,backendName:"webgl",kernelFunc:i6};function s6(e){let{a:t,b:n,transposeA:r,transposeB:a,backend:i,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:l=0,activation:c=null}=e;const u=t.shape.length,h=n.shape.length,d=r?t.shape[u-2]:t.shape[u-1],p=a?n.shape[h-1]:n.shape[h-2],f=r?t.shape[u-1]:t.shape[u-2],m=a?n.shape[h-2]:n.shape[h-1],g=t.shape.slice(0,-2),y=n.shape.slice(0,-2),v=gI(g),b=gI(y),x=kR(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);pI(d===p,()=>"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(p,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match."));const w=r?[v,d,f]:[v,f,d],k=a?[b,m,p]:[b,p,m],S=Y5({inputs:{x:t},backend:i,attrs:{shape:w}}),N=Y5({inputs:{x:n},backend:i,attrs:{shape:k}}),T=[S,N],I=Math.max(v,b),E=r?S.shape[1]:S.shape[2],C=null!=o,A=null!=s,O="leakyrelu"===c,_=null!=c?U5(c,!0):null;let M;if((1===f||1===m)&&E>1e3&&!1===(C||A||O||null!=_)){let e=S,t=N;r&&(e=i6({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),T.push(e)),a&&(t=i6({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),T.push(t));const n=1===m;let o=e;1!==m&&(o=Y5({inputs:{x:e},backend:i,attrs:{shape:[I,E,1]}}),T.push(o));const s=1===m?2:1;let l=t;n&&(l=Y5({inputs:{x:t},backend:i,attrs:{shape:[I,1,E]}}),T.push(l));const c=q5({inputs:{a:o,b:l},backend:i});M=r6({inputs:{x:c},backend:i,attrs:{axis:s,keepDims:!0}}),T.push(c)}else{const e=l_(t.dtype,n.dtype),c=new W5(w,k,[I,f,m],r,a,C,_,A,O),u=[S,N];if(null!=o&&u.push(o),A&&u.push(s),O){const e=i.makeTensorInfo([],"float32",DO(l,"float32"));u.push(e),T.push(e)}M=i.runWebGLProgram(c,u,e)}const R=Y5({inputs:{x:M},backend:i,attrs:{shape:x}});T.push(M);for(const D of T)i.disposeIntermediateTensorInfo(D);return R}const l6={kernelName:oO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:i,bias:o,preluActivationWeights:s}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;return s6({a:a,b:i,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:h,activation:u})}},c6="return abs(x);";const u6={kernelName:JI,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=W4(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let a;return a=qI().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new v5(r.shape,c6):new d5(r.shape,c6),n.runWebGLProgram(a,[r],r.dtype)}},h6=j5({opSnippet:p5+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),d6={kernelName:$I,backendName:"webgl",kernelFunc:h6},p6=j5({opSnippet:p5+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),f6={kernelName:eE,backendName:"webgl",kernelFunc:p6},m6="return a + b;",g6=B5({opSnippet:m6,packedOpSnippet:m6,supportsComplex:!0,cpuKernelImpl:c4}),y6={kernelName:tE,backendName:"webgl",kernelFunc:g6};class v6{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))});const r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}class b6{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))});const r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}const x6={kernelName:nE,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,a=n;if(1===a.length)return C5({inputs:{x:a[0]},backend:r});if(a.length>qI().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(a.length/2),n=e({inputs:a.slice(0,t),backend:r}),i=e({inputs:a.slice(t),backend:r});return e({inputs:[n,i],backend:r})}const i=a.map(e=>e.dtype).reduce((e,t)=>l_(e,t)),o=a.map(e=>e.shape),s=qI().getBool("WEBGL_PACK")?new b6(a[0].shape,o):new v6(a[0].shape,o);return r.runWebGLProgram(s,a,i)}};const w6={kernelName:rE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r,s=a.shape.length,l=SI(i,a.shape);let c=l;const u=qF(c,s);let h=a;null!=u&&(h=i6({inputs:{x:a},backend:n,attrs:{perm:u}}),c=YF(c.length,s)),KF("all",c,s);const[d,p]=GF(h.shape,c),f=Y5({inputs:{x:h},backend:n,attrs:{shape:[-1,gI(p)]}}),m=$5(f,f.dtype,"all",n);let g;if(o){g=Y5({inputs:{x:m},backend:n,attrs:{shape:HF(d,l)}})}else g=Y5({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}};const k6={kernelName:aE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r,s=a.shape.length,l=SI(i,a.shape);let c=l;const u=qF(c,s);let h=a;null!=u&&(h=i6({inputs:{x:a},backend:n,attrs:{perm:u}}),c=YF(c.length,s)),KF("any",c,s);const[d,p]=GF(h.shape,c),f=Y5({inputs:{x:h},backend:n,attrs:{shape:[-1,gI(p)]}}),m=$5(f,f.dtype,"any",n);let g;if(o){g=Y5({inputs:{x:m},backend:n,attrs:{shape:HF(d,l)}})}else g=Y5({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}};class S6{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:a,outSize:i}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];const o="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(o," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class N6{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,pI(e.length>2,()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2."));const a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");const o=this.outputShape,s=o.length,l=L3(s),c=i5("coords",s);let u,h;if(1===i){h=s+1;const e=L3(h);u="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[s-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[s-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[s-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[s-2],";")}else h=s,u="\n        ".concat(l," sourceLocR = coords;\n        ++").concat(c[s-1],";\n        ").concat(l," sourceLocG = coords;\n        ++").concat(c[s-2],";\n        ").concat(l," sourceLocA = coords;\n        --").concat(c[s-1],";\n        ").concat(l," sourceLocB = coords;\n        --").concat(c[s-2],";");const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map(e=>"int "+e),m=i5("sourceLocR",h-1).concat("inIdx.r"),g=i5("sourceLocG",h-1).concat("inIdx.g"),y=i5("sourceLocB",h-1).concat("inIdx.b"),v=i5("sourceLocA",h-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),")));"),w="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(v.join(),") : 0.)"),k=r?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(d.join(),"),\n                                          vec2(").concat(d.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(d.join(),"),\n                               vec2(").concat(d.slice(-2).join(),"));\n      }\n      ").concat(k,"\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        bool hasNextCol = ").concat(c[s-1]," < ").concat(o[s-1]-1,";\n        bool hasNextRow = ").concat(c[s-2]," < ").concat(o[s-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(x,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(b,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function T6(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);const o=Jj(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},l=new S6(s,n,null==r),c=[t];null!=r&&c.push(r);const u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const h=T6(e,t,n,u);return e.disposeIntermediateTensorInfo(u),h}function I6(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const a=null!=r?r.shape:t.shape,i=Jj(a[a.length-1]),o=new N6(a,i,n,null==r),s=null==r?[t]:[t,r],l=e.runWebGLProgram(o,s,"int32");if(l.shape.length===t.shape.length){const r=I6(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function E6(e,t,n,r){const a=[n];if(KF("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!qI().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],i=e.texData.get(t.dataId);let o=t;null!==i&&i.isPacked&&(o=e.unpackTensor(t),n.push(o));const[s,l]=GF(o.shape,a),c=gI(l),u=Y5({inputs:{x:o},backend:e,attrs:{shape:[-1,c]}});n.push(u);const h=T6(e,u,r);n.push(h);const d=Y5({inputs:{x:h},backend:e,attrs:{shape:s}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),d}return I6(e,t,r)}const C6={kernelName:iE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;let o=SI(i,a.shape);const s=qF(o,a.shape.length);let l=a;const c=[];null!=s&&(l=i6({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(l),o=YF(o.length,l.shape.length)),KF("argMax",[o[0]],l.shape.length);const u=E6(n,l,o[0],"max");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}};const A6={kernelName:oE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;let o=SI(i,a.shape);const s=qF(o,a.shape.length);let l=a;const c=[];null!=s&&(l=i6({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(l),o=YF(o.length,l.shape.length)),KF("argMin",[o[0]],l.shape.length);const u=E6(n,l,o[0],"min");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}},O6=j5({opSnippet:p5+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),_6={kernelName:sE,backendName:"webgl",kernelFunc:O6},M6=j5({opSnippet:p5+"return log(x + sqrt(x * x + 1.0));"}),R6={kernelName:lE,backendName:"webgl",kernelFunc:M6},D6=j5({opSnippet:p5+"\n  return atan(x);\n"}),F6={kernelName:cE,backendName:"webgl",kernelFunc:D6},P6=B5({opSnippet:N5+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+I5+"\n  return result;\n"}),L6={kernelName:hE,backendName:"webgl",kernelFunc:P6},z6=j5({opSnippet:p5+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),j6={kernelName:uE,backendName:"webgl",kernelFunc:z6};class B6{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(o,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?a?m:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let v="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(v="avgValue / max(count, 1.0)");const b=4*Math.floor(i/4),x=i%4,w="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(b,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(w,"\n          }\n\n          int xC = xCCorner + ").concat(b,";\n          if (").concat(1===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(2===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(3===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(w,"\n          }\n        }\n        setOutput(").concat(v,");\n      }\n    ")}}class U6{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideDepth,s=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let b="0.0";if(v||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(o,", ").concat(s,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?a?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let x="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / max(count, 1.0)");const w=4*Math.floor(i/4),k=i%4,S="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(o,", ").concat(s,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(S,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(2===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(3===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(S,"\n            }\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}}const W6={kernelName:dE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;b3(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r;pI(GD(o,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'"));const c=DD(a.shape,i,o,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&yI(c.inShape,c.outShape))return C5({inputs:{x:a},backend:n});const u=new B6(c,"avg",!1);return n.runWebGLProgram(u,[a],"float32")}};const V6={kernelName:fE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:c}=r,u=FD(a.shape,i,o,[1,1,1],s,l,c),h=new U6(u,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}};class G6{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.top,u=l-1-e.padInfo.left,h=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(u,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(o,") {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class H6{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=h-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(a,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const K6={kernelName:mE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,o=i,{filterSize:s,strides:l,pad:c,dimRoundingMode:u}=r,h=FD(o.shape,s,l,[1,1,1],c,u),d=new H6(h);return n.runWebGLProgram(d,[a],o.dtype)}};const q6={kernelName:pE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,o=i;b3([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,u=DD(o.shape,s,l,1,c),h=new G6(u);return n.runWebGLProgram(h,[a],o.dtype)}};const X6={kernelName:gE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:i}=t,{transposeA:o,transposeB:s}=r;return s6({a:a,b:i,transposeA:o,transposeB:s,backend:n})}};class Y6{constructor(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],kR(e,t),kR(e,n);let o="0.0";null!=r&&(kR(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="1.0";null!=a&&(kR(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(o,";\n        float scale = ").concat(s,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class Z6{constructor(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],kR(e,t),kR(e,n);let o="vec4(0.0)";null!=r&&(kR(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=a&&(kR(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(o,";\n        vec4 scale = ").concat(s,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const Q6={kernelName:lC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,mean:i,variance:o,offset:s,scale:l}=t;pI(i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),pI(null==s||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),pI(null==l||i.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=[a,i,o];let h=null;null!=s&&(h=s.shape,u.push(s));let d=null;null!=l&&(d=l.shape,u.push(l));const p=qI().getBool("WEBGL_PACK_NORMALIZATION")?new Z6(a.shape,i.shape,o.shape,h,d,c):new Y6(a.shape,i.shape,o.shape,h,d,c);return n.runWebGLProgram(p,u,u[0].dtype)}};class J6{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=L3(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return $6.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let r;const a=e.map((e,t)=>"sourceLoc.".concat($6[t]," = start[").concat(t,"] + coords.").concat($6[t],";"));r="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(a.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const $6=["x","y","z","w","u","v"];class e7{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=L3(this.rank),n=i5("coords",this.rank),r=i5("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),i="getChannel(getSource(".concat(r.join(),"), ").concat(a,")"),o="\n      result.x = ".concat(i,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(r[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map((e,t)=>"start[".concat(t,"]")).join(),");"):e.map((e,t)=>"".concat(r[t]," = ").concat(n[t]," + start[").concat(t,"];")).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(o,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")}}function t7(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:o}=r,[s,l]=vD(a,i,o);if(aD(a,s,l),0===gI(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){const e=n.texData.get(a.dataId),t=V4(e.values,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,t)}const{isPacked:c}=n.texData.get(a.dataId),u=gD(a.shape,s,l);if(c||!u){const e=qI().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new e7(l):new J6(l),t=[s];return n.runWebGLProgram(e,[a],a.dtype,t)}return n.uploadToGPU(a.dataId),function(e,t,n,r){const a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;let s=yD(t,DI(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}(a,s,l,n)}const n7={kernelName:SA,backendName:"webgl",kernelFunc:t7},r7={kernelName:yE,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:o}=r;pI(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((e,t)=>e*t),l=eB(a.shape,i,s),c=tB(l.length,i.length),u=nB(a.shape,i,s),h=rB(o,i.length),d=aB(u,o,i.length),p=[],f=Y5({inputs:{x:a},backend:n,attrs:{shape:l}}),m=i6({inputs:{x:f},backend:n,attrs:{perm:c}}),g=Y5({inputs:{x:m},backend:n,attrs:{shape:u}}),y=t7({inputs:{x:g},backend:n,attrs:{begin:h,size:d}});return p.push(f),p.push(m),p.push(g),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}};const a7={kernelName:vE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:o}=r,s=n.readSync(a.dataId),l=n.readSync(i.dataId),c=u4(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};const i7={kernelName:bE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,i=qI().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=qI().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||1===o){const e=n.texData.get(r.dataId).values,t=n.texData.get(a.dataId).values,[i,o]=d4(r.shape,a.shape,e,t,r.dtype),s=n.makeTensorInfo(o,r.dtype);return n.texData.get(s.dataId).values=i,s}let s;return s=i?new E5("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,a.shape,!1):new T5("\n  return float(int(a.r) & int(b.r));\n",r.shape,a.shape),n.runWebGLProgram(s,[r,a],r.dtype)}};const o7={kernelName:xE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=kR(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},s7=B5({opSnippet:"return float(a != b);",cpuKernelImpl:R4,dtype:"bool"}),l7={kernelName:HC,backendName:"webgl",kernelFunc:s7};function c7(e){const{inputs:t,backend:n}=e,{input:r}=t;return C5({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const u7={kernelName:oA,backendName:"webgl",kernelFunc:c7};const h7={kernelName:wE,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:a}=t,{x:i}=n,{dtype:o}=a;if("complex64"===o){if("complex64"===i.dtype)return C5({inputs:{x:i},backend:r});const t=zP(i.shape),n=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),a=O5({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),a}if("complex64"===i.dtype){const t=c7({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(t),n}if(!EI(i.dtype,o)){const e=C5({inputs:{x:i},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:o}}if(r.shouldExecuteOnCPU([i])){const e=r.texData.get(i.dataId).values,[t,n,a]=p4(e,i.shape,i.dtype,o);return r.makeTensorInfo(t,n,a)}if("int32"===o)return function(e,t){const n=new d5(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){const e=r.makeTensorInfo([],"bool",TI("bool",1)),t=s7({inputs:{a:i,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},d7="return ceil(x);",p7=j5({opSnippet:d7,packedOpSnippet:d7,cpuKernelImpl:f4}),f7={kernelName:kE,backendName:"webgl",kernelFunc:p7};class m7{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class g7{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const y7={kernelName:SE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:i,clipValueMax:o}=r;let s;s=qI().getBool("WEBGL_PACK_CLIP")?new g7(a.shape):new m7(a.shape);const l=[[i],[o]];return n.runWebGLProgram(s,[a],a.dtype,l)}};class v7{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function b7(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const x7={kernelName:TE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),i=new v7(r.shape),o=[b7(r,a.complexTensorInfos.real),b7(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}};class w7{constructor(e){this.outputShape=[],this.outputShape=Hj(e,1),this.variableNames=e.map((e,t)=>"T".concat(t));const t=new Array(e.length-1);t[0]=e[0][1];for(let i=1;i<t.length;i++)t[i]=t[i-1]+e[i][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let i=1;i<t.length;i++){const e=t[i-1];n.push("else if (yC < ".concat(t[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(e,"));"))}const r=t.length,a=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(a,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class k7{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Hj(e,t);const n=this.outputShape,r=n.length,a=L3(r),i=i5("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>"T".concat(t));const s=new Array(e.length-1);s[0]=e[0][t];for(let f=1;f<s.length;f++)s[f]=s[f-1]+e[f][t];const l=o[t],c=o.slice(-2),u=o.join();let h="if (".concat(l," < ").concat(s[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(c.join(),"));\n        }");for(let f=1;f<s.length;f++){const e=s[f-1];h+="\n        if (".concat(l," < ").concat(s[f],"  && ").concat(l," >= ").concat(s[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(S7(o,l,e),"),\n            vec2(").concat(S7(c,l,e),"));\n        }")}const d=s.length,p=s[s.length-1];h+="\n        return getChannel(\n          getT".concat(d,"(").concat(S7(o,l,p),"),\n          vec2(").concat(S7(c,l,p),"));"),this.userCode="\n      float getValue(".concat(o.map(e=>"int "+e),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(a," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," + 1;\n        if (").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-2]," = ").concat(i[r-2]," + 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," - 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2]," &&\n            ").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}}function S7(e,t,n){const r=e.indexOf(t);return e.map((e,t)=>t===r?"".concat(e," - ").concat(n):e).join()}function N7(e){const{inputs:t,backend:n}=e,{input:r}=t;return C5({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const T7={kernelName:mC,backendName:"webgl",kernelFunc:N7};function I7(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map(e=>c7({inputs:{input:e},backend:n})),a=e.map(e=>N7({inputs:{input:e},backend:n})),i=I7(r,t,n),o=I7(a,t,n),s=O5({inputs:{real:i,imag:o},backend:n});return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),a.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),s}let a=n.shouldExecuteOnCPU(e);if("string"===r&&(a=!0),a){const a=e.map(e=>{const r=gI(e.shape.slice(t));return Y5({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})}),i=a.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),o=Hj(a.map(e=>e.shape),1),s=1===a[0].shape[0],l=m4(i,o,r,s),c=Hj(e.map(e=>e.shape),t),u=n.makeTensorInfo(c,r,l);return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}const i=e.filter(e=>gI(e.shape)>0),o=qI().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(1===i.length){const t=o?new d5(e[0].shape,y5):new v5(e[0].shape,y5);return n.runWebGLProgram(t,e,r)}const s=qI().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>s){const e=[];for(let a=0;a<i.length;a+=s){const r=i.slice(a,a+s);e.push(I7(r,t,n))}const r=I7(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(o){const e=new k7(i.map(e=>e.shape),t);return n.runWebGLProgram(e,i,r)}const{tensors2D:l,outShape:c}=function(e,t,n){const r=Hj(e.map(e=>e.shape),t),a=e.map(e=>Y5({inputs:{x:e},attrs:{shape:[-1,gI(e.shape.slice(t))]},backend:n}));return{tensors2D:a,outShape:r}}(i,t,n),u=new w7(l.map(e=>e.shape)),h=n.runWebGLProgram(u,l,r);l.forEach(e=>n.disposeIntermediateTensorInfo(e));const d=Y5({inputs:{x:h},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(h),d}function E7(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=SI(a,t[0].shape)[0];Gj(t.map(e=>e.shape),i);const o=Hj(t.map(e=>e.shape),i);if(0===gI(o))return n.makeTensorInfo(o,t[0].dtype,[]);const s=t.filter(e=>gI(e.shape)>0);return 1===s.length?C5({inputs:{x:s[0]},backend:n}):I7(s,i,n)}const C7={kernelName:IE,backendName:"webgl",kernelFunc:E7};class A7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,o=e.padInfo.left,s=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,v=m?3:1;let b="",x="";n&&(b=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),x="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(v,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}}class O7{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(a,", ").concat(i,", ").concat(o,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class _7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=G3(this.outputShape.length);const i=e.padInfo.left,o=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<c;m++)h+="\n           vec4 xTexelC".concat(2*m,";\n           int xTexelC").concat(2*m,"Ready;\n           vec4 xTexelC").concat(2*m+1,";\n           int xTexelC").concat(2*m+1,"Ready;\n           vec4 xC").concat(m,";");h+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let m=0;m<c;m++)h+="\n           xTexelC".concat(2*m," = vec4(0.0);\n           xTexelC").concat(2*m,"Ready = 0;\n           xTexelC").concat(2*m+1," = vec4(0.0);\n           xTexelC").concat(2*m+1,"Ready = 0;\n           xC").concat(m," = vec4(0.0);");h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(u+1)/2;m++){const t=2*m;if(h+="\n           xC = xCCorner + ".concat(t*s,";\n           "),1===o){if(t<c&&(i%2===1?(h+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),h+=1===s&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):h+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<c)){const e=i%2===0?hI(s):s;s%2===0&&i%2===1||s%2!==0&&i%2!==1?(h+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),h+=s>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):h+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<c&&(i%2===1?(h+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<c&&(h+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(h+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<c&&(h+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<c&&(h+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<c&&(h+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let d="",p="";n&&(d=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):a?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(d,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(h,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}}class M7{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=G3(this.outputShape.length);const{dataFormat:n}=t,r=w3(),a="channelsLast"===n,i=a?1:2,o=a?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let l="";for(let c=0;c<=1;c++)for(let e=0;e<=1;e++)l+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(s,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(o,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(a,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(r.output," = result;\n      }\n    ")}}function R7(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function D7(e){let{x:t,filter:n,convInfo:r,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}=e;const c=t.shape,u=a.texData.get(t.dataId),h=r.inChannels,d=c[0]*c[1]*c[2],p=r.outChannels,f="channelsLast"===r.dataFormat,m=!1;let g;const y=[];if(null!=o){const e=R7(o.shape,f);null!=e&&(o=Y5({inputs:{x:o},backend:a,attrs:{shape:e}}),y.push(o))}if(null!=i){const e=R7(i.shape,f);null!=e&&(i=Y5({inputs:{x:i},backend:a,attrs:{shape:e}}),y.push(i))}if(!((1===d||1===p)&&h>1e3)&&u.isPacked&&f&&null!=u.texture&&c[2]%2!==0&&yI(u.shape.slice(-3),c.slice(-3))){const e=c[0]*c[1]*(c[2]+1),h={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},d=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,pI(d3(u.shape,h.shape),()=>"packed reshape ".concat(u.shape," to ").concat(h.shape," isn't free"));const p=Y5({inputs:{x:n},backend:a,attrs:{shape:[1,r.inChannels,r.outChannels]}});y.push(p);const f=s6({a:h,b:p,backend:a,transposeA:false,transposeB:m,bias:i,activation:l,preluActivationWeights:o,leakyreluAlpha:s}),v=a.texData.get(f.dataId);pI(v.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=d,v.shape=r.outShape,g=C5({inputs:{x:f},backend:a}),g.shape=r.outShape,y.push(f)}else{const e=r.outHeight*r.outWidth,c=Y5({inputs:{x:t},backend:a,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),u=Y5({inputs:{x:n},backend:a,attrs:{shape:[1,r.inChannels,r.outChannels]}}),h=s6({a:f?c:u,b:f?u:c,transposeA:!f,transposeB:m,backend:a,bias:i,activation:l,preluActivationWeights:o,leakyreluAlpha:s});g=Y5({inputs:{x:h},backend:a,attrs:{shape:r.outShape}}),y.push(c),y.push(u),y.push(h)}for(const v of y)a.disposeIntermediateTensorInfo(v);return g}function F7(e){let{x:t,filter:n,convInfo:r,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}=e;const{filterWidth:c,filterHeight:u,inChannels:h,outWidth:d,outHeight:p,dataFormat:f}=r,m="channelsLast"===f,g=c*u*h,y=p*d,v=[r.batchSize,g,y],b=[];if(null!=o){const e=R7(o.shape,m);null!=e&&(o=Y5({inputs:{x:o},backend:a,attrs:{shape:e}}),b.push(o))}if(null!=i){const e=R7(i.shape,m);null!=e&&(i=Y5({inputs:{x:i},backend:a,attrs:{shape:e}}),b.push(i))}const x=Y5({inputs:{x:n},backend:a,attrs:{shape:[1,g,gI(n.shape)/g]}});b.push(x);const w=new M7(v,r),k=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],S=a.runWebGLProgram(w,[t],"float32",k),N=Y5({inputs:{x:S},backend:a,attrs:{shape:v}});b.push(S),b.push(N);const T=null!=i,I=null!=o,E="leakyrelu"===l,C=l?U5(l,!0):null,A=new W5(m?N.shape:x.shape,m?x.shape:N.shape,m?[r.batchSize,y,r.outChannels]:[r.batchSize,r.outChannels,y],!0,!1,T,C,I,E),O=m?[N,x]:[x,N];if(i&&O.push(i),I&&O.push(o),E){const e=a.makeTensorInfo([],"float32",DO(s,"float32"));O.push(e),b.push(e)}const _=a.runWebGLProgram(A,O,"float32"),M=Y5({inputs:{x:_},backend:a,attrs:{shape:r.outShape}});b.push(_);for(const R of b)a.disposeIntermediateTensorInfo(R);return M}const P7={kernelName:EE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dataFormat:l,dilations:c,dimRoundingMode:u}=r,h=KD(l),d=PD(a.shape,i.shape,o,c,s,u,!1,h);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(d.strideWidth<=2&&"channelsLast"===h&&qI().getBool("WEBGL_EXP_CONV")){const e=new _7(d),t=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];p=n.runWebGLProgram(e,[a,i],"float32",t)}else if(qI().getBool("WEBGL_CONV_IM2COL"))p=F7({x:a,filter:i,convInfo:d,backend:n});else{const e=new A7(d);p=n.runWebGLProgram(e,[a,i],"float32")}else p=D7({x:a,filter:i,convInfo:d,backend:n});const f=Y5({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class L7{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(i?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class z7{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=i?1:2,c=i?2:3,u=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class j7{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(a,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class B7{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(a,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const U7={kernelName:CE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,h=KD(l),d=PD(a.shape,u,o,1,s,c,!1,h),p=new L7(d);return n.runWebGLProgram(p,[a,i],"float32")}};class W7{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=G3(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,a=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const V7={kernelName:AE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:o,strides:s,pad:l,dataFormat:c,dimRoundingMode:u}=r,h=KD(c),d=PD(o,i.shape,s,1,l,u,!1,h);if(qI().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){const e=[[d.strideHeight,d.strideWidth]],t=new W7(d);return n.runWebGLProgram(t,[a,i],"float32",e)}{const e=new z7(d);return n.runWebGLProgram(e,[a,i],"float32")}}};const G7={kernelName:OE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dilations:l}=r,c=LD(a.shape,i.shape,o,l,s),u=new O7(c);return n.runWebGLProgram(u,[a,i],"float32")}};const H7={kernelName:_E,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,pad:s,filterShape:l}=r,c=LD(a.shape,l,o,1,s),u=new j7(c);return n.runWebGLProgram(u,[a,i],"float32")}};const K7={kernelName:ME,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:o,strides:s,inputShape:l}=r,c=LD(l,i.shape,s,1,o),u=new B7(c);return n.runWebGLProgram(u,[a,i],"float32")}},q7=j5({opSnippet:z5+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(I5,"\n  return result;\n")}),X7={kernelName:RE,backendName:"webgl",kernelFunc:q7},Y7=j5({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Z7={kernelName:DE,backendName:"webgl",kernelFunc:Y7};class Q7{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,o,s,l]=e,[c]=t,[u,h]=n;this.outputShape=[c,u,h,l];const d="bilinear"===r?1:0,[p,f]=["".concat(o-1,".0"),"".concat(s-1,".0")],[m,g,y]=u>1?["".concat((o-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[v,b,x]=h>1?["".concat((s-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(v,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(i,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(b,";\n\n        float in_y = ").concat(y,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n        float in_x = ").concat(x,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(d," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const J7={kernelName:LE,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:o}=t,{cropSize:s,method:l,extrapolationValue:c}=r,u=new Q7(a.shape,i.shape,s,l,c);return n.runWebGLProgram(u,[a,i,o],"float32")}};var $7;!function(e){e.Prod="*",e.Sum="+"}($7||($7={}));class e8{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,i=this.op===$7.Prod?"1.0":"0.0",o=n?i:"getX(".concat(t8(a,"coords",this.op),")"),s=this.outputShape[this.outputShape.length-1];let l="",c="";n?(l=r?"end != ".concat(s-1):"end != 0",c=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(s):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(L3(a)," coords = getOutputCoords();\n        int end = ").concat(n8(a,"coords",this.op),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(n8(a,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(t8(a,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function t8(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function n8(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function r8(e,t,n,r,a,i){const o=t.shape.length,s=qF([r],o);let l=t;null!=s&&(l=i6({inputs:{x:t},backend:n,attrs:{perm:s}}));const c=YF(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));const u=l.shape[c];let h=C5({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const t=new e8(e,l.shape,!1,i),r=[[d]],a=h;h=n.runWebGLProgram(t,[h],h.dtype,r),n.disposeIntermediateTensorInfo(a)}if(a){const t=new e8(e,l.shape,a,i),r=h;h=n.runWebGLProgram(t,[h],h.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=i6({inputs:{x:h},backend:n,attrs:{perm:XF(s)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),e}return h}const a8={kernelName:FE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:o,reverse:s}=r;return r8($7.Prod,a,n,i,o,s)}};const i8={kernelName:PE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:o,reverse:s}=r;return r8($7.Sum,a,n,i,o,s)}};const o8={kernelName:zE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:o,binaryOutput:s}=r;if(1===a.shape.length){const e=n.readSync(a.dataId),t=n.readSync(i.dataId),r=u4(e,t,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,r)}if(2===a.shape.length){const e=n.bufferSync(a),t=n.bufferSync(i),r=h4(e,t,o,s);return n.makeTensorInfo(r.shape,i.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};class s8{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const l8={kernelName:jE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:o}=r,s=a.shape[0],l=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,u=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),h=new s8("NHWC"===o?[s,l,c,u]:[s,u,l,c],i,o);return n.runWebGLProgram(h,[a],a.dtype)}};class c8{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=G3(this.outputShape.length);const i=e.filterHeight,o=e.filterWidth,s=e.outChannels/e.inChannels;let l="",c="";n&&(l=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),c="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}}class u8{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=G3(this.outputShape.length);const i=e.outChannels/e.inChannels,o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,h=u;let d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)d+="\n          vec4 xTexelC".concat(2*g,";\n          int xTexelC").concat(2*g,"Ready;\n          vec4 xTexelC").concat(2*g+1,";\n          int xTexelC").concat(2*g+1,"Ready;\n          vec4 xC").concat(g,";");d+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(let g=0;g<u;g++)d+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(h+1)/2;g++){const e=2*g;if(d+="\n          xC = xCCorner + ".concat(e*l,";\n          "),1===s){if(e<u&&(o%2===1?(d+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),d+=1===l&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):d+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<u)){const t=o%2===0?hI(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(d+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),d+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):d+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<u&&(o%2===1?(d+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<u&&(d+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(d+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<u&&(d+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<u&&(d+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<u&&(d+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}d+="\n    }\n  ",d+="\n      }\n    ";let p="",f="";n&&(p=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(d,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(m,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}const h8={kernelName:BE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dilations:l,dimRoundingMode:c}=r;let u=l;null==u&&(u=[1,1]),pI(GD(o,u),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(u,"'"));const h=PD(a.shape,i.shape,o,u,s,c,!0);let d;d=qI().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new u8(h):new c8(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",p)}};class d8{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class p8{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const f8={kernelName:UE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,dilations:s,pad:l,dimRoundingMode:c,filterShape:u}=r,h=PD(a.shape,u,o,s,l,c,!0),d=new d8(h);return n.runWebGLProgram(d,[a,i],"float32")}};const m8={kernelName:WE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:o,dilations:s,pad:l,dimRoundingMode:c,inputShape:u}=r,h=PD(u,i.shape,o,s,l,c,!0),d=new p8(h);return n.runWebGLProgram(d,[a,i],"float32")}};class g8{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const y8={kernelName:VE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],i=gI(r.shape),o=Y5({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new g8(i),l=n.runWebGLProgram(s,[o],o.dtype),c=Y5({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}};class v8{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:i,filterHeight:o,filterWidth:s,dilationHeight:l,dilationWidth:c}=e,{top:u,left:h}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(a,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(o,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const b8={kernelName:GE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dilations:l}=r,c=RD(a.shape,i.shape,o,s,"NHWC",l);let u;const h=new v8(c);u=n.runWebGLProgram(h,[a,i],"float32");const d=Y5({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),d}};const x8={kernelName:YE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:o,summedDims:s,idDims:l}=IB(a,i.length);CB(o.length,l,i);const{path:c,steps:u}=AB(s,l),h=u.length;let d=null,p=o.length;const f=[];for(let m=0;m<h;++m){for(const e of u[m]){const{permutationIndices:t,expandDims:r}=EB(p,l[e]);let a;OB(t)?a=i[e]:(a=i6({inputs:{x:i[e]},backend:n,attrs:{perm:t}}),f.push(a));const o=a.shape.slice();for(let e=0;e<r.length;++e)o.splice(r[e],0,1);yI(a.shape,o)||(a=Y5({inputs:{x:a},backend:n,attrs:{shape:o}}),f.push(a)),null===d?d=a:(d=q5({inputs:{a:a,b:d},backend:n}),f.push(d))}m<h-1&&(c[m]>=0&&(d=r6({inputs:{x:d},backend:n,attrs:{axis:c[m]-(o.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}},w8=j5({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),k8={kernelName:ZE,backendName:"webgl",kernelFunc:w8},S8={kernelName:QE,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:a}=t,i=qI().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new E5("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new T5("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},N8=B5({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:g4}),T8={kernelName:$E,backendName:"webgl",kernelFunc:N8},I8=j5({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(lB,";\n  float a1 = ").concat(cB,";\n  float a2 = ").concat(uB,";\n  float a3 = ").concat(hB,";\n  float a4 = ").concat(dB,";\n  float a5 = ").concat(pB,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),E8={kernelName:JE,backendName:"webgl",kernelFunc:I8},C8=j5({opSnippet:z5+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:y4,dtype:"float32"}),A8={kernelName:eC,backendName:"webgl",kernelFunc:C8};function O8(e){const{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:i}=t,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(pI(-(o+1)<=a,()=>"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")),l=o+a+1),s.splice(l,0,1),Y5({inputs:{x:i},backend:r,attrs:{shape:s}})}const _8={kernelName:tC,backendName:"webgl",kernelFunc:O8},M8="return exp(x) - 1.0;",R8=j5({opSnippet:M8,packedOpSnippet:M8,cpuKernelImpl:v4}),D8={kernelName:nC,backendName:"webgl",kernelFunc:R8};class F8{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const a=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),i=n?"".concat(r,".0"):"1.0";let o;if("real"===e)o="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(a,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(i,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function P8(e,t,n){const r=n.texData.get(e.dataId),a=gI(e.shape),i=e.shape[e.shape.length-1],o=Y5({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,l=new F8("real",s,t),c=new F8("imag",s,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],h=n.runWebGLProgram(l,u,"float32"),d=n.runWebGLProgram(c,u,"float32"),p=O5({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const f=Y5({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),f}const L8={kernelName:rC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return P8(r,!1,n)}};class z8{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function j8(e){const{backend:t,attrs:n}=e,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||_I(a),"string"===i){const e=II(i,gI(r));return e.fill(a),t.makeTensorInfo(r,i,e)}{const e=new z8(r,a),n=[[a]];return t.runWebGLProgram(e,[],i,n)}}const B8={kernelName:aC,backendName:"webgl",kernelFunc:j8};class U8{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const W8={kernelName:iC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,a=n,i=new U8(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},V8="return floor(x);",G8=j5({opSnippet:V8,packedOpSnippet:V8,cpuKernelImpl:b4}),H8={kernelName:oC,backendName:"webgl",kernelFunc:G8},K8=B5({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),q8={kernelName:sC,backendName:"webgl",kernelFunc:K8};class X8{constructor(e){this.variableNames=["A"];const t=w3(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class Y8{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=w3(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const Z8={kernelName:aO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:a}=t;const{numChannels:i}=r,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,[l,c]=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=[c,l],h=[c,l,i];if(s||o){const e=qI().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Q8&&e===J8||(J8=e,Q8=document.createElement("canvas").getContext("2d",{willReadFrequently:J8})),Q8.canvas.width=l,Q8.canvas.height=c,Q8.drawImage(a,0,0,l,c),a=Q8.canvas}const d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=V2.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);const p=qI().getBool("WEBGL_PACK")?new Y8(h):new X8(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let Q8,J8=qI().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const $8={kernelName:sO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:o,preluActivationWeights:s}=t,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=KD(u),g=PD(a.shape,i.shape,l,h,c,d,!1,m);let y;const v=[],b=null!=o,x=null!=s,w="leakyrelu"===p,k=()=>{const e=[a,i],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=Y5({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(b&&e.push(t(o,u)),x&&e.push(t(s,u)),w){const t=n.makeTensorInfo([],"float32",DO(f,"float32"));e.push(t),v.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&qI().getBool("WEBGL_EXP_CONV")){const e=p?U5(p,!0):null,t=new _7(g,b,e,x,w),r=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],a=k();y=n.runWebGLProgram(t,a,"float32",r)}else if(qI().getBool("WEBGL_CONV_IM2COL"))y=F7({x:a,filter:i,convInfo:g,backend:n,bias:o,activation:p,preluActivationWeights:s,leakyreluAlpha:f});else{const e=p?U5(p,!1):null,t=new A7(g,b,e,x,w),r=k();y=n.runWebGLProgram(t,r,"float32")}else y=D7({x:a,filter:i,convInfo:g,backend:n,bias:o,activation:p,preluActivationWeights:s,leakyreluAlpha:f});const S=Y5({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach(e=>n.disposeIntermediateTensorInfo(e)),S}};const e9={kernelName:lO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:o,preluActivationWeights:s}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=[];let m=u;null==m&&(m=[1,1]),pI(GD(l,m),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(m,"'"));const g=PD(a.shape,i.shape,l,m,c,h,!0),y=qI().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=d?U5(d,y):null,b=[a,i],x=null!=o,w=null!=s,k="leakyrelu"===d;if(x&&b.push(o),w&&b.push(s),k){const e=n.makeTensorInfo([],"float32",DO(p,"float32"));b.push(e),f.push(e)}let S;S=y?new u8(g,x,v,w,k):new c8(g,x,v,w,k);const N=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=n.runWebGLProgram(S,b,"float32",N);return f.forEach(e=>n.disposeIntermediateTensorInfo(e)),T}};class t9{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const a=L3(n.length);let i="\n    int index;";for(let o=0;o<this.sliceDim;o++)i+="\n          index = round(getIndices(coords[0], ".concat(o,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[o],";\n          flattenIndex += index * ").concat(this.strides[o],";");this.userCode="\n         void main() {\n          ".concat(a," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const n9={kernelName:uC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=a.shape,o=i[i.length-1],s=gI(r.shape),[l,c,u,h]=iB(r,a),d=Y5({inputs:{x:a},backend:n,attrs:{shape:[c,o]}}),p=Y5({inputs:{x:r},backend:n,attrs:{shape:[gI(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){const e=n.readSync(a.dataId),t=n.bufferSync(r),i=x4(e,t,r.dtype,c,o,u,h,r.shape,s);return n.makeTensorInfo(l,r.dtype,i.values)}const f=new t9(o,h,[c,u],r.shape),m=n.runWebGLProgram(f,[p,d],p.dtype),g=Y5({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};class r9{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=L3(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push("".concat(t[r]));return n.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}}function a9(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:o,batchDims:s}=r,l=SI(o,a.shape)[0];if(qI().get("DEBUG")){const e=n.readSync(i.dataId),t=a.shape[l];for(let n=0;n<e.length;++n){const r=e[n];pI(r<=t-1&&r>=0,()=>"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]"))}}const c=qB(a,i,l,s),u=gI(i.shape),h=[],d=Y5({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=Y5({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(d),h.push(p);const f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){const e=n.bufferSync(p),t=n.bufferSync(d),r=w4(t,e,f);return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const m=new r9(d.shape,f),g=n.runWebGLProgram(m,[d,p],d.dtype);h.push(g);const y=Y5({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}const i9={kernelName:cC,backendName:"webgl",kernelFunc:a9},o9=B5({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:k4,dtype:"bool"}),s9={kernelName:hC,backendName:"webgl",kernelFunc:o9},l9=B5({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:S4}),c9={kernelName:dC,backendName:"webgl",kernelFunc:l9};const u9={kernelName:fC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return P8(r,!0,n)}},h9=j5({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),d9={kernelName:gC,backendName:"webgl",kernelFunc:h9},p9=j5({opSnippet:"return float(isinf(x));",dtype:"bool"}),f9={kernelName:yC,backendName:"webgl",kernelFunc:p9},m9=j5({opSnippet:"return float(isnan(x));",dtype:"bool"}),g9={kernelName:vC,backendName:"webgl",kernelFunc:m9},y9=B5({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:N4,dtype:"bool"}),v9={kernelName:xC,backendName:"webgl",kernelFunc:y9},b9=B5({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:T4,dtype:"bool"}),x9={kernelName:wC,backendName:"webgl",kernelFunc:b9};const w9={kernelName:kC,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,o=I4(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},k9=j5({opSnippet:z5+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:E4}),S9={kernelName:SC,backendName:"webgl",kernelFunc:k9},N9=j5({opSnippet:z5+"\n  return log(1.0 + x);\n"}),T9={kernelName:NC,backendName:"webgl",kernelFunc:N9},I9=B5({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),E9={kernelName:TC,backendName:"webgl",kernelFunc:I9},C9=j5({opSnippet:"return float(!(x >= 1.0));"}),A9={kernelName:IC,backendName:"webgl",kernelFunc:C9},O9=B5({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),_9={kernelName:EC,backendName:"webgl",kernelFunc:O9};class M9{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];const i=t,o=e[3]-1;let s;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");s=.5===a?"inversesqrt(".concat(l,")"):1===a?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(i,"; j <= ").concat(i,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(o,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(s,";\n        setOutput(val);\n      }\n    ")}}class R9{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=t,o=e[3]-1;let s;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");s=.5===a?"inversesqrt(".concat(l,")"):1===a?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(i,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(i,"; j <= ").concat(i,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(o,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(s,";\n        setOutput(result);\n      }\n    ")}}const D9={kernelName:CC,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:o,alpha:s,beta:l}=r,c=qI().getBool("WEBGL_PACK_NORMALIZATION")?new R9(a.shape,i,o,s,l):new M9(a.shape,i,o,s,l);return n.runWebGLProgram(c,[a],a.dtype)}};class F9{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(a,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(a,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const P9={kernelName:AC,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:o}=t,{depthRadius:s,bias:l,alpha:c,beta:u}=r,h=new F9(a.shape,s,l,c,u);return n.runWebGLProgram(h,[a,i,o],a.dtype)}};function L9(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:o}=r,s=a.shape.length,l=SI(i,a.shape);let c=l;const u=qF(c,s),h=null!=u,d=n.shouldExecuteOnCPU([a]);let p=a;if(h){if(d){const e=n.texData.get(p.dataId).values,t=new Array(s);for(let n=0;n<t.length;n++)t[n]=a.shape[u[n]];const r=n5(e,a.shape,a.dtype,u,t);p=n.makeTensorInfo(t,a.dtype);n.texData.get(p.dataId).values=r}else p=n6(a,u,n);c=YF(c.length,s)}KF("max",c,s);const[f,m]=GF(p.shape,c);let g,y=f;if(o&&(y=HF(f,l)),d){const e=n.texData.get(p.dataId).values,t=C4(e,gI(m),y,a.dtype);g=n.makeTensorInfo(y,a.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const a=gI(t),i=Y5({inputs:{x:e},attrs:{shape:[gI(e.shape)/a,a]},backend:r}),o=$5(i,e.dtype,"max",r),s=Y5({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(p,m,y,n);return h&&n.disposeIntermediateTensorInfo(p),g}const z9={kernelName:OC,backendName:"webgl",kernelFunc:L9},j9=B5({opSnippet:N5+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+I5+"\n  return result;\n",cpuKernelImpl:A4}),B9={kernelName:_C,backendName:"webgl",kernelFunc:j9};const U9={kernelName:MC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;b3(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r;pI(GD(o,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'"));const c=DD(a.shape,i,o,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&yI(c.inShape,c.outShape))return C5({inputs:{x:a},backend:n});const u=new B6(c,"max",!1);return n.runWebGLProgram(u,[a],a.dtype)}};const W9={kernelName:DC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:o,pad:s,dataFormat:l,dimRoundingMode:c}=r,u=FD(a.shape,i,o,[1,1,1],s,c,l),h=new U6(u,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}};class V9{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,s=i-1-e.padInfo.left,l=a*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(a,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class G9{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=s-1-e.padInfo.front,h=l-1-e.padInfo.top,d=c-1-e.padInfo.left,p=s*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(h,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(a,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(o,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const H9={kernelName:FC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,o=i,{filterSize:s,strides:l,pad:c,dimRoundingMode:u}=r,h=FD(o.shape,s,l,[1,1,1],c,u),d=new U6(h,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),f=new G9(h),m=n.runWebGLProgram(f,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}};const K9={kernelName:RC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:o}=t,s=i;b3([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=DD(s.shape,l,c,1,u,h),p=new B6(d,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),m=new V9(d),g=n.runWebGLProgram(m,[a,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}};const q9={kernelName:PC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,{filterSize:i,strides:o,pad:s,includeBatchInIndex:l}=n,c=r;pI(4===a.shape.length,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,"."));const u=[1,1];pI(GD(o,u),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(u,"'"));const h=DD(a.shape,i,o,u,s),[d,p]=function(e,t,n,r){let a=new B6(n,"max",!1);const i=r.runWebGLProgram(a,[e],"float32");return a=new B6(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,l,h,c);return[d,p]}};const X9={kernelName:LC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,{keepDims:i,axis:o}=n,s=r,l=a.shape.length,c=SI(o,a.shape);let u=c;const h=qF(u,l),d=null!=h,p=s.shouldExecuteOnCPU([a]),f=[];let m=a;if(d){if(p){const e=s.texData.get(m.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=a.shape[h[r]];const n=n5(e,a.shape,a.dtype,h,t);m=s.makeTensorInfo(t,a.dtype);s.texData.get(m.dataId).values=n}else m=n6(a,h,s);f.push(m),u=YF(u.length,l)}KF("sum",u,l);const[g,y]=GF(m.shape,u);let v=g;i&&(v=HF(g,c));const b=function(e,t,n,r){const a=gI(t),i=Y5({inputs:{x:e},attrs:{shape:[gI(e.shape)/a,a]},backend:r}),o=$5(i,"float32","mean",r),s=Y5({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(m,y,v,s);for(const x of f)s.disposeIntermediateTensorInfo(x);return b}};const Y9={kernelName:zC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r,s=a.shape.length,l=SI(i,a.shape);let c=l;const u=qF(c,s);let h=a;null!=u&&(h=i6({inputs:{x:a},backend:n,attrs:{perm:u}}),c=YF(c.length,a.shape.length)),KF("min",c,s);const[d,p]=GF(h.shape,c),f=Y5({inputs:{x:h},backend:n,attrs:{shape:[-1,gI(p)]}}),m=$5(f,f.dtype,"min",n);let g;if(o){g=Y5({inputs:{x:m},backend:n,attrs:{shape:HF(d,l)}})}else g=Y5({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(h),g}},Z9=B5({opSnippet:N5+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+I5+"\n  return result;\n",cpuKernelImpl:O4}),Q9={kernelName:jC,backendName:"webgl",kernelFunc:Z9};class J9{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=L3(r),i=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?"\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(o,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(a," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(o,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class $9{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=L3(r),i=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=i5("rc",r),l=i5("source",r),c="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),h="reflect"===n?0:1;let d="";if(1===r){const e="\n        ".concat(a," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");d="\n        ".concat(a," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ")}else{const e="\n        ".concat(a," source = rc;\n        ").concat(a," lt = ").concat(a,"(lessThan(source, start));\n        ").concat(a," gte = ").concat(a,"(greaterThanEqual(source, end));\n        ").concat(a," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");d="\n        ".concat(a," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(s[r-2]," += 1;\n        if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          ").concat(s[r-1]," += 1;\n          if(").concat(c,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(o,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")}}const eee={kernelName:BC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a}=t,{paddings:i,mode:o}=r,s=qI().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $9(a.shape,i,o):new J9(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},tee=B5({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+I5+"\n  return result;\n"}),nee={kernelName:UC,backendName:"webgl",kernelFunc:tee};class ree{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const aee=B5({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),iee={kernelName:XE,backendName:"webgl",kernelFunc:aee},oee="return a - b;",see=B5({opSnippet:oee,packedOpSnippet:oee,supportsComplex:!0,cpuKernelImpl:$4}),lee={kernelName:KA,backendName:"webgl",kernelFunc:see};function cee(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,o=SI([i],a.shape),s=L9({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=HF(s.shape,o),c=Y5({inputs:{x:s},backend:n,attrs:{shape:l}}),u=see({inputs:{a:a,b:c},backend:n}),h=C8({inputs:{x:u},backend:n}),d=r6({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:!1}}),p=Y5({inputs:{x:d},backend:n,attrs:{shape:l}}),f=aee({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}const uee={kernelName:RA,backendName:"webgl",kernelFunc:cee};const hee={kernelName:WC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:o,normalized:s}=r,l=s?a:cee({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=l.shape[0],u=l.shape[1],h=new ree(c,u,i),d=[[o]],p=n.runWebGLProgram(h,[l],"int32",d);return s||n.disposeIntermediateTensorInfo(l),p}},dee=p5+"\n  return -x;\n";const pee={kernelName:GC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,a]=M4(e.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,t)}let a;return a=qI().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new v5(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new d5(r.shape,dee),n.runWebGLProgram(a,[r],r.dtype)}},fee=Zz;const mee={kernelName:KC,backendName:"webgl",kernelFunc:function(e){cO("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,c=n.readSync(a.dataId),u=n.readSync(i.dataId),{selectedIndices:h}=fee(c,u,o,s,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},gee=Qz;const yee={kernelName:qC,backendName:"webgl",kernelFunc:function(e){cO("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(a.dataId),h=n.readSync(i.dataId),{selectedIndices:d,validOutputs:p}=gee(u,h,o,s,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},vee=Jz;const bee={kernelName:XC,backendName:"webgl",kernelFunc:function(e){cO("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(a.dataId),h=n.readSync(i.dataId),d=o,p=s,f=l,m=c,{selectedIndices:g,selectedScores:y}=vee(u,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class xee{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const wee={kernelName:ZC,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:o,onValue:s,offValue:l}=r,c=gI(a.shape),u=new xee(c,o,s,l),h=Y5({inputs:{x:a},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(u,[h],i);n.disposeIntermediateTensorInfo(h);const p=Y5({inputs:{x:d},backend:n,attrs:{shape:[...a.shape,o]}});return n.disposeIntermediateTensorInfo(d),p}};function kee(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=c7({inputs:{input:r},backend:n}),t=kee({inputs:{x:e},backend:n}),a=N7({inputs:{input:r},backend:n}),i=kee({inputs:{x:a},backend:n}),o=O5({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),o}return j8({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const See={kernelName:nO,backendName:"webgl",kernelFunc:kee};const Nee={kernelName:YC,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){const t=c7({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),i=N7({inputs:{input:a},backend:r}),o=kee({inputs:{x:i},backend:r}),s=O5({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}return j8({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};const Tee={kernelName:QC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return O8({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const i=t[0].shape,o=t[0].dtype;t.forEach(e=>{fI(i,e.shape,"All tensors passed to stack must have matching shapes"),pI(o===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=E7({inputs:t.map(e=>{const t=O8({inputs:{input:e},backend:n,attrs:{dim:a}});return s.push(t),t}),backend:n,attrs:{axis:a}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}};class Iee{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=L3(r),i=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(o,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(a," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(o,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class Eee{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=L3(r),i=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=i5("rc",r),l=i5("source",r),c="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),h=["".concat(a," rc = outputLoc;"),"".concat(s[r-1]," += 1;\n       if(").concat(c,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(s[r-2]," += 1;\n       if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(s[r-1]," += 1;\n         if(").concat(c,") {")],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+="\n        ".concat(h[f],"\n        if (").concat(d,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(a," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ");p+=1===r?"} ":"}}",this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(o,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const Cee=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:o}=r;if(0===gI(a.shape)){const e=i.map((e,t)=>e[0]+a.shape[t]+e[1]);return j8({backend:n,attrs:{shape:e,value:o,dtype:a.dtype}})}const s=qI().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Eee(a.shape,i,o):new Iee(a.shape,i,o),l=[[o]];return n.runWebGLProgram(s,[a],a.dtype,l)},Aee={kernelName:JC,backendName:"webgl",kernelFunc:Cee},Oee=B5({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+I5+"\n  return result;\n"}),_ee={kernelName:$C,backendName:"webgl",kernelFunc:Oee};const Mee={kernelName:tA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r,s=a.shape.length,l=[],c=SI(i,a.shape);let u=c;const h=qF(u,s);let d,p=a;if(null!=h&&(p=i6({inputs:{x:a},backend:n,attrs:{perm:h}}),u=YF(u.length,s),l.push(p)),KF("prod",u,s),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:a}=D4(p.shape,p.dtype,e,u);d=n.makeTensorInfo(r,a,t)}else{const[e,t]=GF(p.shape,u),r=gI(t),i=Y5({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),o=$5(i,c_(a.dtype),"prod",n);d=Y5({inputs:{x:o},backend:n,attrs:{shape:e}}),l.push(i),l.push(o)}if(o){l.push(d);const e=HF(d.shape,c);d=Y5({inputs:{x:d},backend:n,attrs:{shape:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}};const Ree={kernelName:nA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=t,{outputRaggedRank:s}=r,l=a.map(e=>n.readSync(e.dataId)),c=a.map(e=>e.shape),u=n.readSync(i.dataId),h=n.readSync(o.dataId),[d,p,f]=F4(l,c,u,i.shape,i.dtype,h,o.shape,s),m=d.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(f,i.dtype,p);return m.concat([g])}};const Dee={kernelName:rA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=P4(o,r.shape,r.dtype,s,a.shape,l,i.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};const Fee={kernelName:aA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,c=n.readSync(a.dataId),u=n.readSync(i.dataId),h=n.readSync(o.dataId),d=s.map(e=>n.readSync(e.dataId)),p=s.map(e=>e.shape),[f,m]=L4(c,a.shape,u,i.shape,i.dtype,h,o.shape,d,p,l);return n.makeTensorInfo(f,i.dtype,m)}},Pee=e=>{const{backend:t,attrs:n}=e,{start:r,stop:a,step:i,dtype:o}=n,s=z4(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},Lee={kernelName:iA,backendName:"webgl",kernelFunc:Pee},zee=j5({opSnippet:"return 1.0 / x;"}),jee={kernelName:sA,backendName:"webgl",kernelFunc:zee},Bee=j5({opSnippet:p5+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Uee={kernelName:lA,backendName:"webgl",kernelFunc:Bee},Wee=j5({opSnippet:p5+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Vee={kernelName:fA,backendName:"webgl",kernelFunc:Wee};class Gee{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[i,o,s,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?o-1:o,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(o,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class Hee{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,s,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?o-1:o,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(o,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const Kee={kernelName:dA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,c]=s,u=qI().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Hee(a.shape,l,c,i,o):new Gee(a.shape,l,c,i,o);return n.runWebGLProgram(u,[a],"float32")}};class qee{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,i,o]=e,s=[n&&i>1?r-1:r,n&&o>1?a-1:a],l=[n&&i>1?i-1:i,n&&o>1?o-1:o],c=s[0]/l[0],u=s[1]/l[1],h=1/c,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(o,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(a-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const Xee={kernelName:pA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:o}=r,s=new qee(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}};class Yee{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[i,o,s,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?o-1:o,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(o,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class Zee{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,s,l]=e;this.outputShape=[i,t,n,l];const c=[r&&t>1?o-1:o,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(o,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const Qee={kernelName:uA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,c]=s,u=qI().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Zee(a.shape,l,c,i,o):new Yee(a.shape,l,c,i,o);return n.runWebGLProgram(u,[a],a.dtype)}};class Jee{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,i,o]=e,s=[n&&i>1?r-1:r,n&&o>1?a-1:a],l=[n&&i>1?i-1:i,n&&o>1?o-1:o],c=s[0]/l[0],u=s[1]/l[1],h=1/c,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(o,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(s[0],") *\n                (float(dyR) / float(").concat(l[0],"));\n\n            float sourceFracCol =\n                float(").concat(s[1],") *\n                  (float(dyC) / float(").concat(l[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const $ee={kernelName:hA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:o}=r,s=new Jee(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}};class ete{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const r=e.map((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(r)).join(","),a=L3(n);this.userCode="\n      void main() {\n        ".concat(a," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}class tte{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const r=i5("rc",n),a="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),i="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),o=L3(n);function s(n){const r=e.map((r,a)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(r[n]," - 1"):"".concat(r[n])}(a,n)),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(a,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(o," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return s(e)}(r.slice()),";\n          if(").concat(a,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            if(").concat(a,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const nte={kernelName:mA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r,o=a.shape.length,s=SI(i,a.shape);if(0===o)return C5({inputs:{x:a},backend:n});const l=qI().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tte(a.shape,s):new ete(a.shape,s);return n.runWebGLProgram(l,[a],a.dtype)}};class rte{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let a="";a="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(a,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const ate={kernelName:iO,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:a}=t,{radians:i,fillValue:o,center:s}=n,l=r,c=new rte(a.shape,o),[u,h]=$j(s,a.shape[1],a.shape[2]),d=[[u,h,Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(c,[a],a.dtype,d)}},ite=j5({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),ote={kernelName:gA,backendName:"webgl",kernelFunc:ite},ste=j5({opSnippet:"return inversesqrt(x);",cpuKernelImpl:j4}),lte={kernelName:yA,backendName:"webgl",kernelFunc:ste};class cte{constructor(e,t,n,r,a,i){let o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const s=L3(a.length),l=L3(i.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d="getUpdates(".concat(h,")");let p="";o&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(a,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class ute{constructor(e,t,n,r,a,i){let o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const s=L3(a.length),l=L3(i.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d="getUpdates(".concat(h,")");let p="";o&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(a,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(d,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const hte={kernelName:vA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=oz(0,a,o),d=[h/c,c];if(0===h)return n.makeTensorInfo(o,a.dtype);const p=Y5({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),f=Y5({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=qI().getBool("WEBGL_PACK")?new ute(l,s,p.shape.length,f.shape.length,u,d):new cte(l,s,p.shape.length,f.shape.length,u,d);const y=n.runWebGLProgram(g,[f,p,m],f.dtype),v=Y5({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}};class dte{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const a="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),i=2===qI().getNumber("WEBGL_VERSION")?"while (left < right) {":a,o="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(i,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(o," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const pte={kernelName:xA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:o}=r,s=new dte(a.shape[0],a.shape[1],i.shape[1],o),l=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",l)}};class fte{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)a="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=[];for(let r=0;r<t.length;r++)o.push("".concat(n[r])),r<e&&i.push("".concat(n[r]));r=i.join(),a=o.join()}const i=L3(n);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(a,"));\n        } else {\n          setOutput(getB(").concat(a,"));\n        }\n      }\n    ")}}const mte={kernelName:wA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t,o=new fte(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],l_(a.dtype,i.dtype))}},gte=j5({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(oB,";\n  float scale = ").concat(sB,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),yte={kernelName:kA,backendName:"webgl",kernelFunc:gte},vte=j5({opSnippet:z5+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:U4}),bte={kernelName:EA,backendName:"webgl",kernelFunc:vte},xte=j5({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),wte={kernelName:IA,backendName:"webgl",kernelFunc:xte},kte=j5({opSnippet:z5+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(I5,"\n  return result;\n")}),Ste={kernelName:NA,backendName:"webgl",kernelFunc:kte},Nte=j5({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Tte={kernelName:TA,backendName:"webgl",kernelFunc:Nte},Ite=j5({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Ete={kernelName:CA,backendName:"webgl",kernelFunc:Ite},Cte={kernelName:_A,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:o}=r;pI(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((e,t)=>e*t),l=[[0,0]];l.push(...o);for(let y=1+i.length;y<a.shape.length;++y)l.push([0,0]);const c=[],u=Cee({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),h=eB(u.shape,i,s,!1),d=tB(h.length,i.length,!1),p=nB(u.shape,i,s,!1),f=Y5({inputs:{x:u},backend:n,attrs:{shape:h}}),m=i6({inputs:{x:f},backend:n,attrs:{perm:d}}),g=Y5({inputs:{x:m},backend:n,attrs:{shape:p}});return c.push(u),c.push(f),c.push(m),c.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}};const Ate={kernelName:DA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:o}=t;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));const s=n.readSync(r.dataId),l=n.readSync(a.dataId),c=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],[h,d,p,f,m]=G4(s,r.shape,r.dtype,l,a.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const Ote={kernelName:FA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));const o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,h]=H4(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};const _te={kernelName:PA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=K4(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const Mte={kernelName:LA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=K4(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(u,r.dtype,c)}};const Rte={kernelName:zA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:o}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=oz(0,a,s),p=!1;if("string"===i.dtype){const e=n.bufferSync(a),t=n.bufferSync(i),r=zO(n.readSync(o.dataId)[0]),f=B4(e,t,s,d,u,c,l,h,r,p);return n.makeTensorInfo(s,f.dtype,f.values)}const f=new cte(c,l,a.shape.length,i.shape.length,h,[d,1],p),m=n.runWebGLProgram(f,[i,a,o],i.dtype),g=Y5({inputs:{x:m},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),g}};const Dte={kernelName:MA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:o}=r,s=SI(o,a.shape)[0],l=MB(a,i,s),c=a.shape.length,u=new Array(c).fill(0),h=a.shape.slice();return l.map(e=>{const t=[...h];t[s]=e;const r=t7({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r})}},Fte="return sqrt(x);",Pte=j5({opSnippet:Fte,packedOpSnippet:Fte,cpuKernelImpl:q4}),Lte={kernelName:AA,backendName:"webgl",kernelFunc:Pte},zte={kernelName:BA,backendName:"webgl",kernelFunc:j5({opSnippet:"return x * x;"})},jte="return (a - b) * (a - b);",Bte=B5({opSnippet:jte,packedOpSnippet:jte}),Ute={kernelName:jA,backendName:"webgl",kernelFunc:Bte};const Wte={kernelName:UA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");const i=XB(n.readSync(a.dataId)),o=X4(i,"string",r);return n.makeTensorInfo(a.shape,"string",o)}};const Vte={kernelName:rO,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,i=p5+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new d5(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}};class Gte{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,a=L3(n.length),i=L3(n.length);let o="";if(1===r)o="coords * strides + begin";else{let e=0;o=n.map((t,r)=>(e++,1===n.length?"coords * strides[".concat(r,"] + begin[").concat(r,"]"):"coords[".concat(e-1,"] * strides[").concat(r,"] + begin[").concat(r,"]"))).join(",")}this.userCode="\n      ".concat(a," begin = ").concat(a,"(").concat(e,");\n      ").concat(a," strides = ").concat(a,"(").concat(t,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(o,"));\n      }\n    ")}}const Hte={kernelName:WA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,end:o,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=bD(a.shape,i,o,s,l,c,u,h,d);let w;if(m)w=Y5({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||y){pI(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));const e=oD(v,b,x),t=t7({inputs:{x:a},backend:n,attrs:{begin:v,size:e}});w=Y5({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([a])){const e=n.readSync(a.dataId),t=XM(a.shape,a.dtype,e),r=Y4(p,t,x,v);w=n.makeTensorInfo(f,a.dtype,r.values)}else{const e=new Gte(v,x,p);w=n.runWebGLProgram(e,[a],a.dtype)}}const k=Y5({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),k}};const Kte={kernelName:VA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=t,d=n.readSync(u.dataId),p=n.readSync(h.dataId),[f,m]=Z4(d,p,a,i,o,s,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};const qte={kernelName:GA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:o}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));const s=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[c,u,h]=Q4(s,l,a),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};const Xte={kernelName:HA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),s=J4(o,a);return n.makeTensorInfo(i.shape,"int32",s)}},Yte=j5({opSnippet:"return tan(x);"}),Zte={kernelName:qA,backendName:"webgl",kernelFunc:Yte},Qte=j5({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Jte={kernelName:XA,backendName:"webgl",kernelFunc:Qte};const $te={kernelName:bA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:a,indices:i,updates:o}=t,{}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=oz(0,i,a.shape),d=[h/c,c];if(0===h)return n.makeTensorInfo(a.shape,i.dtype);const p=Y5({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),f=Y5({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),m=Y5({inputs:{x:a},backend:n,attrs:{shape:d}}),g=new cte(l,s,p.shape.length,f.shape.length,u,d,!1,!0),y=n.runWebGLProgram(g,[f,p,m],m.dtype),v=Y5({inputs:{x:y},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}};class ene{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[i]*t[i];this.outputShape=n,this.rank=n.length;const r=L3(this.rank),a=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")}}function tne(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;if("string"===a.dtype||a.shape.length>5){const e=n.readSync(a.dataId),t="string"===a.dtype?e.map(e=>zO(e)):e,r=XM(a.shape,a.dtype,t),o=e5(r,i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const o=new ene(a.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const nne={kernelName:YA,backendName:"webgl",kernelFunc:tne};class rne{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class ane{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function ine(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function one(e){let t=1;for(;t<e;)t*=2;return t}const sne={kernelName:ZA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:o}=r,s=qI().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=qI().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([a])||u<s||i>l){const e=n.readSync(a.dataId),[t,r]=t5(e,c,a.dtype,i,o);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===u)return[a,j8({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const h=n.texData.get(a.dataId),d=null!==h&&h.isPacked,p=d?n.unpackTensor(a):a,f=gI(c)/u,m=Y5({inputs:{x:p},attrs:{shape:[f,u]},backend:n});d&&ine(n,p);const g=one(i),y=one(u);let v=null;const b=()=>null===v?[m,m]:[m,v],x=(e,t,r)=>{const a=b(),i=new rne(r),o=[[u],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=v;v=n.runWebGLProgram(i,a,"int32",o),ine(n,s)};for(let T=1;T<g;T*=2){const e=2*T;for(let t=T;t>=1;t/=2)x(e,t,[f,y])}for(let T=y;T>g;T/=2){const e=b(),t=new ane([f,T/2]),r=[[u],[null===v?1:0],[g]],a=v;v=n.runWebGLProgram(t,e,"int32",r),ine(n,a);const i=g/2,o=2*i;for(let n=i;n>=1;n/=2)x(o,n,v.shape)}let w=v;v=t7({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,i]}}),ine(n,w);let k=a9({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});ine(n,m);const S=c.slice(0,-1);S.push(i),w=v,v=Y5({inputs:{x:v},attrs:{shape:S},backend:n}),ine(n,w);const N=k;return k=Y5({inputs:{x:k},attrs:{shape:S},backend:n}),ine(n,N),[k,v]}};class lne{constructor(e,t,n,r,a,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const o="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(a,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(a,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(o," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const cne={kernelName:QA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:i}=t,{interpolation:o,fillMode:s,fillValue:l,outputShape:c}=r,[u,h,d,p]=a.shape,[f,m]=null!=c?c:[h,d],g=new lne(h,d,o,s,l,[u,f,m,p]);return n.runWebGLProgram(g,[a,i],"float32")}};const une={kernelName:$A,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;b3(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:s,outputShape:l,indices:c}=r5(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};const hne={kernelName:eO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a,s=o.shape.length,l=a.shape[i],c=new Array(s-1);let u=0;for(let m=0;m<s;m++)m!==i&&(c[u++]=o.shape[m]);const h=[],d=new Array(s).fill(0),p=o.shape.slice();p[i]=1;const f=new Array(l);for(let m=0;m<f.length;m++){d[i]=m;const e=t7({inputs:{x:o},backend:n,attrs:{begin:d,size:p}}),t=Y5({inputs:{x:e},backend:n,attrs:{shape:c}});f[m]=t,h.push(e)}return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}};class dne{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];const s=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ";let u="";a%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      "));let h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const pne={kernelName:tO,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:o}=r,s=a.shape.length,l=[];let c=0;const u=qF([c],s);let h=a;null!=u&&(h=i6({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(h),c=YF(1,s)[0]);const d=KB(h.shape,c,o),p=gI([h.shape[c]]),f=Y5({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});l.push(f);const m=c_(a.dtype),g=(e,t,r,a,i)=>{const o=e.shape[0],s=e.shape[1],c=HB(s,i),u=new dne({windowSize:c,inSize:s,batchSize:o,numSegments:i},t),h=n.compileAndRun(u,[e,r],a);if(l.push(h),h.shape[1]===i)return h;const d=Pee({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),p=tne({inputs:{x:d},backend:n,attrs:{reps:[s/c]}});l.push(d),l.push(p);return g(h,t,p,a,i)},y=Y5({inputs:{x:g(f,"unsortedSegmentSum",i,m,o)},backend:n,attrs:{shape:d}});let v=y;if(null!=u){l.push(y);const e=XF(u);v=i6({inputs:{x:v},backend:n,attrs:{perm:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}},fne=[l6,u6,d6,f6,y6,x6,w6,k6,C6,A6,_6,R6,F6,L6,j6,W6,V6,K6,q6,X6,Q6,r7,a7,i7,o7,h7,f7,y7,_5,x7,C7,P7,U7,V7,G7,H7,K7,X7,Z7,J7,a8,i8,o8,l8,h8,f8,m8,y8,b8,x8,k8,S8,T8,E8,A8,_8,D8,L8,B8,W8,H8,q8,Z8,$8,e9,n9,i9,s9,c9,A5,u9,T7,d9,f9,g9,D5,v9,x9,w9,S9,T9,E9,A9,_9,D9,P9,z9,B9,U9,W9,H9,K9,q9,X9,Y9,Q9,eee,nee,hee,X5,pee,mee,yee,bee,l7,wee,Nee,Tee,Aee,_ee,L5,Mee,Ree,Dee,Fee,Lee,u7,iee,jee,Uee,Vee,Z5,Kee,Xee,Qee,$ee,nte,ate,ote,lte,hte,pte,mte,yte,bte,wte,Ste,Tte,n7,uee,Ete,Cte,Ate,Ote,_te,Mte,Rte,Dte,Lte,zte,Ute,Wte,Vte,Hte,Kte,qte,Xte,lee,a6,Zte,Jte,$te,nne,sne,cne,o6,une,hne,pne,See];for(const n of fne)gO(n);var mne=n(7087),gne=function(){return gne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},gne.apply(this,arguments)};function yne(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function vne(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function bne(e){var t=e.map(function(e){return e[0]});return t.push(e[e.length-1][1]),t}var xne={lips:bne([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:bne([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:bne([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:bne([[474,475],[475,476],[476,477],[477,474]]),rightEye:bne([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:bne([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:bne([[469,470],[470,471],[471,472],[472,469]]),faceOval:bne([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},wne=[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]],kne=Object.entries(xne).map(function(e){var t=e[0];return e[1].map(function(e){return[e,t]})}).flat(),Sne=new Map(kne);function Nne(e){for(var t={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=0;o<e.length;++o){var s=e[o];n=Math.min(n,s.x),r=Math.max(r,s.x),a=Math.min(a,s.y),i=Math.max(i,s.y),t.locationData.relativeKeypoints.push({x:s.x,y:s.y})}return t.locationData.relativeBoundingBox={xMin:n,yMin:a,xMax:r,yMax:i,width:r-n,height:i-a},t}var Tne={runtime:"mediapipe",maxFaces:1,refineLandmarks:!1},Ine=function(){function e(e){var t=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceMeshSolution=new mne.FaceMesh({locateFile:function(t,n){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+t:n+"/"+t}}),this.faceMeshSolution.setOptions({refineLandmarks:e.refineLandmarks,selfieMode:this.selfieMode,maxNumFaces:e.maxFaces}),this.faceMeshSolution.onResults(function(e){if(t.height=e.image.height,t.width=e.image.width,t.faces=[],null!==e.multiFaceLandmarks)for(var n=e.multiFaceLandmarks,r=0;r<n.length;r++){var a=t.translateOutput(n[r]);t.faces.push({keypoints:a,box:Nne(a).locationData.relativeBoundingBox})}})}return e.prototype.translateOutput=function(e){var t=this;return e.map(function(e,n){var r={x:e.x*t.width,y:e.y*t.height,z:e.z*t.width},a=Sne.get(n);return null!=a&&(r.name=a),r})},e.prototype.estimateFaces=function(e,t){return yne(this,void 0,void 0,function(){var n,r;return vne(this,function(a){switch(a.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.faceMeshSolution.setOptions({selfieMode:this.selfieMode})),e instanceof $O?(r=ImageData.bind,[4,eD(e)]):[3,2];case 1:return n=new(r.apply(ImageData,[void 0,a.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:n=e,a.label=3;case 3:return e=n,[4,this.faceMeshSolution.send({image:e})];case 4:return a.sent(),[2,this.faces]}})})},e.prototype.dispose=function(){this.faceMeshSolution.close()},e.prototype.reset=function(){this.faceMeshSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.faceMeshSolution.initialize()},e}();function Ene(e){return yne(this,void 0,void 0,function(){var t,n;return vne(this,function(r){switch(r.label){case 0:return t=function(e){if(null==e)return gne({},Tne);var t=gne({},e);return t.runtime="mediapipe",null==t.maxFaces&&(t.maxFaces=Tne.maxFaces),null==t.refineLandmarks&&(t.refineLandmarks=Tne.refineLandmarks),t}(e),[4,(n=new Ine(t)).initialize()];case 1:return r.sent(),[2,n]}})})}var Cne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{},Ane={};(function(){var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Cne&&Cne];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function a(e,t){if(t)e:{var a=r;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in a))break e;a=a[o]}(t=t(i=a[e=e[e.length-1]]))!=i&&null!=t&&n(a,e,{configurable:!0,writable:!0,value:t})}}function i(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function o(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function s(e){if(!(e instanceof Array)){e=o(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}a("Symbol",function(e){function t(e,t){this.g=e,n(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(r+(n||"")+"_"+a++,n)}}),a("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<a.length;o++){var s=r[a[o]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&n(s.prototype,e,{configurable:!0,writable:!0,value:function(){return i(t(this))}})}return e});var l,c="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var u;e:{var h={};try{h.__proto__={a:!0},u=h.a;break e}catch(e){}u=!1}l=u?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=l;function p(e,t){if(e.prototype=c(t.prototype),e.prototype.constructor=e,d)d(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.na=t.prototype}function f(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function m(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function g(e,t){e.j={da:t,ea:!0},e.g=e.o||e.u}function y(e,t,n){return e.g=n,{value:t}}function v(e){this.g=new f,this.h=e}function b(e,t,n,r){try{var a=t.call(e.g.i,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.l=!1,a;var i=a.value}catch(t){return e.g.i=null,g(e.g,t),x(e)}return e.g.i=null,r.call(e.g,i),x(e)}function x(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,g(e.g,t)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.ea)throw t.da;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function w(e){this.next=function(t){return m(e.g),e.g.i?t=b(e,e.g.i.next,t,e.g.s):(e.g.s(t),t=x(e)),t},this.throw=function(t){return m(e.g),e.g.i?t=b(e,e.g.i.throw,t,e.g.s):(g(e.g,t),t=x(e)),t},this.return=function(t){return function(e,t){m(e.g);var n=e.g.i;return n?b(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),x(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function k(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,a){!function e(i){i.done?r(i.value):Promise.resolve(i.value).then(t,n).then(e,a)}(e.next())})}(new w(new v(e)))}f.prototype.s=function(e){this.h=e},f.prototype.return=function(e){this.j={return:e},this.g=this.u},a("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function a(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=r.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.D),reject:e(this.l)}},t.prototype.D=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.A(e):this.o(e)}},t.prototype.A=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.I(t,e):this.o(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.o=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.B()},t.prototype.G=function(){var e=this;i(function(){if(e.C()){var t=r.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.C=function(){if(this.s)return!1;var e=r.CustomEvent,t=r.Event,n=r.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new n;return t.prototype.H=function(e){var t=this.j();e.M(t.resolve,t.reject)},t.prototype.I=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(e){i(e)}}:t}var a,i,o=new t(function(e,t){a=e,i=t});return this.M(r(e,a),r(n,i)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.M=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?s.h(n):this.g.push(n),this.s=!0},t.resolve=a,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=o(e),i=r.next();!i.done;i=r.next())a(i.value).M(t,n)})},t.all=function(e){var n=o(e),r=n.next();return r.done?a([]):new t(function(e,t){function i(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,a(r.value).M(i(o.length-1),t),r=n.next()}while(!r.done)})},t});var S="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};a("Object.assign",function(e){return e||S}),a("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),a("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var a=n[t];if(a===e||Object.is(a,e))return!0}return!1}}),a("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}),a("Array.prototype.keys",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,function(e){return e})}});var N=this||self;function T(e,t){e=e.split(".");var n,r=N;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function I(){throw Error("Invalid UTF8")}function E(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var C,A,O="undefined"!=typeof TextDecoder,_="undefined"!=typeof TextEncoder,M={},R=null;function D(e){var t;void 0===t&&(t=0),P(),t=M[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",a=0,i=0;a<e.length-2;a+=3){var o=e[a],s=e[a+1],l=e[a+2],c=t[o>>2];o=t[(3&o)<<4|s>>4],s=t[(15&s)<<2|l>>6],l=t[63&l],n[i++]=c+o+s+l}switch(c=0,l=r,e.length-a){case 2:l=t[(15&(c=e[a+1]))<<2]||r;case 1:e=e[a],n[i]=t[e>>2]+t[(3&e)<<4|c>>4]+l+r}return n.join("")}function F(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),a=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),a=R[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}P();for(var r=0;;){var a=n(-1),i=n(0),o=n(64),s=n(64);if(64===s&&-1===a)break;t(a<<2|i>>4),64!=o&&(t(i<<4&240|o>>2),64!=s&&t(o<<6&192|s))}}(e,function(e){r[a++]=e}),a!==n?r.subarray(0,a):r}function P(){if(!R){R={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));M[n]=r;for(var a=0;a<r.length;a++){var i=r[a];void 0===R[i]&&(R[i]=a)}}}}var L,z="function"==typeof Uint8Array;function j(e){return z&&null!=e&&e instanceof Uint8Array}function B(e){if(this.L=e,null!==e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}var U="function"==typeof Uint8Array.prototype.slice,W=0;function V(e,t){return Error("Invalid wire type: "+e+" (at position "+t+")")}function G(){return Error("Failed to read varint, encoding is invalid.")}function H(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.j=0,this.v=t,e&&K(this,e)}function K(e,t){e.h=function(e,t){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer)return new Uint8Array(e);if(e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return F(e);if(e.constructor===B)return!t&&(t=e.L)&&t.constructor===Uint8Array?t:(t=null==(t=e.L)||j(t)?t:"string"==typeof t?F(t):null,(e=e.L=t)?new Uint8Array(e):L||(L=new Uint8Array(0)));if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(t,e.v),e.j=0,e.i=e.h.length,e.g=e.j}function q(e){if(e.g>e.i)throw Error("Tried to read past the end of the data "+e.g+" > "+e.i)}function X(e){var t=e.h,n=t[e.g],r=127&n;if(128>n)return e.g+=1,q(e),r;if(r|=(127&(n=t[e.g+1]))<<7,128>n)return e.g+=2,q(e),r;if(r|=(127&(n=t[e.g+2]))<<14,128>n)return e.g+=3,q(e),r;if(r|=(127&(n=t[e.g+3]))<<21,128>n)return e.g+=4,q(e),r;if(n=t[e.g+4],e.g+=5,r|=(15&n)<<28,128>n)return q(e),r;if(128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++])throw G();return q(e),r}H.prototype.reset=function(){this.g=this.j};var Y=[];function Z(){this.g=[]}function Q(e,t){for(;127<t;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function J(e){var t={},n=void 0!==t.W&&t.W;this.l={v:void 0!==t.v&&t.v},this.W=n,t=this.l,Y.length?(n=Y.pop(),t&&(n.v=t.v),e&&K(n,e),e=n):e=new H(e,t),this.g=e,this.j=this.g.g,this.h=this.i=-1}function $(e){var t=e.g;if(t.g==t.i)return!1;e.j=e.g.g;var n=X(e.g)>>>0;if(t=n>>>3,!(0<=(n&=7)&&5>=n))throw V(n,e.j);if(1>t)throw Error("Invalid field number: "+t+" (at position "+e.j+")");return e.i=t,e.h=n,!0}function ee(e){switch(e.h){case 0:if(0!=e.h)ee(e);else e:{for(var t=(e=e.g).g,n=t+10;t<n;)if(0==(128&e.h[t++])){e.g=t,q(e);break e}throw G()}break;case 1:(e=e.g).g+=8,q(e);break;case 2:2!=e.h?ee(e):(t=X(e.g)>>>0,(e=e.g).g+=t,q(e));break;case 5:(e=e.g).g+=4,q(e);break;case 3:for(t=e.i;;){if(!$(e))throw Error("Unmatched start-group tag: stream EOF");if(4==e.h){if(e.i!=t)throw Error("Unmatched end-group tag");break}ee(e)}break;default:throw V(e.h,e.j)}}Z.prototype.length=function(){return this.g.length},Z.prototype.end=function(){var e=this.g;return this.g=[],e},J.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var te=[];function ne(){this.i=[],this.h=0,this.g=new Z}function re(e,t){0!==t.length&&(e.i.push(t),e.h+=t.length)}var ae="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ie(e,t){Object.isFrozen(e)||(ae?e[ae]|=t:void 0!==e.N?e.N|=t:Object.defineProperties(e,{N:{value:t,configurable:!0,writable:!0,enumerable:!1}}))}function oe(e){var t;return null==(t=ae?e[ae]:e.N)?0:t}function se(e){return ie(e,1),e}function le(e){return!!Array.isArray(e)&&!!(2&oe(e))}function ce(e){if(!Array.isArray(e))throw Error("cannot mark non-array as immutable");ie(e,2)}function ue(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&e.constructor===Object}var he=Object.freeze(se([]));function de(e){if(le(e.m))throw Error("Cannot mutate an immutable Message")}var pe,fe="undefined"!=typeof Symbol&&void 0!==Symbol.hasInstance;function me(e){return{value:e,configurable:!1,writable:!1,enumerable:!1}}function ge(e,t,n){return-1===t?null:t>=e.i?e.g?e.g[t]:void 0:void 0!==n&&n&&e.g&&null!=(n=e.g[t])?n:e.m[t+e.h]}function ye(e,t,n,r){r=void 0!==r&&r,de(e),t<e.i&&!r?e.m[t+e.h]=n:(e.g||(e.g=e.m[e.i+e.h]={}))[t]=n}function ve(e,t,n,r){n=void 0===n||n;var a=ge(e,t,r=void 0!==r&&r);return null==a&&(a=he),le(e.m)?n&&(ce(a),Object.freeze(a)):(a===he||le(a))&&ye(e,t,a=se(a.slice()),r),a}function be(e,t,n){return null==(e=null==(e=ge(e,t))?e:+e)?void 0===n?0:n:e}function xe(e,t,n,r){e.j||(e.j={});var a=le(e.m),i=e.j[n];if(!i){r=ve(e,n,!0,void 0!==r&&r),i=[],a=a||le(r);for(var o=0;o<r.length;o++)i[o]=new t(r[o]),a&&ce(i[o].m);a&&(ce(i),Object.freeze(i)),e.j[n]=i}return i}function we(e,t,n,r,a){var i=void 0!==i&&i;return de(e),i=xe(e,n,t,i),n=r||new n,e=ve(e,t),null!=a?(i.splice(a,0,n),e.splice(a,0,n.m)):(i.push(n),e.push(n.m)),n}function ke(e,t){return null==(e=ge(e,t))?0:e}function Se(e,t){return null==(e=ge(e,t))?"":e}function Ne(e){return Ie(e,void 0===Ee?Ce:Ee)}function Te(e,t){if(null!=e){if(Array.isArray(e))e=Ie(e,t);else if(ue(e)){var n,r={};for(n in e)r[n]=Te(e[n],t);e=r}else e=t(e);return e}}function Ie(e,t){for(var n=e.slice(),r=0;r<n.length;r++)n[r]=Te(n[r],t);return Array.isArray(e)&&1&oe(e)&&se(n),n}function Ee(e){return e&&"object"==typeof e&&e.toJSON?e.toJSON():(e=function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":if(e&&!Array.isArray(e)){if(j(e))return D(e);if(e instanceof B){var t=e.L;return t=null==t||"string"==typeof t?t:z&&t instanceof Uint8Array?D(t):null,(e.L=t)||""}}}return e}(e),Array.isArray(e)?Ne(e):e)}function Ce(e){return j(e)?new Uint8Array(e):e}function Ae(e,t,n){e||(e=pe),pe=null;var r=this.constructor.h;if(e||(e=r?[r]:[]),this.h=(r?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=e,e=(r=this.m.length)-1,r&&ue(r=this.m[e])?(this.i=e-this.h,this.g=r):void 0!==t&&-1<t?(this.i=Math.max(t,e+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,n)for(t=0;t<n.length;t++)if((e=n[t])<this.i)e+=this.h,(r=this.m[e])?Array.isArray(r)&&se(r):this.m[e]=he;else{var a=(r=this.g||(this.g=this.m[this.i+this.h]={}))[e];a?Array.isArray(a)&&se(a):r[e]=he}}function Oe(){Ae.apply(this,arguments)}if(Ae.prototype.toJSON=function(){return Ne(this.m)},Ae.prototype.toString=function(){return this.m.toString()},p(Oe,Ae),fe){var _e={};Object.defineProperties(Oe,(_e[Symbol.hasInstance]=me(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),_e))}function Me(e,t,n){if(n){var r,a={};for(r in n){var i=n[r],o=i.ha;o||(a.F=i.la||i.fa.P,i.aa?(a.U=je(i.aa),o=function(e){return function(t,n,r){return e.F(t,n,r,e.U)}}(a)):i.ca?(a.T=Be(i.X.g,i.ca),o=function(e){return function(t,n,r){return e.F(t,n,r,e.T)}}(a)):o=a.F,i.ha=o),o(t,e,i.X),a={F:a.F,U:a.U,T:a.T}}}!function(e,t){if(t=t.ba){re(e,e.g.end());for(var n=0;n<t.length;n++)re(e,t[n])}}(t,e)}var Re=Symbol();function De(e,t,n){return e[Re]||(e[Re]=function(e,r){return t(e,r,n)})}function Fe(e){var t=e[Re];if(!t){var n=Je(e);t=function(e,t){return $e(e,t,n)},e[Re]=t}return t}function Pe(e){var t=function(e){var t=e.aa;return t?Fe(t):(t=e.ka)?De(e.X.g,t,e.ca):void 0}(e),n=e.X,r=e.fa.O;return t?function(e,a){return r(e,a,n,t)}:function(e,t){return r(e,t,n)}}function Le(e,t,n,r,a,i){var o=0;for((e=e()).length&&"number"!=typeof e[0]&&(n(t,e[0]),o++);o<e.length;){n=e[o++];for(var s=o+1;s<e.length&&"number"!=typeof e[s];)s++;var l=e[o++];switch(s-=o){case 0:r(t,n,l);break;case 1:r(t,n,l,e[o++]);break;case 2:a(t,n,l,e[o++],e[o++]);break;case 3:s=e[o++];var c=e[o++],u=e[o++];Array.isArray(u)?a(t,n,l,s,c,u):i(t,n,l,s,c,u);break;case 4:i(t,n,l,e[o++],e[o++],e[o++],e[o++]);break;default:throw Error("unexpected number of binary field arguments: "+s)}}return t}var ze=Symbol();function je(e){var t=e[ze];if(!t){var n=Ke(e);t=function(e,t){return tt(e,t,n)},e[ze]=t}return t}function Be(e,t){var n=e[ze];return n||(n=function(e,n){return Me(e,n,t)},e[ze]=n),n}var Ue=Symbol();function We(e,t){e.push(t)}function Ve(e,t,n){e.push(t,n.P)}function Ge(e,t,n,r,a){var i=je(a),o=n.P;e.push(t,function(e,t,n){return o(e,t,n,r,i)})}function He(e,t,n,r,a,i){var o=Be(r,i),s=n.P;e.push(t,function(e,t,n){return s(e,t,n,r,o)})}function Ke(e){return e[Ue]||Le(e,e[Ue]=[],We,Ve,Ge,He)}var qe=Symbol();function Xe(e,t){e[0]=t}function Ye(e,t,n,r){var a=n.O;e[t]=r?function(e,t,n){return a(e,t,n,r)}:a}function Ze(e,t,n,r,a,i){var o=n.O,s=Fe(a);e[t]=function(e,t,n){return o(e,t,n,r,s,i)}}function Qe(e,t,n,r,a,i,o){var s=n.O,l=De(r,a,i);e[t]=function(e,t,n){return s(e,t,n,r,l,o)}}function Je(e){return e[qe]||Le(e,e[qe]={},Xe,Ye,Ze,Qe)}function $e(e,t,n){for(;$(t)&&4!=t.h;){var r=t.i,a=n[r];if(!a){var i=n[0];i&&(i=i[r])&&(a=n[r]=Pe(i))}if(!(a&&a(t,e,r)||(a=t,r=e,i=a.j,ee(a),a.W))){var o=a.g.h;a=i===(a=a.g.g)?L||(L=new Uint8Array(0)):U?o.slice(i,a):new Uint8Array(o.subarray(i,a)),(i=r.ba)?i.push(a):r.ba=[a]}}return e}function et(e,t,n){if(te.length){var r=te.pop();e&&(K(r.g,e),r.i=-1,r.h=-1),e=r}else e=new J(e);try{return $e(new t,e,Je(n))}finally{(t=e.g).h=null,t.j=0,t.i=0,t.g=0,t.v=!1,e.i=-1,e.h=-1,100>te.length&&te.push(e)}}function tt(e,t,n){for(var r=n.length,a=1==r%2,i=a?1:0;i<r;i+=2)(0,n[i+1])(t,e,n[i]);Me(e,t,a?n[0]:void 0)}function nt(e,t){var n=new ne;tt(e,n,Ke(t)),re(n,n.g.end()),e=new Uint8Array(n.h);for(var r=(t=n.i).length,a=0,i=0;i<r;i++){var o=t[i];e.set(o,a),a+=o.length}return n.i=[e],e}function rt(e,t){return{O:e,P:t}}var at=rt(function(e,t,n){if(5!==e.h)return!1;var r=(e=e.g).h[e.g],a=e.h[e.g+1],i=e.h[e.g+2],o=e.h[e.g+3];return e.g+=4,q(e),e=2*((a=(r|a<<8|i<<16|o<<24)>>>0)>>31)+1,r=a>>>23&255,a&=8388607,ye(t,n,255==r?a?NaN:1/0*e:0==r?e*Math.pow(2,-149)*a:e*Math.pow(2,r-150)*(a+Math.pow(2,23))),!0},function(e,t,n){if(null!=(t=ge(t,n))){Q(e.g,8*n+5),e=e.g;var r=t;0===(r=(n=0>r?1:0)?-r:r)?W=0<1/r?0:2147483648:isNaN(r)?W=2147483647:34028234663852886e22<r?W=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),W=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,W=(n<<31|t+127<<23|8388607&r)>>>0),n=W,e.g.push(n>>>0&255),e.g.push(n>>>8&255),e.g.push(n>>>16&255),e.g.push(n>>>24&255)}}),it=rt(function(e,t,n){if(0!==e.h)return!1;for(var r=e.g,a=128,i=0,o=e=0;4>o&&128<=a;o++)a=r.h[r.g++],q(r),i|=(127&a)<<7*o;if(128<=a&&(a=r.h[r.g++],q(r),i|=(127&a)<<28,e|=(127&a)>>4),128<=a)for(o=0;5>o&&128<=a;o++)a=r.h[r.g++],q(r),e|=(127&a)<<7*o+3;if(!(128>a))throw G();return r=i>>>0,(e=2147483648&(a=e>>>0))&&(a=~a>>>0,0==(r=1+~r>>>0)&&(a=a+1>>>0)),r=4294967296*a+(r>>>0),ye(t,n,e?-r:r),!0},function(e,t,n){if(null!=(t=ge(t,n))&&null!=t){Q(e.g,8*n),e=e.g;var r=t;for(n=0>r,t=(r=Math.abs(r))>>>0,r=Math.floor((r-t)/4294967296),r>>>=0,n&&(r=~r>>>0,4294967295<(t=1+(~t>>>0))&&(t=0,4294967295<++r&&(r=0))),n=W=t,t=r;0<t||127<n;)e.g.push(127&n|128),n=(n>>>7|t<<25)>>>0,t>>>=7;e.g.push(n)}}),ot=rt(function(e,t,n){return 0===e.h&&(ye(t,n,X(e.g)),!0)},function(e,t,n){if(null!=(t=ge(t,n))&&null!=t)if(Q(e.g,8*n),e=e.g,0<=(n=t))Q(e,n);else{for(t=0;9>t;t++)e.g.push(127&n|128),n>>=7;e.g.push(1)}}),st=rt(function(e,t,n){if(2!==e.h)return!1;var r,a=X(e.g)>>>0,i=(e=e.g).g;if(e.g+=a,q(e),e=e.h,O)(r=C)||(r=C=new TextDecoder("utf-8",{fatal:!0})),r=r.decode(e.subarray(i,i+a));else{a=i+a;for(var o,s,l,c=[],u=null;i<a;)128>(o=e[i++])?c.push(o):224>o?i>=a?I():(s=e[i++],194>o||128!=(192&s)?(i--,I()):c.push((31&o)<<6|63&s)):240>o?i>=a-1?I():128!=(192&(s=e[i++]))||224===o&&160>s||237===o&&160<=s||128!=(192&(r=e[i++]))?(i--,I()):c.push((15&o)<<12|(63&s)<<6|63&r):244>=o?i>=a-2?I():128!=(192&(s=e[i++]))||0!=s-144+(o<<28)>>30||128!=(192&(r=e[i++]))||128!=(192&(l=e[i++]))?(i--,I()):(o=(7&o)<<18|(63&s)<<12|(63&r)<<6|63&l,o-=65536,c.push(55296+(o>>10&1023),56320+(1023&o))):I(),8192<=c.length&&(u=E(u,c),c.length=0);r=E(u,c)}return ye(t,n,r),!0},function(e,t,n){if(null!=(t=ge(t,n))){var r=!1;if(r=void 0!==r&&r,_){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(t))throw Error("Found an unpaired surrogate");t=(A||(A=new TextEncoder)).encode(t)}else{for(var a=0,i=new Uint8Array(3*t.length),o=0;o<t.length;o++){var s=t.charCodeAt(o);if(128>s)i[a++]=s;else{if(2048>s)i[a++]=s>>6|192;else{if(55296<=s&&57343>=s){if(56319>=s&&o<t.length){var l=t.charCodeAt(++o);if(56320<=l&&57343>=l){s=1024*(s-55296)+l-56320+65536,i[a++]=s>>18|240,i[a++]=s>>12&63|128,i[a++]=s>>6&63|128,i[a++]=63&s|128;continue}o--}if(r)throw Error("Found an unpaired surrogate");s=65533}i[a++]=s>>12|224,i[a++]=s>>6&63|128}i[a++]=63&s|128}}t=i.subarray(0,a)}Q(e.g,8*n+2),Q(e.g,t.length),re(e,e.g.end()),re(e,t)}}),lt=rt(function(e,t,n,r,a){if(2!==e.h)return!1;t=we(t,n,r),n=e.g.i,r=X(e.g)>>>0;var i=e.g.g+r,o=i-n;if(0>=o&&(e.g.i=i,a(t,e),o=i-e.g.g),o)throw Error("Message parsing ended unexpectedly. Expected to read "+r+" bytes, instead read "+(r-o)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=i,e.g.i=n,!0},function(e,t,n,r,a){if(null!=(t=xe(t,r,n)))for(r=0;r<t.length;r++){var i=e;Q(i.g,8*n+2);var o=i.g.end();re(i,o),o.push(i.h),i=o,a(t[r],e),o=e;var s=i.pop();for(s=o.h+o.g.length()-s;127<s;)i.push(127&s|128),s>>>=7,o.h++;i.push(s),o.h++}});function ct(){Oe.apply(this,arguments)}if(p(ct,Oe),fe){var ut={};Object.defineProperties(ct,(ut[Symbol.hasInstance]=me(Object[Symbol.hasInstance]),ut))}function ht(e){ct.call(this,e)}function dt(){return[1,ot,2,at,3,st,4,st]}function pt(e){ct.call(this,e,-1,mt)}function ft(){return[1,lt,ht,dt]}p(ht,ct),p(pt,ct),pt.prototype.addClassification=function(e,t){return we(this,1,ht,e,t),this};var mt=[1];function gt(e){ct.call(this,e)}function yt(){return[1,at,2,at,3,at,4,at,5,at]}function vt(e){ct.call(this,e,-1,xt)}function bt(){return[1,lt,gt,yt]}p(gt,ct),p(vt,ct);var xt=[1];function wt(e){ct.call(this,e)}function kt(){return[1,at,2,at,3,at,4,at,5,at,6,it]}p(wt,ct);var St=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Nt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Tt=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],It=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Et=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Ct=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],At=[].concat(s(St),s(Nt),s(Tt),s(It),s(Et),s(Ct));function Ot(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function _t(e){return xe(e,ht,1).map(function(e){return{index:ke(e,1),ga:be(e,2),label:null!=ge(e,3)?Se(e,3):void 0,displayName:null!=ge(e,4)?Se(e,4):void 0}})}function Mt(e){return{x:be(e,1),y:be(e,2),z:be(e,3),visibility:null!=ge(e,4)?be(e,4):void 0}}function Rt(e,t){this.h=e,this.g=t,this.l=0}function Dt(e,t,n){return function(e,t){var n=e.g;if(void 0===e.o){var r=Ot(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),a=Ot(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),i=n.createProgram();if(n.attachShader(i,r),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(i));r=e.o=i,n.useProgram(r),a=n.getUniformLocation(r,"sampler0"),e.j={K:n.getAttribLocation(r,"aVertex"),J:n.getAttribLocation(r,"aTex"),ma:a},e.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.enableVertexAttribArray(e.j.K),n.vertexAttribPointer(e.j.K,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.J),n.vertexAttribPointer(e.j.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(a,0)}r=e.j,n.useProgram(e.o),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.K),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.vertexAttribPointer(r.K,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.J),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.J,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.K),n.disableVertexAttribArray(r.J),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise(function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)}))}function Ft(e){this.g=e}var Pt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Lt(e,t){return t+e}function zt(e,t){window[e]=t}function jt(e){if(this.g=e,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=e&&e.locateFile||Lt,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=t,e.options)for(var n=(t=o(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var r=e.options[n].default;void 0!==r&&(this.j[n]="function"==typeof r?r():r)}}function Bt(e,t){var n,r;return k(function(a){return t in e.H?a.return(e.H[t]):(n=e.locateFile(t,""),r=fetch(n).then(function(e){return e.arrayBuffer()}),e.H[t]=r,a.return(r))})}function Ut(e,t,n){var r,a,i,s,l,c,u,h,d,p,f,m,g,v;return k(function(b){switch(b.g){case 1:if(!n)return b.return(t);for(r={},a=0,i=o(Object.keys(n)),s=i.next();!s.done;s=i.next())l=s.value,"string"!=typeof(c=n[l])&&"texture"===c.type&&void 0!==t[c.stream]&&++a;1<a&&(e.I=!1),u=o(Object.keys(n)),s=u.next();case 2:if(s.done){b.g=4;break}if(h=s.value,"string"==typeof(d=n[h]))return g=r,v=h,y(b,function(e,t,n){var r;return k(function(a){return"number"==typeof n||n instanceof Uint8Array||n instanceof e.h.Uint8BlobList?a.return(n):n instanceof e.h.Texture2dDataOut?((r=e.u[t])||(r=new Rt(e.h,e.G),e.u[t]=r),a.return(Dt(r,n,e.I))):a.return(void 0)})}(e,h,t[d]),14);if(p=t[d.stream],"detection_list"===d.type){if(p){for(var x=p.getRectList(),w=p.getLandmarksList(),S=p.getClassificationsList(),N=[],T=0;T<x.size();++T){var I=et(x.get(T),wt,kt);I={boundingBox:{xCenter:be(I,1),yCenter:be(I,2),height:be(I,3),width:be(I,4),rotation:be(I,5,0),rectId:ke(I,6)},landmarks:xe(et(w.get(T),vt,bt),gt,1).map(Mt),V:_t(et(S.get(T),pt,ft))},N.push(I)}x=N}else x=[];r[h]=x,b.g=7;break}if("proto_list"===d.type){if(p){for(x=Array(p.size()),w=0;w<p.size();w++)x[w]=p.get(w);p.delete()}else x=[];r[h]=x,b.g=7;break}if(void 0===p){b.g=3;break}if("float_list"===d.type){r[h]=p,b.g=7;break}if("proto"===d.type){r[h]=p,b.g=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(f=e.u[h])||(f=new Rt(e.h,e.G),e.u[h]=f),y(b,Dt(f,p,e.I),13);case 13:m=b.h,r[h]=m;case 7:d.transform&&r[h]&&(r[h]=d.transform(r[h])),b.g=3;break;case 14:g[v]=b.h;case 3:s=u.next(),b.g=2;break;case 4:return b.return(r)}})}function Wt(e,t){for(var n=t.name||"$",r=[].concat(s(t.wants)),a=new e.h.StringList,i=o(t.wants),l=i.next();!l.done;l=i.next())a.push_back(l.value);i=e.h.PacketListener.implement({onResults:function(a){for(var i={},o=0;o<t.wants.length;++o)i[r[o]]=a.get(o);var s=e.listeners[n];s&&(e.D=Ut(e,i,t.outs).then(function(n){n=s(n);for(var a=0;a<t.wants.length;++a){var o=i[r[a]];"object"==typeof o&&o.hasOwnProperty&&o.hasOwnProperty("delete")&&o.delete()}n&&(e.D=n)}))}}),e.i.attachMultiListener(a,i),a.delete()}function Vt(e){var t=this;e=e||{};var n={url:"face_detection_short.binarypb"},r={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new jt({locateFile:e.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:n,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(e){var a,i,s,l,c;return k(function(u){switch(u.g){case 1:a=o("short"===e?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),i=a.next();case 2:if(i.done){u.g=4;break}return s=i.value,l="third_party/mediapipe/modules/face_detection/"+s,y(u,Bt(t.g,s),5);case 5:c=u.h,t.g.overrideFile(l,c),i=a.next(),u.g=2;break;case 4:return n.url="short"===e?"face_detection_short.binarypb":"face_detection_full.binarypb",r.graphOptionXref.calculatorName="short"===e?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",u.return(!0)}})}},minDetectionConfidence:r}})}(e=jt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){var e=this;return k(function(t){e.i&&(e.i.reset(),e.o={},e.u={}),t.g=0})},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],a=[],i={},s=o(Object.keys(e)),l=s.next();!l.done;i={R:i.R,S:i.S},l=s.next()){var c=l.value;c in this.j&&this.j[c]===e[c]||(this.j[c]=e[c],void 0!==(l=t[c])&&(l.onChange&&(i.R=l.onChange,i.S=e[c],r.push(function(e){return function(){return k(function(t){if(1==t.g)return y(t,e.R(e.S),2);!0===t.h&&(n.s=!0),t.g=0})}}(i))),l.graphOptionXref&&(c={valueNumber:1===l.type?e[c]:0,valueBoolean:0===l.type&&e[c],valueString:2===l.type?e[c]:""},l=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),l.graphOptionXref),c),a.push(l))))}0===r.length&&0===a.length||(this.s=!0,this.B=(void 0===this.B?[]:this.B).concat(a),this.A=(void 0===this.A?[]:this.A).concat(r))}},e.initialize=function(){var e=this;return k(function(t){return 1==t.g?y(t,function(e){var t,n,r,a,i,o,l,c,u,h,d;return k(function(p){switch(p.g){case 1:return e.Z?(t=void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(e.j):e.g.files,y(p,k(function(e){switch(e.g){case 1:return e.o=2,y(e,WebAssembly.instantiate(Pt),4);case 4:e.g=3,e.o=0;break;case 2:return e.o=0,e.j=null,e.return(!1);case 3:return e.return(!0)}}),2)):p.return();case 2:if(n=p.h,"object"==typeof window)return zt("createMediapipeSolutionsWasm",{locateFile:e.locateFile}),zt("createMediapipeSolutionsPackedAssets",{locateFile:e.locateFile}),o=t.filter(function(e){return void 0!==e.data}),l=t.filter(function(e){return void 0===e.data}),c=Promise.all(o.map(function(t){var n=Bt(e,t.url);if(void 0!==t.path){var r=t.path;n=n.then(function(t){return e.overrideFile(r,t),Promise.resolve(t)})}return n})),u=Promise.all(l.map(function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise(function(e){t.addEventListener("load",function(){e()},!1),t.addEventListener("error",function(){e()},!1),document.body.appendChild(t)})}(e.locateFile(t.url,e.$)):Promise.resolve()})).then(function(){var t,n,r;return k(function(a){if(1==a.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=e,y(a,t(n),2);r.h=a.h,a.g=0})}),h=k(function(t){return e.g.graph&&e.g.graph.url?t=y(t,Bt(e,e.g.graph.url),0):(t.g=0,t=void 0),t}),y(p,Promise.all([u,c,h]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=t.filter(function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n}).map(function(t){return e.locateFile(t.url,e.$)}),importScripts.apply(null,s(r)),a=e,y(p,createMediapipeSolutionsWasm(Module),6);case 6:a.h=p.h,e.l=new OffscreenCanvas(1,1),e.h.canvas=e.l,i=e.h.GL.createContext(e.l,{antialias:!1,alpha:!1,ja:"undefined"!=typeof WebGL2RenderingContext?2:1}),e.h.GL.makeContextCurrent(i),p.g=4;break;case 7:if(e.l=document.createElement("canvas"),!(d=e.l.getContext("webgl2",{}))&&!(d=e.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),p.return();e.G=d,e.h.canvas=e.l,e.h.createContext(e.l,!0,!0,{});case 4:e.i=new e.h.SolutionWasm,e.Z=!1,p.g=0}})}(e),2):3!=t.g?y(t,function(e){var t,n,r,a,i,s,l,c;return k(function(u){if(1==u.g)return e.g.graph&&e.g.graph.url&&e.Y===e.g.graph.url?u.return():(e.s=!0,e.g.graph&&e.g.graph.url?(e.Y=e.g.graph.url,y(u,Bt(e,e.g.graph.url),3)):void(u.g=2));for(2!=u.g&&(t=u.h,e.i.loadGraph(t)),n=o(Object.keys(e.C)),r=n.next();!r.done;r=n.next())a=r.value,e.i.overrideFile(a,e.C[a]);if(e.C={},e.g.listeners)for(i=o(e.g.listeners),s=i.next();!s.done;s=i.next())l=s.value,Wt(e,l);c=e.j,e.j={},e.setOptions(c),u.g=0})}(e),3):y(t,function(e){var t,n,r,a,i,s;return k(function(l){switch(l.g){case 1:if(!e.s)return l.return();if(!e.A){l.g=2;break}t=o(e.A),n=t.next();case 3:if(n.done){l.g=5;break}return y(l,(0,n.value)(),4);case 4:n=t.next(),l.g=3;break;case 5:e.A=void 0;case 2:if(e.B){for(r=new e.h.GraphOptionChangeRequestList,a=o(e.B),i=a.next();!i.done;i=a.next())s=i.value,r.push_back(s);e.i.changeOptions(r),r.delete(),e.B=void 0}e.s=!1,l.g=0}})}(e),0)})},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.C[e]=t},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){var n,r,a,i,s,l,c,u,h,d=this;return k(function(p){switch(p.g){case 1:return d.g.inputs?(n=1e3*(null==t?performance.now():t),y(p,d.D,2)):p.return();case 2:return y(p,d.initialize(),3);case 3:for(r=new d.h.PacketDataList,a=o(Object.keys(e)),i=a.next();!i.done;i=a.next())if(s=i.value,l=d.g.inputs[s]){e:{var f=e[s];switch(l.type){case"video":var m=d.o[l.stream];if(m||(m=new Rt(d.h,d.G),d.o[l.stream]=m),0===m.l&&(m.l=m.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&f instanceof HTMLVideoElement)var g=f.videoWidth,v=f.videoHeight;else"undefined"!=typeof HTMLImageElement&&f instanceof HTMLImageElement?(g=f.naturalWidth,v=f.naturalHeight):(g=f.width,v=f.height);v={glName:m.l,width:g,height:v},(g=m.g).canvas.width=v.width,g.canvas.height=v.height,g.activeTexture(g.TEXTURE0),m.h.bindTexture2d(m.l),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f),m.h.bindTexture2d(0),m=v;break e;case"detections":for((m=d.o[l.stream])||(m=new Ft(d.h),d.o[l.stream]=m),m.data||(m.data=new m.g.DetectionListData),m.data.reset(f.length),v=0;v<f.length;++v){g=f[v];var b=m.data,x=b.setBoundingBox,w=v,k=g.boundingBox,S=new wt;if(ye(S,1,k.xCenter),ye(S,2,k.yCenter),ye(S,3,k.height),ye(S,4,k.width),ye(S,5,k.rotation),ye(S,6,k.rectId),k=nt(S,kt),x.call(b,w,k),g.landmarks)for(b=0;b<g.landmarks.length;++b){var N=!!(S=g.landmarks[b]).visibility;w=(x=m.data).addNormalizedLandmark,k=v,S=Object.assign(Object.assign({},S),{visibility:N?S.visibility:0}),ye(N=new gt,1,S.x),ye(N,2,S.y),ye(N,3,S.z),S.visibility&&ye(N,4,S.visibility),S=nt(N,yt),w.call(x,k,S)}if(g.V)for(b=0;b<g.V.length;++b)w=(x=m.data).addClassification,k=v,S=g.V[b],ye(N=new ht,2,S.ga),S.index&&ye(N,1,S.index),S.label&&ye(N,3,S.label),S.displayName&&ye(N,4,S.displayName),S=nt(N,dt),w.call(x,k,S)}m=m.data;break e;default:m={}}}switch(c=m,u=l.stream,l.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},c),{stream:u,timestamp:n}));break;case"detections":(h=c).stream=u,h.timestamp=n,r.pushDetectionList(h);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return d.i.send(r),y(p,d.D,4);case 4:r.delete(),p.g=0}})},e.onResults=function(e,t){this.listeners[t||"$"]=e},T("Solution",jt),T("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=Vt.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){var e=this;return k(function(t){return y(t,e.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(e){var t=this;return k(function(n){return y(n,t.g.send(e),0)})},e.setOptions=function(e){this.g.setOptions(e)},T("FaceDetection",Vt),T("FACEDETECTION_LIPS",St),T("FACEDETECTION_LEFT_EYE",Nt),T("FACEDETECTION_LEFT_EYEBROW",Tt),T("FACEDETECTION_RIGHT_EYE",It),T("FACEDETECTION_RIGHT_EYEBROW",Et),T("FACEDETECTION_FACE_OVAL",Ct),T("FACEDETECTION_CONTOURS",At),T("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),T("VERSION","0.4.1646425229")}).call(Cne);var One=function(){return One=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},One.apply(this,arguments)};function _ne(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function Mne(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var Rne=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],Dne={modelType:"short",runtime:"mediapipe",maxFaces:1},Fne=function(){function e(e){var t=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new Ane.FaceDetection({locateFile:function(t,n){if(e.solutionPath){var r=e.solutionPath.replace(/\/+$/,"");return"".concat(r,"/").concat(t)}return"".concat(n,"/").concat(t)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:e.modelType}),this.faceDetectorSolution.onResults(function(e){if(t.height=e.image.height,t.width=e.image.width,t.faces=[],null!==e.detections)for(var n=0,r=e.detections;n<r.length;n++){var a=r[n];t.faces.push(t.normalizedToAbsolute(a.landmarks,{xMin:o=(i=a.boundingBox).xCenter-i.width/2,xMax:o+i.width,yMin:s=i.yCenter-i.height/2,yMax:s+i.height,width:i.width,height:i.height}))}var i,o,s})}return e.prototype.normalizedToAbsolute=function(e,t){var n=this;return{keypoints:e.map(function(e,t){return{x:e.x*n.width,y:e.y*n.height,name:Rne[t]}}),box:{xMin:t.xMin*this.width,yMin:t.yMin*this.height,xMax:t.xMax*this.width,yMax:t.yMax*this.height,width:t.width*this.width,height:t.height*this.height}}},e.prototype.estimateFaces=function(e,t){return _ne(this,void 0,void 0,function(){var n,r;return Mne(this,function(a){switch(a.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),e instanceof $O?(r=ImageData.bind,[4,eD(e)]):[3,2];case 1:return n=new(r.apply(ImageData,[void 0,a.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:n=e,a.label=3;case 3:return e=n,[4,this.faceDetectorSolution.send({image:e})];case 4:return a.sent(),[2,this.faces]}})})},e.prototype.dispose=function(){this.faceDetectorSolution.close()},e.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},e}();function Pne(e){return _ne(this,void 0,void 0,function(){var t,n;return Mne(this,function(r){switch(r.label){case 0:return t=function(e){if(null==e)return One({},Dne);var t=One({},e);return t.runtime="mediapipe",null==t.modelType&&(t.modelType=Dne.modelType),null==t.maxFaces&&(t.maxFaces=Dne.maxFaces),t}(e),[4,(n=new Fne(t)).initialize()];case 1:return r.sent(),[2,n]}})})}function Lne(e){return e instanceof $O?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function zne(e){return e instanceof $O?e:tD(e)}function jne(e,t){pI(0!==e.width,function(){return"".concat(t," width cannot be 0.")}),pI(0!==e.height,function(){return"".concat(t," height cannot be 0.")})}function Bne(e){null==e.reduceBoxesInLowestLayer&&(e.reduceBoxesInLowestLayer=!1),null==e.interpolatedScaleAspectRatio&&(e.interpolatedScaleAspectRatio=1),null==e.fixedAnchorSize&&(e.fixedAnchorSize=!1);for(var t=[],n=0;n<e.numLayers;){for(var r=[],a=[],i=[],o=[],s=n;s<e.strides.length&&e.strides[s]===e.strides[n];){var l=Une(e.minScale,e.maxScale,s,e.strides.length);if(0===s&&e.reduceBoxesInLowestLayer)i.push(1),i.push(2),i.push(.5),o.push(.1),o.push(l),o.push(l);else{for(var c=0;c<e.aspectRatios.length;++c)i.push(e.aspectRatios[c]),o.push(l);if(e.interpolatedScaleAspectRatio>0){var u=s===e.strides.length-1?1:Une(e.minScale,e.maxScale,s+1,e.strides.length);o.push(Math.sqrt(l*u)),i.push(e.interpolatedScaleAspectRatio)}}s++}for(var h=0;h<i.length;++h){var d=Math.sqrt(i[h]);r.push(o[h]/d),a.push(o[h]*d)}var p=0,f=0;if(e.featureMapHeight.length>0)p=e.featureMapHeight[n],f=e.featureMapWidth[n];else{var m=e.strides[n];p=Math.ceil(e.inputSizeHeight/m),f=Math.ceil(e.inputSizeWidth/m)}for(var g=0;g<p;++g)for(var y=0;y<f;++y)for(var v=0;v<r.length;++v){var b={xCenter:(y+e.anchorOffsetX)/f,yCenter:(g+e.anchorOffsetY)/p,width:0,height:0};e.fixedAnchorSize?(b.width=1,b.height=1):(b.width=a[v],b.height=r[v]),t.push(b)}n=s}return t}function Une(e,t,n,r){return 1===r?.5*(e+t):e+(t-e)*n/(r-1)}function Wne(e,t){var n=t[0],r=t[1];return[n*e[0]+r*e[1]+e[3],n*e[4]+r*e[5]+e[7]]}function Vne(e,t,n,r){return _ne(this,void 0,void 0,function(){var r,a,i,o,s;return Mne(this,function(l){switch(l.label){case 0:return e.sort(function(e,t){return Math.max.apply(Math,t.score)-Math.max.apply(Math,e.score)}),r=ez(e.map(function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]})),a=$L(e.map(function(e){return e.score[0]})),[4,Pj.nonMaxSuppressionAsync(r,a,t,n)];case 1:return[4,(i=l.sent()).array()];case 2:return o=l.sent(),s=e.filter(function(e,t){return o.indexOf(t)>-1}),U_([r,a,i]),[2,s]}})})}function Gne(e,t,n){return _ne(this,void 0,void 0,function(){var r,a,i,o,s;return Mne(this,function(l){switch(l.label){case 0:return r=e[0],a=e[1],i=function(e,t,n){return B_(function(){var r,a,i,o;n.reverseOutputOrder?(a=XL(eF(e,[0,n.boxCoordOffset+0],[-1,1])),r=XL(eF(e,[0,n.boxCoordOffset+1],[-1,1])),o=XL(eF(e,[0,n.boxCoordOffset+2],[-1,1])),i=XL(eF(e,[0,n.boxCoordOffset+3],[-1,1]))):(r=XL(eF(e,[0,n.boxCoordOffset+0],[-1,1])),a=XL(eF(e,[0,n.boxCoordOffset+1],[-1,1])),i=XL(eF(e,[0,n.boxCoordOffset+2],[-1,1])),o=XL(eF(e,[0,n.boxCoordOffset+3],[-1,1]))),a=JM(tR(eR(a,n.xScale),t.w),t.x),r=JM(tR(eR(r,n.yScale),t.h),t.y),n.applyExponentialOnBoxSize?(i=tR(nP(eR(i,n.hScale)),t.h),o=tR(nP(eR(o,n.wScale)),t.w)):(i=tR(eR(i,n.hScale),t.h),o=tR(eR(o,n.wScale),t.h));var s=yR(r,eR(i,2)),l=yR(a,eR(o,2)),c=JM(r,eR(i,2)),u=JM(a,eR(o,2)),h=QD([XD(s,[n.numBoxes,1]),XD(l,[n.numBoxes,1]),XD(c,[n.numBoxes,1]),XD(u,[n.numBoxes,1])],1);if(n.numKeypoints)for(var d=0;d<n.numKeypoints;++d){var p=n.keypointCoordOffset+d*n.numValuesPerKeypoint,f=void 0,m=void 0;n.reverseOutputOrder?(f=XL(eF(e,[0,p],[-1,1])),m=XL(eF(e,[0,p+1],[-1,1]))):(m=XL(eF(e,[0,p],[-1,1])),f=XL(eF(e,[0,p+1],[-1,1])));var g=JM(tR(eR(f,n.xScale),t.w),t.x),y=JM(tR(eR(m,n.yScale),t.h),t.y);h=QD([h,XD(g,[n.numBoxes,1]),XD(y,[n.numBoxes,1])],1)}return h})}(a,t,n),o=B_(function(){var e=r;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(e=pF(r,-n.scoreClippingThresh,n.scoreClippingThresh)),e=$D(e)):e}),[4,Hne(i,o,n)];case 1:return s=l.sent(),U_([i,o]),[2,s]}})})}function Hne(e,t,n){return _ne(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,h,d,p,f;return Mne(this,function(m){switch(m.label){case 0:return r=[],[4,e.data()];case 1:return a=m.sent(),[4,t.data()];case 2:for(i=m.sent(),o=0;o<n.numBoxes;++o)if(!(null!=n.minScoreThresh&&i[o]<n.minScoreThresh||(s=o*n.numCoords,l=Kne(a[s+0],a[s+1],a[s+2],a[s+3],i[o],n.flipVertically,o),(c=l.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((u=l.locationData).relativeKeypoints=[],h=n.numKeypoints*n.numValuesPerKeypoint,d=0;d<h;d+=n.numValuesPerKeypoint)p=s+n.keypointCoordOffset+d,f={x:a[p+0],y:n.flipVertically?1-a[p+1]:a[p+1]},u.relativeKeypoints.push(f);r.push(l)}return[2,r]}})})}function Kne(e,t,n,r,a,i,o){return{score:[a],ind:o,locationData:{relativeBoundingBox:{xMin:t,yMin:i?1-n:e,xMax:r,yMax:i?1-e:n,width:r-t,height:n-e}}}}var qne,Xne={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},Yne={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},Zne={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},Qne={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},Jne={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},$ne={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},ere={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},tre=function(){function e(e,t,n){this.detectorModel=t,this.maxFaces=n,"full"===e?(this.imageToTensorConfig=ere,this.tensorsToDetectionConfig=Jne,this.anchors=Bne(Yne)):(this.imageToTensorConfig=$ne,this.tensorsToDetectionConfig=Qne,this.anchors=Bne(Xne));var r=$L(this.anchors.map(function(e){return e.width})),a=$L(this.anchors.map(function(e){return e.height})),i=$L(this.anchors.map(function(e){return e.xCenter})),o=$L(this.anchors.map(function(e){return e.yCenter}));this.anchorTensor={x:i,y:o,w:r,h:a}}return e.prototype.dispose=function(){this.detectorModel.dispose(),U_([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){},e.prototype.detectFaces=function(e,t){return void 0===t&&(t=!1),_ne(this,void 0,void 0,function(){var n,r,a,i,o,s,l,c,u,h,d;return Mne(this,function(p){switch(p.label){case 0:return null==e?(this.reset(),[2,[]]):(n=B_(function(){var n=YM(zne(e),"float32");return t&&(n=XL(Pj.flipLeftRight(rP(n,0)),[0])),n}),r=function(e,t,n){var r=t.outputTensorSize,a=t.keepAspectRatio,i=t.borderMode,o=t.outputTensorFloatRange,s=Lne(e),l=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(s,n),c=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=t.height,a=t.width;jne(t,"targetSize"),jne(e,"roi");var i,o,s=r/a,l=e.height/e.width,c=0,u=0;return s>l?(i=e.width,o=e.width*s,u=(1-l/s)/2):(i=e.height/s,o=e.height,c=(1-s/l)/2),e.width=i,e.height=o,{top:u,left:c,right:c,bottom:u}}(l,r,a),u=function(e,t,n){var r=e.width,a=e.height,i=Math.cos(e.rotation),o=Math.sin(e.rotation),s=e.xCenter,l=e.yCenter,c=1/t,u=1/n,h=new Array(16);return h[0]=r*i*1*c,h[1]=-a*o*c,h[2]=0,h[3]=(-.5*r*i*1+.5*a*o+s)*c,h[4]=r*o*1*u,h[5]=a*i*u,h[6]=0,h[7]=(-.5*a*i-.5*r*o*1+l)*u,h[8]=0,h[9]=0,h[10]=r*c,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,function(e){if(16!==e.length)throw new Error("Array length must be 16 but got ".concat(e.length));return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}(h)}(l,s.width,s.height),h=B_(function(){var t=zne(e),n=ez(function(e,t,n){return jne(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}(u,s,r),[1,8]),a="zero"===i?"constant":"nearest",l=Pj.transform(rP(YM(t,"float32")),n,"bilinear",a,0,[r.height,r.width]);return null!=o?function(e,t){var n=function(e,t,n,r){var a=(r-n)/255;return{scale:a,offset:n-0*a}}(0,0,t[0],t[1]);return B_(function(){return JM(tR(e,n.scale),n.offset)})}(l,o):l});return{imageTensor:h,padding:c,transformationMatrix:u}}(n,this.imageToTensorConfig),a=r.imageTensor,i=r.transformationMatrix,o=this.detectorModel.execute(a,"Identity:0"),s=function(e){return B_(function(){var t=function(e){return B_(function(){return[eF(e,[0,0,0],[1,-1,1]),eF(e,[0,0,1],[1,-1,-1])]})}(e),n=t[0],r=t[1];return{boxes:XL(r),logits:XL(n)}})}(o),l=s.boxes,[4,Gne([c=s.logits,l],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return 0===(u=p.sent()).length?(U_([n,a,o,c,l]),[2,u]):[4,Vne(u,this.maxFaces,.3)];case 2:return h=p.sent(),d=function(e,t){void 0===e&&(e=[]);var n,r=(n=t,[].concat.apply([],n));return e.forEach(function(e){var t=e.locationData;t.relativeKeypoints.forEach(function(e){var t=Wne(r,[e.x,e.y]),n=t[0],a=t[1];e.x=n,e.y=a});var n=t.relativeBoundingBox,a=Number.MAX_VALUE,i=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE;[[n.xMin,n.yMin],[n.xMin+n.width,n.yMin],[n.xMin+n.width,n.yMin+n.height],[n.xMin,n.yMin+n.height]].forEach(function(e){var t=Wne(r,e),n=t[0],l=t[1];a=Math.min(a,n),o=Math.max(o,n),i=Math.min(i,l),s=Math.max(s,l)}),t.relativeBoundingBox={xMin:a,xMax:o,yMin:i,yMax:s,width:o-a,height:s-i}}),e}(h,i),U_([n,a,o,c,l]),[2,d]}})})},e.prototype.estimateFaces=function(e,t){return _ne(this,void 0,void 0,function(){var n,r;return Mne(this,function(a){return n=Lne(e),r=!!t&&t.flipHorizontal,[2,this.detectFaces(e,r).then(function(e){return e.map(function(e){for(var t=e.locationData.relativeKeypoints.map(function(e,t){return One(One({},e),{x:e.x*n.width,y:e.y*n.height,name:Rne[t]})}),r=e.locationData.relativeBoundingBox,a=0,i=["width","xMax","xMin"];a<i.length;a++)r[i[a]]*=n.width;for(var o=0,s=["height","yMax","yMin"];o<s.length;o++)r[s[o]]*=n.height;return{keypoints:t,box:r}})})]})})},e}();function nre(e){return _ne(this,void 0,void 0,function(){var t,n,r;return Mne(this,function(a){switch(a.label){case 0:return t=function(e){if(null==e)return One({},Zne);var t=One({},e);return null==t.modelType&&(t.modelType=Zne.modelType),null==t.maxFaces&&(t.maxFaces=Zne.maxFaces),null==t.detectorModelUrl&&("full"===t.modelType?t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":t.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),t}(e),n="string"==typeof t.detectorModelUrl&&t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,EY(t.detectorModelUrl,{fromTFHub:n})];case 1:return r=a.sent(),[2,new tre(t.modelType,r,t.maxFaces)]}})})}function rre(e,t){return _ne(this,void 0,void 0,function(){var n,r;return Mne(this,function(a){if(e===qne.MediaPipeFaceDetector){if(r=void 0,null!=(n=t)){if("tfjs"===n.runtime)return[2,nre(n)];if("mediapipe"===n.runtime)return[2,Pne(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(r))}throw new Error("".concat(e," is not a supported model name."))})})}function are(e){return e.width*e.height}function ire(e){var t=e.xCenter-e.width/2,n=t+e.width,r=e.yCenter-e.height/2;return{xMin:t,xMax:n,yMin:r,yMax:r+e.height,width:e.width,height:e.height}}function ore(e){return e instanceof $O?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function sre(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function lre(e){return e instanceof $O?e:tD(e)}function cre(e,t){pI(0!==e.width,function(){return t+" width cannot be 0."}),pI(0!==e.height,function(){return t+" height cannot be 0."})}function ure(e,t,n){var r=t.outputTensorSize,a=t.keepAspectRatio,i=t.borderMode,o=t.outputTensorFloatRange,s=ore(e),l=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(s,n),c=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=t.height,a=t.width;cre(t,"targetSize"),cre(e,"roi");var i,o,s=r/a,l=e.height/e.width,c=0,u=0;return s>l?(i=e.width,o=e.width*s,u=(1-l/s)/2):(i=e.height/s,o=e.height,c=(1-s/l)/2),e.width=i,e.height=o,{top:u,left:c,right:c,bottom:u}}(l,r,a),u=function(e,t,n,r){var a=e.width,i=e.height,o=r?-1:1,s=Math.cos(e.rotation),l=Math.sin(e.rotation),c=e.xCenter,u=e.yCenter,h=1/t,d=1/n,p=new Array(16);return p[0]=a*s*o*h,p[1]=-i*l*h,p[2]=0,p[3]=(-.5*a*s*o+.5*i*l+c)*h,p[4]=a*l*o*d,p[5]=i*s*d,p[6]=0,p[7]=(-.5*i*s-.5*a*l*o+u)*d,p[8]=0,p[9]=0,p[10]=a*h,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,function(e){if(16!==e.length)throw new Error("Array length must be 16 but got "+e.length);return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}(p)}(l,s.width,s.height,!1),h=B_(function(){var t=lre(e),n=ez(function(e,t,n){return cre(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}(u,s,r),[1,8]),a="zero"===i?"constant":"nearest",l=Pj.transform(rP(YM(t,"float32")),n,"bilinear",a,0,[r.height,r.width]);return null!=o?function(e,t){var n=function(e,t,n,r){var a=(r-n)/255;return{scale:a,offset:n-0*a}}(0,0,t[0],t[1]);return B_(function(){return JM(tR(e,n.scale),n.offset)})}(l,o):l});return{imageTensor:h,padding:c,transformationMatrix:u}}function hre(e){return{xCenter:e.xMin+e.width/2,yCenter:e.yMin+e.height/2,width:e.width,height:e.height}}function dre(e){var t=e.relativeKeypoints;if(t.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,r=Number.MAX_VALUE,a=Number.MIN_VALUE,i=Number.MIN_VALUE;return t.forEach(function(e){n=Math.min(n,e.x),a=Math.max(a,e.x),r=Math.min(r,e.y),i=Math.max(i,e.y)}),{xCenter:(n+a)/2,yCenter:(r+i)/2,width:a-n,height:i-r}}function pre(e,t,n,r,a){var i="rect"===n?function(e,t,n){var r,a=e.locationData;if("boundingbox"===t)r=hre(a.boundingBox);else{r=dre(a);var i=n.width,o=n.height;r.xCenter=Math.round(r.xCenter*i),r.yCenter=Math.round(r.yCenter*o),r.width=Math.round(r.width*i),r.height=Math.round(r.height*o)}return r}(e,t,r):function(e,t){var n=e.locationData;return"boundingbox"===t?hre(n.relativeBoundingBox):dre(n)}(e,t);return a&&(i.rotation=function(e,t,n){var r,a=e.locationData,i=n.rotationVectorStartKeypointIndex,o=n.rotationVectorEndKeypointIndex;r=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var s=a.relativeKeypoints[i].x*t.width,l=a.relativeKeypoints[i].y*t.height,c=a.relativeKeypoints[o].x*t.width,u=a.relativeKeypoints[o].y*t.height;return sre(r-Math.atan2(-(u-l),c-s))}(e,r,a)),i}function fre(e,t,n){for(var r=0;r<t.length;++r){var a=t[r],i=n[e[r]];i.x=a.x,i.y=a.y}}function mre(e,t,n,r){if("string"==typeof t){if("copy"===t)for(var a=0;a<n.length;++a)r[e[a]].z=n[a].z}else{var i=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[t[r]].z;return n/t.length}(r,t);for(a=0;a<e.length;++a)r[e[a]].z=i}}function gre(e,t){for(var n=function(e){var t=[].concat.apply([],e.map(function(e){return e.indexesMapping}));if(0===t.length)throw new Error("There should be at least one landmark in indexes mapping");var n=t[0],r=t[0],a=new Set(t);a.forEach(function(e){n=Math.min(n,e),r=Math.max(r,e)});var i=a.size;if(0!==n)throw new Error("Indexes are expected to start with 0 instead of "+n);if(r+1!==i)throw new Error("Indexes should have no gaps but "+(r-i+1)+" indexes are missing");return i}(t),r=new Array(n).fill(null).map(Object),a=0;a<e.length;++a){var i=e[a],o=t[a];if(i.length!==o.indexesMapping.length)throw new Error("There are "+i.length+" refinement landmarks while mapping has "+o.indexesMapping.length);fre(o.indexesMapping,i,r),mre(o.indexesMapping,o.zRefinement,i,r)}return r}function yre(e,t){return e.map(function(e){var n=gne(gne({},e),{x:e.x*t.width,y:e.y*t.height});return null!=e.z&&(n.z=e.z*t.width),n})}function vre(e,t){return"none"===e?t:function(e){return 1/(1+Math.exp(-e))}(t)}function bre(e,t,n,r){return yne(this,void 0,void 0,function(){var a,i,o,s,l,c,u,h;return vne(this,function(d){switch(d.label){case 0:return n=n||t.flipHorizontally||!1,r=r||t.flipVertically||!1,a=e.size,i=a/t.numLandmarks,[4,e.data()];case 1:for(o=d.sent(),s=[],l=0;l<t.numLandmarks;++l)c=l*i,(h={x:0,y:0}).x=n?t.inputImageWidth-o[c]:o[c],i>1&&(h.y=r?t.inputImageHeight-o[c+1]:o[c+1]),i>2&&(h.z=o[c+2]),i>3&&(h.score=vre(t.visibilityActivation,o[c+3])),s.push(h);for(u=0;u<s.length;++u)(h=s[u]).x=h.x/t.inputImageWidth,h.y=h.y/t.inputImageHeight,h.z=h.z/t.inputImageWidth/(t.normalizeZ||1);return[2,s]}})})}function xre(e,t,n){var r=e.width,a=e.height,i=e.rotation;if(null==n.rotation&&null==n.rotationDegree||(i=function(e,t){return null!=t.rotation?e+=t.rotation:null!=t.rotationDegree&&(e+=Math.PI*t.rotationDegree/180),sre(e)}(i,n)),0===i)e.xCenter=e.xCenter+r*n.shiftX,e.yCenter=e.yCenter+a*n.shiftY;else{var o=(t.width*r*n.shiftX*Math.cos(i)-t.height*a*n.shiftY*Math.sin(i))/t.width,s=(t.width*r*n.shiftX*Math.sin(i)+t.height*a*n.shiftY*Math.cos(i))/t.height;e.xCenter=e.xCenter+o,e.yCenter=e.yCenter+s}if(n.squareLong){var l=Math.max(r*t.width,a*t.height);r=l/t.width,a=l/t.height}else if(n.squareShort){var c=Math.min(r*t.width,a*t.height);r=c/t.width,a=c/t.height}return e.width=r*n.scaleX,e.height=a*n.scaleY,e}(qne||(qne={})).MediaPipeFaceDetector="MediaPipeFaceDetector";var wre,kre={runtime:"tfjs",maxFaces:1,refineLandmarks:!1,landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"},Sre={flipHorizontal:!1,staticImageMode:!1},Nre={shiftX:0,shiftY:0,scaleX:1.5,scaleY:1.5,squareLong:!0},Tre={outputTensorSize:{width:192,height:192},outputTensorFloatRange:[0,1],borderMode:"replicate"},Ire={numLandmarks:468,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Ere={numLandmarks:80,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Cre={numLandmarks:71,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Are={numLandmarks:5,inputImageWidth:192,inputImageHeight:192,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Ore={indexesMapping:Array.from(Array(468).keys()),zRefinement:"copy"},_re={indexesMapping:[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407],zRefinement:"none"},Mre={indexesMapping:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],zRefinement:"none"},Rre={indexesMapping:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417],zRefinement:"none"},Dre={indexesMapping:[468,469,470,471,472],zRefinement:[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173]},Fre={indexesMapping:[473,474,475,476,477],zRefinement:[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398]},Pre=function(){function e(e,t,n,r){this.detector=e,this.landmarkModel=t,this.maxFaces=n,this.withAttention=r,this.prevFaceRectsFromLandmarks=null}return e.prototype.estimateFaces=function(e,t){return yne(this,void 0,void 0,function(){var n,r,a,i,o,s,l,c,u,h,d,p,f,m=this;return vne(this,function(g){switch(g.label){case 0:return n=function(e){if(null==e)return gne({},Sre);var t=gne({},e);return null==t.flipHorizontal&&(t.flipHorizontal=Sre.flipHorizontal),null==t.staticImageMode&&(t.staticImageMode=Sre.staticImageMode),t}(t),null==e?(this.reset(),[2,[]]):(r=ore(e),a=B_(function(){var t=YM(lre(e),"float32");return n.flipHorizontal&&(t=XL(Pj.flipLeftRight(rP(t,0)),[0])),t}),i=this.prevFaceRectsFromLandmarks,n.staticImageMode||null==i||i.length<this.maxFaces?[4,this.detector.detectFaces(a,!1)]:[3,2]);case 1:return 0===(s=g.sent()).length?(this.reset(),a.dispose(),[2,[]]):(o=s.map(function(e){return m.faceDetectionFrontDetectionToRoi(e,r)}),[3,3]);case 2:o=[],g.label=3;case 3:return y=[],[o,i||[]].forEach(function(e){return e.forEach(function(e){(y=y.filter(function(t){return function(e,t){var n=ire(e),r=ire(t);if(!function(e,t){return!(e.xMax<t.xMin||t.xMax<e.xMin||e.yMax<t.yMin||t.yMax<e.yMin)}(n,r))return 0;var a=are(function(e,t){var n=Math.max(e.xMin,t.xMin),r=Math.min(e.xMax,t.xMax),a=Math.max(e.yMin,t.yMin),i=Math.min(e.yMax,t.yMax);return{xMin:n,xMax:r,yMin:a,yMax:i,width:Math.max(r-n,0),height:Math.max(i-a,0)}}(n,r)),i=are(n)+are(r)-a;return i>0?a/i:0}(e,t)<=.5})).push(e)})}),l=y,[4,Promise.all(l.map(function(e){return m.faceLandmark(e,a)}))];case 4:for(c=g.sent(),u=[],this.prevFaceRectsFromLandmarks=[],h=0;h<c.length;++h)null!=(d=c[h])&&(this.prevFaceRectsFromLandmarks.push(this.faceLandmarksToRoi(d,r)),null!=(p=yre(d,r))&&p.forEach(function(e,t){var n=Sne.get(t);null!=n&&(e.name=n)}),f=Nne(p),u.push({keypoints:p,box:f.locationData.relativeBoundingBox}));return a.dispose(),[2,u]}var y})})},e.prototype.dispose=function(){this.detector.dispose(),this.landmarkModel.dispose()},e.prototype.reset=function(){this.detector.reset(),this.prevFaceRectsFromLandmarks=null},e.prototype.faceDetectionFrontDetectionToRoi=function(e,t){return xre(pre(e,"boundingbox","normRect",t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:0}),t,Nre)},e.prototype.faceLandmark=function(e,t){return yne(this,void 0,void 0,function(){var n,r,a,i,o,s,l;return vne(this,function(c){switch(c.label){case 0:return n=ure(t,Tre,e).imageTensor,r=["output_faceflag"].concat(this.withAttention?["output_mesh_identity","output_lips","Identity_6:0","Identity_1:0","Identity_2:0","Identity_5:0"]:["output_mesh"]),a=this.landmarkModel.execute(n,r),i=a[0],o=a.slice(1),[4,i.data()];case 1:return c.sent()[0]<.5?(U_(a),U_(n),[2,null]):this.withAttention?[4,this.tensorsToFaceLandmarksWithAttention(o)]:[3,3];case 2:return s=c.sent(),[3,5];case 3:return[4,this.tensorsToFaceLandmarks(o)];case 4:s=c.sent(),c.label=5;case 5:return l=function(e,t,n){void 0===n&&(n={ignoreRotation:!1});for(var r=[],a=0,i=e;a<i.length;a++){var o=i[a],s=o.x-.5,l=o.y-.5,c=n.ignoreRotation?0:t.rotation,u=Math.cos(c)*s-Math.sin(c)*l,h=Math.sin(c)*s+Math.cos(c)*l;u=u*t.width+t.xCenter,h=h*t.height+t.yCenter;var d=o.z*t.width,p=gne({},o);p.x=u,p.y=h,p.z=d,r.push(p)}return r}(s,e),U_(a),U_(n),[2,l]}})})},e.prototype.tensorsToFaceLandmarks=function(e){return yne(this,void 0,void 0,function(){return vne(this,function(t){return[2,bre(e[0],Ire)]})})},e.prototype.tensorsToFaceLandmarksWithAttention=function(e){return yne(this,void 0,void 0,function(){var t,n,r,a,i,o;return vne(this,function(s){switch(s.label){case 0:return[4,bre(e[0],Ire)];case 1:return t=s.sent(),[4,bre(e[1],Ere)];case 2:return n=s.sent(),[4,bre(e[3],Cre)];case 3:return r=s.sent(),[4,bre(e[5],Cre)];case 4:return a=s.sent(),[4,bre(e[4],Are)];case 5:return i=s.sent(),[4,bre(e[2],Are)];case 6:return o=s.sent(),[2,gre([t,n,r,a,i,o],[Ore,_re,Mre,Rre,Dre,Fre])]}})})},e.prototype.faceLandmarksToRoi=function(e,t){return xre(pre(Nne(e),"boundingbox","normRect",t,{rotationVectorStartKeypointIndex:33,rotationVectorEndKeypointIndex:263,rotationVectorTargetAngleDegree:0}),t,Nre)},e}();function Lre(e){return yne(this,void 0,void 0,function(){var t,n,r,a;return vne(this,function(i){switch(i.label){case 0:return t=function(e){if(null==e)return gne({},kre);var t=gne({},e);return t.runtime="tfjs",null==t.maxFaces&&(t.maxFaces=kre.maxFaces),null==t.refineLandmarks&&(t.refineLandmarks=kre.refineLandmarks),null==t.landmarkModelUrl&&(t.landmarkModelUrl=t.refineLandmarks?"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/attention_mesh/1":"https://tfhub.dev/mediapipe/tfjs-model/face_landmarks_detection/face_mesh/1"),t}(e),n="string"==typeof t.landmarkModelUrl&&t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,EY(t.landmarkModelUrl,{fromTFHub:n})];case 1:return r=i.sent(),[4,rre(qne.MediaPipeFaceDetector,{modelType:"short",maxFaces:t.maxFaces,detectorModelUrl:t.detectorModelUrl,runtime:t.runtime})];case 2:return a=i.sent(),[2,new Pre(a,r,t.maxFaces,t.refineLandmarks)]}})})}(wre||(wre={})).MediaPipeFaceMesh="MediaPipeFaceMesh";Object.freeze({__proto__:null,getKeypointIndexByContour:function(e){if(e===wre.MediaPipeFaceMesh)return xne;throw new Error("Model "+e+" is not supported.")},getAdjacentPairs:function(e){if(e===wre.MediaPipeFaceMesh)return wne;throw new Error("Model "+e+" is not supported.")}});var zre=n(3879),jre=function(e,t){return(jre=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Bre(e,t){function n(){this.constructor=e}jre(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ure=function(){return(Ure=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Wre(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function Vre(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function Gre(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}var Hre=["nose","left_eye","right_eye","left_ear","right_ear","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle"],Kre=["nose","left_eye_inner","left_eye","left_eye_outer","right_eye_inner","right_eye","right_eye_outer","left_ear","right_ear","mouth_left","mouth_right","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_pinky","right_pinky","left_index","right_index","left_thumb","right_thumb","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle","left_heel","right_heel","left_foot_index","right_foot_index"],qre={left:[1,2,3,7,9,11,13,15,17,19,21,23,25,27,29,31],right:[4,5,6,8,10,12,14,16,18,20,22,24,26,28,30,32],middle:[0]},Xre={left:[1,3,5,7,9,11,13,15],right:[2,4,6,8,10,12,14,16],middle:[0]},Yre=[[0,1],[0,2],[1,3],[2,4],[5,6],[5,7],[5,11],[6,8],[6,12],[7,9],[8,10],[11,12],[11,13],[12,14],[13,15],[14,16]],Zre=[[0,1],[0,4],[1,2],[2,3],[3,7],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[11,23],[12,14],[14,16],[12,24],[13,15],[15,17],[16,18],[16,20],[15,17],[15,19],[15,21],[16,22],[17,19],[18,20],[23,25],[23,24],[24,26],[25,27],[26,28],[27,29],[28,30],[27,31],[28,32],[29,31],[30,32]];function Qre(e){return e instanceof SVGAnimatedLength?e.baseVal.value:e}function Jre(e){return Wre(this,void 0,void 0,function(){var t,n;return Vre(this,function(r){switch(r.label){case 0:return t=document.createElement("canvas"),e instanceof $O?[4,eD(e,t)]:[3,2];case 1:return r.sent(),[3,3];case 2:t.width=Qre(e.width),t.height=Qre(e.height),n=t.getContext("2d"),e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0),r.label=3;case 3:return[2,t]}})})}function $re(e){return Wre(this,void 0,void 0,function(){var t,n,r,a,i,o;return Vre(this,function(s){switch(s.label){case 0:return e instanceof $O?(t=e.shape.slice(0,2),n=t[0],r=t[1],a=ImageData.bind,[4,eD(e)]):[3,2];case 1:return[2,new(a.apply(ImageData,[void 0,s.sent(),r,n]))];case 2:return i=document.createElement("canvas"),o=i.getContext("2d"),i.width=Qre(e.width),i.height=Qre(e.height),o.drawImage(e,0,0),[2,o.getImageData(0,0,i.width,i.height)]}})})}function eae(e){return Wre(this,void 0,void 0,function(){var t;return Vre(this,function(n){switch(n.label){case 0:return e instanceof SVGImageElement||e instanceof OffscreenCanvas?[4,Jre(e)]:[3,2];case 1:return t=n.sent(),[3,3];case 2:t=e,n.label=3;case 3:return[2,tD(t,4)]}})})}function tae(e){if(e<0||e>=256)throw new Error("Mask value must be in range [0, 255] but got "+e);if(!Number.isInteger(e))throw new Error("Mask value must be an integer but got "+e)}var nae={runtime:"mediapipe",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,modelType:"full"},rae=function(){function e(e){this.mask=e}return e.prototype.toCanvasImageSource=function(){return Wre(this,void 0,void 0,function(){return Vre(this,function(e){return[2,this.mask]})})},e.prototype.toImageData=function(){return Wre(this,void 0,void 0,function(){return Vre(this,function(e){return[2,$re(this.mask)]})})},e.prototype.toTensor=function(){return Wre(this,void 0,void 0,function(){return Vre(this,function(e){return[2,eae(this.mask)]})})},e.prototype.getUnderlyingType=function(){return"canvasimagesource"},e}();function aae(e){return tae(e),"person"}var iae=function(){function e(e){var t,n=this;switch(this.width=0,this.height=0,this.selfieMode=!1,this.poseSolution=new zre.Pose({locateFile:function(t,n){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+t:n+"/"+t}}),e.modelType){case"lite":t=0;break;case"heavy":t=2;break;default:t=1}this.poseSolution.setOptions({modelComplexity:t,smoothLandmarks:e.enableSmoothing,enableSegmentation:e.enableSegmentation,smoothSegmentation:e.smoothSegmentation,selfieMode:this.selfieMode}),this.poseSolution.onResults(function(e){if(n.height=e.image.height,n.width=e.image.width,null==e.poseLandmarks)n.poses=[];else{var t=n.translateOutput(e.poseLandmarks,e.poseWorldLandmarks);e.segmentationMask&&(t.segmentation={maskValueToLabel:aae,mask:new rae(e.segmentationMask)}),n.poses=[t]}})}return e.prototype.translateOutput=function(e,t){var n=this,r={keypoints:e.map(function(e,t){return{x:e.x*n.width,y:e.y*n.height,z:e.z,score:e.visibility,name:Kre[t]}})};return null!=t&&(r.keypoints3D=t.map(function(e,t){return{x:e.x,y:e.y,z:e.z,score:e.visibility,name:Kre[t]}})),r},e.prototype.estimatePoses=function(e,t,n){return Wre(this,void 0,void 0,function(){var r,a;return Vre(this,function(i){switch(i.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.poseSolution.setOptions({selfieMode:this.selfieMode})),e instanceof $O?(a=ImageData.bind,[4,eD(e)]):[3,2];case 1:return r=new(a.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.poseSolution.send({image:e},n)];case 4:return i.sent(),[2,this.poses]}})})},e.prototype.dispose=function(){this.poseSolution.close()},e.prototype.reset=function(){this.poseSolution.reset()},e.prototype.initialize=function(){return this.poseSolution.initialize()},e}();function oae(e){return Wre(this,void 0,void 0,function(){var t,n;return Vre(this,function(r){switch(r.label){case 0:return t=function(e){if(null==e)return Ure({},nae);var t=Ure({},e);return t.runtime="mediapipe",null==t.enableSegmentation&&(t.enableSegmentation=nae.enableSegmentation),null==t.enableSmoothing&&(t.enableSmoothing=nae.enableSmoothing),null==t.smoothSegmentation&&(t.smoothSegmentation=nae.smoothSegmentation),null==t.modelType&&(t.modelType=nae.modelType),t}(e),[4,(n=new iae(t)).initialize()];case 1:return r.sent(),[2,n]}})})}function sae(e){return e instanceof $O?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function lae(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function cae(e){return e instanceof $O?e:tD(e)}function uae(e,t,n){return hae(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}function hae(e,t){pI(0!==e.width,function(){return t+" width cannot be 0."}),pI(0!==e.height,function(){return t+" height cannot be 0."})}function dae(e,t,n){var r=n.rotationVectorStartKeypointIndex,a=n.rotationVectorEndKeypointIndex,i=e.locationData,o=i.relativeKeypoints[r].x*t.width,s=i.relativeKeypoints[r].y*t.height,l=i.relativeKeypoints[a].x*t.width,c=i.relativeKeypoints[a].y*t.height,u=2*Math.sqrt((l-o)*(l-o)+(c-s)*(c-s)),h=function(e,t,n){var r,a=e.locationData,i=n.rotationVectorStartKeypointIndex,o=n.rotationVectorEndKeypointIndex;r=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var s=a.relativeKeypoints[i].x*t.width,l=a.relativeKeypoints[i].y*t.height,c=a.relativeKeypoints[o].x*t.width,u=a.relativeKeypoints[o].y*t.height;return lae(r-Math.atan2(-(u-l),c-s))}(e,t,n);return{xCenter:o/t.width,yCenter:s/t.height,width:u/t.width,height:u/t.height,rotation:h}}function pae(e){if(16!==e.length)throw new Error("Array length must be 16 but got "+e.length);return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}function fae(e,t,n,r,a,i,o){return e[t][a]*(e[n][i]*e[r][o]-e[n][o]*e[r][i])}function mae(e,t,n){var r=(t+1)%4,a=(t+2)%4,i=(t+3)%4,o=(n+1)%4,s=(n+2)%4,l=(n+3)%4;return fae(e,r,a,i,o,s,l)+fae(e,a,i,r,o,s,l)+fae(e,i,r,a,o,s,l)}function gae(e,t,n){void 0===n&&(n={ignoreRotation:!1});for(var r=[],a=0,i=e;a<i.length;a++){var o=i[a],s=o.x-.5,l=o.y-.5,c=n.ignoreRotation?0:t.rotation,u=Math.cos(c)*s-Math.sin(c)*l,h=Math.sin(c)*s+Math.cos(c)*l;u=u*t.width+t.xCenter,h=h*t.height+t.yCenter;var d=o.z*t.width,p=Ure({},o);p.x=u,p.y=h,p.z=d,r.push(p)}return r}function yae(e,t){var n=function(e,t,n,r){var a=(r-n)/255;return{scale:a,offset:n-0*a}}(0,0,t[0],t[1]);return B_(function(){return JM(tR(e,n.scale),n.offset)})}function vae(e,t,n){var r,a,i,o,s,l,c,u,h,d,p,f,m=t.outputTensorSize,g=t.keepAspectRatio,y=t.borderMode,v=t.outputTensorFloatRange,b=sae(e),x=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(b,n),w=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=t.height,a=t.width;hae(t,"targetSize"),hae(e,"roi");var i,o,s=r/a,l=e.height/e.width,c=0,u=0;return s>l?(i=e.width,o=e.width*s,u=(1-l/s)/2):(i=e.height/s,o=e.height,c=(1-s/l)/2),e.width=i,e.height=o,{top:u,left:c,right:c,bottom:u}}(x,m,g),k=(r=x,a=b.width,i=b.height,o=r.width,s=r.height,l=Math.cos(r.rotation),c=Math.sin(r.rotation),u=r.xCenter,h=r.yCenter,d=1/a,p=1/i,(f=new Array(16))[0]=o*l*1*d,f[1]=-s*c*d,f[2]=0,f[3]=(-.5*o*l*1+.5*s*c+u)*d,f[4]=o*c*1*p,f[5]=s*l*p,f[6]=0,f[7]=(-.5*s*l-.5*o*c*1+h)*p,f[8]=0,f[9]=0,f[10]=o*d,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,pae(f));return{imageTensor:B_(function(){var t=cae(e),n=ez(uae(k,b,m),[1,8]),r="zero"===y?"constant":"nearest",a=Pj.transform(rP(YM(t,"float32")),n,"bilinear",r,0,[m.height,m.width]);return null!=v?yae(a,v):a}),padding:w,transformationMatrix:k}}function bae(e,t,n,r){return 1===r?.5*(e+t):e+(t-e)*n/(r-1)}function xae(e){return null!=e&&null!=e.currentTime}function wae(e){for(var t={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=0;o<e.length;++o){var s=e[o];n=Math.min(n,s.x),r=Math.max(r,s.x),a=Math.min(a,s.y),i=Math.max(i,s.y),t.locationData.relativeKeypoints.push({x:s.x,y:s.y})}return t.locationData.relativeBoundingBox={xMin:n,yMin:a,xMax:r,yMax:i,width:r-n,height:i-a},t}function kae(e,t,n,r){return Wre(this,void 0,void 0,function(){var r,a,i,o,s;return Vre(this,function(l){switch(l.label){case 0:return e.sort(function(e,t){return Math.max.apply(Math,t.score)-Math.max.apply(Math,e.score)}),r=ez(e.map(function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]})),a=$L(e.map(function(e){return e.score[0]})),[4,Pj.nonMaxSuppressionAsync(r,a,t,n)];case 1:return[4,(i=l.sent()).array()];case 2:return o=l.sent(),s=e.filter(function(e,t){return o.indexOf(t)>-1}),U_([r,a,i]),[2,s]}})})}function Sae(e,t){return e.map(function(e){var n=Ure(Ure({},e),{x:e.x*t.width,y:e.y*t.height});return null!=e.z&&(n.z=e.z*t.width),n})}function Nae(e,t,n){return Wre(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,h,d,p,f,m,g,y,v,b,x,w,k,S,N,T,I;return Vre(this,function(E){switch(E.label){case 0:if(r=XL(t,[0]),a=r.shape,i=a[0],o=a[1],s=a[2],e.length!==s)throw new Error("Expected heatmap to have same number of channels as the number of landmarks. But got landmarks length: "+e.length+", heatmap length: "+s);return l=[],[4,r.buffer()];case 1:for(c=E.sent(),u=0;u<e.length;u++)if(h=e[u],d=Ure({},h),l.push(d),p=Math.trunc(d.x*o),f=Math.trunc(d.y*i),!(p<0||p>=o||f<0||p>=i)){for(m=Math.trunc((n.kernelSize-1)/2),g=Math.max(0,p-m),y=Math.min(o,p+m+1),v=Math.max(0,f-m),b=Math.min(i,f+m+1),x=0,w=0,k=0,S=0,N=v;N<b;++N)for(T=g;T<y;++T)I=c.get(N,T,u),x+=I,S=Math.max(S,I),w+=T*I,k+=N*I;S>=n.minConfidenceToRefine&&x>0&&(d.x=w/o/x,d.y=k/i/x)}return r.dispose(),[2,l]}})})}function Tae(e,t){var n=t.left,r=t.top,a=t.left+t.right,i=t.top+t.bottom;return e.map(function(e){return Ure(Ure({},e),{x:(e.x-n)/(1-a),y:(e.y-r)/(1-i),z:e.z/(1-a)})})}function Iae(e,t,n){return Wre(this,void 0,void 0,function(){var r,a,i,o,s;return Vre(this,function(l){switch(l.label){case 0:return r=e[0],a=e[1],i=function(e,t,n){return B_(function(){var r,a,i,o;n.reverseOutputOrder?(a=XL(eF(e,[0,n.boxCoordOffset+0],[-1,1])),r=XL(eF(e,[0,n.boxCoordOffset+1],[-1,1])),o=XL(eF(e,[0,n.boxCoordOffset+2],[-1,1])),i=XL(eF(e,[0,n.boxCoordOffset+3],[-1,1]))):(r=XL(eF(e,[0,n.boxCoordOffset+0],[-1,1])),a=XL(eF(e,[0,n.boxCoordOffset+1],[-1,1])),i=XL(eF(e,[0,n.boxCoordOffset+2],[-1,1])),o=XL(eF(e,[0,n.boxCoordOffset+3],[-1,1]))),a=JM(tR(eR(a,n.xScale),t.w),t.x),r=JM(tR(eR(r,n.yScale),t.h),t.y),n.applyExponentialOnBoxSize?(i=tR(nP(eR(i,n.hScale)),t.h),o=tR(nP(eR(o,n.wScale)),t.w)):(i=tR(eR(i,n.hScale),t.h),o=tR(eR(o,n.wScale),t.h));var s=yR(r,eR(i,2)),l=yR(a,eR(o,2)),c=JM(r,eR(i,2)),u=JM(a,eR(o,2)),h=QD([XD(s,[n.numBoxes,1]),XD(l,[n.numBoxes,1]),XD(c,[n.numBoxes,1]),XD(u,[n.numBoxes,1])],1);if(n.numKeypoints)for(var d=0;d<n.numKeypoints;++d){var p=n.keypointCoordOffset+d*n.numValuesPerKeypoint,f=void 0,m=void 0;n.reverseOutputOrder?(f=XL(eF(e,[0,p],[-1,1])),m=XL(eF(e,[0,p+1],[-1,1]))):(m=XL(eF(e,[0,p],[-1,1])),f=XL(eF(e,[0,p+1],[-1,1])));var g=JM(tR(eR(f,n.xScale),t.w),t.x),y=JM(tR(eR(m,n.yScale),t.h),t.y);h=QD([h,XD(g,[n.numBoxes,1]),XD(y,[n.numBoxes,1])],1)}return h})}(a,t,n),o=B_(function(){var e=r;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(e=pF(r,-n.scoreClippingThresh,n.scoreClippingThresh)),e=$D(e)):e}),[4,Eae(i,o,n)];case 1:return s=l.sent(),U_([i,o]),[2,s]}})})}function Eae(e,t,n){return Wre(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,h,d,p,f;return Vre(this,function(m){switch(m.label){case 0:return r=[],[4,e.data()];case 1:return a=m.sent(),[4,t.data()];case 2:for(i=m.sent(),o=0;o<n.numBoxes;++o)if(!(null!=n.minScoreThresh&&i[o]<n.minScoreThresh||(s=o*n.numCoords,l=Cae(a[s+0],a[s+1],a[s+2],a[s+3],i[o],n.flipVertically,o),(c=l.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((u=l.locationData).relativeKeypoints=[],h=n.numKeypoints*n.numValuesPerKeypoint,d=0;d<h;d+=n.numValuesPerKeypoint)p=s+n.keypointCoordOffset+d,f={x:a[p+0],y:n.flipVertically?1-a[p+1]:a[p+1]},u.relativeKeypoints.push(f);r.push(l)}return[2,r]}})})}function Cae(e,t,n,r,a,i,o){return{score:[a],ind:o,locationData:{relativeBoundingBox:{xMin:t,yMin:i?1-n:e,xMax:r,yMax:i?1-e:n,width:r-t,height:n-e}}}}function Aae(e,t){return"none"===e?t:function(e){return 1/(1+Math.exp(-e))}(t)}function Oae(e,t,n,r){return Wre(this,void 0,void 0,function(){var a,i,o,s,l,c,u,h;return Vre(this,function(d){switch(d.label){case 0:return n=n||t.flipHorizontally||!1,r=r||t.flipVertically||!1,a=e.size,i=a/t.numLandmarks,[4,e.data()];case 1:for(o=d.sent(),s=[],l=0;l<t.numLandmarks;++l)c=l*i,(h={x:0,y:0}).x=n?t.inputImageWidth-o[c]:o[c],i>1&&(h.y=r?t.inputImageHeight-o[c+1]:o[c+1]),i>2&&(h.z=o[c+2]),i>3&&(h.score=Aae(t.visibilityActivation,o[c+3])),s.push(h);for(u=0;u<s.length;++u)(h=s[u]).x=h.x/t.inputImageWidth,h.y=h.y/t.inputImageHeight,h.z=h.z/t.inputImageWidth/(t.normalizeZ||1);return[2,s]}})})}function _ae(e,t,n){var r=e.width,a=e.height,i=e.rotation;if(null==n.rotation&&null==n.rotationDegree||(i=function(e,t){return null!=t.rotation?e+=t.rotation:null!=t.rotationDegree&&(e+=Math.PI*t.rotationDegree/180),lae(e)}(i,n)),0===i)e.xCenter=e.xCenter+r*n.shiftX,e.yCenter=e.yCenter+a*n.shiftY;else{var o=(t.width*r*n.shiftX*Math.cos(i)-t.height*a*n.shiftY*Math.sin(i))/t.width,s=(t.width*r*n.shiftX*Math.sin(i)+t.height*a*n.shiftY*Math.cos(i))/t.height;e.xCenter=e.xCenter+o,e.yCenter=e.yCenter+s}if(n.squareLong){var l=Math.max(r*t.width,a*t.height);r=l/t.width,a=l/t.height}else if(n.squareShort){var c=Math.min(r*t.width,a*t.height);r=c/t.width,a=c/t.height}return e.width=r*n.scaleX,e.height=a*n.scaleY,e}function Mae(e,t){return e.map(function(e){var n=Ure(Ure({},e),{x:e.x/t.width,y:e.y/t.height});return null!=e.z&&(e.z=e.z/t.width),n})}var Rae=function(){function e(e){this.alpha=e,this.initialized=!1}return e.prototype.apply=function(e,t){var n;return this.initialized?n=null==t?this.storedValue+this.alpha*(e-this.storedValue):this.storedValue+this.alpha*t*Math.asinh((e-this.storedValue)/t):(n=e,this.initialized=!0),this.rawValue=e,this.storedValue=n,n},e.prototype.applyWithAlpha=function(e,t,n){return this.alpha=t,this.apply(e,n)},e.prototype.hasLastRawValue=function(){return this.initialized},e.prototype.lastRawValue=function(){return this.rawValue},e.prototype.reset=function(){this.initialized=!1},e}(),Dae=function(){function e(e){this.frequency=e.frequency,this.minCutOff=e.minCutOff,this.beta=e.beta,this.thresholdCutOff=e.thresholdCutOff,this.thresholdBeta=e.thresholdBeta,this.derivateCutOff=e.derivateCutOff,this.x=new Rae(this.getAlpha(this.minCutOff)),this.dx=new Rae(this.getAlpha(this.derivateCutOff)),this.lastTimestamp=0}return e.prototype.apply=function(e,t,n){if(null==e)return e;var r=Math.trunc(t);if(this.lastTimestamp>=r)return e;0!==this.lastTimestamp&&0!==r&&(this.frequency=1/(1e-6*(r-this.lastTimestamp))),this.lastTimestamp=r;var a=this.x.hasLastRawValue()?(e-this.x.lastRawValue())*n*this.frequency:0,i=this.dx.applyWithAlpha(a,this.getAlpha(this.derivateCutOff)),o=this.minCutOff+this.beta*Math.abs(i),s=null!=this.thresholdCutOff?this.thresholdCutOff+this.thresholdBeta*Math.abs(i):null;return this.x.applyWithAlpha(e,this.getAlpha(o),s)},e.prototype.getAlpha=function(e){return 1/(1+this.frequency/(2*Math.PI*e))},e}(),Fae=function(){function e(e){this.config=e}return e.prototype.apply=function(e,t,n){var r=this;if(null==e)return this.reset(),null;this.initializeFiltersIfEmpty(e);var a=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return Gre(e);a=1/n}return e.map(function(e,n){var i=Ure(Ure({},e),{x:r.xFilters[n].apply(e.x,t,a),y:r.yFilters[n].apply(e.y,t,a)});return null!=e.z&&(i.z=r.zFilters[n].apply(e.z,t,a)),i})},e.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},e.prototype.initializeFiltersIfEmpty=function(e){var t=this;null!=this.xFilters&&this.xFilters.length===e.length||(this.xFilters=e.map(function(e){return new Dae(t.config)}),this.yFilters=e.map(function(e){return new Dae(t.config)}),this.zFilters=e.map(function(e){return new Dae(t.config)}))},e}(),Pae=function(){function e(e){this.config=e,this.window=[],this.lowPassFilter=new Rae(1),this.lastValue=0,this.lastValueScale=1,this.lastTimestamp=-1}return e.prototype.apply=function(e,t,n){if(null==e)return e;var r,a=Math.trunc(t);if(this.lastTimestamp>=a)return e;if(-1===this.lastTimestamp)r=1;else{for(var i=e*n-this.lastValue*this.lastValueScale,o=a-this.lastTimestamp,s=i,l=o,c=(1+this.window.length)*(1e6/30),u=0,h=this.window;u<h.length;u++){var d=h[u];if(l+d.duration>c)break;s+=d.distance,l+=d.duration}var p=s/(1e-6*l);r=1-1/(1+this.config.velocityScale*Math.abs(p)),this.window.unshift({distance:i,duration:o}),this.window.length>this.config.windowSize&&this.window.pop()}return this.lastValue=e,this.lastValueScale=n,this.lastTimestamp=a,this.lowPassFilter.applyWithAlpha(e,r)},e}(),Lae=function(){function e(e){this.config=e}return e.prototype.apply=function(e,t,n){var r=this;if(null==e)return this.reset(),null;var a=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return Gre(e);a=1/n}return this.initializeFiltersIfEmpty(e),e.map(function(e,n){var i=Ure(Ure({},e),{x:r.xFilters[n].apply(e.x,t,a),y:r.yFilters[n].apply(e.y,t,a)});return null!=e.z&&(i.z=r.zFilters[n].apply(e.z,t,a)),i})},e.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},e.prototype.initializeFiltersIfEmpty=function(e){var t=this;null!=this.xFilters&&this.xFilters.length===e.length||(this.xFilters=e.map(function(e){return new Pae(t.config)}),this.yFilters=e.map(function(e){return new Pae(t.config)}),this.zFilters=e.map(function(e){return new Pae(t.config)}))},e}(),zae=function(){function e(e){if(null!=e.velocityFilter)this.keypointsFilter=new Lae(e.velocityFilter);else{if(null==e.oneEuroFilter)throw new Error("Either configure velocityFilter or oneEuroFilter, but got "+e+".");this.keypointsFilter=new Fae(e.oneEuroFilter)}}return e.prototype.apply=function(e,t,n,r,a){if(void 0===r&&(r=!1),null==e)return this.keypointsFilter.reset(),null;var i=null!=a?function(e,t){return(e.width*t.width+e.height*t.height)/2}(a,n):1,o=r?Sae(e,n):e,s=this.keypointsFilter.apply(o,t,i);return r?Mae(s,n):s},e}(),jae=function(){function e(e){this.alpha=e.alpha}return e.prototype.apply=function(e){var t=this;if(null==e)return this.visibilityFilters=null,null;null!=this.visibilityFilters&&this.visibilityFilters.length===e.length||(this.visibilityFilters=e.map(function(e){return new Rae(t.alpha)}));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=Ure({},a);i.score=this.visibilityFilters[r].apply(a.score),n.push(i)}return n},e}(),Bae={reduceBoxesInLowestlayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:5,minScale:.1484375,maxScale:.75,inputSizeHeight:224,inputSizeWidth:224,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,32,32,32],aspectRatios:[1],fixedAnchorSize:!0},Uae={runtime:"tfjs",modelType:"full",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/detector/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"},Wae={maxPoses:1,flipHorizontal:!1},Vae={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2254,numCoords:12,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:4,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:224,yScale:224,hScale:224,wScale:224,minScoreThresh:.5},Gae={shiftX:0,shiftY:0,scaleX:1.25,scaleY:1.25,squareLong:!0},Hae={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},Kae={outputTensorSize:{width:256,height:256},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},qae={numLandmarks:39,inputImageWidth:256,inputImageHeight:256,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},Xae={numLandmarks:39,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},Yae={kernelSize:7,minConfidenceToRefine:.5},Zae={alpha:.1},Qae={oneEuroFilter:{frequency:30,minCutOff:.05,beta:80,derivateCutOff:1,minAllowedObjectScale:1e-6}},Jae={oneEuroFilter:{frequency:30,minCutOff:.01,beta:10,derivateCutOff:1,minAllowedObjectScale:1e-6}},$ae={oneEuroFilter:{frequency:30,minCutOff:.1,beta:40,derivateCutOff:1,minAllowedObjectScale:1e-6,disableValueScaling:!0}},eie={activation:"none"},tie={combineWithPreviousRatio:.7},nie=function(){function e(e){this.mask=e}return e.prototype.toCanvasImageSource=function(){return Wre(this,void 0,void 0,function(){return Vre(this,function(e){return[2,Jre(this.mask)]})})},e.prototype.toImageData=function(){return Wre(this,void 0,void 0,function(){return Vre(this,function(e){return[2,$re(this.mask)]})})},e.prototype.toTensor=function(){return Wre(this,void 0,void 0,function(){return Vre(this,function(e){return[2,this.mask]})})},e.prototype.getUnderlyingType=function(){return"tensor"},e}();function rie(e){return tae(e),"person"}var aie=function(){function e(e,t,n,r,a,i){this.detectorModel=e,this.landmarkModel=t,this.enableSmoothing=n,this.enableSegmentation=r,this.smoothSegmentation=a,this.modelType=i,this.regionOfInterest=null,this.prevFilteredSegmentationMask=null,this.anchors=function(e){null==e.reduceBoxesInLowestLayer&&(e.reduceBoxesInLowestLayer=!1),null==e.interpolatedScaleAspectRatio&&(e.interpolatedScaleAspectRatio=1),null==e.fixedAnchorSize&&(e.fixedAnchorSize=!1);for(var t=[],n=0;n<e.numLayers;){for(var r=[],a=[],i=[],o=[],s=n;s<e.strides.length&&e.strides[s]===e.strides[n];){var l=bae(e.minScale,e.maxScale,s,e.strides.length);if(0===s&&e.reduceBoxesInLowestLayer)i.push(1),i.push(2),i.push(.5),o.push(.1),o.push(l),o.push(l);else{for(var c=0;c<e.aspectRatios.length;++c)i.push(e.aspectRatios[c]),o.push(l);if(e.interpolatedScaleAspectRatio>0){var u=s===e.strides.length-1?1:bae(e.minScale,e.maxScale,s+1,e.strides.length);o.push(Math.sqrt(l*u)),i.push(e.interpolatedScaleAspectRatio)}}s++}for(var h=0;h<i.length;++h){var d=Math.sqrt(i[h]);r.push(o[h]/d),a.push(o[h]*d)}var p=0,f=0;if(e.featureMapHeight.length>0)p=e.featureMapHeight[n],f=e.featureMapWidth[n];else{var m=e.strides[n];p=Math.ceil(e.inputSizeHeight/m),f=Math.ceil(e.inputSizeWidth/m)}for(var g=0;g<p;++g)for(var y=0;y<f;++y)for(var v=0;v<r.length;++v){var b={xCenter:(y+e.anchorOffsetX)/f,yCenter:(g+e.anchorOffsetY)/p,width:0,height:0};e.fixedAnchorSize?(b.width=1,b.height=1):(b.width=a[v],b.height=r[v]),t.push(b)}n=s}return t}(Bae);var o=$L(this.anchors.map(function(e){return e.width})),s=$L(this.anchors.map(function(e){return e.height})),l=$L(this.anchors.map(function(e){return e.xCenter})),c=$L(this.anchors.map(function(e){return e.yCenter}));this.anchorTensor={x:l,y:c,w:o,h:s},this.prevFilteredSegmentationMask=this.enableSegmentation?ez([],[0,0]):null}return e.prototype.estimatePoses=function(e,t,n){return Wre(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,h,d,p,f,m,g,y,v,b,x,w,k,S,N,T;return Vre(this,function(I){switch(I.label){case 0:return r=function(e){var t;if(null==(t=null==e?Wae:Ure({},e)).maxPoses&&(t.maxPoses=1),t.maxPoses<=0)throw new Error("Invalid maxPoses "+t.maxPoses+". Should be > 0.");if(t.maxPoses>1)throw new Error("Multi-pose detection is not implemented yet. Please set maxPoses to 1.");return t}(t),null==e?(this.reset(),[2,[]]):(this.maxPoses=r.maxPoses,this.timestamp=null!=n?1e3*n:xae(e)?1e6*e.currentTime:null,a=sae(e),i=B_(function(){return YM(cae(e),"float32")}),null!=(o=this.regionOfInterest)?[3,2]:[4,this.detectPose(i)]);case 1:if(0===(s=I.sent()).length)return this.reset(),i.dispose(),[2,[]];l=s[0],o=this.poseDetectionToRoi(l,a),I.label=2;case 2:return[4,this.poseLandmarksByRoi(o,i)];case 3:return c=I.sent(),i.dispose(),null==c?(this.reset(),[2,[]]):(u=c.landmarks,h=c.auxiliaryLandmarks,d=c.poseScore,p=c.worldLandmarks,f=c.segmentationMask,m=this.poseLandmarkFiltering(u,h,p,a),g=m.actualLandmarksFiltered,y=m.auxiliaryLandmarksFiltered,v=m.actualWorldLandmarksFiltered,b=this.poseLandmarksToRoi(y,a),this.regionOfInterest=b,x=this.smoothSegmentation&&null!=f?this.poseSegmentationFiltering(f):f,null!=(w=null!=g?Sae(g,a):null)&&w.forEach(function(e,t){e.name=Kre[t]}),null!=(k=v)&&k.forEach(function(e,t){e.name=Kre[t]}),S={score:d,keypoints:w,keypoints3D:k},null!==x&&(N=B_(function(){var e=rP(x,2),t=QP(e,[[0,0],[0,0],[0,1]]);return WP(t,[[0,0],[0,0],[0,2]],"symmetric")}),this.smoothSegmentation||U_(x),T={maskValueToLabel:rie,mask:new nie(N)},S.segmentation=T),[2,[S]])}})})},e.prototype.poseSegmentationFiltering=function(e){var t=this.prevFilteredSegmentationMask;return 0===t.size?this.prevFilteredSegmentationMask=e:(this.prevFilteredSegmentationMask=function(e,t,n){return"webgl"===V_()?function(e,t,n){var r=n.combineWithPreviousRatio.toFixed(2),a={variableNames:["prevMask","newMask"],outputShape:e.shape,userCode:"\n  void main() {\n      ivec2 coords = getOutputCoords();\n      int height = coords[0];\n      int width = coords[1];\n\n      float prevMaskValue = getPrevMask(height, width);\n      float newMaskValue = getNewMask(height, width);\n\n      /*\n      * Assume p := newMaskValue\n      * H(p) := 1 + (p * log(p) + (1-p) * log(1-p)) / log(2)\n      * uncertainty alpha(p) =\n      *   Clamp(1 - (1 - H(p)) * (1 - H(p)), 0, 1) [squaring the\n      * uncertainty]\n      *\n      * The following polynomial approximates uncertainty alpha as a\n      * function of (p + 0.5):\n      */\n      const float c1 = 5.68842;\n      const float c2 = -0.748699;\n      const float c3 = -57.8051;\n      const float c4 = 291.309;\n      const float c5 = -624.717;\n      float t = newMaskValue - 0.5;\n      float x = t * t;\n\n      float uncertainty =\n        1.0 - min(1.0, x * (c1 + x * (c2 + x * (c3 + x * (c4 + x * c5)))));\n\n      float outputValue = newMaskValue + (prevMaskValue - newMaskValue) *\n                             (uncertainty * "+r+");\n\n      setOutput(outputValue);\n    }\n"},i=H_();return B_(function(){var n=i.compileAndRun(a,[e,t]);return z_().makeTensorFromDataId(n.dataId,n.shape,n.dtype)})}(e,t,n):B_(function(){var r=yR(t,.5),a=rR(r),i=yR(1,UP(1,tR(a,JM(5.68842,tR(a,JM(-.748699,tR(a,JM(-57.8051,tR(a,JM(291.309,tR(a,-624.717)))))))))));return JM(t,tR(yR(e,t),tR(i,n.combineWithPreviousRatio)))})}(t,e,tie),U_(e)),U_(t),this.prevFilteredSegmentationMask},e.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),U_([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h,this.prevFilteredSegmentationMask])},e.prototype.reset=function(){this.regionOfInterest=null,this.enableSegmentation&&(U_(this.prevFilteredSegmentationMask),this.prevFilteredSegmentationMask=ez([],[0,0])),this.visibilitySmoothingFilterActual=null,this.visibilitySmoothingFilterAuxiliary=null,this.landmarksSmoothingFilterActual=null,this.landmarksSmoothingFilterAuxiliary=null},e.prototype.detectPose=function(e){return Wre(this,void 0,void 0,function(){var t,n,r,a,i,o,s,l,c;return Vre(this,function(u){switch(u.label){case 0:return t=vae(e,Hae),n=t.imageTensor,r=t.padding,a=function(e,t){return B_(function(){var n=function(e){return B_(function(){return[eF(e,[0,0,0],[1,-1,1]),eF(e,[0,0,1],[1,-1,-1])]})}(t.predict(e)),r=n[0],a=n[1];return{boxes:XL(a),logits:XL(r)}})}(n,this.detectorModel),i=a.boxes,[4,Iae([o=a.logits,i],this.anchorTensor,Vae)];case 1:return 0===(s=u.sent()).length?(U_([n,o,i]),[2,s]):[4,kae(s,this.maxPoses,.3)];case 2:return l=u.sent(),c=function(e,t){void 0===e&&(e=[]);for(var n=t.left,r=t.top,a=t.left+t.right,i=t.top+t.bottom,o=0;o<e.length;o++){var s=e[o],l=s.locationData.relativeBoundingBox,c=(l.xMin-n)/(1-a),u=(l.yMin-r)/(1-i),h=l.width/(1-a),d=l.height/(1-i);l.xMin=c,l.yMin=u,l.width=h,l.height=d,l.xMax=c+h,l.yMax=u+d;var p=s.locationData.relativeKeypoints;p&&p.forEach(function(e){var t=(e.x-n)/(1-a),o=(e.y-r)/(1-i);e.x=t,e.y=o})}return e}(l,r),U_([n,o,i]),[2,c]}})})},e.prototype.poseDetectionToRoi=function(e,t){return _ae(dae(e,t,{rotationVectorEndKeypointIndex:1,rotationVectorStartKeypointIndex:0,rotationVectorTargetAngleDegree:90}),t,Gae)},e.prototype.poseLandmarksByRoi=function(e,t){return Wre(this,void 0,void 0,function(){var n,r,a,i,o,s,l,c,u,h,d,p,f,m;return Vre(this,function(g){switch(g.label){case 0:if(n=sae(t),r=vae(t,Kae,e),a=r.imageTensor,i=r.padding,o=r.transformationMatrix,"lite"!==this.modelType&&"full"!==this.modelType&&"heavy"!==this.modelType)throw new Error("Model type must be one of lite, full or heavy,but got "+this.modelType);return s=["ld_3d","output_poseflag","activation_heatmap","world_3d"],this.enableSegmentation&&s.push("activation_segmentation"),l=this.landmarkModel.execute(a,s),[4,this.tensorsToPoseLandmarksAndSegmentation(l)];case 1:return null==(c=g.sent())?(U_(l),U_(a),[2,null]):(u=c.landmarks,h=c.auxiliaryLandmarks,d=c.poseScore,p=c.worldLandmarks,f=c.segmentationMask,[4,this.poseLandmarksAndSegmentationInverseProjection(n,e,i,o,u,h,p,f)]);case 2:return m=g.sent(),U_(l),U_(a),[2,Ure({poseScore:d},m)]}})})},e.prototype.poseLandmarksAndSegmentationInverseProjection=function(e,t,n,r,a,i,o,s){return Wre(this,void 0,void 0,function(){var l,c,u,h,d,p;return Vre(this,function(f){return l=Tae(a,n),c=Tae(i,n),u=gae(l,t),h=gae(c,t),d=function(e,t){for(var n=[],r=0,a=e;r<a.length;r++){var i=a[r],o=i.x,s=i.y,l=t.rotation,c=Math.cos(l)*o-Math.sin(l)*s,u=Math.sin(l)*o+Math.cos(l)*s,h=Ure({},i);h.x=c,h.y=u,n.push(h)}return n}(o,t),p=null,this.enableSegmentation&&(p=B_(function(){var t=s.shape,n=t[0],a=t[1],i=function(e){var t=pae(new Array(16).fill(0));t[0][0]=mae(e,0,0),t[1][0]=-mae(e,0,1),t[2][0]=mae(e,0,2),t[3][0]=-mae(e,0,3),t[0][2]=mae(e,2,0),t[1][2]=-mae(e,2,1),t[2][2]=mae(e,2,2),t[3][2]=-mae(e,2,3),t[0][1]=-mae(e,1,0),t[1][1]=mae(e,1,1),t[2][1]=-mae(e,1,2),t[3][1]=mae(e,1,3),t[0][3]=-mae(e,3,0),t[1][3]=mae(e,3,1),t[2][3]=-mae(e,3,2),t[3][3]=mae(e,3,3);for(var n=e[0][0]*t[0][0]+e[1][0]*t[0][1]+e[2][0]*t[0][2]+e[3][0]*t[0][3],r=0;r<t.length;r++)for(var a=0;a<t.length;a++)t[r][a]/=n;return t}(r),o=ez(uae(i,{width:a,height:n},e),[1,8]),l=[1,n,a,1];return XL(Pj.transform(XD(s,l),o,"bilinear","constant",0,[e.height,e.width]),[0,3])}),U_(s)),[2,{landmarks:u,auxiliaryLandmarks:h,worldLandmarks:d,segmentationMask:p}]})})},e.prototype.tensorsToPoseLandmarksAndSegmentation=function(e){return Wre(this,void 0,void 0,function(){var t,n,r,a,i,o,s,l,c,u,h,d,p;return Vre(this,function(f){switch(f.label){case 0:return t=e[0],n=e[1],r=e[2],a=e[3],i=this.enableSegmentation?e[4]:null,[4,n.data()];case 1:return(o=f.sent()[0])<.5?[2,null]:[4,Oae(t,qae)];case 2:return[4,Nae(f.sent(),r,Yae)];case 3:return s=f.sent(),l=s.slice(0,33),c=s.slice(33,35),[4,Oae(a,Xae)];case 4:return u=f.sent(),h=u.slice(0,33),d=function(e,t,n){void 0===n&&(n=!0);for(var r=[],a=0;a<e.length;a++){var i=Ure({},t[a]);n&&(i.score=e[a].score),r.push(i)}return r}(l,h,!0),p=this.enableSegmentation?function(e,t){return B_(function(){var n=XL(e,[0]),r=n.shape[2];if(1===r){var a=n;switch(t.activation){case"none":break;case"sigmoid":a=$D(a);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+t.activation+")")}return XL(a,[2])}throw new Error("Unsupported number of tensor channels "+r)})}(i,eie):null,[2,{landmarks:l,auxiliaryLandmarks:c,poseScore:o,worldLandmarks:d,segmentationMask:p}]}})})},e.prototype.poseLandmarksToRoi=function(e,t){return _ae(dae(wae(e),t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:90}),t,Gae)},e.prototype.poseLandmarkFiltering=function(e,t,n,r){var a,i,o;if(null!=this.timestamp&&this.enableSmoothing){var s=dae(wae(t),r,{rotationVectorEndKeypointIndex:0,rotationVectorStartKeypointIndex:1,rotationVectorTargetAngleDegree:90});null==this.visibilitySmoothingFilterActual&&(this.visibilitySmoothingFilterActual=new jae(Zae)),a=this.visibilitySmoothingFilterActual.apply(e),null==this.visibilitySmoothingFilterAuxiliary&&(this.visibilitySmoothingFilterAuxiliary=new jae(Zae)),i=this.visibilitySmoothingFilterAuxiliary.apply(t),o=this.visibilitySmoothingFilterActual.apply(n),null==this.landmarksSmoothingFilterActual&&(this.landmarksSmoothingFilterActual=new zae(Qae)),a=this.landmarksSmoothingFilterActual.apply(a,this.timestamp,r,!0,s),null==this.landmarksSmoothingFilterAuxiliary&&(this.landmarksSmoothingFilterAuxiliary=new zae(Jae)),i=this.landmarksSmoothingFilterAuxiliary.apply(i,this.timestamp,r,!0,s),null==this.worldLandmarksSmoothingFilterActual&&(this.worldLandmarksSmoothingFilterActual=new zae($ae)),o=this.worldLandmarksSmoothingFilterActual.apply(n,this.timestamp)}else a=e,i=t,o=n;return{actualLandmarksFiltered:a,auxiliaryLandmarksFiltered:i,actualWorldLandmarksFiltered:o}},e}();function iie(e){return Wre(this,void 0,void 0,function(){var t,n,r,a,i,o;return Vre(this,function(s){switch(s.label){case 0:return t=function(e){var t=Ure({},null==e?Uae:e);if(null==t.enableSmoothing&&(t.enableSmoothing=Uae.enableSmoothing),null==t.enableSegmentation&&(t.enableSegmentation=Uae.enableSegmentation),null==t.smoothSegmentation&&(t.smoothSegmentation=Uae.smoothSegmentation),null==t.modelType&&(t.modelType=Uae.modelType),null==t.detectorModelUrl&&(t.detectorModelUrl=Uae.detectorModelUrl),null==t.landmarkModelUrl)switch(t.modelType){case"lite":t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/lite/2";break;case"heavy":t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/heavy/2";break;default:t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"}return t}(e),n="string"==typeof t.detectorModelUrl&&t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r="string"==typeof t.landmarkModelUrl&&t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([EY(t.detectorModelUrl,{fromTFHub:n}),EY(t.landmarkModelUrl,{fromTFHub:r})])];case 1:return a=s.sent(),i=a[0],o=a[1],[2,new aie(i,o,t.enableSmoothing,t.enableSegmentation,t.smoothSegmentation,t.modelType)]}})})}var oie,sie,lie=function(){function e(e){!function(e){if(e.maxTracks<1)throw new Error("Must specify 'maxTracks' to be at least 1, but encountered "+e.maxTracks);if(e.maxAge<=0)throw new Error("Must specify 'maxAge' to be positive, but encountered "+e.maxAge);if(void 0!==e.keypointTrackerParams){if(e.keypointTrackerParams.keypointConfidenceThreshold<0||e.keypointTrackerParams.keypointConfidenceThreshold>1)throw new Error("Must specify 'keypointConfidenceThreshold' to be in the range [0, 1], but encountered "+e.keypointTrackerParams.keypointConfidenceThreshold);if(e.keypointTrackerParams.minNumberOfKeypoints<1)throw new Error("Must specify 'minNumberOfKeypoints' to be at least 1, but encountered "+e.keypointTrackerParams.minNumberOfKeypoints);for(var t=0,n=e.keypointTrackerParams.keypointFalloff;t<n.length;t++){var r=n[t];if(r<=0)throw new Error("Must specify each keypoint falloff parameterto be positive but encountered "+r)}}}(e),this.tracks=[],this.maxTracks=e.maxTracks,this.maxAge=1e3*e.maxAge,this.minSimilarity=e.minSimilarity,this.nextID=1}return e.prototype.apply=function(e,t){this.filterOldTracks(t);var n=this.computeSimilarity(e);return this.assignTracks(e,n,t),this.updateTracks(t),e},e.prototype.getTracks=function(){return this.tracks.slice()},e.prototype.getTrackIDs=function(){return new Set(this.tracks.map(function(e){return e.id}))},e.prototype.filterOldTracks=function(e){var t=this;this.tracks=this.tracks.filter(function(n){return e-n.lastTimestamp<=t.maxAge})},e.prototype.assignTracks=function(e,t,n){for(var r=Array.from(Array(t[0].length).keys()),a=[],i=0,o=Array.from(Array(e.length).keys());i<o.length;i++){var s=o[i];if(0!==r.length){for(var l=-1,c=-1,u=0,h=r;u<h.length;u++){var d=h[u],p=t[s][d];p>=this.minSimilarity&&p>c&&(l=d,c=p)}if(l>=0){var f=this.tracks[l];f=Object.assign(f,this.createTrack(e[s],n,f.id)),e[s].id=f.id;var m=r.indexOf(l);r.splice(m,1)}else a.push(s)}else a.push(s)}for(var g=0,y=a;g<y.length;g++){s=y[g];var v=this.createTrack(e[s],n);this.tracks.push(v),e[s].id=v.id}},e.prototype.updateTracks=function(e){this.tracks.sort(function(e,t){return t.lastTimestamp-e.lastTimestamp}),this.tracks=this.tracks.slice(0,this.maxTracks)},e.prototype.createTrack=function(e,t,n){var r={id:n||this.nextTrackID(),lastTimestamp:t,keypoints:Gre(e.keypoints).map(function(e){return Ure({},e)})};return void 0!==e.box&&(r.box=Ure({},e.box)),r},e.prototype.nextTrackID=function(){var e=this.nextID;return this.nextID+=1,e},e.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.tracks=this.tracks.filter(function(t){return!e.includes(t.id)})},e.prototype.reset=function(){this.tracks=[]},e}(),cie=function(e){function t(t){return e.call(this,t)||this}return Bre(t,e),t.prototype.computeSimilarity=function(e){var t=this;return 0===e.length||0===this.tracks.length?[[]]:e.map(function(e){return t.tracks.map(function(n){return t.iou(e,n)})})},t.prototype.iou=function(e,t){var n=Math.max(e.box.xMin,t.box.xMin),r=Math.max(e.box.yMin,t.box.yMin),a=Math.min(e.box.xMax,t.box.xMax),i=Math.min(e.box.yMax,t.box.yMax);if(n>=a||r>=i)return 0;var o=(a-n)*(i-r);return o/(e.box.width*e.box.height+t.box.width*t.box.height-o)},t}(lie),uie=function(e){function t(t){var n=e.call(this,t)||this;return n.keypointThreshold=t.keypointTrackerParams.keypointConfidenceThreshold,n.keypointFalloff=t.keypointTrackerParams.keypointFalloff,n.minNumKeyoints=t.keypointTrackerParams.minNumberOfKeypoints,n}return Bre(t,e),t.prototype.computeSimilarity=function(e){if(0===e.length||0===this.tracks.length)return[[]];for(var t=[],n=0,r=e;n<r.length;n++){for(var a=r[n],i=[],o=0,s=this.tracks;o<s.length;o++){var l=s[o];i.push(this.oks(a,l))}t.push(i)}return t},t.prototype.oks=function(e,t){for(var n=this.area(t.keypoints)+1e-6,r=0,a=0,i=0;i<e.keypoints.length;++i){var o=e.keypoints[i],s=t.keypoints[i];if(!(o.score<this.keypointThreshold||s.score<this.keypointThreshold)){a+=1;var l=Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2),c=2*this.keypointFalloff[i];r+=Math.exp(-1*l/(2*n*Math.pow(c,2)))}}return a<this.minNumKeyoints?0:r/a},t.prototype.area=function(e){var t=this,n=e.filter(function(e){return e.score>t.keypointThreshold}),r=Math.min.apply(Math,Gre([1],n.map(function(e){return e.x}))),a=Math.max.apply(Math,Gre([0],n.map(function(e){return e.x}))),i=Math.min.apply(Math,Gre([1],n.map(function(e){return e.y})));return(a-r)*(Math.max.apply(Math,Gre([0],n.map(function(e){return e.y})))-i)},t}(lie);function hie(e){switch(e){case sie.BlazePose:return Kre.reduce(function(e,t,n){return e[t]=n,e},{});case sie.PoseNet:case sie.MoveNet:return Hre.reduce(function(e,t,n){return e[t]=n,e},{});default:throw new Error("Model "+e+" is not supported.")}}!function(e){e.Keypoint="keypoint",e.BoundingBox="boundingBox"}(oie||(oie={})),function(e){e.MoveNet="MoveNet",e.BlazePose="BlazePose",e.PoseNet="PoseNet"}(sie||(sie={}));Object.freeze({__proto__:null,getKeypointIndexBySide:function(e){switch(e){case sie.BlazePose:return qre;case sie.PoseNet:case sie.MoveNet:return Xre;default:throw new Error("Model "+e+" is not supported.")}},getAdjacentPairs:function(e){switch(e){case sie.BlazePose:return Zre;case sie.PoseNet:case sie.MoveNet:return Yre;default:throw new Error("Model "+e+" is not supported.")}},getKeypointIndexByName:hie});var die=["SinglePose.Lightning","SinglePose.Thunder","MultiPose.Lightning"],pie={modelType:"SinglePose.Lightning",enableSmoothing:!0},fie={},mie={frequency:30,minCutOff:2.5,beta:300,derivateCutOff:2.5,thresholdCutOff:.5,thresholdBeta:5,disableValueScaling:!0},gie={maxTracks:18,maxAge:1e3,minSimilarity:.2,keypointTrackerParams:{keypointConfidenceThreshold:.3,keypointFalloff:[.026,.025,.025,.035,.035,.079,.079,.072,.072,.062,.062,.107,.107,.087,.087,.089,.089],minNumberOfKeypoints:4}},yie={maxTracks:18,maxAge:1e3,minSimilarity:.15,trackerParams:{}};function vie(e,t){var n,r,a,i;return e?t.width>t.height?(n=1,r=t.height/t.width,a=0,i=(t.width/2-t.height/2)/t.width):(n=t.width/t.height,r=1,a=(t.height/2-t.width/2)/t.height,i=0):t.width>t.height?(n=t.width/t.height,r=1,a=(t.height/2-t.width/2)/t.height,i=0):(n=1,r=t.height/t.width,a=0,i=(t.width/2-t.height/2)/t.width),{yMin:a,xMin:i,yMax:a+n,xMax:i+r,height:n,width:r}}function bie(e,t){var n={maxTracks:e.maxTracks,maxAge:e.maxAge,minSimilarity:e.minSimilarity};return null!=t.maxTracks&&(n.maxTracks=t.maxTracks),null!=t.maxAge&&(n.maxAge=t.maxAge),null!=t.minSimilarity&&(n.minSimilarity=t.minSimilarity),n}var xie=function(){function e(e,t){this.moveNetModel=e,this.modelInputResolution={height:0,width:0},this.keypointIndexByName=hie(sie.MoveNet),"SinglePose.Lightning"===t.modelType?(this.modelInputResolution.width=192,this.modelInputResolution.height=192):"SinglePose.Thunder"===t.modelType&&(this.modelInputResolution.width=256,this.modelInputResolution.height=256),this.multiPoseModel="MultiPose.Lightning"===t.modelType,this.multiPoseModel||(this.keypointFilter=new Fae(mie),this.cropRegionFilterYMin=new Rae(.9),this.cropRegionFilterXMin=new Rae(.9),this.cropRegionFilterYMax=new Rae(.9),this.cropRegionFilterXMax=new Rae(.9)),this.enableSmoothing=t.enableSmoothing,t.minPoseScore?this.minPoseScore=t.minPoseScore:this.minPoseScore=.25,t.multiPoseMaxDimension?this.multiPoseMaxDimension=t.multiPoseMaxDimension:this.multiPoseMaxDimension=256,this.enableTracking=t.enableTracking,this.multiPoseModel&&this.enableTracking&&(t.trackerType===oie.Keypoint?this.tracker=new uie(t.trackerConfig):t.trackerType===oie.BoundingBox&&(this.tracker=new cie(t.trackerConfig)),this.enableSmoothing&&(this.keypointFilterMap=new Map))}return e.prototype.runSinglePersonPoseModel=function(e){return Wre(this,void 0,void 0,function(){var t,n,r,a,i;return Vre(this,function(o){switch(o.label){case 0:if(4!==(t=this.moveNetModel.execute(e)).shape.length||1!==t.shape[0]||1!==t.shape[1]||17!==t.shape[2]||3!==t.shape[3])throw t.dispose(),new Error("Unexpected output shape from model: ["+t.shape+"]");return"webgpu"===V_()?[3,1]:(n=t.dataSync(),[3,3]);case 1:return[4,t.data()];case 2:n=o.sent(),o.label=3;case 3:for(t.dispose(),r={keypoints:[],score:0},a=0,i=0;i<17;++i)r.keypoints[i]={y:n[3*i],x:n[3*i+1],score:n[3*i+2]},r.keypoints[i].score>.2&&(++a,r.score+=r.keypoints[i].score);return a>0&&(r.score/=a),[2,r]}})})},e.prototype.runMultiPersonPoseModel=function(e){return Wre(this,void 0,void 0,function(){var t,n,r,a,i,o,s,l;return Vre(this,function(c){switch(c.label){case 0:if(3!==(t=this.moveNetModel.execute(e)).shape.length||1!==t.shape[0]||56!==t.shape[2])throw t.dispose(),new Error("Unexpected output shape from model: ["+t.shape+"]");return"webgpu"===V_()?[3,1]:(n=t.dataSync(),[3,3]);case 1:return[4,t.data()];case 2:n=c.sent(),c.label=3;case 3:for(t.dispose(),r=[],a=n.length/56,i=0;i<a;++i)for(r[i]={keypoints:[]},o=56*i+51,r[i].box={yMin:n[o],xMin:n[o+1],yMax:n[o+2],xMax:n[o+3],width:n[o+3]-n[o+1],height:n[o+2]-n[o]},s=56*i+55,r[i].score=n[s],r[i].keypoints=[],l=0;l<17;++l)r[i].keypoints[l]={y:n[56*i+3*l],x:n[56*i+3*l+1],score:n[56*i+3*l+2]};return[2,r]}})})},e.prototype.estimatePoses=function(e,t,n){return void 0===t&&(t=fie),Wre(this,void 0,void 0,function(){var r,a,i,o,s,l;return Vre(this,function(c){switch(c.label){case 0:return t=function(e){return null==e?fie:Ure({},e)}(t),null==e?(this.reset(),[2,[]]):(null==n?xae(e)&&(n=1e6*e.currentTime):n*=1e3,r=cae(e),a=sae(r),i=rP(r,0),e instanceof $O||r.dispose(),o=[],this.multiPoseModel?[3,2]:[4,this.estimateSinglePose(i,a,n)]);case 1:return o=c.sent(),[3,4];case 2:return[4,this.estimateMultiplePoses(i,a,n)];case 3:o=c.sent(),c.label=4;case 4:for(s=0;s<o.length;++s)for(l=0;l<o[s].keypoints.length;++l)o[s].keypoints[l].name=Hre[l],o[s].keypoints[l].y*=a.height,o[s].keypoints[l].x*=a.width;return[2,o]}})})},e.prototype.estimateSinglePose=function(e,t,n){return Wre(this,void 0,void 0,function(){var r,a,i,o,s=this;return Vre(this,function(l){switch(l.label){case 0:return this.cropRegion||(this.cropRegion=vie(null==this.cropRegion,t)),r=B_(function(){var t=ez([[s.cropRegion.yMin,s.cropRegion.xMin,s.cropRegion.yMax,s.cropRegion.xMax]]),n=zP([1],"int32"),r=[s.modelInputResolution.height,s.modelInputResolution.width];return YM(Pj.cropAndResize(e,t,n,r,"bilinear",0),"int32")}),e.dispose(),[4,this.runSinglePersonPoseModel(r)];case 1:if(a=l.sent(),r.dispose(),a.score<this.minPoseScore)return this.reset(),[2,[]];for(i=0;i<a.keypoints.length;++i)a.keypoints[i].y=this.cropRegion.yMin+a.keypoints[i].y*this.cropRegion.height,a.keypoints[i].x=this.cropRegion.xMin+a.keypoints[i].x*this.cropRegion.width;return null!=n&&this.enableSmoothing&&(a.keypoints=this.keypointFilter.apply(a.keypoints,n,1)),o=function(e,t,n,r){for(var a={},i=0,o=Hre;i<o.length;i++){var s=o[i];a[s]=[t[n[s]].y*r.height,t[n[s]].x*r.width]}if(function(e,t){return(e[t.left_hip].score>.2||e[t.right_hip].score>.2)&&(e[t.left_shoulder].score>.2||e[t.right_shoulder].score>.2)}(t,n)){var l=(a.left_hip[0]+a.right_hip[0])/2,c=(a.left_hip[1]+a.right_hip[1])/2,u=function(e,t,n,r,a){for(var i=["left_shoulder","right_shoulder","left_hip","right_hip"],o=0,s=0,l=0;l<i.length;l++)(p=Math.abs(r-n[i[l]][0]))>o&&(o=p),(f=Math.abs(a-n[i[l]][1]))>s&&(s=f);for(var c=0,u=0,h=0,d=Object.keys(n);h<d.length;h++){var p,f,m=d[h];e[t[m]].score<.2||((p=Math.abs(r-n[m][0]))>c&&(c=p),(f=Math.abs(a-n[m][1]))>u&&(u=f))}return[o,s,c,u]}(t,n,a,l,c),h=u[0],d=u[1],p=u[2],f=u[3],m=Math.max(1.9*d,1.9*h,1.2*p,1.2*f),g=[l-(m=Math.min(m,Math.max(c,r.width-c,l,r.height-l))),c-m];if(m>Math.max(r.width,r.height)/2)return vie(null==e,r);var y=2*m;return{yMin:g[0]/r.height,xMin:g[1]/r.width,yMax:(g[0]+y)/r.height,xMax:(g[1]+y)/r.width,height:(g[0]+y)/r.height-g[0]/r.height,width:(g[1]+y)/r.width-g[1]/r.width}}return vie(null==e,r)}(this.cropRegion,a.keypoints,this.keypointIndexByName,t),this.cropRegion=this.filterCropRegion(o),[2,[a]]}})})},e.prototype.estimateMultiplePoses=function(e,t,n){return Wre(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,h,d,p,f=this;return Vre(this,function(m){switch(m.label){case 0:return t.width>t.height?(a=this.multiPoseMaxDimension,i=Math.round(this.multiPoseMaxDimension*t.height/t.width),r=Pj.resizeBilinear(e,[i,a]),s=a,l=32*Math.ceil(i/32),o=QP(r,[[0,0],[0,l-i],[0,0],[0,0]])):(a=Math.round(this.multiPoseMaxDimension*t.width/t.height),i=this.multiPoseMaxDimension,r=Pj.resizeBilinear(e,[i,a]),s=32*Math.ceil(a/32),l=i,o=QP(r,[[0,0],[0,0],[0,s-a],[0,0]])),r.dispose(),e.dispose(),c=YM(o,"int32"),o.dispose(),[4,this.runMultiPersonPoseModel(c)];case 1:for(u=m.sent(),c.dispose(),u=u.filter(function(e){return e.score>=f.minPoseScore}),d=0;d<u.length;++d)for(h=0;h<u[d].keypoints.length;++h)u[d].keypoints[h].y*=l/i,u[d].keypoints[h].x*=s/a;if(this.enableTracking&&(this.tracker.apply(u,n),this.enableSmoothing)){for(d=0;d<u.length;++d)this.keypointFilterMap.has(u[d].id)||this.keypointFilterMap.set(u[d].id,new Fae(mie)),u[d].keypoints=this.keypointFilterMap.get(u[d].id).apply(u[d].keypoints,n,1);p=this.tracker.getTrackIDs(),this.keypointFilterMap.forEach(function(e,t){p.has(t)||f.keypointFilterMap.delete(t)})}return[2,u]}})})},e.prototype.filterCropRegion=function(e){if(e){var t=this.cropRegionFilterYMin.apply(e.yMin),n=this.cropRegionFilterXMin.apply(e.xMin),r=this.cropRegionFilterYMax.apply(e.yMax),a=this.cropRegionFilterXMax.apply(e.xMax);return{yMin:t,xMin:n,yMax:r,xMax:a,height:r-t,width:a-n}}return this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset(),null},e.prototype.dispose=function(){this.moveNetModel.dispose()},e.prototype.reset=function(){this.cropRegion=null,this.resetFilters()},e.prototype.resetFilters=function(){this.keypointFilter.reset(),this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset()},e}();function wie(e){return void 0===e&&(e=pie),Wre(this,void 0,void 0,function(){var t,n,r,a;return Vre(this,function(i){switch(i.label){case 0:return t=function(e){var t,n=null==e?pie:Ure({},e);if(null==n.modelType)n.modelType="SinglePose.Lightning";else if(die.indexOf(n.modelType)<0)throw new Error("Invalid architecture "+n.modelType+". Should be one of "+die);if(null==n.enableSmoothing&&(n.enableSmoothing=!0),null!=n.minPoseScore&&(n.minPoseScore<0||n.minPoseScore>1))throw new Error("minPoseScore should be between 0.0 and 1.0");if(null!=n.multiPoseMaxDimension&&(n.multiPoseMaxDimension%32!=0||n.multiPoseMaxDimension<32))throw new Error("multiPoseMaxDimension must be a multiple of 32 and higher than 0");if("MultiPose.Lightning"===n.modelType&&null==n.enableTracking&&(n.enableTracking=!0),"MultiPose.Lightning"===n.modelType&&!0===n.enableTracking)if(null==n.trackerType&&(n.trackerType=oie.BoundingBox),n.trackerType===oie.Keypoint)null!=n.trackerConfig?n.trackerConfig=function(e){var t=bie(gie,e);return t.keypointTrackerParams=Ure({},gie.keypointTrackerParams),null!=e.keypointTrackerParams&&(null!=e.keypointTrackerParams.keypointConfidenceThreshold&&(t.keypointTrackerParams.keypointConfidenceThreshold=e.keypointTrackerParams.keypointConfidenceThreshold),null!=e.keypointTrackerParams.keypointFalloff&&(t.keypointTrackerParams.keypointFalloff=e.keypointTrackerParams.keypointFalloff),null!=e.keypointTrackerParams.minNumberOfKeypoints&&(t.keypointTrackerParams.minNumberOfKeypoints=e.keypointTrackerParams.minNumberOfKeypoints)),t}(n.trackerConfig):n.trackerConfig=gie;else{if(n.trackerType!==oie.BoundingBox)throw new Error("Tracker type not supported by MoveNet");null!=n.trackerConfig?n.trackerConfig=(t=n.trackerConfig,bie(yie,t)):n.trackerConfig=yie}return n}(e),r=!0,t.modelUrl?(r="string"==typeof t.modelUrl&&t.modelUrl.indexOf("https://tfhub.dev")>-1,[4,EY(t.modelUrl,{fromTFHub:r})]):[3,2];case 1:return n=i.sent(),[3,4];case 2:return a=void 0,"SinglePose.Lightning"===t.modelType?a="https://tfhub.dev/google/tfjs-model/movenet/singlepose/lightning/4":"SinglePose.Thunder"===t.modelType?a="https://tfhub.dev/google/tfjs-model/movenet/singlepose/thunder/4":"MultiPose.Lightning"===t.modelType&&(a="https://tfhub.dev/google/tfjs-model/movenet/multipose/lightning/1"),[4,EY(a,{fromTFHub:r})];case 3:n=i.sent(),i.label=4;case 4:return"webgl"===V_()&&qI().set("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",0),[2,new xie(n,t)]}})})}var kie={architecture:"MobileNetV1",outputStride:16,multiplier:.75,inputResolution:{height:257,width:257}},Sie=["MobileNetV1","ResNet50"],Nie={MobileNetV1:[8,16],ResNet50:[16]},Tie=[8,16,32],Iie={MobileNetV1:[.5,.75,1],ResNet50:[1]},Eie=[1,2,4],Cie={maxPoses:1,flipHorizontal:!1},Aie={maxPoses:5,flipHorizontal:!1,scoreThreshold:.5,nmsRadius:20},Oie=[-123.15,-115.9,-103.06];function _ie(e){return Math.floor(e/2)}var Mie=function(){function e(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}return e.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},e.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},e.prototype.empty=function(){return-1===this.numberOfElements},e.prototype.size=function(){return this.numberOfElements+1},e.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},e.prototype.max=function(){return this.priorityQueue[0]},e.prototype.swim=function(e){for(;e>0&&this.less(_ie(e),e);)this.exchange(e,_ie(e)),e=_ie(e)},e.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}},e.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},e.prototype.less=function(e,t){return this.getValueAt(e)<this.getValueAt(t)},e.prototype.exchange=function(e,t){var n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n},e}();function Rie(e,t,n,r,a,i){for(var o=i.shape,s=o[0],l=o[1],c=!0,u=Math.max(n-a,0),h=Math.min(n+a+1,s),d=u;d<h;++d){for(var p=Math.max(r-a,0),f=Math.min(r+a+1,l),m=p;m<f;++m)if(i.get(d,m,e)>t){c=!1;break}if(!c)break}return c}function Die(e){return Wre(this,void 0,void 0,function(){return Vre(this,function(t){return[2,Promise.all(e.map(function(e){return e.buffer()}))]})})}function Fie(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+17)}}function Pie(e,t,n){var r=Fie(e.heatmapY,e.heatmapX,e.id,n),a=r.y,i=r.x;return{x:e.heatmapX*t+i,y:e.heatmapY*t+a}}function Lie(e,t,n,r){var a=n.x,i=n.y;return e.some(function(e){var n,o,s,l,c=e.keypoints;return n=i,o=a,(s=c[r].y-n)*s+(l=c[r].x-o)*l<=t})}var zie=Hre.reduce(function(e,t,n){return e[t]=n,e},{}),jie=[["nose","left_eye"],["left_eye","left_ear"],["nose","right_eye"],["right_eye","right_ear"],["nose","left_shoulder"],["left_shoulder","left_elbow"],["left_elbow","left_wrist"],["left_shoulder","left_hip"],["left_hip","left_knee"],["left_knee","left_ankle"],["nose","right_shoulder"],["right_shoulder","right_elbow"],["right_elbow","right_wrist"],["right_shoulder","right_hip"],["right_hip","right_knee"],["right_knee","right_ankle"]].map(function(e){var t=e[0],n=e[1];return[zie[t],zie[n]]}),Bie=jie.map(function(e){return e[1]}),Uie=jie.map(function(e){return e[0]});function Wie(e,t,n){return e<t?t:e>n?n:e}function Vie(e,t,n,r){return{y:Wie(Math.round(e.y/t),0,n-1),x:Wie(Math.round(e.x/t),0,r-1)}}function Gie(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Hie(e,t,n,r,a,i,o,s){void 0===s&&(s=2);for(var l=r.shape,c=l[0],u=l[1],h={y:t.y,x:t.x},d=Gie(h,function(e,t,n){var r=n.shape[2]/2;return{y:n.get(t.y,t.x,e),x:n.get(t.y,t.x,r+e)}}(e,Vie(h,i,c,u),o)),p=0;p<s;p++){var f=Vie(d,i,c,u),m=Fie(f.y,f.x,n,a);d=Gie({x:f.x*i,y:f.y*i},{x:m.x,y:m.y})}var g=Vie(d,i,c,u),y=r.get(g.y,g.x,n);return{y:d.y,x:d.x,name:Hre[n],score:y}}function Kie(e,t,n,r,a,i){var o=t.shape[2],s=Bie.length,l=new Array(o),c=e.part,u=e.score,h=Pie(c,r,n);l[c.id]={score:u,name:Hre[c.id],y:h.y,x:h.x};for(var d=s-1;d>=0;--d){var p=Bie[d],f=Uie[d];l[p]&&!l[f]&&(l[f]=Hie(d,l[p],f,t,n,r,i))}for(d=0;d<s;++d)p=Uie[d],f=Bie[d],l[p]&&!l[f]&&(l[f]=Hie(d,l[p],f,t,n,r,a));return l}function qie(e,t,n){return n.reduce(function(n,r,a){var i=r.y,o=r.x,s=r.score;return Lie(e,t,{y:i,x:o},a)||(n+=s),n},0)/n.length}function Xie(e,t,n,r,a,i,o,s){return void 0===o&&(o=.5),void 0===s&&(s=20),Wre(this,void 0,void 0,function(){var l,c,u,h,d,p,f,m,g,y,v,b;return Vre(this,function(x){switch(x.label){case 0:return[4,Die([e,t,n,r])];case 1:for(l=x.sent(),c=l[0],u=l[1],h=l[2],d=l[3],p=[],f=function(e,t,n){for(var r=n.shape,a=r[0],i=r[1],o=r[2],s=new Mie(a*i*o,function(e){return e.score}),l=0;l<a;++l)for(var c=0;c<i;++c)for(var u=0;u<o;++u){var h=n.get(l,c,u);h<e||Rie(u,h,l,c,1,n)&&s.enqueue({score:h,part:{heatmapY:l,heatmapX:c,id:u}})}return s}(o,0,c),m=s*s;p.length<i&&!f.empty();)g=f.dequeue(),y=Pie(g.part,a,u),Lie(p,m,y,g.part.id)||(v=Kie(g,c,u,a,h,d),b=qie(p,m,v),p.push({keypoints:v,score:b}));return[2,p]}})})}function Yie(e,t,n){return B_(function(){var r=function(e,t){for(var n=[],r=0;r<Hre.length;r++){var a=Zie(e.get(r,0).valueOf(),e.get(r,1).valueOf(),r,t),i=a.x,o=a.y;n.push(o),n.push(i)}return ez(n,[Hre.length,2])}(e,n);return JM(YM(tR(e.toTensor(),oR(t,"int32")),"float32"),r)})}function Zie(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+Hre.length)}}function Qie(e,t,n){return Wre(this,void 0,void 0,function(){var r,a,i,o,s,l,c,u,h,d;return Vre(this,function(p){switch(p.label){case 0:return r=0,a=function(e){var t=e.shape,n=t[0],r=t[1],a=t[2];return B_(function(){var t,i,o=XD(e,[n*r,a]),s=ID(o,0),l=rP(eR(s,oR(r,"int32")),1),c=rP((t=s,i=r,B_(function(){var e=eR(t,oR(i,"int32"));return yR(t,tR(e,oR(i,"int32")))})),1);return QD([l,c],1)})}(e),[4,Promise.all([e.buffer(),t.buffer(),a.buffer()])];case 1:return i=p.sent(),o=i[0],s=i[1],l=i[2],[4,(c=Yie(l,n,s)).buffer()];case 2:return u=p.sent(),h=Array.from(function(e,t){for(var n=t.shape[0],r=new Float32Array(n),a=0;a<n;a++){var i=t.get(a,0),o=t.get(a,1);r[a]=e.get(i,o,a)}return r}(o,l)),d=h.map(function(e,t){return r+=e,{y:u.get(t,0),x:u.get(t,1),score:e,name:Hre[t]}}),a.dispose(),c.dispose(),[2,{keypoints:d,score:r/d.length}]}})})}function Jie(e,t){return(e-1)%t==0}var $ie="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/",eoe="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/";function toe(e,t){return function(e,t){return(e-1)%t==0}(e,t)?e:Math.floor(e/t)*t+1}var noe=function(){function e(e,t){this.posenetModel=e;var n=this.posenetModel.inputs[0].shape;pI(-1===n[1]&&-1===n[2],function(){return"Input shape ["+n[1]+", "+n[2]+"] must both be equal to or -1"});var r,a,i=(r=t.inputResolution,a=t.outputStride,{height:toe(r.height,a),width:toe(r.width,a)});!function(e){pI(Tie.indexOf(e)>=0,function(){return"outputStride of "+e+" is invalid. It must be either 8 or 16."})}(t.outputStride),function(e,t){pI(Jie(e.height,t),function(){return"height of "+e.height+" is invalid for output stride "+t+"."}),pI(Jie(e.width,t),function(){return"width of "+e.width+" is invalid for output stride "+t+"."})}(i,t.outputStride),this.inputResolution=i,this.outputStride=t.outputStride,this.architecture=t.architecture}return e.prototype.estimatePoses=function(e,t){return void 0===t&&(t=Cie),Wre(this,void 0,void 0,function(){var n,r,a,i,o,s,l,c,u,h,d,p,f,m,g;return Vre(this,function(y){switch(y.label){case 0:return n=function(e){var t=e;if(null==t.maxPoses&&(t.maxPoses=1),t.maxPoses<=0)throw new Error("Invalid maxPoses "+t.maxPoses+". Should be > 0.");if(t.maxPoses>1){if((t=Ure(Ure({},Aie),t)).scoreThreshold<0||t.scoreThreshold>1)throw new Error("Invalid scoreThreshold "+t.scoreThreshold+". Should be in range [0.0, 1.0]");if(t.nmsRadius<=0)throw new Error("Invalid nmsRadius "+t.nmsRadius+".")}return t}(t),null==e?[2,[]]:(this.maxPoses=n.maxPoses,r=vae(e,{outputTensorSize:this.inputResolution,keepAspectRatio:!0,borderMode:"replicate"}),a=r.imageTensor,i=r.padding,o="ResNet50"===this.architecture?JM(a,Oie):yae(a,[-1,1]),s=this.posenetModel.predict(o),"ResNet50"===this.architecture?(l=XL(s[2],[0]),c=XL(s[3],[0]),u=XL(s[0],[0]),h=XL(s[1],[0])):(l=XL(s[0],[0]),c=XL(s[1],[0]),u=XL(s[2],[0]),h=XL(s[3],[0])),d=$D(c),1!==this.maxPoses?[3,2]:[4,Qie(d,l,this.outputStride)]);case 1:return f=y.sent(),p=[f],[3,4];case 2:return[4,Xie(d,l,u,h,this.outputStride,this.maxPoses,n.scoreThreshold,n.nmsRadius)];case 3:p=y.sent(),y.label=4;case 4:return m=sae(e),g=function(e,t,n,r){var a=t.height,i=t.width,o=a/(n.height*(1-r.top-r.bottom)),s=i/(n.width*(1-r.left-r.right)),l=-r.top*n.height,c=-r.left*n.width;if(1===s&&1===o&&0===l&&0===c)return e;for(var u=0,h=e;u<h.length;u++)for(var d=0,p=h[u].keypoints;d<p.length;d++){var f=p[d];f.x=(f.x+c)*s,f.y=(f.y+l)*o}return e}(p,m,this.inputResolution,i),n.flipHorizontal&&(g=function(e,t){for(var n=0,r=e;n<r.length;n++)for(var a=0,i=r[n].keypoints;a<i.length;a++){var o=i[a];o.x=t.width-1-o.x}return e}(g,m)),a.dispose(),o.dispose(),U_(s),l.dispose(),c.dispose(),u.dispose(),h.dispose(),d.dispose(),[2,g]}})})},e.prototype.dispose=function(){this.posenetModel.dispose()},e.prototype.reset=function(){},e}();function roe(e){return void 0===e&&(e=kie),Wre(this,void 0,void 0,function(){var t,n,r,a,i;return Vre(this,function(o){switch(o.label){case 0:return"ResNet50"!==(t=function(e){var t=e||kie;if(null==t.architecture&&(t.architecture="MobileNetV1"),Sie.indexOf(t.architecture)<0)throw new Error("Invalid architecture "+t.architecture+". Should be one of "+Sie);if(null==t.inputResolution&&(t.inputResolution={height:257,width:257}),null==t.outputStride&&(t.outputStride=16),Nie[t.architecture].indexOf(t.outputStride)<0)throw new Error("Invalid outputStride "+t.outputStride+". Should be one of "+Nie[t.architecture]+" for architecture "+t.architecture+".");if(null==t.multiplier&&(t.multiplier=1),Iie[t.architecture].indexOf(t.multiplier)<0)throw new Error("Invalid multiplier "+t.multiplier+". Should be one of "+Iie[t.architecture]+" for architecture "+t.architecture+".");if(null==t.quantBytes&&(t.quantBytes=4),Eie.indexOf(t.quantBytes)<0)throw new Error("Invalid quantBytes "+t.quantBytes+". Should be one of "+Eie+" for architecture "+t.architecture+".");if("MobileNetV1"===t.architecture&&32===t.outputStride&&1!==t.multiplier)throw new Error("When using an output stride of 32, you must select 1 as the multiplier.");return t}(e)).architecture?[3,2]:(s=t.outputStride,l=t.quantBytes,c="model-stride"+s+".json",n=4===l?eoe+"float/"+c:eoe+"quant"+l+"/"+c,[4,EY(t.modelUrl||n)]);case 1:return r=o.sent(),[2,new noe(r,t)];case 2:return a=function(e,t,n){var r={1:"100",.75:"075",.5:"050"},a="model-stride"+e+".json";return 4===n?$ie+"float/"+r[t]+"/"+a:$ie+"quant"+n+"/"+r[t]+"/"+a}(t.outputStride,t.multiplier,t.quantBytes),[4,EY(t.modelUrl||a)];case 3:return i=o.sent(),[2,new noe(i,t)]}var s,l,c})})}var aoe={modelType:{SINGLEPOSE_LIGHTNING:"SinglePose.Lightning",SINGLEPOSE_THUNDER:"SinglePose.Thunder",MULTIPOSE_LIGHTNING:"MultiPose.Lightning"}};const ioe=e=>{let{videoRef:t,enabled:n=!1,onPrediction:r=()=>{}}=e;const a=(0,C.useRef)(null),i=(0,C.useRef)(null),o=(0,C.useRef)(null);(0,C.useEffect)(()=>{let e=!0;(async()=>{try{var e,t;if(await x_.ready(),a.current||(a.current=await function(e,t){return yne(this,void 0,void 0,function(){var n,r;return vne(this,function(a){if(e===wre.MediaPipeFaceMesh){if(r=void 0,null!=(n=t)){if("tfjs"===n.runtime)return[2,Lre(n)];if("mediapipe"===n.runtime)return[2,Ene(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(e+" is not a supported model name.")})})}(wre.MediaPipeFaceMesh,{runtime:"tfjs"})),!i.current)i.current=await function(e,t){return Wre(this,void 0,void 0,function(){var n,r;return Vre(this,function(a){switch(e){case sie.PoseNet:return[2,roe(t)];case sie.BlazePose:if(r=void 0,null!=(n=t)){if("tfjs"===n.runtime)return[2,iie(t)];if("mediapipe"===n.runtime)return[2,oae(t)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r);case sie.MoveNet:return[2,wie(t)];default:throw new Error(e+" is not a supported model name.")}})})}(sie.MoveNet,{modelType:(null===(e=aoe)||void 0===e||null===(t=e.modelType)||void 0===t?void 0:t.SINGLEPOSE_LIGHTNING)||"SINGLEPOSE_LIGHTNING"})}catch(uoe){console.error("Error loading models:",uoe)}})();const c=async()=>{if(!e)return;if(!n)return void(o.current=requestAnimationFrame(c));const u=null===t||void 0===t?void 0:t.current;if(u&&u.readyState===u.HAVE_ENOUGH_DATA){try{const e=a.current,t=i.current;let n=30,o=30;if(e){const t=await e.estimateFaces(u,{flipHorizontal:!1});if(t&&t.length){const e=t[0],r=e.keypoints||e.scaledMesh||null;r&&(n=s(r))}}if(t){const e=await t.estimatePoses(u);e&&e.length&&(o=l(e[0]))}const c=Math.min(100,Math.max(0,Math.round(.65*n+.35*o)));r({combined:c,faceScore:Math.round(n),postureScore:Math.round(o)})}catch(uoe){console.error("Analysis error:",uoe)}o.current=requestAnimationFrame(c)}else o.current=requestAnimationFrame(c)};return o.current=requestAnimationFrame(c),()=>{e=!1,o.current&&cancelAnimationFrame(o.current),a.current&&a.current.dispose&&a.current.dispose(),i.current&&i.current.dispose&&i.current.dispose()}},[t,n,r]);const s=e=>{try{const t=t=>{var n,r;const a=e[t];return a?{x:null!==(n=a.x)&&void 0!==n?n:a[0],y:null!==(r=a.y)&&void 0!==r?r:a[1]}:null},n=t(61)||t(78),r=t(291)||t(308),a=t(13),i=t(14),o=t(159),s=t(145),l=t(386),u=t(374),h=t(1);let d=0;n&&r&&(d=c(n,r));let p=0;a&&i&&(p=c(a,i));let f=.03;if(o&&s&&l&&u){const e=c(o,s);f=(e+c(l,u))/2||.03}const m=h?Math.max(1e-4,h.y):.5,g=Math.min(100,Math.max(0,p/(.06*m)*40)),y=d?Math.min(100,Math.max(0,60-d/(.12*m)*100)):30;let v=.5*g+.5*Math.min(100,Math.max(0,.08/f*50))+.3*(100-y);return v=Math.min(100,Math.max(0,v)),v}catch(uoe){return 30}},l=e=>{try{const t=e.keypoints||[],n=e=>t.find(t=>t.name===e||t.part===e)||null,r=n("left_shoulder")||n("leftShoulder")||t.find(e=>"leftShoulder"===e.part),a=n("right_shoulder")||n("rightShoulder")||t.find(e=>"rightShoulder"===e.part),i=n("left_hip")||n("leftHip")||t.find(e=>"leftHip"===e.part),o=n("right_hip")||n("rightHip")||t.find(e=>"rightHip"===e.part),s=n("nose")||t.find(e=>"nose"===e.part);if(!r||!a||!i||!o||!s)return 30;const l={x:(r.x+a.x)/2,y:(r.y+a.y)/2},c={x:(i.x+o.x)/2,y:(i.y+o.y)/2},u={x:c.x-l.x,y:c.y-l.y},h=Math.abs(Math.atan2(u.x,u.y))*(180/Math.PI),d=Math.abs(r.x-a.x)||1,p=Math.abs(s.x-l.x)/d,f=Math.min(100,h/45*70),m=Math.min(100,100*p*.7);return Math.min(100,Math.max(0,.6*f+.4*m))}catch(uoe){return 30}},c=(e,t)=>{if(!e||!t)return 0;const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)};return null},ooe=()=>{const e=(0,C.useRef)(null),t=(0,C.useRef)(null),[n,r]=(0,C.useState)(0),[a,i]=(0,C.useState)("Minimal"),[o,s]=(0,C.useState)(!1),[l,c]=(0,C.useState)(!1),[u,h]=(0,C.useState)(!1),[d,p]=(0,C.useState)(!1),f=(0,C.useRef)({}),[m,g]=(0,C.useState)(0),y=(0,C.useRef)(null),v=(0,C.useRef)(null),b=(0,C.useRef)(null),x=(0,C.useRef)(null),w=async()=>{try{const t=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"}});y.current=t,e.current&&(e.current.srcObject=t,e.current.onloadedmetadata=()=>{e.current.play()},h(!0),console.log("\u2705 Webcam enabled successfully"))}catch(t){console.log("Camera access not available:",t.message),h(!1)}finally{c(!0)}},k=(0,C.useCallback)(()=>{if(!e.current||!u)return;const n=e.current,a=t.current;if(n.readyState===n.HAVE_ENOUGH_DATA&&a){const e=a.getContext("2d");a.width=640,a.height=480,e.drawImage(n,0,0,640,480);const t=e.getImageData(0,0,640,480).data;let o=0,s=0;for(let n=0;n<t.length;n+=4){const e=t[n],r=t[n+1],a=t[n+2];o+=(e+r+a)/3,s+=Math.abs(e-r)+Math.abs(r-a)+Math.abs(a-e)}o/=t.length/4,s=s/(t.length/4)*.5;let l=0;if(x.current){for(let e=0;e<Math.min(t.length,x.current.length);e+=4){l+=Math.abs(t[e]-x.current[e])+Math.abs(t[e+1]-x.current[e+1])+Math.abs(t[e+2]-x.current[e+2])}l=l/(t.length/4)/255*100}x.current=new Uint8ClampedArray(t);let c=30*Math.abs((o-128)/128)+Math.min(l,50)+Math.min(s,20)+10*(Math.random()-.5);c=Math.min(100,Math.max(0,c)),f.current.combined||r(Math.round(c)),i(c>=80?"Critical":c>=60?"High":c>=40?"Moderate":c>=20?"Low":"Minimal")}},[u]),S=(0,C.useCallback)(()=>{let e=20;const t=40*(Math.random()-.5);e=Math.min(100,Math.max(0,e+t)),r(Math.round(e)),i(e>=80?"Critical":e>=60?"High":e>=40?"Moderate":e>=20?"Low":"Minimal")},[]);(0,C.useEffect)(()=>()=>{y.current&&y.current.getTracks().forEach(e=>e.stop()),v.current&&clearInterval(v.current),b.current&&clearInterval(b.current)},[]);const N=(0,C.useCallback)(e=>{let{combined:t,faceScore:n,postureScore:a}=e;f.current={combined:t,faceScore:n,postureScore:a},r(t),i(t>=80?"Critical":t>=60?"High":t>=40?"Moderate":t>=20?"Low":"Minimal")},[]);return(0,nI.jsxs)("div",{className:"stress-monitor",children:[(0,nI.jsx)("h1",{children:"\ud83e\udde0 Real-Time Stress Monitor"}),(0,nI.jsxs)("div",{className:"monitor-controls",children:[!l&&(0,nI.jsx)("button",{onClick:w,className:"btn btn-primary",children:"\ud83c\udfa5 Enable Webcam"}),l&&(0,nI.jsx)(nI.Fragment,{children:o?(0,nI.jsx)("button",{onClick:async()=>{s(!1),p(!1),v.current&&clearInterval(v.current),b.current&&clearInterval(b.current);try{await fetch("/api/stress/analyze",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({stressLevel:n,intensity:a,duration:m,timestamp:(new Date).toISOString()})}),console.log("\u2705 Stress data saved:",{stressLevel:n,intensity:a,duration:m})}catch(e){console.log("Error saving stress data:",e)}g(0)},className:"btn btn-danger",children:"\u23f9 Stop Monitoring"}):(0,nI.jsx)("button",{onClick:async()=>{l||await w(),s(!0),g(0),p(!0),b.current=setInterval(()=>{g(e=>e+1)},1e3);(async()=>{const e=setInterval(async()=>{u?k():S()},500);v.current=e})()},className:"btn btn-success",children:"\u25b6 Start Monitoring"})})]}),(0,nI.jsxs)("div",{className:"monitor-content",children:[(0,nI.jsx)("div",{className:"video-container",children:u?(0,nI.jsxs)(nI.Fragment,{children:[(0,nI.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",maxWidth:"640px",borderRadius:"12px",display:"block",background:"#000"}}),o&&(0,nI.jsx)("div",{style:{fontSize:"12px",color:"#4ade80",marginTop:"8px"},children:"\ud83d\udd34 LIVE: Camera Feed Active"})]}):l?(0,nI.jsxs)(nI.Fragment,{children:[(0,nI.jsx)("canvas",{ref:t,width:640,height:480,style:{width:"100%",maxWidth:"640px",borderRadius:"12px",background:"#1a1a2e",display:"block"}}),o&&(0,nI.jsx)("div",{style:{fontSize:"12px",color:"#fbbf24",marginTop:"8px"},children:"\ud83d\udcca Demo Mode: Simulated Analysis"})]}):(0,nI.jsxs)("div",{style:{width:"100%",maxWidth:"640px",height:"480px",background:"#1a1a2e",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",flexDirection:"column",gap:"10px"},children:[(0,nI.jsx)("p",{children:'Click "Enable Webcam" to start'}),(0,nI.jsx)("small",{children:"Allow camera access for live analysis"})]})}),(0,nI.jsx)(ioe,{videoRef:e,enabled:d&&u,onPrediction:N}),o&&(0,nI.jsxs)("div",{className:"analysis-panel",children:[(0,nI.jsxs)("div",{className:"stress-meter",children:[(0,nI.jsxs)("h2",{children:["Stress Level: ",(0,nI.jsxs)("span",{style:{fontSize:"32px"},children:[n,"%"]})]}),(0,nI.jsx)("div",{className:"stress-bar",style:{width:"".concat(n,"%"),background:n>=80?"#ef4444":n>=60?"#f97316":n>=40?"#eab308":"#22c55e"}}),(0,nI.jsxs)("p",{className:"intensity ".concat(a.toLowerCase()),children:[n>=80?"\ud83d\udd34":n>=60?"\ud83d\udfe0":n>=40?"\ud83d\udfe1":"\ud83d\udfe2"," ",a]})]}),(0,nI.jsxs)("div",{className:"recommendations",children:[(0,nI.jsx)("h3",{children:"\ud83d\udca1 Recommendations:"}),(0,nI.jsxs)("ul",{children:[n>=80&&(0,nI.jsxs)(nI.Fragment,{children:[(0,nI.jsx)("li",{children:"\u2713 Take a 5-10 minute break immediately"}),(0,nI.jsx)("li",{children:"\u2713 Practice deep breathing exercises"}),(0,nI.jsx)("li",{children:"\u2713 Step outside for fresh air"})]}),n>=60&&n<80&&(0,nI.jsxs)(nI.Fragment,{children:[(0,nI.jsx)("li",{children:"\u2713 Take a short 2-3 minute break"}),(0,nI.jsx)("li",{children:"\u2713 Stretch your neck and shoulders"}),(0,nI.jsx)("li",{children:"\u2713 Drink some water"})]}),n<60&&(0,nI.jsxs)(nI.Fragment,{children:[(0,nI.jsx)("li",{children:"\u2713 Keep maintaining your current pace"}),(0,nI.jsx)("li",{children:"\u2713 Take periodic breaks every hour"}),(0,nI.jsx)("li",{children:"\u2713 Stay hydrated and focused"})]})]})]})]})]})]})},soe=()=>{const[e,t]=(0,C.useState)(7),[n,r]=(0,C.useState)(null),[a,i]=(0,C.useState)(!1),o=(0,C.useCallback)(async()=>{try{i(!0);const t=await fetch("/api/stress/stats?days=".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json(),n=e.stats||e;r(n||{totalReadings:0,averageStress:0,maxStress:0,minStress:0,distribution:{critical:0,high:0,moderate:0,low:0},trend:"stable"})}else r({totalReadings:0,averageStress:0,maxStress:0,minStress:0,distribution:{critical:0,high:0,moderate:0,low:0},trend:"stable"})}catch(t){console.log("Error fetching analytics:",t),r({totalReadings:0,averageStress:0,maxStress:0,minStress:0,distribution:{critical:0,high:0,moderate:0,low:0},trend:"stable"})}finally{i(!1)}},[e]);if((0,C.useEffect)(()=>{o()},[o]),a||!n)return(0,nI.jsxs)("div",{className:"stress-analytics",children:[(0,nI.jsx)("h2",{children:"\ud83d\udcca Stress Analytics Dashboard"}),(0,nI.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:a?"Loading analytics...":"Fetching data..."})]});const s=n.distribution.low+n.distribution.moderate+n.distribution.high+n.distribution.critical;return(0,nI.jsxs)("div",{className:"stress-analytics",children:[(0,nI.jsx)("h2",{children:"\ud83d\udcca Stress Analytics Dashboard"}),(0,nI.jsx)("div",{className:"period-selector",children:[1,7,14,30].map(n=>(0,nI.jsx)("button",{className:e===n?"active":"",onClick:()=>t(n),children:1===n?"Today":"".concat(n,"d")},n))}),(0,nI.jsxs)("div",{className:"stats-grid",children:[(0,nI.jsxs)("div",{className:"stat-card",children:[(0,nI.jsx)("h3",{children:"\ud83d\udcc8 Average Stress"}),(0,nI.jsx)("div",{className:"stat-value",children:n.averageStress||0}),(0,nI.jsx)("div",{className:"stat-label",children:"out of 100"})]}),(0,nI.jsxs)("div",{className:"stat-card",children:[(0,nI.jsx)("h3",{children:"\ud83d\udd34 Peak Stress"}),(0,nI.jsx)("div",{className:"stat-value",children:n.maxStress||0}),(0,nI.jsx)("div",{className:"stat-label",children:"Maximum recorded"})]}),(0,nI.jsxs)("div",{className:"stat-card",children:[(0,nI.jsx)("h3",{children:"\ud83d\udfe2 Lowest Stress"}),(0,nI.jsx)("div",{className:"stat-value",children:n.minStress||0}),(0,nI.jsx)("div",{className:"stat-label",children:"Minimum recorded"})]}),(0,nI.jsxs)("div",{className:"stat-card",children:[(0,nI.jsx)("h3",{children:"\ud83d\udcca Trend"}),(0,nI.jsxs)("div",{className:"stat-value trend",children:["increasing"===n.trend&&"\ud83d\udcc8","decreasing"===n.trend&&"\ud83d\udcc9","stable"===n.trend&&"\u27a1\ufe0f"]}),(0,nI.jsx)("div",{className:"stat-label",children:n.trend})]})]}),(0,nI.jsxs)("div",{className:"charts",children:[(0,nI.jsxs)("div",{className:"chart-container",children:[(0,nI.jsx)("h3",{children:"Stress Distribution"}),(0,nI.jsxs)("div",{className:"distribution-bars",children:[(0,nI.jsxs)("div",{className:"bar-row",children:[(0,nI.jsx)("span",{children:"\ud83d\udfe2 Minimal (0-20)"}),(0,nI.jsx)("div",{className:"bar minimal",style:{width:"".concat(s>0?n.distribution.low/s*100:0,"%")}}),(0,nI.jsx)("span",{children:n.distribution.low})]}),(0,nI.jsxs)("div",{className:"bar-row",children:[(0,nI.jsx)("span",{children:"\ud83d\udfe1 Moderate (20-60)"}),(0,nI.jsx)("div",{className:"bar moderate",style:{width:"".concat(s>0?n.distribution.moderate/s*100:0,"%")}}),(0,nI.jsx)("span",{children:n.distribution.moderate})]}),(0,nI.jsxs)("div",{className:"bar-row",children:[(0,nI.jsx)("span",{children:"\ud83d\udfe0 High (60-80)"}),(0,nI.jsx)("div",{className:"bar high",style:{width:"".concat(s>0?n.distribution.high/s*100:0,"%")}}),(0,nI.jsx)("span",{children:n.distribution.high})]}),(0,nI.jsxs)("div",{className:"bar-row",children:[(0,nI.jsx)("span",{children:"\ud83d\udd34 Critical (80-100)"}),(0,nI.jsx)("div",{className:"bar critical",style:{width:"".concat(s>0?n.distribution.critical/s*100:0,"%")}}),(0,nI.jsx)("span",{children:n.distribution.critical})]})]})]}),(0,nI.jsxs)("div",{className:"chart-container",children:[(0,nI.jsx)("h3",{children:"\ud83d\udcca Readings Summary"}),(0,nI.jsxs)("div",{className:"reading-count",children:[(0,nI.jsxs)("p",{children:["Total Readings: ",(0,nI.jsx)("span",{style:{fontSize:"20px",fontWeight:"bold",color:"#4a9eff"},children:n.totalReadings})]}),(0,nI.jsxs)("p",{children:["Average per day: ",(0,nI.jsx)("span",{style:{fontSize:"20px",fontWeight:"bold",color:"#4a9eff"},children:(n.totalReadings/e).toFixed(1)})]}),0===n.totalReadings&&(0,nI.jsx)("p",{style:{marginTop:"1rem",fontSize:"0.9em",color:"rgba(255,255,255,0.7)"},children:'\ud83d\udca1 Click "AI Stress" and start monitoring to generate stress data.'})]})]})]}),(0,nI.jsx)("button",{onClick:o,className:"refresh-btn",children:"\ud83d\udd04 Refresh Data"})]})};function loe(){const[e,t]=(0,C.useState)("login"),[n,r]=(0,C.useState)(null),[a,i]=(0,C.useState)(null),[o,s]=(0,C.useState)("student"),[l,c]=(0,C.useState)(!1),[u,h]=(0,C.useState)(!0),[d,p]=(0,C.useState)({focus:5,motivation:5,stress:5,studyHours:4,sleep:7,breaks:"sometimes"}),[f,m]=(0,C.useState)([]),[g,y]=(0,C.useState)(null),[v,b]=(0,C.useState)([]),[x,w]=(0,C.useState)(!1),[k,S]=(0,C.useState)(!1),[N,T]=(0,C.useState)(!1),[I]=(0,C.useState)([{id:1,name:"Dr. Aisha Khan",title:"Cognitive Learning Coach",expertise:["Study strategies","Memory techniques"],rating:4.9,bio:"Helps students build sustainable study routines and memory skills.",availability:"Mon, Wed, Fri"},{id:2,name:"Sam Patel",title:"Productivity Mentor",expertise:["Time management","Pomodoro"],rating:4.8,bio:"Focuses on practical productivity systems and micro-goal planning.",availability:"Tue, Thu"},{id:3,name:"Lena Gomez",title:"Wellness Mentor",expertise:["Sleep","Stress management"],rating:4.7,bio:"Guides on sleep hygiene and stress-reduction for better learning.",availability:"Weekends"}]),[E,A]=(0,C.useState)(null),[O,_]=(0,C.useState)(()=>{try{return JSON.parse(localStorage.getItem("skillpulse-bookings"))||[]}catch(e){return[]}}),[M,R]=(0,C.useState)(!1),[D,P]=(0,C.useState)(null),[z,j]=(0,C.useState)(()=>new Date(Date.now()+36e5).toISOString().slice(0,16)),[B,U]=(0,C.useState)("");(0,C.useEffect)(()=>{const e=localStorage.getItem("skillpulse-history"),n=localStorage.getItem("skillpulse-visited"),a=localStorage.getItem("skillpulse-darkmode"),o=localStorage.getItem("skillpulse-sound"),s=localStorage.getItem("skillpulse-current-user"),l=localStorage.getItem("skillpulse-current-role");if(e)try{m(JSON.parse(e))}catch(u){m([])}s&&l?(r(s),i(l),t("welcome")):n&&t("checkin"),a&&c("true"===a),null!==o&&h("true"===o)},[]),(0,C.useEffect)(()=>{if(!localStorage.getItem("token"))return;let e=!0;return(async()=>{try{const[t,n]=await Promise.all([L("/api/checkins"),L("/api/bookings")]);if(!e)return;if(t.checkIns&&Array.isArray(t.checkIns)&&(m(t.checkIns.slice(-7)),localStorage.setItem("skillpulse-history",JSON.stringify(t.checkIns.slice(-7)))),n.bookings&&Array.isArray(n.bookings)){const e=n.bookings.map(e=>F(F({},e),{},{_id:e._id||e.id}));_(e),localStorage.setItem("skillpulse-bookings",JSON.stringify(e))}}catch(uoe){console.warn("Could not fetch remote data",uoe.message)}})(),()=>{e=!1}},[n]),(0,C.useEffect)(()=>{l?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")},[l]);const W=e=>{if(!u)return;const t=new(window.AudioContext||window.webAudioContext),n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),"click"===e?(n.frequency.value=800,r.gain.setValueAtTime(.1,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),n.start(t.currentTime),n.stop(t.currentTime+.1)):"success"===e?(n.frequency.value=523.25,r.gain.setValueAtTime(.2,t.currentTime),n.start(t.currentTime),setTimeout(()=>{n.frequency.value=659.25},100),setTimeout(()=>{n.frequency.value=783.99,r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),n.stop(t.currentTime+.3)},200)):"warning"===e&&(n.frequency.value=400,r.gain.setValueAtTime(.15,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),n.start(t.currentTime),n.stop(t.currentTime+.2))},V=e=>{"vibrate"in navigator&&navigator.vibrate(e)},G=async(e,n)=>{if(!e||!n)return alert("Fill all fields");try{const l=await(a={email:e,password:n,role:o},L("/api/auth/signup",{method:"POST",body:JSON.stringify(a)}));l.token&&localStorage.setItem("token",l.token),localStorage.setItem("skillpulse-current-user",e),localStorage.setItem("skillpulse-current-role",o),localStorage.setItem("isAuth","true"),r(e),i(o),s("student"),t("welcome"),alert("Signup successful!")}catch(uoe){alert(uoe.message||"Signup failed")}var a},H=async(e,n)=>{if(!e||!n)return alert("Fill all fields");try{var a;const s=await(o={email:e,password:n},L("/api/auth/login",{method:"POST",body:JSON.stringify(o)}));s.token&&localStorage.setItem("token",s.token);const l=(null===(a=s.user)||void 0===a?void 0:a.role)||"student";localStorage.setItem("skillpulse-current-user",e),localStorage.setItem("skillpulse-current-role",l),localStorage.setItem("isAuth","true"),r(e),i(l),t("welcome")}catch(uoe){alert(uoe.message||"Login failed")}var o},K=()=>{localStorage.removeItem("skillpulse-current-user"),localStorage.removeItem("skillpulse-current-role"),r(null),i(null),t("login")},q=()=>{R(!1),P(null)},X=async e=>{if(!z)return alert("Please select a date and time for your session.");const t=new Date(z);if(isNaN(t.getTime()))return alert("Invalid date/time selected");const n={mentorId:e.id,mentorName:e.name,date:t.toLocaleString(),iso:t.toISOString(),notes:B};try{const r=await(e=>L("/api/bookings",{method:"POST",body:JSON.stringify(e)}))(n),a=r.booking||r;!a._id&&a.id&&(a._id=a.id);const i=[...O,a];_(i),localStorage.setItem("skillpulse-bookings",JSON.stringify(i)),R(!1),P(null),W("success"),V([100,50,100]),alert("Scheduled: ".concat(e.name," on ").concat(t.toLocaleString()))}catch(uoe){alert(uoe.message||"Failed to create booking")}};if("login"===e)return(0,nI.jsx)("div",{className:"auth-container",children:(0,nI.jsxs)("div",{className:"auth-card",children:[(0,nI.jsx)(MT,{size:56}),(0,nI.jsx)("h2",{children:"Welcome Back"}),(0,nI.jsx)("p",{children:"Login to continue SkillPulse"}),(0,nI.jsx)("input",{id:"login-email",placeholder:"Email"}),(0,nI.jsx)("input",{id:"login-password",type:"password",placeholder:"Password"}),(0,nI.jsx)("button",{className:"btn btn-primary btn-full",onClick:()=>H(document.getElementById("login-email").value,document.getElementById("login-password").value),children:"Login"}),(0,nI.jsxs)("p",{className:"auth-switch",children:["New here?"," ",(0,nI.jsx)("span",{onClick:()=>t("signup"),children:"Create account"})]})]})});if("signup"===e)return(0,nI.jsx)("div",{className:"auth-container",children:(0,nI.jsxs)("div",{className:"auth-card",children:[(0,nI.jsx)(RT,{size:56}),(0,nI.jsx)("h2",{children:"Create Account"}),(0,nI.jsx)("p",{children:"Start your learning wellness journey"}),(0,nI.jsx)("input",{id:"signup-email",placeholder:"Email"}),(0,nI.jsx)("input",{id:"signup-password",type:"password",placeholder:"Password"}),(0,nI.jsxs)("div",{style:{marginTop:"1.5rem",marginBottom:"1.5rem"},children:[(0,nI.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"I am a:"}),(0,nI.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,nI.jsx)("button",{onClick:()=>s("student"),style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"student"===o?"2px solid var(--primary)":"1px solid var(--border-color)",background:"student"===o?"var(--primary-light)":"var(--input-background)",cursor:"pointer",fontWeight:"bold",transition:"all 0.2s"},children:"\ud83d\udc68\u200d\ud83c\udf93 Student"}),(0,nI.jsx)("button",{onClick:()=>s("mentor"),style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"mentor"===o?"2px solid var(--primary)":"1px solid var(--border-color)",background:"mentor"===o?"var(--primary-light)":"var(--input-background)",cursor:"pointer",fontWeight:"bold",transition:"all 0.2s"},children:"\ud83d\udc68\u200d\ud83c\udfeb Mentor"})]})]}),(0,nI.jsx)("button",{className:"btn btn-primary btn-full",onClick:()=>G(document.getElementById("signup-email").value,document.getElementById("signup-password").value),children:"Sign Up"}),(0,nI.jsxs)("p",{className:"auth-switch",children:["Already registered?"," ",(0,nI.jsx)("span",{onClick:()=>t("login"),children:"Login"})]})]})});const Y=e=>e<=30?{text:"Healthy Learning Pace",emoji:"\ud83c\udf89",className:"healthy"}:e<=60?{text:"Moderate Fatigue",emoji:"\u26a0\ufe0f",className:"moderate"}:{text:"High Burnout Risk",emoji:"\ud83d\udea8",className:"high-risk"},Z=()=>{localStorage.setItem("skillpulse-visited","true"),t("checkin"),W("success"),V(100)},Q=(e,t)=>{p(F(F({},d),{},{[e]:parseInt(t)})),W("click"),V(10)},J=e=>{let{label:t,value:n,onChange:r,max:a=10,icon:i,lowLabel:o,highLabel:s}=e;return(0,nI.jsxs)("div",{className:"slider-container",children:[(0,nI.jsxs)("div",{className:"slider-label",children:[(0,nI.jsxs)("label",{children:[i&&(0,nI.jsx)(i,{size:16}),t]}),(0,nI.jsx)("span",{className:"value ".concat(N?"animate":""),children:n})]}),(0,nI.jsx)("input",{type:"range",min:"0",max:a,value:n,onChange:r,className:"slider",style:{background:"linear-gradient(to right, ".concat(l?"#a78bfa":"#9333ea"," 0%, ").concat(l?"#a78bfa":"#9333ea"," ").concat(n/a*100,"%, ").concat(l?"#4b5563":"#e9d5ff"," ").concat(n/a*100,"%, ").concat(l?"#4b5563":"#e9d5ff"," 100%)")}}),(0,nI.jsxs)("div",{className:"slider-labels",children:[(0,nI.jsx)("span",{children:o}),(0,nI.jsx)("span",{children:s})]})]})};return"welcome"===e?(0,nI.jsx)("div",{className:"welcome-container",children:(0,nI.jsxs)("div",{className:"welcome-content",children:[(0,nI.jsxs)("div",{className:"welcome-hero",children:[(0,nI.jsx)("div",{className:"hero-icon",children:(0,nI.jsx)(MT,{size:80})}),(0,nI.jsx)("h1",{children:"SkillPulse"}),(0,nI.jsx)("p",{children:"Your Personal Learning Wellness Companion"})]}),(0,nI.jsxs)("div",{className:"card-glass",children:[(0,nI.jsx)("h2",{children:"Why SkillPulse?"}),(0,nI.jsxs)("div",{className:"feature-grid",children:[(0,nI.jsxs)("div",{className:"feature-card purple",children:[(0,nI.jsx)("div",{className:"icon",children:"\ud83d\udcca"}),(0,nI.jsxs)("div",{children:[(0,nI.jsx)("h3",{children:"Track Your Energy"}),(0,nI.jsx)("p",{children:"Daily check-ins help you understand your learning patterns"})]})]}),(0,nI.jsxs)("div",{className:"feature-card pink",children:[(0,nI.jsx)("div",{className:"icon",children:"\ud83e\udd16"}),(0,nI.jsxs)("div",{children:[(0,nI.jsx)("h3",{children:"AI-Powered Insights"}),(0,nI.jsx)("p",{children:"Get personalized suggestions to prevent burnout"})]})]}),(0,nI.jsxs)("div",{className:"feature-card violet",children:[(0,nI.jsx)("div",{className:"icon",children:"\ud83d\udcc8"}),(0,nI.jsxs)("div",{children:[(0,nI.jsx)("h3",{children:"See Your Progress"}),(0,nI.jsx)("p",{children:"Visualize trends and celebrate healthy habits"})]})]})]})]}),(0,nI.jsxs)("button",{onClick:Z,className:"btn btn-primary btn-large btn-full",children:["Start Your Journey",(0,nI.jsx)(DT,{size:24})]})]})}):(0,nI.jsxs)("div",{className:"app-container",children:[x&&(0,nI.jsxs)("div",{className:"confetti-container",children:[(0,nI.jsx)("div",{className:"confetti-main",children:"\ud83c\udf89"}),[...Array(20)].map((e,t)=>(0,nI.jsx)("div",{className:"confetti-sparkle",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(.5*Math.random(),"s")},children:"\u2728"},t))]}),k&&(0,nI.jsx)("div",{className:"share-modal",children:(0,nI.jsx)("div",{className:"share-modal-content",children:(0,nI.jsx)("p",{children:"\u2705 Copied to clipboard!"})})}),(0,nI.jsxs)("div",{className:"container",children:[(0,nI.jsxs)("div",{className:"app-header",children:[(0,nI.jsxs)("div",{className:"logo-container",children:[(0,nI.jsx)("div",{className:"logo-icon",children:(0,nI.jsx)(MT,{size:32})}),(0,nI.jsxs)("div",{className:"logo-text",children:[(0,nI.jsx)("h1",{children:"SkillPulse"}),(0,nI.jsx)("p",{children:"Learning Wellness Tracker"})]})]}),(0,nI.jsxs)("div",{className:"header-controls",children:[(0,nI.jsx)("button",{onClick:()=>{const e=!u;h(e),localStorage.setItem("skillpulse-sound",e),e&&W("click"),V(50)},className:"icon-btn",children:u?(0,nI.jsx)(FT,{size:20}):(0,nI.jsx)(PT,{size:20})}),(0,nI.jsx)("button",{onClick:()=>{const e=!l;c(e),localStorage.setItem("skillpulse-darkmode",e),W("click"),V(50)},className:"icon-btn",children:l?(0,nI.jsx)(LT,{size:20}):(0,nI.jsx)(zT,{size:20})}),f.length>0&&(0,nI.jsxs)("div",{className:"streak-badge",children:[(0,nI.jsx)("div",{className:"label",children:"Streak"}),(0,nI.jsxs)("div",{className:"value",children:[f.length," \ud83d\udd25"]})]})]})]}),(0,nI.jsxs)("div",{className:"nav-pills",children:[(0,nI.jsxs)("button",{onClick:()=>{t("checkin"),W("click"),V(50)},className:"nav-pill ".concat("checkin"===e?"active":""),children:[(0,nI.jsx)(jT,{size:20}),"Check-In"]}),(0,nI.jsxs)("button",{onClick:()=>{t("trends"),W("click"),V(50)},className:"nav-pill ".concat("trends"===e?"active":""),children:[(0,nI.jsx)(BT,{size:20}),"Trends"]}),(0,nI.jsxs)("button",{onClick:()=>{t("stress-monitor"),W("click"),V(50)},className:"nav-pill ".concat("stress-monitor"===e?"active":""),children:[(0,nI.jsx)(UT,{size:20}),"AI Stress"]}),(0,nI.jsxs)("button",{onClick:()=>{t("stress-analytics"),W("click"),V(50)},className:"nav-pill ".concat("stress-analytics"===e?"active":""),children:[(0,nI.jsx)(BT,{size:20}),"Stress Stats"]}),(0,nI.jsxs)("button",{onClick:()=>{t("activities"),W("click"),V(50)},className:"nav-pill ".concat("activities"===e?"active":""),children:[(0,nI.jsx)(RT,{size:20}),"Stress-Busters"]}),"student"===a&&(0,nI.jsxs)(nI.Fragment,{children:[(0,nI.jsxs)("button",{onClick:()=>{t("mentoring"),W("click"),V(50)},className:"nav-pill ".concat("mentoring"===e?"active":""),children:[(0,nI.jsx)(WT,{size:20}),"Mentoring"]}),(0,nI.jsxs)("button",{onClick:()=>{t("studentreport"),W("click"),V(50)},className:"nav-pill ".concat("studentreport"===e?"active":""),children:[(0,nI.jsx)(VT,{size:20}),"My Reports"]})]}),"mentor"===a&&(0,nI.jsxs)("button",{onClick:()=>{t("mentordash"),W("click"),V(50)},className:"nav-pill ".concat("mentordash"===e?"active":""),children:[(0,nI.jsx)(MT,{size:20}),"Mentor Hub"]})]}),"checkin"===e&&(0,nI.jsxs)("div",{className:"card",children:[(0,nI.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,nI.jsx)("h2",{children:"Daily Check-In"}),(0,nI.jsx)("p",{children:"How are you feeling today? Take a moment to reflect."})]}),(0,nI.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[(0,nI.jsx)(J,{label:"Focus Level",value:d.focus,onChange:e=>Q("focus",e.target.value),icon:GT,lowLabel:"Distracted",highLabel:"Laser-focused"}),(0,nI.jsx)(J,{label:"Motivation",value:d.motivation,onChange:e=>Q("motivation",e.target.value),icon:HT,lowLabel:"Unmotivated",highLabel:"Energized"}),(0,nI.jsx)(J,{label:"Stress Level",value:d.stress,onChange:e=>Q("stress",e.target.value),icon:KT,lowLabel:"Calm",highLabel:"Overwhelmed"}),(0,nI.jsx)(J,{label:"Study Hours",value:d.studyHours,onChange:e=>Q("studyHours",e.target.value),max:12,icon:qT,lowLabel:"0 hrs",highLabel:"12+ hrs"}),(0,nI.jsx)(J,{label:"Sleep Quality",value:d.sleep,onChange:e=>Q("sleep",e.target.value),icon:zT,lowLabel:"Poor",highLabel:"Excellent"}),(0,nI.jsxs)("div",{className:"slider-container",children:[(0,nI.jsx)("div",{className:"slider-label",children:(0,nI.jsxs)("label",{children:[(0,nI.jsx)(WT,{size:16}),"Did you take breaks?"]})}),(0,nI.jsx)("div",{className:"break-buttons",children:[{value:"yes",label:"Yes, regularly",emoji:"\u2705"},{value:"sometimes",label:"Sometimes",emoji:"\ud83d\ude0a"},{value:"rarely",label:"Rarely",emoji:"\ud83d\ude10"},{value:"no",label:"No breaks",emoji:"\ud83d\ude30"}].map(e=>(0,nI.jsxs)("button",{onClick:()=>{p(F(F({},d),{},{breaks:e.value})),W("click"),V(50)},className:"break-btn ".concat(d.breaks===e.value?"active":""),children:[(0,nI.jsx)("span",{className:"emoji",children:e.emoji}),(0,nI.jsx)("span",{className:"label",children:e.label})]},e.value))})]})]}),(0,nI.jsxs)("button",{onClick:async()=>{const e=(e=>{const t=2.5*e.stress,n=2*(10-e.focus),r=2*(10-e.motivation),a=e.studyHours>=6?15:0,i=1.5*(10-e.sleep),o="no"===e.breaks?10:"rarely"===e.breaks?5:0,s=Math.min(100,Math.max(0,t+n+r+a+i+o));return Math.round(s)})(d),n=((e,t)=>{const n=[];return t.stress>=7&&n.push({icon:"\ud83e\uddd8",title:"Manage Your Stress",text:"Try 5-minute breathing exercises between study sessions. High stress blocks learning.",action:"Start 5-min meditation"}),t.focus<=4&&n.push({icon:"\u23f1\ufe0f",title:"Use Pomodoro Technique",text:"Study for 25 minutes, break for 5. This maintains focus without exhaustion.",action:"Set timer now"}),t.sleep<=6&&n.push({icon:"\ud83d\ude34",title:"Prioritize Sleep",text:"Aim for 7-8 hours tonight. Sleep directly impacts focus, memory, and stress levels.",action:"Set bedtime reminder"}),t.studyHours>=6&&"yes"!==t.breaks&&n.push({icon:"\ud83d\udeb6",title:"Take Active Breaks",text:"Every 90 minutes, take a 10-minute walk. Movement improves retention and reduces fatigue.",action:"Schedule breaks"}),t.motivation<=4&&n.push({icon:"\ud83c\udfaf",title:"Set Micro-Goals",text:"Break tasks into 30-minute chunks. Small wins rebuild motivation naturally.",action:"Create goal list"}),0===n.length&&n.push({icon:"\u2728",title:"Keep Up The Balance",text:"Your learning rhythm looks healthy. Maintain this pace and stay consistent.",action:"View insights"}),n.slice(0,3)})(0,d),r=F({date:(new Date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),timestamp:Date.now(),score:e},d);try{const a=await(e=>L("/api/checkins",{method:"POST",body:JSON.stringify(e)}))(r),i=a.checkIn||a,o=[...f,i].slice(-7);m(o),localStorage.setItem("skillpulse-history",JSON.stringify(o)),y(e),b(n),e<=30?(w(!0),W("success"),V([100,50,100,50,100]),setTimeout(()=>w(!1),3e3)):e>60?(W("warning"),V([200,100,200])):(W("click"),V(100)),T(!0),setTimeout(()=>T(!1),1e3),t("results")}catch(uoe){alert(uoe.message||"Failed to save check-in")}},className:"btn btn-primary btn-large btn-full",style:{marginTop:"2.5rem"},children:[(0,nI.jsx)(RT,{size:24}),"Analyze My Wellness",(0,nI.jsx)(DT,{size:24})]})]}),"results"===e&&null!==g&&(0,nI.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,nI.jsxs)("div",{className:"card",children:[(0,nI.jsxs)("div",{className:"flex justify-between items-center",style:{marginBottom:"2rem"},children:[(0,nI.jsx)("h2",{children:"Your Learning Wellness Score"}),(0,nI.jsxs)("button",{onClick:()=>{const e=f.filter(e=>e.score<=30).length,t="\ud83c\udf89 I maintained healthy learning habits for ".concat(e," out of ").concat(f.length," days with SkillPulse! Track your learning wellness and prevent burnout. #SkillPulse #LearningWellness");navigator.share?navigator.share({title:"SkillPulse - My Progress",text:t}).then(()=>{W("success"),V(100)}).catch(()=>{}):(navigator.clipboard.writeText(t),S(!0),W("click"),V(50),setTimeout(()=>S(!1),2e3))},className:"action-btn purple",children:[(0,nI.jsx)(XT,{size:16}),(0,nI.jsx)("span",{children:"Share"})]})]}),(0,nI.jsxs)("div",{className:"score-display",children:[(0,nI.jsxs)("div",{className:"score-circle-container",children:[(0,nI.jsxs)("svg",{className:"score-circle ".concat(N?"animate":""),viewBox:"0 0 192 192",children:[(0,nI.jsx)("circle",{cx:"96",cy:"96",r:"88",stroke:l?"#374151":"#e5e7eb",strokeWidth:"12",fill:"none"}),(0,nI.jsx)("circle",{cx:"96",cy:"96",r:"88",stroke:g<=30?"#22c55e":g<=60?"#eab308":"#ef4444",strokeWidth:"12",fill:"none",strokeDasharray:"".concat(g/100*552.92," 552.92"),strokeLinecap:"round"})]}),(0,nI.jsxs)("div",{className:"score-value",children:[(0,nI.jsx)("div",{className:"score-number ".concat(Y(g).className," ").concat(N?"animate":""),children:g}),(0,nI.jsx)("div",{className:"score-max",children:"out of 100"})]})]}),(0,nI.jsxs)("div",{className:"score-badge ".concat(Y(g).className),children:[(0,nI.jsx)("span",{className:"emoji",children:Y(g).emoji}),(0,nI.jsx)("span",{children:Y(g).text})]})]}),(0,nI.jsxs)("div",{className:"stats-grid",children:[(0,nI.jsxs)("div",{className:"stat-item",children:[(0,nI.jsx)("div",{className:"emoji",children:"\ud83d\ude34"}),(0,nI.jsx)("div",{className:"label",children:"Sleep"}),(0,nI.jsxs)("div",{className:"value",children:[d.sleep,"/10"]})]}),(0,nI.jsxs)("div",{className:"stat-item",children:[(0,nI.jsx)("div",{className:"emoji",children:"\ud83c\udfaf"}),(0,nI.jsx)("div",{className:"label",children:"Focus"}),(0,nI.jsxs)("div",{className:"value",children:[d.focus,"/10"]})]}),(0,nI.jsxs)("div",{className:"stat-item",children:[(0,nI.jsx)("div",{className:"emoji",children:"\ud83d\ude30"}),(0,nI.jsx)("div",{className:"label",children:"Stress"}),(0,nI.jsxs)("div",{className:"value",children:[d.stress,"/10"]})]})]})]}),(0,nI.jsxs)("div",{className:"suggestions-card",children:[(0,nI.jsxs)("h3",{children:[(0,nI.jsx)(RT,{size:28}),"Personalized Recommendations"]}),(0,nI.jsx)("div",{children:v.map((e,t)=>(0,nI.jsxs)("div",{className:"suggestion-item",children:[(0,nI.jsx)("div",{className:"suggestion-icon",children:e.icon}),(0,nI.jsxs)("div",{className:"suggestion-content",children:[(0,nI.jsx)("h4",{children:e.title}),(0,nI.jsx)("p",{children:e.text}),(0,nI.jsxs)("button",{onClick:()=>{W("click"),V(50)},className:"suggestion-action",children:[e.action," \u2192"]})]})]},t))})]}),(0,nI.jsxs)("button",{onClick:()=>{t("trends"),W("click"),V(50)},className:"btn btn-secondary btn-full",children:["View My Trends",(0,nI.jsx)(YT,{size:20})]})]}),"mentoring"===e&&"student"===a&&(0,nI.jsxs)("div",{className:"card",children:[(0,nI.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,nI.jsx)("h2",{children:"Mentoring Sessions"}),(0,nI.jsx)("p",{children:"Browse mentors and book a session to get personalized guidance."})]}),(0,nI.jsx)("div",{className:"mentors-grid",children:I.map(e=>(0,nI.jsxs)("div",{className:"mentor-card ".concat(E&&E.id===e.id?"selected":""),children:[(0,nI.jsxs)("div",{className:"mentor-header",children:[(0,nI.jsx)("h3",{children:e.name}),(0,nI.jsx)("div",{className:"mentor-title",children:e.title})]}),(0,nI.jsx)("p",{className:"mentor-bio",children:e.bio}),(0,nI.jsxs)("div",{className:"mentor-meta",children:[(0,nI.jsxs)("div",{children:["Expertise: ",e.expertise.join(", ")]}),(0,nI.jsxs)("div",{children:["Rating: ",e.rating," \u2b50"]}),(0,nI.jsxs)("div",{children:["Availability: ",e.availability]})]}),(0,nI.jsxs)("div",{className:"mentor-actions",children:[(0,nI.jsx)("button",{className:"btn ".concat(E&&E.id===e.id?"btn-secondary":"btn-primary"),onClick:()=>(A(e),W("click"),void V(50)),children:E&&E.id===e.id?"Selected":"Select"}),(0,nI.jsx)("button",{className:"btn btn-outline",onClick:()=>(P(e),j(new Date(Date.now()+36e5).toISOString().slice(0,16)),U(""),R(!0),W("click"),void V(50)),children:"Schedule Session"})]})]},e.id))}),M&&D&&(0,nI.jsx)("div",{className:"modal-overlay",onClick:q,children:(0,nI.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,nI.jsxs)("h3",{children:["Schedule session with ",D.name]}),(0,nI.jsx)("label",{style:{display:"block",marginTop:"0.75rem"},children:"When"}),(0,nI.jsx)("input",{type:"datetime-local",value:z,onChange:e=>j(e.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"8px",border:"1px solid var(--border-color)"}}),(0,nI.jsx)("label",{style:{display:"block",marginTop:"0.75rem"},children:"Notes (optional)"}),(0,nI.jsx)("textarea",{value:B,onChange:e=>U(e.target.value),placeholder:"Things you'd like to cover",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"8px",minHeight:"80px",border:"1px solid var(--border-color)"}}),(0,nI.jsxs)("div",{className:"modal-actions",style:{display:"flex",gap:"0.5rem",marginTop:"1rem",justifyContent:"flex-end"},children:[(0,nI.jsx)("button",{className:"btn btn-secondary",onClick:q,children:"Cancel"}),(0,nI.jsx)("button",{className:"btn btn-primary",onClick:()=>X(D),children:"Confirm"})]})]})}),O.length>0&&(0,nI.jsxs)("div",{className:"bookings-list",style:{marginTop:"1.5rem"},children:[(0,nI.jsx)("h4",{children:"Your Bookings"}),(0,nI.jsx)("ul",{children:O.map(e=>(0,nI.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[(0,nI.jsxs)("div",{children:[e.date," \u2014 ",e.mentorName,e.notes?" \u2014 ".concat(e.notes):""]}),(0,nI.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,nI.jsx)("button",{className:"btn btn-outline",onClick:()=>{var t;return(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText("".concat(e.mentorName," \u2014 ").concat(e.date).concat(e.notes?" \u2014 ".concat(e.notes):"")))||alert("Copied booking details")},children:"Copy"}),(0,nI.jsx)("button",{className:"btn btn-danger",onClick:()=>(e=>{const t=O.find(t=>t.id===e);if(!t)return;if(!window.confirm("Cancel booking with ".concat(t.mentorName," on ").concat(t.date,"?")))return;const n=O.filter(t=>t.id!==e);_(n),localStorage.setItem("skillpulse-bookings",JSON.stringify(n)),W("warning"),V([50,50]),alert("Booking canceled")})(e.id),children:"Cancel"})]})]},e.id))})]})]}),"activities"===e&&(0,nI.jsxs)("div",{className:"card",children:[(0,nI.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,nI.jsx)("h2",{children:"Stress-Busting Activities"}),(0,nI.jsx)("p",{children:"Try one of these quick, calming activities. Each opens in a new tab."})]}),(0,nI.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,nI.jsxs)("div",{className:"suggestion-item",children:[(0,nI.jsx)("div",{className:"suggestion-icon",children:"\ud83e\uddd8"}),(0,nI.jsxs)("div",{className:"suggestion-content",children:[(0,nI.jsx)("h4",{children:"Yoga for Stress Relief (10 min)"}),(0,nI.jsx)("p",{children:"A short, gentle yoga sequence to release tension and calm the mind."}),(0,nI.jsx)("a",{href:"https://www.yogajournal.com/poses/",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",children:"Open Yoga Guide"})]})]}),(0,nI.jsxs)("div",{className:"suggestion-item",children:[(0,nI.jsx)("div",{className:"suggestion-icon",children:"\ud83e\uddd8\u200d\u2642\ufe0f"}),(0,nI.jsxs)("div",{className:"suggestion-content",children:[(0,nI.jsx)("h4",{children:"Short Guided Meditation (5 min)"}),(0,nI.jsx)("p",{children:"A quick mindfulness practice to reset focus and calm."}),(0,nI.jsx)("a",{href:"https://www.headspace.com/meditation/stress",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",children:"Open Meditation"})]})]}),(0,nI.jsxs)("div",{className:"suggestion-item",children:[(0,nI.jsx)("div",{className:"suggestion-icon",children:"\ud83e\udde9"}),(0,nI.jsxs)("div",{className:"suggestion-content",children:[(0,nI.jsx)("h4",{children:"Calming Jigsaw Puzzle"}),(0,nI.jsx)("p",{children:"A simple puzzle you can do for a few minutes to lower stress and improve focus."}),(0,nI.jsx)("a",{href:"https://www.jigsawplanet.com",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",children:"Open Puzzle"})]})]})]})]}),"stress-monitor"===e&&(0,nI.jsx)(ooe,{}),"stress-analytics"===e&&(0,nI.jsx)(soe,{}),"studentreport"===e&&"student"===a&&(0,nI.jsx)(iI,{completedBookings:O.filter(e=>new Date(e.iso)<new Date),onReportSubmitted:()=>{W("success"),V([100,50,100])}}),"mentordash"===e&&"mentor"===a&&(0,nI.jsx)(rI,{}),(0,nI.jsxs)("div",{className:"navbar",children:[(0,nI.jsx)("div",{className:"navbar-left",children:(0,nI.jsx)("h1",{children:"SkillPulse"})}),(0,nI.jsx)("div",{className:"navbar-right",children:(0,nI.jsx)("button",{className:"btn btn-logout",onClick:()=>{K(),W("click"),V(50)},children:"Logout"})})]}),"trends"===e&&(0,nI.jsxs)("div",{className:"card",children:[(0,nI.jsxs)("div",{className:"flex justify-between items-center",style:{marginBottom:"1.5rem"},children:[(0,nI.jsxs)("h2",{className:"flex items-center gap-3",children:[(0,nI.jsx)(YT,{size:28}),"Your 7-Day Wellness Journey"]}),f.length>0&&(0,nI.jsxs)("button",{onClick:()=>{W("click"),V(50);const e="\nSkillPulse - Weekly Wellness Report\n==================================\n\nGenerated: ".concat((new Date).toLocaleDateString(),"\n\n7-Day Summary:\n").concat(f.map((e,t)=>"\nDay ".concat(t+1," (").concat(e.date,"):\n- Fatigue Score: ").concat(e.score,"/100\n- Focus: ").concat(e.focus,"/10\n- Motivation: ").concat(e.motivation,"/10\n- Stress: ").concat(e.stress,"/10\n- Study Hours: ").concat(e.studyHours,"\n- Sleep: ").concat(e.sleep,"/10\n- Breaks: ").concat(e.breaks,"\n")).join("\n"),"\n\nStatistics:\n- Healthy Days: ").concat(f.filter(e=>e.score<=30).length,"\n- Moderate Days: ").concat(f.filter(e=>e.score>30&&e.score<=60).length,"\n- High Risk Days: ").concat(f.filter(e=>e.score>60).length,"\n\nKeep tracking your wellness with SkillPulse!\n    "),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="SkillPulse-Report-".concat((new Date).toISOString().split("T")[0],".txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},className:"action-btn purple",children:[(0,nI.jsx)(ZT,{size:16}),(0,nI.jsx)("span",{children:"Export Report"})]})]}),f.length>0?(0,nI.jsxs)(nI.Fragment,{children:[(0,nI.jsx)("div",{className:"chart-container",children:(0,nI.jsx)(Ne,{width:"100%",height:"100%",children:(0,nI.jsxs)(Gv,{data:f,children:[(0,nI.jsx)("defs",{children:(0,nI.jsxs)("linearGradient",{id:"colorScore",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,nI.jsx)("stop",{offset:"5%",stopColor:l?"#a78bfa":"#9333ea",stopOpacity:.4}),(0,nI.jsx)("stop",{offset:"95%",stopColor:l?"#a78bfa":"#9333ea",stopOpacity:.05})]})}),(0,nI.jsx)(zx,{strokeDasharray:"3 3",stroke:l?"#374151":"#f0f0f0"}),(0,nI.jsx)(Jx,{dataKey:"date",stroke:"#9ca3af",style:{fontSize:"12px"}}),(0,nI.jsx)(sw,{domain:[0,100],stroke:"#9ca3af",style:{fontSize:"12px"}}),(0,nI.jsx)(iN,{contentStyle:{backgroundColor:l?"#1f2937":"#fff",border:"none",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",color:l?"#fff":"#000"}}),(0,nI.jsx)(ST,{type:"monotone",dataKey:"score",stroke:l?"#a78bfa":"#9333ea",strokeWidth:3,fill:"url(#colorScore)"})]})})}),(0,nI.jsxs)("div",{className:"trend-stats",children:[(0,nI.jsxs)("div",{className:"trend-stat healthy",children:[(0,nI.jsx)("div",{className:"number",children:f.filter(e=>e.score<=30).length}),(0,nI.jsx)("div",{className:"label",children:"Healthy Days"}),(0,nI.jsx)("div",{className:"sublabel",children:"\ud83c\udf89 Great balance"})]}),(0,nI.jsxs)("div",{className:"trend-stat moderate",children:[(0,nI.jsx)("div",{className:"number",children:f.filter(e=>e.score>30&&e.score<=60).length}),(0,nI.jsx)("div",{className:"label",children:"Moderate Days"}),(0,nI.jsx)("div",{className:"sublabel",children:"\u26a0\ufe0f Watch carefully"})]}),(0,nI.jsxs)("div",{className:"trend-stat high-risk",children:[(0,nI.jsx)("div",{className:"number",children:f.filter(e=>e.score>60).length}),(0,nI.jsx)("div",{className:"label",children:"High Risk Days"}),(0,nI.jsx)("div",{className:"sublabel",children:"\ud83d\udea8 Take action"})]})]}),(0,nI.jsxs)("div",{className:"insight-box",children:[(0,nI.jsx)("div",{className:"icon",children:"\ud83d\udca1"}),(0,nI.jsxs)("div",{children:[(0,nI.jsx)("h4",{children:"AI Insight"}),(0,nI.jsx)("p",{children:f.length>=3&&f[f.length-1].score>f[0].score+15?"Your fatigue is trending upward. Consider reducing study hours or improving sleep quality to prevent burnout.":f.length>=3&&f[f.length-1].score<f[0].score-15?"Excellent progress! Your fatigue levels are decreasing. Keep up your healthy habits and balanced routine.":"Your fatigue levels are relatively stable. Continue monitoring your patterns to maintain this balance."})]})]})]}):(0,nI.jsxs)("div",{className:"empty-state",children:[(0,nI.jsx)(QT,{size:80}),(0,nI.jsx)("h3",{children:"No Data Yet"}),(0,nI.jsx)("p",{children:"Complete your first check-in to see your wellness trends!"}),(0,nI.jsxs)("button",{onClick:()=>{t("checkin"),W("click"),V(50)},className:"btn btn-primary",children:["Start Check-In",(0,nI.jsx)(DT,{size:20})]})]})]})]})]})}const coe=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:i,getTTFB:o}=t;n(e),r(e),a(e),i(e),o(e)})};O.createRoot(document.getElementById("root")).render((0,nI.jsx)(C.StrictMode,{children:(0,nI.jsx)(loe,{})})),coe()})()})();
//# sourceMappingURL=main.9288ac8e.js.map